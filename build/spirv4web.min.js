var SPIRV=function(e){"use strict";var t,r=function(){this.version=0,this.shader_model=0,this.es=!1,this.set_version=!1,this.set_shader_model=!1,this.set_es=!1,this.dump_resources=!1,this.force_temporary=!1,this.flatten_ubo=!1,this.fixup=!1,this.yflip=!1,this.sso=!1,this.support_nonzero_baseinstance=!0,this.glsl_emit_push_constant_as_ubo=!1,this.glsl_emit_ubo_as_plain_uniforms=!1,this.glsl_force_flattened_io_blocks=!1,this.glsl_ovr_multiview_view_count=0,this.glsl_ext_framebuffer_fetch=[],this.glsl_ext_framebuffer_fetch_noncoherent=!1,this.emit_line_directives=!1,this.enable_storage_image_qualifier_deduction=!0,this.force_zero_initialized_variables=!1,this.pls_in=[],this.pls_out=[],this.remaps=[],this.extensions=[],this.variable_type_remaps=[],this.interface_variable_renames=[],this.masked_stage_outputs=[],this.masked_stage_builtins=[],this.entry_point_rename=[],this.cpp=!1,this.flatten_multidimensional_arrays=!1,this.use_420pack_extension=!0,this.remove_unused=!0,this.combined_samplers_inherit_bindings=!1},a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e,t,r){if(r||2===arguments.length)for(var a,i=0,o=t.length;i<o;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}function n(e,t){for(var r=new Array(e),a=0;a<e;++a)r[a]=t(a);return r}function s(e,t){var r=e.length;if(e.length!==t.length)return!1;for(var a=0;a<r;++a)if(e[a]!==t[a])return!1;return!0}function c(e){return e.reduce((function(e){return e+1}),0)}!function(e){e[e.TypeNone=0]="TypeNone",e[e.TypeType=1]="TypeType",e[e.TypeVariable=2]="TypeVariable",e[e.TypeConstant=3]="TypeConstant",e[e.TypeFunction=4]="TypeFunction",e[e.TypeFunctionPrototype=5]="TypeFunctionPrototype",e[e.TypeBlock=6]="TypeBlock",e[e.TypeExtension=7]="TypeExtension",e[e.TypeExpression=8]="TypeExpression",e[e.TypeConstantOp=9]="TypeConstantOp",e[e.TypeCombinedImageSampler=10]="TypeCombinedImageSampler",e[e.TypeAccessChain=11]="TypeAccessChain",e[e.TypeUndef=12]="TypeUndef",e[e.TypeString=13]="TypeString",e[e.TypeCount=14]="TypeCount"}(t||(t={}));var l=function(){function e(e){this.holder=null,this.type=t.TypeNone,this.allow_type_rewrite=!1,this.group=e}return e.prototype.set=function(e,r){if(this.holder&&this.group.pools[this.type].deallocate_opaque(this.holder),this.holder=null,!this.allow_type_rewrite&&this.type!==t.TypeNone&&this.type!==r)throw e&&this.group.pools[r].deallocate_opaque(e),new Error("Overwriting a variant with new type.");this.holder=e,this.type=r,this.allow_type_rewrite=!1},e.prototype.allocate_and_set=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=this.group.pools[e],i=a.allocate.apply(a,t);return this.set(i,e),i},e.prototype.get=function(e){if(!this.holder)throw new Error("nullptr");if(e.type!==this.type)throw new Error("Bad cast");return this.holder},e.prototype.get_type=function(){return this.type},e.prototype.get_id=function(){return this.holder?this.holder.self:0},e.prototype.empty=function(){return!this.holder},e.prototype.reset=function(){this.holder&&this.group.pools[this.type].deallocate_opaque(this.holder),this.holder=null,this.type=t.TypeNone},e.prototype.set_allow_type_rewrite=function(){this.allow_type_rewrite=!0},e}();function p(e,t){return t.get(e)}function u(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return t.allocate_and_set.apply(t,o([e.type],r,!1))}var _=function(){this.pools=new Array(t.TypeCount)};function f(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=d(e[r]))}function m(e,t){var r=new e;return f(t,r),r}function d(e){if(Array.isArray(e))return e.map((function(e){return d(e)}));var t=typeof e;if("object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Set){var r=new Set;return e.forEach((function(e){return r.add(e)})),r}if(e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof BigInt64Array||e instanceof BigUint64Array||e instanceof Float32Array||e instanceof Float64Array)return e.slice();throw new Error("The object ".concat(e," does not have a clone function."))}return"function"!==t?e:void 0}var h,g,y,b,S,I,v,O,C,E,x,k,L,M,R,T,D,A,B,w,N,P,G,F,U,V,z,H,K,q,X,W,Q,j,Z,Y,J,$,ee,te,re,ae,ie,oe,ne,se,ce,le=function(){function e(e){void 0===e&&(e=0),this.higher=new Set,this.lower=e}return e.prototype.get=function(e){return e<32?0!=(this.lower&1<<e):this.higher.has(e)},e.prototype.set=function(e){e<32?this.lower|=1<<e:this.higher.add(e)},e.prototype.clear=function(e){e<32?this.lower&=~(1<<e):this.higher.delete(e)},e.prototype.get_lower=function(){return this.lower},e.prototype.reset=function(){this.lower=0,this.higher.clear()},e.prototype.merge_and=function(e){this.lower&=e.lower;var t=new Set;this.higher.forEach((function(r){e.higher.has(r)&&t.add(r)})),this.higher=t},e.prototype.merge_or=function(e){var t=this;this.lower|=e.lower,e.higher.forEach((function(e){return t.higher.add(e)}))},e.prototype.equals=function(e){if(this.lower!==e.lower)return!1;if(this.higher.size!==e.higher.size)return!1;for(var t=this.higher.values(),r=null;r=t.next().value;)if(!e.higher.has(r))return!1;return!0},e.prototype.for_each_bit=function(e){for(var t=0;t<32;t++)this.lower&1<<t&&e(t);if(0!==this.higher.size){var r=Array.from(this.higher);r.sort(),r.forEach(e)}},e.prototype.empty=function(){return 0===this.lower&&0===this.higher.size},e.prototype.clone=function(){return m(e,this)},e}(),pe=119734787;!function(e){e[e.SourceLanguageUnknown=0]="SourceLanguageUnknown",e[e.SourceLanguageESSL=1]="SourceLanguageESSL",e[e.SourceLanguageGLSL=2]="SourceLanguageGLSL",e[e.SourceLanguageOpenCL_C=3]="SourceLanguageOpenCL_C",e[e.SourceLanguageOpenCL_CPP=4]="SourceLanguageOpenCL_CPP",e[e.SourceLanguageHLSL=5]="SourceLanguageHLSL",e[e.SourceLanguageMax=2147483647]="SourceLanguageMax"}(h||(h={})),function(e){e[e.ExecutionModelVertex=0]="ExecutionModelVertex",e[e.ExecutionModelTessellationControl=1]="ExecutionModelTessellationControl",e[e.ExecutionModelTessellationEvaluation=2]="ExecutionModelTessellationEvaluation",e[e.ExecutionModelGeometry=3]="ExecutionModelGeometry",e[e.ExecutionModelFragment=4]="ExecutionModelFragment",e[e.ExecutionModelGLCompute=5]="ExecutionModelGLCompute",e[e.ExecutionModelKernel=6]="ExecutionModelKernel",e[e.ExecutionModelTaskNV=5267]="ExecutionModelTaskNV",e[e.ExecutionModelMeshNV=5268]="ExecutionModelMeshNV",e[e.ExecutionModelRayGenerationKHR=5313]="ExecutionModelRayGenerationKHR",e[e.ExecutionModelRayGenerationNV=5313]="ExecutionModelRayGenerationNV",e[e.ExecutionModelIntersectionKHR=5314]="ExecutionModelIntersectionKHR",e[e.ExecutionModelIntersectionNV=5314]="ExecutionModelIntersectionNV",e[e.ExecutionModelAnyHitKHR=5315]="ExecutionModelAnyHitKHR",e[e.ExecutionModelAnyHitNV=5315]="ExecutionModelAnyHitNV",e[e.ExecutionModelClosestHitKHR=5316]="ExecutionModelClosestHitKHR",e[e.ExecutionModelClosestHitNV=5316]="ExecutionModelClosestHitNV",e[e.ExecutionModelMissKHR=5317]="ExecutionModelMissKHR",e[e.ExecutionModelMissNV=5317]="ExecutionModelMissNV",e[e.ExecutionModelCallableKHR=5318]="ExecutionModelCallableKHR",e[e.ExecutionModelCallableNV=5318]="ExecutionModelCallableNV",e[e.ExecutionModelMax=2147483647]="ExecutionModelMax"}(g||(g={})),function(e){e[e.AddressingModelLogical=0]="AddressingModelLogical",e[e.AddressingModelPhysical32=1]="AddressingModelPhysical32",e[e.AddressingModelPhysical64=2]="AddressingModelPhysical64",e[e.AddressingModelPhysicalStorageBuffer64=5348]="AddressingModelPhysicalStorageBuffer64",e[e.AddressingModelPhysicalStorageBuffer64EXT=5348]="AddressingModelPhysicalStorageBuffer64EXT",e[e.AddressingModelMax=2147483647]="AddressingModelMax"}(y||(y={})),function(e){e[e.MemoryModelSimple=0]="MemoryModelSimple",e[e.MemoryModelGLSL450=1]="MemoryModelGLSL450",e[e.MemoryModelOpenCL=2]="MemoryModelOpenCL",e[e.MemoryModelVulkan=3]="MemoryModelVulkan",e[e.MemoryModelVulkanKHR=3]="MemoryModelVulkanKHR",e[e.MemoryModelMax=2147483647]="MemoryModelMax"}(b||(b={})),function(e){e[e.ExecutionModeInvocations=0]="ExecutionModeInvocations",e[e.ExecutionModeSpacingEqual=1]="ExecutionModeSpacingEqual",e[e.ExecutionModeSpacingFractionalEven=2]="ExecutionModeSpacingFractionalEven",e[e.ExecutionModeSpacingFractionalOdd=3]="ExecutionModeSpacingFractionalOdd",e[e.ExecutionModeVertexOrderCw=4]="ExecutionModeVertexOrderCw",e[e.ExecutionModeVertexOrderCcw=5]="ExecutionModeVertexOrderCcw",e[e.ExecutionModePixelCenterInteger=6]="ExecutionModePixelCenterInteger",e[e.ExecutionModeOriginUpperLeft=7]="ExecutionModeOriginUpperLeft",e[e.ExecutionModeOriginLowerLeft=8]="ExecutionModeOriginLowerLeft",e[e.ExecutionModeEarlyFragmentTests=9]="ExecutionModeEarlyFragmentTests",e[e.ExecutionModePointMode=10]="ExecutionModePointMode",e[e.ExecutionModeXfb=11]="ExecutionModeXfb",e[e.ExecutionModeDepthReplacing=12]="ExecutionModeDepthReplacing",e[e.ExecutionModeDepthGreater=14]="ExecutionModeDepthGreater",e[e.ExecutionModeDepthLess=15]="ExecutionModeDepthLess",e[e.ExecutionModeDepthUnchanged=16]="ExecutionModeDepthUnchanged",e[e.ExecutionModeLocalSize=17]="ExecutionModeLocalSize",e[e.ExecutionModeLocalSizeHint=18]="ExecutionModeLocalSizeHint",e[e.ExecutionModeInputPoints=19]="ExecutionModeInputPoints",e[e.ExecutionModeInputLines=20]="ExecutionModeInputLines",e[e.ExecutionModeInputLinesAdjacency=21]="ExecutionModeInputLinesAdjacency",e[e.ExecutionModeTriangles=22]="ExecutionModeTriangles",e[e.ExecutionModeInputTrianglesAdjacency=23]="ExecutionModeInputTrianglesAdjacency",e[e.ExecutionModeQuads=24]="ExecutionModeQuads",e[e.ExecutionModeIsolines=25]="ExecutionModeIsolines",e[e.ExecutionModeOutputVertices=26]="ExecutionModeOutputVertices",e[e.ExecutionModeOutputPoints=27]="ExecutionModeOutputPoints",e[e.ExecutionModeOutputLineStrip=28]="ExecutionModeOutputLineStrip",e[e.ExecutionModeOutputTriangleStrip=29]="ExecutionModeOutputTriangleStrip",e[e.ExecutionModeVecTypeHint=30]="ExecutionModeVecTypeHint",e[e.ExecutionModeContractionOff=31]="ExecutionModeContractionOff",e[e.ExecutionModeInitializer=33]="ExecutionModeInitializer",e[e.ExecutionModeFinalizer=34]="ExecutionModeFinalizer",e[e.ExecutionModeSubgroupSize=35]="ExecutionModeSubgroupSize",e[e.ExecutionModeSubgroupsPerWorkgroup=36]="ExecutionModeSubgroupsPerWorkgroup",e[e.ExecutionModeSubgroupsPerWorkgroupId=37]="ExecutionModeSubgroupsPerWorkgroupId",e[e.ExecutionModeLocalSizeId=38]="ExecutionModeLocalSizeId",e[e.ExecutionModeLocalSizeHintId=39]="ExecutionModeLocalSizeHintId",e[e.ExecutionModePostDepthCoverage=4446]="ExecutionModePostDepthCoverage",e[e.ExecutionModeDenormPreserve=4459]="ExecutionModeDenormPreserve",e[e.ExecutionModeDenormFlushToZero=4460]="ExecutionModeDenormFlushToZero",e[e.ExecutionModeSignedZeroInfNanPreserve=4461]="ExecutionModeSignedZeroInfNanPreserve",e[e.ExecutionModeRoundingModeRTE=4462]="ExecutionModeRoundingModeRTE",e[e.ExecutionModeRoundingModeRTZ=4463]="ExecutionModeRoundingModeRTZ",e[e.ExecutionModeStencilRefReplacingEXT=5027]="ExecutionModeStencilRefReplacingEXT",e[e.ExecutionModeOutputLinesNV=5269]="ExecutionModeOutputLinesNV",e[e.ExecutionModeOutputPrimitivesNV=5270]="ExecutionModeOutputPrimitivesNV",e[e.ExecutionModeDerivativeGroupQuadsNV=5289]="ExecutionModeDerivativeGroupQuadsNV",e[e.ExecutionModeDerivativeGroupLinearNV=5290]="ExecutionModeDerivativeGroupLinearNV",e[e.ExecutionModeOutputTrianglesNV=5298]="ExecutionModeOutputTrianglesNV",e[e.ExecutionModePixelInterlockOrderedEXT=5366]="ExecutionModePixelInterlockOrderedEXT",e[e.ExecutionModePixelInterlockUnorderedEXT=5367]="ExecutionModePixelInterlockUnorderedEXT",e[e.ExecutionModeSampleInterlockOrderedEXT=5368]="ExecutionModeSampleInterlockOrderedEXT",e[e.ExecutionModeSampleInterlockUnorderedEXT=5369]="ExecutionModeSampleInterlockUnorderedEXT",e[e.ExecutionModeShadingRateInterlockOrderedEXT=5370]="ExecutionModeShadingRateInterlockOrderedEXT",e[e.ExecutionModeShadingRateInterlockUnorderedEXT=5371]="ExecutionModeShadingRateInterlockUnorderedEXT",e[e.ExecutionModeMaxWorkgroupSizeINTEL=5893]="ExecutionModeMaxWorkgroupSizeINTEL",e[e.ExecutionModeMaxWorkDimINTEL=5894]="ExecutionModeMaxWorkDimINTEL",e[e.ExecutionModeNoGlobalOffsetINTEL=5895]="ExecutionModeNoGlobalOffsetINTEL",e[e.ExecutionModeNumSIMDWorkitemsINTEL=5896]="ExecutionModeNumSIMDWorkitemsINTEL",e[e.ExecutionModeMax=2147483647]="ExecutionModeMax"}(S||(S={})),function(e){e[e.StorageClassUniformConstant=0]="StorageClassUniformConstant",e[e.StorageClassInput=1]="StorageClassInput",e[e.StorageClassUniform=2]="StorageClassUniform",e[e.StorageClassOutput=3]="StorageClassOutput",e[e.StorageClassWorkgroup=4]="StorageClassWorkgroup",e[e.StorageClassCrossWorkgroup=5]="StorageClassCrossWorkgroup",e[e.StorageClassPrivate=6]="StorageClassPrivate",e[e.StorageClassFunction=7]="StorageClassFunction",e[e.StorageClassGeneric=8]="StorageClassGeneric",e[e.StorageClassPushConstant=9]="StorageClassPushConstant",e[e.StorageClassAtomicCounter=10]="StorageClassAtomicCounter",e[e.StorageClassImage=11]="StorageClassImage",e[e.StorageClassStorageBuffer=12]="StorageClassStorageBuffer",e[e.StorageClassCallableDataKHR=5328]="StorageClassCallableDataKHR",e[e.StorageClassCallableDataNV=5328]="StorageClassCallableDataNV",e[e.StorageClassIncomingCallableDataKHR=5329]="StorageClassIncomingCallableDataKHR",e[e.StorageClassIncomingCallableDataNV=5329]="StorageClassIncomingCallableDataNV",e[e.StorageClassRayPayloadKHR=5338]="StorageClassRayPayloadKHR",e[e.StorageClassRayPayloadNV=5338]="StorageClassRayPayloadNV",e[e.StorageClassHitAttributeKHR=5339]="StorageClassHitAttributeKHR",e[e.StorageClassHitAttributeNV=5339]="StorageClassHitAttributeNV",e[e.StorageClassIncomingRayPayloadKHR=5342]="StorageClassIncomingRayPayloadKHR",e[e.StorageClassIncomingRayPayloadNV=5342]="StorageClassIncomingRayPayloadNV",e[e.StorageClassShaderRecordBufferKHR=5343]="StorageClassShaderRecordBufferKHR",e[e.StorageClassShaderRecordBufferNV=5343]="StorageClassShaderRecordBufferNV",e[e.StorageClassPhysicalStorageBuffer=5349]="StorageClassPhysicalStorageBuffer",e[e.StorageClassPhysicalStorageBufferEXT=5349]="StorageClassPhysicalStorageBufferEXT",e[e.StorageClassCodeSectionINTEL=5605]="StorageClassCodeSectionINTEL",e[e.StorageClassMax=2147483647]="StorageClassMax"}(I||(I={})),function(e){e[e.Dim1D=0]="Dim1D",e[e.Dim2D=1]="Dim2D",e[e.Dim3D=2]="Dim3D",e[e.DimCube=3]="DimCube",e[e.DimRect=4]="DimRect",e[e.DimBuffer=5]="DimBuffer",e[e.DimSubpassData=6]="DimSubpassData",e[e.DimMax=2147483647]="DimMax"}(v||(v={})),function(e){e[e.SamplerAddressingModeNone=0]="SamplerAddressingModeNone",e[e.SamplerAddressingModeClampToEdge=1]="SamplerAddressingModeClampToEdge",e[e.SamplerAddressingModeClamp=2]="SamplerAddressingModeClamp",e[e.SamplerAddressingModeRepeat=3]="SamplerAddressingModeRepeat",e[e.SamplerAddressingModeRepeatMirrored=4]="SamplerAddressingModeRepeatMirrored",e[e.SamplerAddressingModeMax=2147483647]="SamplerAddressingModeMax"}(O||(O={})),function(e){e[e.SamplerFilterModeNearest=0]="SamplerFilterModeNearest",e[e.SamplerFilterModeLinear=1]="SamplerFilterModeLinear",e[e.SamplerFilterModeMax=2147483647]="SamplerFilterModeMax"}(C||(C={})),function(e){e[e.ImageFormatUnknown=0]="ImageFormatUnknown",e[e.ImageFormatRgba32f=1]="ImageFormatRgba32f",e[e.ImageFormatRgba16f=2]="ImageFormatRgba16f",e[e.ImageFormatR32f=3]="ImageFormatR32f",e[e.ImageFormatRgba8=4]="ImageFormatRgba8",e[e.ImageFormatRgba8Snorm=5]="ImageFormatRgba8Snorm",e[e.ImageFormatRg32f=6]="ImageFormatRg32f",e[e.ImageFormatRg16f=7]="ImageFormatRg16f",e[e.ImageFormatR11fG11fB10f=8]="ImageFormatR11fG11fB10f",e[e.ImageFormatR16f=9]="ImageFormatR16f",e[e.ImageFormatRgba16=10]="ImageFormatRgba16",e[e.ImageFormatRgb10A2=11]="ImageFormatRgb10A2",e[e.ImageFormatRg16=12]="ImageFormatRg16",e[e.ImageFormatRg8=13]="ImageFormatRg8",e[e.ImageFormatR16=14]="ImageFormatR16",e[e.ImageFormatR8=15]="ImageFormatR8",e[e.ImageFormatRgba16Snorm=16]="ImageFormatRgba16Snorm",e[e.ImageFormatRg16Snorm=17]="ImageFormatRg16Snorm",e[e.ImageFormatRg8Snorm=18]="ImageFormatRg8Snorm",e[e.ImageFormatR16Snorm=19]="ImageFormatR16Snorm",e[e.ImageFormatR8Snorm=20]="ImageFormatR8Snorm",e[e.ImageFormatRgba32i=21]="ImageFormatRgba32i",e[e.ImageFormatRgba16i=22]="ImageFormatRgba16i",e[e.ImageFormatRgba8i=23]="ImageFormatRgba8i",e[e.ImageFormatR32i=24]="ImageFormatR32i",e[e.ImageFormatRg32i=25]="ImageFormatRg32i",e[e.ImageFormatRg16i=26]="ImageFormatRg16i",e[e.ImageFormatRg8i=27]="ImageFormatRg8i",e[e.ImageFormatR16i=28]="ImageFormatR16i",e[e.ImageFormatR8i=29]="ImageFormatR8i",e[e.ImageFormatRgba32ui=30]="ImageFormatRgba32ui",e[e.ImageFormatRgba16ui=31]="ImageFormatRgba16ui",e[e.ImageFormatRgba8ui=32]="ImageFormatRgba8ui",e[e.ImageFormatR32ui=33]="ImageFormatR32ui",e[e.ImageFormatRgb10a2ui=34]="ImageFormatRgb10a2ui",e[e.ImageFormatRg32ui=35]="ImageFormatRg32ui",e[e.ImageFormatRg16ui=36]="ImageFormatRg16ui",e[e.ImageFormatRg8ui=37]="ImageFormatRg8ui",e[e.ImageFormatR16ui=38]="ImageFormatR16ui",e[e.ImageFormatR8ui=39]="ImageFormatR8ui",e[e.ImageFormatR64ui=40]="ImageFormatR64ui",e[e.ImageFormatR64i=41]="ImageFormatR64i",e[e.ImageFormatMax=2147483647]="ImageFormatMax"}(E||(E={})),function(e){e[e.ImageChannelOrderR=0]="ImageChannelOrderR",e[e.ImageChannelOrderA=1]="ImageChannelOrderA",e[e.ImageChannelOrderRG=2]="ImageChannelOrderRG",e[e.ImageChannelOrderRA=3]="ImageChannelOrderRA",e[e.ImageChannelOrderRGB=4]="ImageChannelOrderRGB",e[e.ImageChannelOrderRGBA=5]="ImageChannelOrderRGBA",e[e.ImageChannelOrderBGRA=6]="ImageChannelOrderBGRA",e[e.ImageChannelOrderARGB=7]="ImageChannelOrderARGB",e[e.ImageChannelOrderIntensity=8]="ImageChannelOrderIntensity",e[e.ImageChannelOrderLuminance=9]="ImageChannelOrderLuminance",e[e.ImageChannelOrderRx=10]="ImageChannelOrderRx",e[e.ImageChannelOrderRGx=11]="ImageChannelOrderRGx",e[e.ImageChannelOrderRGBx=12]="ImageChannelOrderRGBx",e[e.ImageChannelOrderDepth=13]="ImageChannelOrderDepth",e[e.ImageChannelOrderDepthStencil=14]="ImageChannelOrderDepthStencil",e[e.ImageChannelOrdersRGB=15]="ImageChannelOrdersRGB",e[e.ImageChannelOrdersRGBx=16]="ImageChannelOrdersRGBx",e[e.ImageChannelOrdersRGBA=17]="ImageChannelOrdersRGBA",e[e.ImageChannelOrdersBGRA=18]="ImageChannelOrdersBGRA",e[e.ImageChannelOrderABGR=19]="ImageChannelOrderABGR",e[e.ImageChannelOrderMax=2147483647]="ImageChannelOrderMax"}(x||(x={})),function(e){e[e.ImageChannelDataTypeSnormInt8=0]="ImageChannelDataTypeSnormInt8",e[e.ImageChannelDataTypeSnormInt16=1]="ImageChannelDataTypeSnormInt16",e[e.ImageChannelDataTypeUnormInt8=2]="ImageChannelDataTypeUnormInt8",e[e.ImageChannelDataTypeUnormInt16=3]="ImageChannelDataTypeUnormInt16",e[e.ImageChannelDataTypeUnormShort565=4]="ImageChannelDataTypeUnormShort565",e[e.ImageChannelDataTypeUnormShort555=5]="ImageChannelDataTypeUnormShort555",e[e.ImageChannelDataTypeUnormInt101010=6]="ImageChannelDataTypeUnormInt101010",e[e.ImageChannelDataTypeSignedInt8=7]="ImageChannelDataTypeSignedInt8",e[e.ImageChannelDataTypeSignedInt16=8]="ImageChannelDataTypeSignedInt16",e[e.ImageChannelDataTypeSignedInt32=9]="ImageChannelDataTypeSignedInt32",e[e.ImageChannelDataTypeUnsignedInt8=10]="ImageChannelDataTypeUnsignedInt8",e[e.ImageChannelDataTypeUnsignedInt16=11]="ImageChannelDataTypeUnsignedInt16",e[e.ImageChannelDataTypeUnsignedInt32=12]="ImageChannelDataTypeUnsignedInt32",e[e.ImageChannelDataTypeHalfFloat=13]="ImageChannelDataTypeHalfFloat",e[e.ImageChannelDataTypeFloat=14]="ImageChannelDataTypeFloat",e[e.ImageChannelDataTypeUnormInt24=15]="ImageChannelDataTypeUnormInt24",e[e.ImageChannelDataTypeUnormInt101010_2=16]="ImageChannelDataTypeUnormInt101010_2",e[e.ImageChannelDataTypeMax=2147483647]="ImageChannelDataTypeMax"}(k||(k={})),function(e){e[e.ImageOperandsBiasShift=0]="ImageOperandsBiasShift",e[e.ImageOperandsLodShift=1]="ImageOperandsLodShift",e[e.ImageOperandsGradShift=2]="ImageOperandsGradShift",e[e.ImageOperandsConstOffsetShift=3]="ImageOperandsConstOffsetShift",e[e.ImageOperandsOffsetShift=4]="ImageOperandsOffsetShift",e[e.ImageOperandsConstOffsetsShift=5]="ImageOperandsConstOffsetsShift",e[e.ImageOperandsSampleShift=6]="ImageOperandsSampleShift",e[e.ImageOperandsMinLodShift=7]="ImageOperandsMinLodShift",e[e.ImageOperandsMakeTexelAvailableShift=8]="ImageOperandsMakeTexelAvailableShift",e[e.ImageOperandsMakeTexelAvailableKHRShift=8]="ImageOperandsMakeTexelAvailableKHRShift",e[e.ImageOperandsMakeTexelVisibleShift=9]="ImageOperandsMakeTexelVisibleShift",e[e.ImageOperandsMakeTexelVisibleKHRShift=9]="ImageOperandsMakeTexelVisibleKHRShift",e[e.ImageOperandsNonPrivateTexelShift=10]="ImageOperandsNonPrivateTexelShift",e[e.ImageOperandsNonPrivateTexelKHRShift=10]="ImageOperandsNonPrivateTexelKHRShift",e[e.ImageOperandsVolatileTexelShift=11]="ImageOperandsVolatileTexelShift",e[e.ImageOperandsVolatileTexelKHRShift=11]="ImageOperandsVolatileTexelKHRShift",e[e.ImageOperandsSignExtendShift=12]="ImageOperandsSignExtendShift",e[e.ImageOperandsZeroExtendShift=13]="ImageOperandsZeroExtendShift",e[e.ImageOperandsMax=2147483647]="ImageOperandsMax"}(L||(L={})),function(e){e[e.ImageOperandsMaskNone=0]="ImageOperandsMaskNone",e[e.ImageOperandsBiasMask=1]="ImageOperandsBiasMask",e[e.ImageOperandsLodMask=2]="ImageOperandsLodMask",e[e.ImageOperandsGradMask=4]="ImageOperandsGradMask",e[e.ImageOperandsConstOffsetMask=8]="ImageOperandsConstOffsetMask",e[e.ImageOperandsOffsetMask=16]="ImageOperandsOffsetMask",e[e.ImageOperandsConstOffsetsMask=32]="ImageOperandsConstOffsetsMask",e[e.ImageOperandsSampleMask=64]="ImageOperandsSampleMask",e[e.ImageOperandsMinLodMask=128]="ImageOperandsMinLodMask",e[e.ImageOperandsMakeTexelAvailableMask=256]="ImageOperandsMakeTexelAvailableMask",e[e.ImageOperandsMakeTexelAvailableKHRMask=256]="ImageOperandsMakeTexelAvailableKHRMask",e[e.ImageOperandsMakeTexelVisibleMask=512]="ImageOperandsMakeTexelVisibleMask",e[e.ImageOperandsMakeTexelVisibleKHRMask=512]="ImageOperandsMakeTexelVisibleKHRMask",e[e.ImageOperandsNonPrivateTexelMask=1024]="ImageOperandsNonPrivateTexelMask",e[e.ImageOperandsNonPrivateTexelKHRMask=1024]="ImageOperandsNonPrivateTexelKHRMask",e[e.ImageOperandsVolatileTexelMask=2048]="ImageOperandsVolatileTexelMask",e[e.ImageOperandsVolatileTexelKHRMask=2048]="ImageOperandsVolatileTexelKHRMask",e[e.ImageOperandsSignExtendMask=4096]="ImageOperandsSignExtendMask",e[e.ImageOperandsZeroExtendMask=8192]="ImageOperandsZeroExtendMask"}(M||(M={})),function(e){e[e.FPFastMathModeNotNaNShift=0]="FPFastMathModeNotNaNShift",e[e.FPFastMathModeNotInfShift=1]="FPFastMathModeNotInfShift",e[e.FPFastMathModeNSZShift=2]="FPFastMathModeNSZShift",e[e.FPFastMathModeAllowRecipShift=3]="FPFastMathModeAllowRecipShift",e[e.FPFastMathModeFastShift=4]="FPFastMathModeFastShift",e[e.FPFastMathModeMax=2147483647]="FPFastMathModeMax"}(R||(R={})),function(e){e[e.FPFastMathModeMaskNone=0]="FPFastMathModeMaskNone",e[e.FPFastMathModeNotNaNMask=1]="FPFastMathModeNotNaNMask",e[e.FPFastMathModeNotInfMask=2]="FPFastMathModeNotInfMask",e[e.FPFastMathModeNSZMask=4]="FPFastMathModeNSZMask",e[e.FPFastMathModeAllowRecipMask=8]="FPFastMathModeAllowRecipMask",e[e.FPFastMathModeFastMask=16]="FPFastMathModeFastMask"}(T||(T={})),function(e){e[e.FPRoundingModeRTE=0]="FPRoundingModeRTE",e[e.FPRoundingModeRTZ=1]="FPRoundingModeRTZ",e[e.FPRoundingModeRTP=2]="FPRoundingModeRTP",e[e.FPRoundingModeRTN=3]="FPRoundingModeRTN",e[e.FPRoundingModeMax=2147483647]="FPRoundingModeMax"}(D||(D={})),function(e){e[e.LinkageTypeExport=0]="LinkageTypeExport",e[e.LinkageTypeImport=1]="LinkageTypeImport",e[e.LinkageTypeMax=2147483647]="LinkageTypeMax"}(A||(A={})),function(e){e[e.AccessQualifierReadOnly=0]="AccessQualifierReadOnly",e[e.AccessQualifierWriteOnly=1]="AccessQualifierWriteOnly",e[e.AccessQualifierReadWrite=2]="AccessQualifierReadWrite",e[e.AccessQualifierMax=2147483647]="AccessQualifierMax"}(B||(B={})),function(e){e[e.FunctionParameterAttributeZext=0]="FunctionParameterAttributeZext",e[e.FunctionParameterAttributeSext=1]="FunctionParameterAttributeSext",e[e.FunctionParameterAttributeByVal=2]="FunctionParameterAttributeByVal",e[e.FunctionParameterAttributeSret=3]="FunctionParameterAttributeSret",e[e.FunctionParameterAttributeNoAlias=4]="FunctionParameterAttributeNoAlias",e[e.FunctionParameterAttributeNoCapture=5]="FunctionParameterAttributeNoCapture",e[e.FunctionParameterAttributeNoWrite=6]="FunctionParameterAttributeNoWrite",e[e.FunctionParameterAttributeNoReadWrite=7]="FunctionParameterAttributeNoReadWrite",e[e.FunctionParameterAttributeMax=2147483647]="FunctionParameterAttributeMax"}(w||(w={})),function(e){e[e.DecorationRelaxedPrecision=0]="DecorationRelaxedPrecision",e[e.DecorationSpecId=1]="DecorationSpecId",e[e.DecorationBlock=2]="DecorationBlock",e[e.DecorationBufferBlock=3]="DecorationBufferBlock",e[e.DecorationRowMajor=4]="DecorationRowMajor",e[e.DecorationColMajor=5]="DecorationColMajor",e[e.DecorationArrayStride=6]="DecorationArrayStride",e[e.DecorationMatrixStride=7]="DecorationMatrixStride",e[e.DecorationGLSLShared=8]="DecorationGLSLShared",e[e.DecorationGLSLPacked=9]="DecorationGLSLPacked",e[e.DecorationCPacked=10]="DecorationCPacked",e[e.DecorationBuiltIn=11]="DecorationBuiltIn",e[e.DecorationNoPerspective=13]="DecorationNoPerspective",e[e.DecorationFlat=14]="DecorationFlat",e[e.DecorationPatch=15]="DecorationPatch",e[e.DecorationCentroid=16]="DecorationCentroid",e[e.DecorationSample=17]="DecorationSample",e[e.DecorationInvariant=18]="DecorationInvariant",e[e.DecorationRestrict=19]="DecorationRestrict",e[e.DecorationAliased=20]="DecorationAliased",e[e.DecorationVolatile=21]="DecorationVolatile",e[e.DecorationConstant=22]="DecorationConstant",e[e.DecorationCoherent=23]="DecorationCoherent",e[e.DecorationNonWritable=24]="DecorationNonWritable",e[e.DecorationNonReadable=25]="DecorationNonReadable",e[e.DecorationUniform=26]="DecorationUniform",e[e.DecorationUniformId=27]="DecorationUniformId",e[e.DecorationSaturatedConversion=28]="DecorationSaturatedConversion",e[e.DecorationStream=29]="DecorationStream",e[e.DecorationLocation=30]="DecorationLocation",e[e.DecorationComponent=31]="DecorationComponent",e[e.DecorationIndex=32]="DecorationIndex",e[e.DecorationBinding=33]="DecorationBinding",e[e.DecorationDescriptorSet=34]="DecorationDescriptorSet",e[e.DecorationOffset=35]="DecorationOffset",e[e.DecorationXfbBuffer=36]="DecorationXfbBuffer",e[e.DecorationXfbStride=37]="DecorationXfbStride",e[e.DecorationFuncParamAttr=38]="DecorationFuncParamAttr",e[e.DecorationFPRoundingMode=39]="DecorationFPRoundingMode",e[e.DecorationFPFastMathMode=40]="DecorationFPFastMathMode",e[e.DecorationLinkageAttributes=41]="DecorationLinkageAttributes",e[e.DecorationNoContraction=42]="DecorationNoContraction",e[e.DecorationInputAttachmentIndex=43]="DecorationInputAttachmentIndex",e[e.DecorationAlignment=44]="DecorationAlignment",e[e.DecorationMaxByteOffset=45]="DecorationMaxByteOffset",e[e.DecorationAlignmentId=46]="DecorationAlignmentId",e[e.DecorationMaxByteOffsetId=47]="DecorationMaxByteOffsetId",e[e.DecorationNoSignedWrap=4469]="DecorationNoSignedWrap",e[e.DecorationNoUnsignedWrap=4470]="DecorationNoUnsignedWrap",e[e.DecorationExplicitInterpAMD=4999]="DecorationExplicitInterpAMD",e[e.DecorationOverrideCoverageNV=5248]="DecorationOverrideCoverageNV",e[e.DecorationPassthroughNV=5250]="DecorationPassthroughNV",e[e.DecorationViewportRelativeNV=5252]="DecorationViewportRelativeNV",e[e.DecorationSecondaryViewportRelativeNV=5256]="DecorationSecondaryViewportRelativeNV",e[e.DecorationPerPrimitiveNV=5271]="DecorationPerPrimitiveNV",e[e.DecorationPerViewNV=5272]="DecorationPerViewNV",e[e.DecorationPerTaskNV=5273]="DecorationPerTaskNV",e[e.DecorationPerVertexNV=5285]="DecorationPerVertexNV",e[e.DecorationNonUniform=5300]="DecorationNonUniform",e[e.DecorationNonUniformEXT=5300]="DecorationNonUniformEXT",e[e.DecorationRestrictPointer=5355]="DecorationRestrictPointer",e[e.DecorationRestrictPointerEXT=5355]="DecorationRestrictPointerEXT",e[e.DecorationAliasedPointer=5356]="DecorationAliasedPointer",e[e.DecorationAliasedPointerEXT=5356]="DecorationAliasedPointerEXT",e[e.DecorationReferencedIndirectlyINTEL=5602]="DecorationReferencedIndirectlyINTEL",e[e.DecorationCounterBuffer=5634]="DecorationCounterBuffer",e[e.DecorationHlslCounterBufferGOOGLE=5634]="DecorationHlslCounterBufferGOOGLE",e[e.DecorationHlslSemanticGOOGLE=5635]="DecorationHlslSemanticGOOGLE",e[e.DecorationUserSemantic=5635]="DecorationUserSemantic",e[e.DecorationUserTypeGOOGLE=5636]="DecorationUserTypeGOOGLE",e[e.DecorationRegisterINTEL=5825]="DecorationRegisterINTEL",e[e.DecorationMemoryINTEL=5826]="DecorationMemoryINTEL",e[e.DecorationNumbanksINTEL=5827]="DecorationNumbanksINTEL",e[e.DecorationBankwidthINTEL=5828]="DecorationBankwidthINTEL",e[e.DecorationMaxPrivateCopiesINTEL=5829]="DecorationMaxPrivateCopiesINTEL",e[e.DecorationSinglepumpINTEL=5830]="DecorationSinglepumpINTEL",e[e.DecorationDoublepumpINTEL=5831]="DecorationDoublepumpINTEL",e[e.DecorationMaxReplicatesINTEL=5832]="DecorationMaxReplicatesINTEL",e[e.DecorationSimpleDualPortINTEL=5833]="DecorationSimpleDualPortINTEL",e[e.DecorationMergeINTEL=5834]="DecorationMergeINTEL",e[e.DecorationBankBitsINTEL=5835]="DecorationBankBitsINTEL",e[e.DecorationForcePow2DepthINTEL=5836]="DecorationForcePow2DepthINTEL",e[e.DecorationMax=2147483647]="DecorationMax"}(N||(N={})),function(e){e[e.BuiltInPosition=0]="BuiltInPosition",e[e.BuiltInPointSize=1]="BuiltInPointSize",e[e.BuiltInClipDistance=3]="BuiltInClipDistance",e[e.BuiltInCullDistance=4]="BuiltInCullDistance",e[e.BuiltInVertexId=5]="BuiltInVertexId",e[e.BuiltInInstanceId=6]="BuiltInInstanceId",e[e.BuiltInPrimitiveId=7]="BuiltInPrimitiveId",e[e.BuiltInInvocationId=8]="BuiltInInvocationId",e[e.BuiltInLayer=9]="BuiltInLayer",e[e.BuiltInViewportIndex=10]="BuiltInViewportIndex",e[e.BuiltInTessLevelOuter=11]="BuiltInTessLevelOuter",e[e.BuiltInTessLevelInner=12]="BuiltInTessLevelInner",e[e.BuiltInTessCoord=13]="BuiltInTessCoord",e[e.BuiltInPatchVertices=14]="BuiltInPatchVertices",e[e.BuiltInFragCoord=15]="BuiltInFragCoord",e[e.BuiltInPointCoord=16]="BuiltInPointCoord",e[e.BuiltInFrontFacing=17]="BuiltInFrontFacing",e[e.BuiltInSampleId=18]="BuiltInSampleId",e[e.BuiltInSamplePosition=19]="BuiltInSamplePosition",e[e.BuiltInSampleMask=20]="BuiltInSampleMask",e[e.BuiltInFragDepth=22]="BuiltInFragDepth",e[e.BuiltInHelperInvocation=23]="BuiltInHelperInvocation",e[e.BuiltInNumWorkgroups=24]="BuiltInNumWorkgroups",e[e.BuiltInWorkgroupSize=25]="BuiltInWorkgroupSize",e[e.BuiltInWorkgroupId=26]="BuiltInWorkgroupId",e[e.BuiltInLocalInvocationId=27]="BuiltInLocalInvocationId",e[e.BuiltInGlobalInvocationId=28]="BuiltInGlobalInvocationId",e[e.BuiltInLocalInvocationIndex=29]="BuiltInLocalInvocationIndex",e[e.BuiltInWorkDim=30]="BuiltInWorkDim",e[e.BuiltInGlobalSize=31]="BuiltInGlobalSize",e[e.BuiltInEnqueuedWorkgroupSize=32]="BuiltInEnqueuedWorkgroupSize",e[e.BuiltInGlobalOffset=33]="BuiltInGlobalOffset",e[e.BuiltInGlobalLinearId=34]="BuiltInGlobalLinearId",e[e.BuiltInSubgroupSize=36]="BuiltInSubgroupSize",e[e.BuiltInSubgroupMaxSize=37]="BuiltInSubgroupMaxSize",e[e.BuiltInNumSubgroups=38]="BuiltInNumSubgroups",e[e.BuiltInNumEnqueuedSubgroups=39]="BuiltInNumEnqueuedSubgroups",e[e.BuiltInSubgroupId=40]="BuiltInSubgroupId",e[e.BuiltInSubgroupLocalInvocationId=41]="BuiltInSubgroupLocalInvocationId",e[e.BuiltInVertexIndex=42]="BuiltInVertexIndex",e[e.BuiltInInstanceIndex=43]="BuiltInInstanceIndex",e[e.BuiltInSubgroupEqMask=4416]="BuiltInSubgroupEqMask",e[e.BuiltInSubgroupEqMaskKHR=4416]="BuiltInSubgroupEqMaskKHR",e[e.BuiltInSubgroupGeMask=4417]="BuiltInSubgroupGeMask",e[e.BuiltInSubgroupGeMaskKHR=4417]="BuiltInSubgroupGeMaskKHR",e[e.BuiltInSubgroupGtMask=4418]="BuiltInSubgroupGtMask",e[e.BuiltInSubgroupGtMaskKHR=4418]="BuiltInSubgroupGtMaskKHR",e[e.BuiltInSubgroupLeMask=4419]="BuiltInSubgroupLeMask",e[e.BuiltInSubgroupLeMaskKHR=4419]="BuiltInSubgroupLeMaskKHR",e[e.BuiltInSubgroupLtMask=4420]="BuiltInSubgroupLtMask",e[e.BuiltInSubgroupLtMaskKHR=4420]="BuiltInSubgroupLtMaskKHR",e[e.BuiltInBaseVertex=4424]="BuiltInBaseVertex",e[e.BuiltInBaseInstance=4425]="BuiltInBaseInstance",e[e.BuiltInDrawIndex=4426]="BuiltInDrawIndex",e[e.BuiltInPrimitiveShadingRateKHR=4432]="BuiltInPrimitiveShadingRateKHR",e[e.BuiltInDeviceIndex=4438]="BuiltInDeviceIndex",e[e.BuiltInViewIndex=4440]="BuiltInViewIndex",e[e.BuiltInShadingRateKHR=4444]="BuiltInShadingRateKHR",e[e.BuiltInBaryCoordNoPerspAMD=4992]="BuiltInBaryCoordNoPerspAMD",e[e.BuiltInBaryCoordNoPerspCentroidAMD=4993]="BuiltInBaryCoordNoPerspCentroidAMD",e[e.BuiltInBaryCoordNoPerspSampleAMD=4994]="BuiltInBaryCoordNoPerspSampleAMD",e[e.BuiltInBaryCoordSmoothAMD=4995]="BuiltInBaryCoordSmoothAMD",e[e.BuiltInBaryCoordSmoothCentroidAMD=4996]="BuiltInBaryCoordSmoothCentroidAMD",e[e.BuiltInBaryCoordSmoothSampleAMD=4997]="BuiltInBaryCoordSmoothSampleAMD",e[e.BuiltInBaryCoordPullModelAMD=4998]="BuiltInBaryCoordPullModelAMD",e[e.BuiltInFragStencilRefEXT=5014]="BuiltInFragStencilRefEXT",e[e.BuiltInViewportMaskNV=5253]="BuiltInViewportMaskNV",e[e.BuiltInSecondaryPositionNV=5257]="BuiltInSecondaryPositionNV",e[e.BuiltInSecondaryViewportMaskNV=5258]="BuiltInSecondaryViewportMaskNV",e[e.BuiltInPositionPerViewNV=5261]="BuiltInPositionPerViewNV",e[e.BuiltInViewportMaskPerViewNV=5262]="BuiltInViewportMaskPerViewNV",e[e.BuiltInFullyCoveredEXT=5264]="BuiltInFullyCoveredEXT",e[e.BuiltInTaskCountNV=5274]="BuiltInTaskCountNV",e[e.BuiltInPrimitiveCountNV=5275]="BuiltInPrimitiveCountNV",e[e.BuiltInPrimitiveIndicesNV=5276]="BuiltInPrimitiveIndicesNV",e[e.BuiltInClipDistancePerViewNV=5277]="BuiltInClipDistancePerViewNV",e[e.BuiltInCullDistancePerViewNV=5278]="BuiltInCullDistancePerViewNV",e[e.BuiltInLayerPerViewNV=5279]="BuiltInLayerPerViewNV",e[e.BuiltInMeshViewCountNV=5280]="BuiltInMeshViewCountNV",e[e.BuiltInMeshViewIndicesNV=5281]="BuiltInMeshViewIndicesNV",e[e.BuiltInBaryCoordNV=5286]="BuiltInBaryCoordNV",e[e.BuiltInBaryCoordNoPerspNV=5287]="BuiltInBaryCoordNoPerspNV",e[e.BuiltInFragSizeEXT=5292]="BuiltInFragSizeEXT",e[e.BuiltInFragmentSizeNV=5292]="BuiltInFragmentSizeNV",e[e.BuiltInFragInvocationCountEXT=5293]="BuiltInFragInvocationCountEXT",e[e.BuiltInInvocationsPerPixelNV=5293]="BuiltInInvocationsPerPixelNV",e[e.BuiltInLaunchIdKHR=5319]="BuiltInLaunchIdKHR",e[e.BuiltInLaunchIdNV=5319]="BuiltInLaunchIdNV",e[e.BuiltInLaunchSizeKHR=5320]="BuiltInLaunchSizeKHR",e[e.BuiltInLaunchSizeNV=5320]="BuiltInLaunchSizeNV",e[e.BuiltInWorldRayOriginKHR=5321]="BuiltInWorldRayOriginKHR",e[e.BuiltInWorldRayOriginNV=5321]="BuiltInWorldRayOriginNV",e[e.BuiltInWorldRayDirectionKHR=5322]="BuiltInWorldRayDirectionKHR",e[e.BuiltInWorldRayDirectionNV=5322]="BuiltInWorldRayDirectionNV",e[e.BuiltInObjectRayOriginKHR=5323]="BuiltInObjectRayOriginKHR",e[e.BuiltInObjectRayOriginNV=5323]="BuiltInObjectRayOriginNV",e[e.BuiltInObjectRayDirectionKHR=5324]="BuiltInObjectRayDirectionKHR",e[e.BuiltInObjectRayDirectionNV=5324]="BuiltInObjectRayDirectionNV",e[e.BuiltInRayTminKHR=5325]="BuiltInRayTminKHR",e[e.BuiltInRayTminNV=5325]="BuiltInRayTminNV",e[e.BuiltInRayTmaxKHR=5326]="BuiltInRayTmaxKHR",e[e.BuiltInRayTmaxNV=5326]="BuiltInRayTmaxNV",e[e.BuiltInInstanceCustomIndexKHR=5327]="BuiltInInstanceCustomIndexKHR",e[e.BuiltInInstanceCustomIndexNV=5327]="BuiltInInstanceCustomIndexNV",e[e.BuiltInObjectToWorldKHR=5330]="BuiltInObjectToWorldKHR",e[e.BuiltInObjectToWorldNV=5330]="BuiltInObjectToWorldNV",e[e.BuiltInWorldToObjectKHR=5331]="BuiltInWorldToObjectKHR",e[e.BuiltInWorldToObjectNV=5331]="BuiltInWorldToObjectNV",e[e.BuiltInHitTNV=5332]="BuiltInHitTNV",e[e.BuiltInHitKindKHR=5333]="BuiltInHitKindKHR",e[e.BuiltInHitKindNV=5333]="BuiltInHitKindNV",e[e.BuiltInIncomingRayFlagsKHR=5351]="BuiltInIncomingRayFlagsKHR",e[e.BuiltInIncomingRayFlagsNV=5351]="BuiltInIncomingRayFlagsNV",e[e.BuiltInRayGeometryIndexKHR=5352]="BuiltInRayGeometryIndexKHR",e[e.BuiltInWarpsPerSMNV=5374]="BuiltInWarpsPerSMNV",e[e.BuiltInSMCountNV=5375]="BuiltInSMCountNV",e[e.BuiltInWarpIDNV=5376]="BuiltInWarpIDNV",e[e.BuiltInSMIDNV=5377]="BuiltInSMIDNV",e[e.BuiltInMax=2147483647]="BuiltInMax"}(P||(P={})),function(e){e[e.SelectionControlFlattenShift=0]="SelectionControlFlattenShift",e[e.SelectionControlDontFlattenShift=1]="SelectionControlDontFlattenShift",e[e.SelectionControlMax=2147483647]="SelectionControlMax"}(G||(G={})),function(e){e[e.SelectionControlMaskNone=0]="SelectionControlMaskNone",e[e.SelectionControlFlattenMask=1]="SelectionControlFlattenMask",e[e.SelectionControlDontFlattenMask=2]="SelectionControlDontFlattenMask"}(F||(F={})),function(e){e[e.LoopControlUnrollShift=0]="LoopControlUnrollShift",e[e.LoopControlDontUnrollShift=1]="LoopControlDontUnrollShift",e[e.LoopControlDependencyInfiniteShift=2]="LoopControlDependencyInfiniteShift",e[e.LoopControlDependencyLengthShift=3]="LoopControlDependencyLengthShift",e[e.LoopControlMinIterationsShift=4]="LoopControlMinIterationsShift",e[e.LoopControlMaxIterationsShift=5]="LoopControlMaxIterationsShift",e[e.LoopControlIterationMultipleShift=6]="LoopControlIterationMultipleShift",e[e.LoopControlPeelCountShift=7]="LoopControlPeelCountShift",e[e.LoopControlPartialCountShift=8]="LoopControlPartialCountShift",e[e.LoopControlInitiationIntervalINTELShift=16]="LoopControlInitiationIntervalINTELShift",e[e.LoopControlMaxConcurrencyINTELShift=17]="LoopControlMaxConcurrencyINTELShift",e[e.LoopControlDependencyArrayINTELShift=18]="LoopControlDependencyArrayINTELShift",e[e.LoopControlPipelineEnableINTELShift=19]="LoopControlPipelineEnableINTELShift",e[e.LoopControlLoopCoalesceINTELShift=20]="LoopControlLoopCoalesceINTELShift",e[e.LoopControlMaxInterleavingINTELShift=21]="LoopControlMaxInterleavingINTELShift",e[e.LoopControlSpeculatedIterationsINTELShift=22]="LoopControlSpeculatedIterationsINTELShift",e[e.LoopControlMax=2147483647]="LoopControlMax"}(U||(U={})),function(e){e[e.LoopControlMaskNone=0]="LoopControlMaskNone",e[e.LoopControlUnrollMask=1]="LoopControlUnrollMask",e[e.LoopControlDontUnrollMask=2]="LoopControlDontUnrollMask",e[e.LoopControlDependencyInfiniteMask=4]="LoopControlDependencyInfiniteMask",e[e.LoopControlDependencyLengthMask=8]="LoopControlDependencyLengthMask",e[e.LoopControlMinIterationsMask=16]="LoopControlMinIterationsMask",e[e.LoopControlMaxIterationsMask=32]="LoopControlMaxIterationsMask",e[e.LoopControlIterationMultipleMask=64]="LoopControlIterationMultipleMask",e[e.LoopControlPeelCountMask=128]="LoopControlPeelCountMask",e[e.LoopControlPartialCountMask=256]="LoopControlPartialCountMask",e[e.LoopControlInitiationIntervalINTELMask=65536]="LoopControlInitiationIntervalINTELMask",e[e.LoopControlMaxConcurrencyINTELMask=131072]="LoopControlMaxConcurrencyINTELMask",e[e.LoopControlDependencyArrayINTELMask=262144]="LoopControlDependencyArrayINTELMask",e[e.LoopControlPipelineEnableINTELMask=524288]="LoopControlPipelineEnableINTELMask",e[e.LoopControlLoopCoalesceINTELMask=1048576]="LoopControlLoopCoalesceINTELMask",e[e.LoopControlMaxInterleavingINTELMask=2097152]="LoopControlMaxInterleavingINTELMask",e[e.LoopControlSpeculatedIterationsINTELMask=4194304]="LoopControlSpeculatedIterationsINTELMask"}(V||(V={})),function(e){e[e.FunctionControlInlineShift=0]="FunctionControlInlineShift",e[e.FunctionControlDontInlineShift=1]="FunctionControlDontInlineShift",e[e.FunctionControlPureShift=2]="FunctionControlPureShift",e[e.FunctionControlConstShift=3]="FunctionControlConstShift",e[e.FunctionControlMax=2147483647]="FunctionControlMax"}(z||(z={})),function(e){e[e.FunctionControlMaskNone=0]="FunctionControlMaskNone",e[e.FunctionControlInlineMask=1]="FunctionControlInlineMask",e[e.FunctionControlDontInlineMask=2]="FunctionControlDontInlineMask",e[e.FunctionControlPureMask=4]="FunctionControlPureMask",e[e.FunctionControlConstMask=8]="FunctionControlConstMask"}(H||(H={})),function(e){e[e.MemorySemanticsAcquireShift=1]="MemorySemanticsAcquireShift",e[e.MemorySemanticsReleaseShift=2]="MemorySemanticsReleaseShift",e[e.MemorySemanticsAcquireReleaseShift=3]="MemorySemanticsAcquireReleaseShift",e[e.MemorySemanticsSequentiallyConsistentShift=4]="MemorySemanticsSequentiallyConsistentShift",e[e.MemorySemanticsUniformMemoryShift=6]="MemorySemanticsUniformMemoryShift",e[e.MemorySemanticsSubgroupMemoryShift=7]="MemorySemanticsSubgroupMemoryShift",e[e.MemorySemanticsWorkgroupMemoryShift=8]="MemorySemanticsWorkgroupMemoryShift",e[e.MemorySemanticsCrossWorkgroupMemoryShift=9]="MemorySemanticsCrossWorkgroupMemoryShift",e[e.MemorySemanticsAtomicCounterMemoryShift=10]="MemorySemanticsAtomicCounterMemoryShift",e[e.MemorySemanticsImageMemoryShift=11]="MemorySemanticsImageMemoryShift",e[e.MemorySemanticsOutputMemoryShift=12]="MemorySemanticsOutputMemoryShift",e[e.MemorySemanticsOutputMemoryKHRShift=12]="MemorySemanticsOutputMemoryKHRShift",e[e.MemorySemanticsMakeAvailableShift=13]="MemorySemanticsMakeAvailableShift",e[e.MemorySemanticsMakeAvailableKHRShift=13]="MemorySemanticsMakeAvailableKHRShift",e[e.MemorySemanticsMakeVisibleShift=14]="MemorySemanticsMakeVisibleShift",e[e.MemorySemanticsMakeVisibleKHRShift=14]="MemorySemanticsMakeVisibleKHRShift",e[e.MemorySemanticsVolatileShift=15]="MemorySemanticsVolatileShift",e[e.MemorySemanticsMax=2147483647]="MemorySemanticsMax"}(K||(K={})),function(e){e[e.MemorySemanticsMaskNone=0]="MemorySemanticsMaskNone",e[e.MemorySemanticsAcquireMask=2]="MemorySemanticsAcquireMask",e[e.MemorySemanticsReleaseMask=4]="MemorySemanticsReleaseMask",e[e.MemorySemanticsAcquireReleaseMask=8]="MemorySemanticsAcquireReleaseMask",e[e.MemorySemanticsSequentiallyConsistentMask=16]="MemorySemanticsSequentiallyConsistentMask",e[e.MemorySemanticsUniformMemoryMask=64]="MemorySemanticsUniformMemoryMask",e[e.MemorySemanticsSubgroupMemoryMask=128]="MemorySemanticsSubgroupMemoryMask",e[e.MemorySemanticsWorkgroupMemoryMask=256]="MemorySemanticsWorkgroupMemoryMask",e[e.MemorySemanticsCrossWorkgroupMemoryMask=512]="MemorySemanticsCrossWorkgroupMemoryMask",e[e.MemorySemanticsAtomicCounterMemoryMask=1024]="MemorySemanticsAtomicCounterMemoryMask",e[e.MemorySemanticsImageMemoryMask=2048]="MemorySemanticsImageMemoryMask",e[e.MemorySemanticsOutputMemoryMask=4096]="MemorySemanticsOutputMemoryMask",e[e.MemorySemanticsOutputMemoryKHRMask=4096]="MemorySemanticsOutputMemoryKHRMask",e[e.MemorySemanticsMakeAvailableMask=8192]="MemorySemanticsMakeAvailableMask",e[e.MemorySemanticsMakeAvailableKHRMask=8192]="MemorySemanticsMakeAvailableKHRMask",e[e.MemorySemanticsMakeVisibleMask=16384]="MemorySemanticsMakeVisibleMask",e[e.MemorySemanticsMakeVisibleKHRMask=16384]="MemorySemanticsMakeVisibleKHRMask",e[e.MemorySemanticsVolatileMask=32768]="MemorySemanticsVolatileMask"}(q||(q={})),function(e){e[e.MemoryAccessVolatileShift=0]="MemoryAccessVolatileShift",e[e.MemoryAccessAlignedShift=1]="MemoryAccessAlignedShift",e[e.MemoryAccessNontemporalShift=2]="MemoryAccessNontemporalShift",e[e.MemoryAccessMakePointerAvailableShift=3]="MemoryAccessMakePointerAvailableShift",e[e.MemoryAccessMakePointerAvailableKHRShift=3]="MemoryAccessMakePointerAvailableKHRShift",e[e.MemoryAccessMakePointerVisibleShift=4]="MemoryAccessMakePointerVisibleShift",e[e.MemoryAccessMakePointerVisibleKHRShift=4]="MemoryAccessMakePointerVisibleKHRShift",e[e.MemoryAccessNonPrivatePointerShift=5]="MemoryAccessNonPrivatePointerShift",e[e.MemoryAccessNonPrivatePointerKHRShift=5]="MemoryAccessNonPrivatePointerKHRShift",e[e.MemoryAccessMax=2147483647]="MemoryAccessMax"}(X||(X={})),function(e){e[e.MemoryAccessMaskNone=0]="MemoryAccessMaskNone",e[e.MemoryAccessVolatileMask=1]="MemoryAccessVolatileMask",e[e.MemoryAccessAlignedMask=2]="MemoryAccessAlignedMask",e[e.MemoryAccessNontemporalMask=4]="MemoryAccessNontemporalMask",e[e.MemoryAccessMakePointerAvailableMask=8]="MemoryAccessMakePointerAvailableMask",e[e.MemoryAccessMakePointerAvailableKHRMask=8]="MemoryAccessMakePointerAvailableKHRMask",e[e.MemoryAccessMakePointerVisibleMask=16]="MemoryAccessMakePointerVisibleMask",e[e.MemoryAccessMakePointerVisibleKHRMask=16]="MemoryAccessMakePointerVisibleKHRMask",e[e.MemoryAccessNonPrivatePointerMask=32]="MemoryAccessNonPrivatePointerMask",e[e.MemoryAccessNonPrivatePointerKHRMask=32]="MemoryAccessNonPrivatePointerKHRMask"}(W||(W={})),function(e){e[e.ScopeCrossDevice=0]="ScopeCrossDevice",e[e.ScopeDevice=1]="ScopeDevice",e[e.ScopeWorkgroup=2]="ScopeWorkgroup",e[e.ScopeSubgroup=3]="ScopeSubgroup",e[e.ScopeInvocation=4]="ScopeInvocation",e[e.ScopeQueueFamily=5]="ScopeQueueFamily",e[e.ScopeQueueFamilyKHR=5]="ScopeQueueFamilyKHR",e[e.ScopeShaderCallKHR=6]="ScopeShaderCallKHR",e[e.ScopeMax=2147483647]="ScopeMax"}(Q||(Q={})),function(e){e[e.GroupOperationReduce=0]="GroupOperationReduce",e[e.GroupOperationInclusiveScan=1]="GroupOperationInclusiveScan",e[e.GroupOperationExclusiveScan=2]="GroupOperationExclusiveScan",e[e.GroupOperationClusteredReduce=3]="GroupOperationClusteredReduce",e[e.GroupOperationPartitionedReduceNV=6]="GroupOperationPartitionedReduceNV",e[e.GroupOperationPartitionedInclusiveScanNV=7]="GroupOperationPartitionedInclusiveScanNV",e[e.GroupOperationPartitionedExclusiveScanNV=8]="GroupOperationPartitionedExclusiveScanNV",e[e.GroupOperationMax=2147483647]="GroupOperationMax"}(j||(j={})),function(e){e[e.KernelEnqueueFlagsNoWait=0]="KernelEnqueueFlagsNoWait",e[e.KernelEnqueueFlagsWaitKernel=1]="KernelEnqueueFlagsWaitKernel",e[e.KernelEnqueueFlagsWaitWorkGroup=2]="KernelEnqueueFlagsWaitWorkGroup",e[e.KernelEnqueueFlagsMax=2147483647]="KernelEnqueueFlagsMax"}(Z||(Z={})),function(e){e[e.KernelProfilingInfoCmdExecTimeShift=0]="KernelProfilingInfoCmdExecTimeShift",e[e.KernelProfilingInfoMax=2147483647]="KernelProfilingInfoMax"}(Y||(Y={})),function(e){e[e.KernelProfilingInfoMaskNone=0]="KernelProfilingInfoMaskNone",e[e.KernelProfilingInfoCmdExecTimeMask=1]="KernelProfilingInfoCmdExecTimeMask"}(J||(J={})),function(e){e[e.CapabilityMatrix=0]="CapabilityMatrix",e[e.CapabilityShader=1]="CapabilityShader",e[e.CapabilityGeometry=2]="CapabilityGeometry",e[e.CapabilityTessellation=3]="CapabilityTessellation",e[e.CapabilityAddresses=4]="CapabilityAddresses",e[e.CapabilityLinkage=5]="CapabilityLinkage",e[e.CapabilityKernel=6]="CapabilityKernel",e[e.CapabilityVector16=7]="CapabilityVector16",e[e.CapabilityFloat16Buffer=8]="CapabilityFloat16Buffer",e[e.CapabilityFloat16=9]="CapabilityFloat16",e[e.CapabilityFloat64=10]="CapabilityFloat64",e[e.CapabilityInt64=11]="CapabilityInt64",e[e.CapabilityInt64Atomics=12]="CapabilityInt64Atomics",e[e.CapabilityImageBasic=13]="CapabilityImageBasic",e[e.CapabilityImageReadWrite=14]="CapabilityImageReadWrite",e[e.CapabilityImageMipmap=15]="CapabilityImageMipmap",e[e.CapabilityPipes=17]="CapabilityPipes",e[e.CapabilityGroups=18]="CapabilityGroups",e[e.CapabilityDeviceEnqueue=19]="CapabilityDeviceEnqueue",e[e.CapabilityLiteralSampler=20]="CapabilityLiteralSampler",e[e.CapabilityAtomicStorage=21]="CapabilityAtomicStorage",e[e.CapabilityInt16=22]="CapabilityInt16",e[e.CapabilityTessellationPointSize=23]="CapabilityTessellationPointSize",e[e.CapabilityGeometryPointSize=24]="CapabilityGeometryPointSize",e[e.CapabilityImageGatherExtended=25]="CapabilityImageGatherExtended",e[e.CapabilityStorageImageMultisample=27]="CapabilityStorageImageMultisample",e[e.CapabilityUniformBufferArrayDynamicIndexing=28]="CapabilityUniformBufferArrayDynamicIndexing",e[e.CapabilitySampledImageArrayDynamicIndexing=29]="CapabilitySampledImageArrayDynamicIndexing",e[e.CapabilityStorageBufferArrayDynamicIndexing=30]="CapabilityStorageBufferArrayDynamicIndexing",e[e.CapabilityStorageImageArrayDynamicIndexing=31]="CapabilityStorageImageArrayDynamicIndexing",e[e.CapabilityClipDistance=32]="CapabilityClipDistance",e[e.CapabilityCullDistance=33]="CapabilityCullDistance",e[e.CapabilityImageCubeArray=34]="CapabilityImageCubeArray",e[e.CapabilitySampleRateShading=35]="CapabilitySampleRateShading",e[e.CapabilityImageRect=36]="CapabilityImageRect",e[e.CapabilitySampledRect=37]="CapabilitySampledRect",e[e.CapabilityGenericPointer=38]="CapabilityGenericPointer",e[e.CapabilityInt8=39]="CapabilityInt8",e[e.CapabilityInputAttachment=40]="CapabilityInputAttachment",e[e.CapabilitySparseResidency=41]="CapabilitySparseResidency",e[e.CapabilityMinLod=42]="CapabilityMinLod",e[e.CapabilitySampled1D=43]="CapabilitySampled1D",e[e.CapabilityImage1D=44]="CapabilityImage1D",e[e.CapabilitySampledCubeArray=45]="CapabilitySampledCubeArray",e[e.CapabilitySampledBuffer=46]="CapabilitySampledBuffer",e[e.CapabilityImageBuffer=47]="CapabilityImageBuffer",e[e.CapabilityImageMSArray=48]="CapabilityImageMSArray",e[e.CapabilityStorageImageExtendedFormats=49]="CapabilityStorageImageExtendedFormats",e[e.CapabilityImageQuery=50]="CapabilityImageQuery",e[e.CapabilityDerivativeControl=51]="CapabilityDerivativeControl",e[e.CapabilityInterpolationFunction=52]="CapabilityInterpolationFunction",e[e.CapabilityTransformFeedback=53]="CapabilityTransformFeedback",e[e.CapabilityGeometryStreams=54]="CapabilityGeometryStreams",e[e.CapabilityStorageImageReadWithoutFormat=55]="CapabilityStorageImageReadWithoutFormat",e[e.CapabilityStorageImageWriteWithoutFormat=56]="CapabilityStorageImageWriteWithoutFormat",e[e.CapabilityMultiViewport=57]="CapabilityMultiViewport",e[e.CapabilitySubgroupDispatch=58]="CapabilitySubgroupDispatch",e[e.CapabilityNamedBarrier=59]="CapabilityNamedBarrier",e[e.CapabilityPipeStorage=60]="CapabilityPipeStorage",e[e.CapabilityGroupNonUniform=61]="CapabilityGroupNonUniform",e[e.CapabilityGroupNonUniformVote=62]="CapabilityGroupNonUniformVote",e[e.CapabilityGroupNonUniformArithmetic=63]="CapabilityGroupNonUniformArithmetic",e[e.CapabilityGroupNonUniformBallot=64]="CapabilityGroupNonUniformBallot",e[e.CapabilityGroupNonUniformShuffle=65]="CapabilityGroupNonUniformShuffle",e[e.CapabilityGroupNonUniformShuffleRelative=66]="CapabilityGroupNonUniformShuffleRelative",e[e.CapabilityGroupNonUniformClustered=67]="CapabilityGroupNonUniformClustered",e[e.CapabilityGroupNonUniformQuad=68]="CapabilityGroupNonUniformQuad",e[e.CapabilityShaderLayer=69]="CapabilityShaderLayer",e[e.CapabilityShaderViewportIndex=70]="CapabilityShaderViewportIndex",e[e.CapabilityFragmentShadingRateKHR=4422]="CapabilityFragmentShadingRateKHR",e[e.CapabilitySubgroupBallotKHR=4423]="CapabilitySubgroupBallotKHR",e[e.CapabilityDrawParameters=4427]="CapabilityDrawParameters",e[e.CapabilitySubgroupVoteKHR=4431]="CapabilitySubgroupVoteKHR",e[e.CapabilityStorageBuffer16BitAccess=4433]="CapabilityStorageBuffer16BitAccess",e[e.CapabilityStorageUniformBufferBlock16=4433]="CapabilityStorageUniformBufferBlock16",e[e.CapabilityStorageUniform16=4434]="CapabilityStorageUniform16",e[e.CapabilityUniformAndStorageBuffer16BitAccess=4434]="CapabilityUniformAndStorageBuffer16BitAccess",e[e.CapabilityStoragePushConstant16=4435]="CapabilityStoragePushConstant16",e[e.CapabilityStorageInputOutput16=4436]="CapabilityStorageInputOutput16",e[e.CapabilityDeviceGroup=4437]="CapabilityDeviceGroup",e[e.CapabilityMultiView=4439]="CapabilityMultiView",e[e.CapabilityVariablePointersStorageBuffer=4441]="CapabilityVariablePointersStorageBuffer",e[e.CapabilityVariablePointers=4442]="CapabilityVariablePointers",e[e.CapabilityAtomicStorageOps=4445]="CapabilityAtomicStorageOps",e[e.CapabilitySampleMaskPostDepthCoverage=4447]="CapabilitySampleMaskPostDepthCoverage",e[e.CapabilityStorageBuffer8BitAccess=4448]="CapabilityStorageBuffer8BitAccess",e[e.CapabilityUniformAndStorageBuffer8BitAccess=4449]="CapabilityUniformAndStorageBuffer8BitAccess",e[e.CapabilityStoragePushConstant8=4450]="CapabilityStoragePushConstant8",e[e.CapabilityDenormPreserve=4464]="CapabilityDenormPreserve",e[e.CapabilityDenormFlushToZero=4465]="CapabilityDenormFlushToZero",e[e.CapabilitySignedZeroInfNanPreserve=4466]="CapabilitySignedZeroInfNanPreserve",e[e.CapabilityRoundingModeRTE=4467]="CapabilityRoundingModeRTE",e[e.CapabilityRoundingModeRTZ=4468]="CapabilityRoundingModeRTZ",e[e.CapabilityRayQueryProvisionalKHR=4471]="CapabilityRayQueryProvisionalKHR",e[e.CapabilityRayQueryKHR=4472]="CapabilityRayQueryKHR",e[e.CapabilityRayTraversalPrimitiveCullingKHR=4478]="CapabilityRayTraversalPrimitiveCullingKHR",e[e.CapabilityRayTracingKHR=4479]="CapabilityRayTracingKHR",e[e.CapabilityFloat16ImageAMD=5008]="CapabilityFloat16ImageAMD",e[e.CapabilityImageGatherBiasLodAMD=5009]="CapabilityImageGatherBiasLodAMD",e[e.CapabilityFragmentMaskAMD=5010]="CapabilityFragmentMaskAMD",e[e.CapabilityStencilExportEXT=5013]="CapabilityStencilExportEXT",e[e.CapabilityImageReadWriteLodAMD=5015]="CapabilityImageReadWriteLodAMD",e[e.CapabilityInt64ImageEXT=5016]="CapabilityInt64ImageEXT",e[e.CapabilityShaderClockKHR=5055]="CapabilityShaderClockKHR",e[e.CapabilitySampleMaskOverrideCoverageNV=5249]="CapabilitySampleMaskOverrideCoverageNV",e[e.CapabilityGeometryShaderPassthroughNV=5251]="CapabilityGeometryShaderPassthroughNV",e[e.CapabilityShaderViewportIndexLayerEXT=5254]="CapabilityShaderViewportIndexLayerEXT",e[e.CapabilityShaderViewportIndexLayerNV=5254]="CapabilityShaderViewportIndexLayerNV",e[e.CapabilityShaderViewportMaskNV=5255]="CapabilityShaderViewportMaskNV",e[e.CapabilityShaderStereoViewNV=5259]="CapabilityShaderStereoViewNV",e[e.CapabilityPerViewAttributesNV=5260]="CapabilityPerViewAttributesNV",e[e.CapabilityFragmentFullyCoveredEXT=5265]="CapabilityFragmentFullyCoveredEXT",e[e.CapabilityMeshShadingNV=5266]="CapabilityMeshShadingNV",e[e.CapabilityImageFootprintNV=5282]="CapabilityImageFootprintNV",e[e.CapabilityFragmentBarycentricNV=5284]="CapabilityFragmentBarycentricNV",e[e.CapabilityComputeDerivativeGroupQuadsNV=5288]="CapabilityComputeDerivativeGroupQuadsNV",e[e.CapabilityFragmentDensityEXT=5291]="CapabilityFragmentDensityEXT",e[e.CapabilityShadingRateNV=5291]="CapabilityShadingRateNV",e[e.CapabilityGroupNonUniformPartitionedNV=5297]="CapabilityGroupNonUniformPartitionedNV",e[e.CapabilityShaderNonUniform=5301]="CapabilityShaderNonUniform",e[e.CapabilityShaderNonUniformEXT=5301]="CapabilityShaderNonUniformEXT",e[e.CapabilityRuntimeDescriptorArray=5302]="CapabilityRuntimeDescriptorArray",e[e.CapabilityRuntimeDescriptorArrayEXT=5302]="CapabilityRuntimeDescriptorArrayEXT",e[e.CapabilityInputAttachmentArrayDynamicIndexing=5303]="CapabilityInputAttachmentArrayDynamicIndexing",e[e.CapabilityInputAttachmentArrayDynamicIndexingEXT=5303]="CapabilityInputAttachmentArrayDynamicIndexingEXT",e[e.CapabilityUniformTexelBufferArrayDynamicIndexing=5304]="CapabilityUniformTexelBufferArrayDynamicIndexing",e[e.CapabilityUniformTexelBufferArrayDynamicIndexingEXT=5304]="CapabilityUniformTexelBufferArrayDynamicIndexingEXT",e[e.CapabilityStorageTexelBufferArrayDynamicIndexing=5305]="CapabilityStorageTexelBufferArrayDynamicIndexing",e[e.CapabilityStorageTexelBufferArrayDynamicIndexingEXT=5305]="CapabilityStorageTexelBufferArrayDynamicIndexingEXT",e[e.CapabilityUniformBufferArrayNonUniformIndexing=5306]="CapabilityUniformBufferArrayNonUniformIndexing",e[e.CapabilityUniformBufferArrayNonUniformIndexingEXT=5306]="CapabilityUniformBufferArrayNonUniformIndexingEXT",e[e.CapabilitySampledImageArrayNonUniformIndexing=5307]="CapabilitySampledImageArrayNonUniformIndexing",e[e.CapabilitySampledImageArrayNonUniformIndexingEXT=5307]="CapabilitySampledImageArrayNonUniformIndexingEXT",e[e.CapabilityStorageBufferArrayNonUniformIndexing=5308]="CapabilityStorageBufferArrayNonUniformIndexing",e[e.CapabilityStorageBufferArrayNonUniformIndexingEXT=5308]="CapabilityStorageBufferArrayNonUniformIndexingEXT",e[e.CapabilityStorageImageArrayNonUniformIndexing=5309]="CapabilityStorageImageArrayNonUniformIndexing",e[e.CapabilityStorageImageArrayNonUniformIndexingEXT=5309]="CapabilityStorageImageArrayNonUniformIndexingEXT",e[e.CapabilityInputAttachmentArrayNonUniformIndexing=5310]="CapabilityInputAttachmentArrayNonUniformIndexing",e[e.CapabilityInputAttachmentArrayNonUniformIndexingEXT=5310]="CapabilityInputAttachmentArrayNonUniformIndexingEXT",e[e.CapabilityUniformTexelBufferArrayNonUniformIndexing=5311]="CapabilityUniformTexelBufferArrayNonUniformIndexing",e[e.CapabilityUniformTexelBufferArrayNonUniformIndexingEXT=5311]="CapabilityUniformTexelBufferArrayNonUniformIndexingEXT",e[e.CapabilityStorageTexelBufferArrayNonUniformIndexing=5312]="CapabilityStorageTexelBufferArrayNonUniformIndexing",e[e.CapabilityStorageTexelBufferArrayNonUniformIndexingEXT=5312]="CapabilityStorageTexelBufferArrayNonUniformIndexingEXT",e[e.CapabilityRayTracingNV=5340]="CapabilityRayTracingNV",e[e.CapabilityVulkanMemoryModel=5345]="CapabilityVulkanMemoryModel",e[e.CapabilityVulkanMemoryModelKHR=5345]="CapabilityVulkanMemoryModelKHR",e[e.CapabilityVulkanMemoryModelDeviceScope=5346]="CapabilityVulkanMemoryModelDeviceScope",e[e.CapabilityVulkanMemoryModelDeviceScopeKHR=5346]="CapabilityVulkanMemoryModelDeviceScopeKHR",e[e.CapabilityPhysicalStorageBufferAddresses=5347]="CapabilityPhysicalStorageBufferAddresses",e[e.CapabilityPhysicalStorageBufferAddressesEXT=5347]="CapabilityPhysicalStorageBufferAddressesEXT",e[e.CapabilityComputeDerivativeGroupLinearNV=5350]="CapabilityComputeDerivativeGroupLinearNV",e[e.CapabilityRayTracingProvisionalKHR=5353]="CapabilityRayTracingProvisionalKHR",e[e.CapabilityCooperativeMatrixNV=5357]="CapabilityCooperativeMatrixNV",e[e.CapabilityFragmentShaderSampleInterlockEXT=5363]="CapabilityFragmentShaderSampleInterlockEXT",e[e.CapabilityFragmentShaderShadingRateInterlockEXT=5372]="CapabilityFragmentShaderShadingRateInterlockEXT",e[e.CapabilityShaderSMBuiltinsNV=5373]="CapabilityShaderSMBuiltinsNV",e[e.CapabilityFragmentShaderPixelInterlockEXT=5378]="CapabilityFragmentShaderPixelInterlockEXT",e[e.CapabilityDemoteToHelperInvocationEXT=5379]="CapabilityDemoteToHelperInvocationEXT",e[e.CapabilitySubgroupShuffleINTEL=5568]="CapabilitySubgroupShuffleINTEL",e[e.CapabilitySubgroupBufferBlockIOINTEL=5569]="CapabilitySubgroupBufferBlockIOINTEL",e[e.CapabilitySubgroupImageBlockIOINTEL=5570]="CapabilitySubgroupImageBlockIOINTEL",e[e.CapabilitySubgroupImageMediaBlockIOINTEL=5579]="CapabilitySubgroupImageMediaBlockIOINTEL",e[e.CapabilityIntegerFunctions2INTEL=5584]="CapabilityIntegerFunctions2INTEL",e[e.CapabilityFunctionPointersINTEL=5603]="CapabilityFunctionPointersINTEL",e[e.CapabilityIndirectReferencesINTEL=5604]="CapabilityIndirectReferencesINTEL",e[e.CapabilitySubgroupAvcMotionEstimationINTEL=5696]="CapabilitySubgroupAvcMotionEstimationINTEL",e[e.CapabilitySubgroupAvcMotionEstimationIntraINTEL=5697]="CapabilitySubgroupAvcMotionEstimationIntraINTEL",e[e.CapabilitySubgroupAvcMotionEstimationChromaINTEL=5698]="CapabilitySubgroupAvcMotionEstimationChromaINTEL",e[e.CapabilityFPGAMemoryAttributesINTEL=5824]="CapabilityFPGAMemoryAttributesINTEL",e[e.CapabilityUnstructuredLoopControlsINTEL=5886]="CapabilityUnstructuredLoopControlsINTEL",e[e.CapabilityFPGALoopControlsINTEL=5888]="CapabilityFPGALoopControlsINTEL",e[e.CapabilityKernelAttributesINTEL=5892]="CapabilityKernelAttributesINTEL",e[e.CapabilityFPGAKernelAttributesINTEL=5897]="CapabilityFPGAKernelAttributesINTEL",e[e.CapabilityBlockingPipesINTEL=5945]="CapabilityBlockingPipesINTEL",e[e.CapabilityFPGARegINTEL=5948]="CapabilityFPGARegINTEL",e[e.CapabilityAtomicFloat32AddEXT=6033]="CapabilityAtomicFloat32AddEXT",e[e.CapabilityAtomicFloat64AddEXT=6034]="CapabilityAtomicFloat64AddEXT",e[e.CapabilityMax=2147483647]="CapabilityMax"}($||($={})),function(e){e[e.RayFlagsOpaqueKHRShift=0]="RayFlagsOpaqueKHRShift",e[e.RayFlagsNoOpaqueKHRShift=1]="RayFlagsNoOpaqueKHRShift",e[e.RayFlagsTerminateOnFirstHitKHRShift=2]="RayFlagsTerminateOnFirstHitKHRShift",e[e.RayFlagsSkipClosestHitShaderKHRShift=3]="RayFlagsSkipClosestHitShaderKHRShift",e[e.RayFlagsCullBackFacingTrianglesKHRShift=4]="RayFlagsCullBackFacingTrianglesKHRShift",e[e.RayFlagsCullFrontFacingTrianglesKHRShift=5]="RayFlagsCullFrontFacingTrianglesKHRShift",e[e.RayFlagsCullOpaqueKHRShift=6]="RayFlagsCullOpaqueKHRShift",e[e.RayFlagsCullNoOpaqueKHRShift=7]="RayFlagsCullNoOpaqueKHRShift",e[e.RayFlagsSkipTrianglesKHRShift=8]="RayFlagsSkipTrianglesKHRShift",e[e.RayFlagsSkipAABBsKHRShift=9]="RayFlagsSkipAABBsKHRShift",e[e.RayFlagsMax=2147483647]="RayFlagsMax"}(ee||(ee={})),function(e){e[e.RayFlagsMaskNone=0]="RayFlagsMaskNone",e[e.RayFlagsOpaqueKHRMask=1]="RayFlagsOpaqueKHRMask",e[e.RayFlagsNoOpaqueKHRMask=2]="RayFlagsNoOpaqueKHRMask",e[e.RayFlagsTerminateOnFirstHitKHRMask=4]="RayFlagsTerminateOnFirstHitKHRMask",e[e.RayFlagsSkipClosestHitShaderKHRMask=8]="RayFlagsSkipClosestHitShaderKHRMask",e[e.RayFlagsCullBackFacingTrianglesKHRMask=16]="RayFlagsCullBackFacingTrianglesKHRMask",e[e.RayFlagsCullFrontFacingTrianglesKHRMask=32]="RayFlagsCullFrontFacingTrianglesKHRMask",e[e.RayFlagsCullOpaqueKHRMask=64]="RayFlagsCullOpaqueKHRMask",e[e.RayFlagsCullNoOpaqueKHRMask=128]="RayFlagsCullNoOpaqueKHRMask",e[e.RayFlagsSkipTrianglesKHRMask=256]="RayFlagsSkipTrianglesKHRMask",e[e.RayFlagsSkipAABBsKHRMask=512]="RayFlagsSkipAABBsKHRMask"}(te||(te={})),function(e){e[e.RayQueryIntersectionRayQueryCandidateIntersectionKHR=0]="RayQueryIntersectionRayQueryCandidateIntersectionKHR",e[e.RayQueryIntersectionRayQueryCommittedIntersectionKHR=1]="RayQueryIntersectionRayQueryCommittedIntersectionKHR",e[e.RayQueryIntersectionMax=2147483647]="RayQueryIntersectionMax"}(re||(re={})),function(e){e[e.RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionNoneKHR=0]="RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionNoneKHR",e[e.RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionTriangleKHR=1]="RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionTriangleKHR",e[e.RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionGeneratedKHR=2]="RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionGeneratedKHR",e[e.RayQueryCommittedIntersectionTypeMax=2147483647]="RayQueryCommittedIntersectionTypeMax"}(ae||(ae={})),function(e){e[e.RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionTriangleKHR=0]="RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionTriangleKHR",e[e.RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionAABBKHR=1]="RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionAABBKHR",e[e.RayQueryCandidateIntersectionTypeMax=2147483647]="RayQueryCandidateIntersectionTypeMax"}(ie||(ie={})),function(e){e[e.FragmentShadingRateVertical2PixelsShift=0]="FragmentShadingRateVertical2PixelsShift",e[e.FragmentShadingRateVertical4PixelsShift=1]="FragmentShadingRateVertical4PixelsShift",e[e.FragmentShadingRateHorizontal2PixelsShift=2]="FragmentShadingRateHorizontal2PixelsShift",e[e.FragmentShadingRateHorizontal4PixelsShift=3]="FragmentShadingRateHorizontal4PixelsShift",e[e.FragmentShadingRateMax=2147483647]="FragmentShadingRateMax"}(oe||(oe={})),function(e){e[e.FragmentShadingRateMaskNone=0]="FragmentShadingRateMaskNone",e[e.FragmentShadingRateVertical2PixelsMask=1]="FragmentShadingRateVertical2PixelsMask",e[e.FragmentShadingRateVertical4PixelsMask=2]="FragmentShadingRateVertical4PixelsMask",e[e.FragmentShadingRateHorizontal2PixelsMask=4]="FragmentShadingRateHorizontal2PixelsMask",e[e.FragmentShadingRateHorizontal4PixelsMask=8]="FragmentShadingRateHorizontal4PixelsMask"}(ne||(ne={})),function(e){e[e.OpNop=0]="OpNop",e[e.OpUndef=1]="OpUndef",e[e.OpSourceContinued=2]="OpSourceContinued",e[e.OpSource=3]="OpSource",e[e.OpSourceExtension=4]="OpSourceExtension",e[e.OpName=5]="OpName",e[e.OpMemberName=6]="OpMemberName",e[e.OpString=7]="OpString",e[e.OpLine=8]="OpLine",e[e.OpExtension=10]="OpExtension",e[e.OpExtInstImport=11]="OpExtInstImport",e[e.OpExtInst=12]="OpExtInst",e[e.OpMemoryModel=14]="OpMemoryModel",e[e.OpEntryPoint=15]="OpEntryPoint",e[e.OpExecutionMode=16]="OpExecutionMode",e[e.OpCapability=17]="OpCapability",e[e.OpTypeVoid=19]="OpTypeVoid",e[e.OpTypeBool=20]="OpTypeBool",e[e.OpTypeInt=21]="OpTypeInt",e[e.OpTypeFloat=22]="OpTypeFloat",e[e.OpTypeVector=23]="OpTypeVector",e[e.OpTypeMatrix=24]="OpTypeMatrix",e[e.OpTypeImage=25]="OpTypeImage",e[e.OpTypeSampler=26]="OpTypeSampler",e[e.OpTypeSampledImage=27]="OpTypeSampledImage",e[e.OpTypeArray=28]="OpTypeArray",e[e.OpTypeRuntimeArray=29]="OpTypeRuntimeArray",e[e.OpTypeStruct=30]="OpTypeStruct",e[e.OpTypeOpaque=31]="OpTypeOpaque",e[e.OpTypePointer=32]="OpTypePointer",e[e.OpTypeFunction=33]="OpTypeFunction",e[e.OpTypeEvent=34]="OpTypeEvent",e[e.OpTypeDeviceEvent=35]="OpTypeDeviceEvent",e[e.OpTypeReserveId=36]="OpTypeReserveId",e[e.OpTypeQueue=37]="OpTypeQueue",e[e.OpTypePipe=38]="OpTypePipe",e[e.OpTypeForwardPointer=39]="OpTypeForwardPointer",e[e.OpConstantTrue=41]="OpConstantTrue",e[e.OpConstantFalse=42]="OpConstantFalse",e[e.OpConstant=43]="OpConstant",e[e.OpConstantComposite=44]="OpConstantComposite",e[e.OpConstantSampler=45]="OpConstantSampler",e[e.OpConstantNull=46]="OpConstantNull",e[e.OpSpecConstantTrue=48]="OpSpecConstantTrue",e[e.OpSpecConstantFalse=49]="OpSpecConstantFalse",e[e.OpSpecConstant=50]="OpSpecConstant",e[e.OpSpecConstantComposite=51]="OpSpecConstantComposite",e[e.OpSpecConstantOp=52]="OpSpecConstantOp",e[e.OpFunction=54]="OpFunction",e[e.OpFunctionParameter=55]="OpFunctionParameter",e[e.OpFunctionEnd=56]="OpFunctionEnd",e[e.OpFunctionCall=57]="OpFunctionCall",e[e.OpVariable=59]="OpVariable",e[e.OpImageTexelPointer=60]="OpImageTexelPointer",e[e.OpLoad=61]="OpLoad",e[e.OpStore=62]="OpStore",e[e.OpCopyMemory=63]="OpCopyMemory",e[e.OpCopyMemorySized=64]="OpCopyMemorySized",e[e.OpAccessChain=65]="OpAccessChain",e[e.OpInBoundsAccessChain=66]="OpInBoundsAccessChain",e[e.OpPtrAccessChain=67]="OpPtrAccessChain",e[e.OpArrayLength=68]="OpArrayLength",e[e.OpGenericPtrMemSemantics=69]="OpGenericPtrMemSemantics",e[e.OpInBoundsPtrAccessChain=70]="OpInBoundsPtrAccessChain",e[e.OpDecorate=71]="OpDecorate",e[e.OpMemberDecorate=72]="OpMemberDecorate",e[e.OpDecorationGroup=73]="OpDecorationGroup",e[e.OpGroupDecorate=74]="OpGroupDecorate",e[e.OpGroupMemberDecorate=75]="OpGroupMemberDecorate",e[e.OpVectorExtractDynamic=77]="OpVectorExtractDynamic",e[e.OpVectorInsertDynamic=78]="OpVectorInsertDynamic",e[e.OpVectorShuffle=79]="OpVectorShuffle",e[e.OpCompositeConstruct=80]="OpCompositeConstruct",e[e.OpCompositeExtract=81]="OpCompositeExtract",e[e.OpCompositeInsert=82]="OpCompositeInsert",e[e.OpCopyObject=83]="OpCopyObject",e[e.OpTranspose=84]="OpTranspose",e[e.OpSampledImage=86]="OpSampledImage",e[e.OpImageSampleImplicitLod=87]="OpImageSampleImplicitLod",e[e.OpImageSampleExplicitLod=88]="OpImageSampleExplicitLod",e[e.OpImageSampleDrefImplicitLod=89]="OpImageSampleDrefImplicitLod",e[e.OpImageSampleDrefExplicitLod=90]="OpImageSampleDrefExplicitLod",e[e.OpImageSampleProjImplicitLod=91]="OpImageSampleProjImplicitLod",e[e.OpImageSampleProjExplicitLod=92]="OpImageSampleProjExplicitLod",e[e.OpImageSampleProjDrefImplicitLod=93]="OpImageSampleProjDrefImplicitLod",e[e.OpImageSampleProjDrefExplicitLod=94]="OpImageSampleProjDrefExplicitLod",e[e.OpImageFetch=95]="OpImageFetch",e[e.OpImageGather=96]="OpImageGather",e[e.OpImageDrefGather=97]="OpImageDrefGather",e[e.OpImageRead=98]="OpImageRead",e[e.OpImageWrite=99]="OpImageWrite",e[e.OpImage=100]="OpImage",e[e.OpImageQueryFormat=101]="OpImageQueryFormat",e[e.OpImageQueryOrder=102]="OpImageQueryOrder",e[e.OpImageQuerySizeLod=103]="OpImageQuerySizeLod",e[e.OpImageQuerySize=104]="OpImageQuerySize",e[e.OpImageQueryLod=105]="OpImageQueryLod",e[e.OpImageQueryLevels=106]="OpImageQueryLevels",e[e.OpImageQuerySamples=107]="OpImageQuerySamples",e[e.OpConvertFToU=109]="OpConvertFToU",e[e.OpConvertFToS=110]="OpConvertFToS",e[e.OpConvertSToF=111]="OpConvertSToF",e[e.OpConvertUToF=112]="OpConvertUToF",e[e.OpUConvert=113]="OpUConvert",e[e.OpSConvert=114]="OpSConvert",e[e.OpFConvert=115]="OpFConvert",e[e.OpQuantizeToF16=116]="OpQuantizeToF16",e[e.OpConvertPtrToU=117]="OpConvertPtrToU",e[e.OpSatConvertSToU=118]="OpSatConvertSToU",e[e.OpSatConvertUToS=119]="OpSatConvertUToS",e[e.OpConvertUToPtr=120]="OpConvertUToPtr",e[e.OpPtrCastToGeneric=121]="OpPtrCastToGeneric",e[e.OpGenericCastToPtr=122]="OpGenericCastToPtr",e[e.OpGenericCastToPtrExplicit=123]="OpGenericCastToPtrExplicit",e[e.OpBitcast=124]="OpBitcast",e[e.OpSNegate=126]="OpSNegate",e[e.OpFNegate=127]="OpFNegate",e[e.OpIAdd=128]="OpIAdd",e[e.OpFAdd=129]="OpFAdd",e[e.OpISub=130]="OpISub",e[e.OpFSub=131]="OpFSub",e[e.OpIMul=132]="OpIMul",e[e.OpFMul=133]="OpFMul",e[e.OpUDiv=134]="OpUDiv",e[e.OpSDiv=135]="OpSDiv",e[e.OpFDiv=136]="OpFDiv",e[e.OpUMod=137]="OpUMod",e[e.OpSRem=138]="OpSRem",e[e.OpSMod=139]="OpSMod",e[e.OpFRem=140]="OpFRem",e[e.OpFMod=141]="OpFMod",e[e.OpVectorTimesScalar=142]="OpVectorTimesScalar",e[e.OpMatrixTimesScalar=143]="OpMatrixTimesScalar",e[e.OpVectorTimesMatrix=144]="OpVectorTimesMatrix",e[e.OpMatrixTimesVector=145]="OpMatrixTimesVector",e[e.OpMatrixTimesMatrix=146]="OpMatrixTimesMatrix",e[e.OpOuterProduct=147]="OpOuterProduct",e[e.OpDot=148]="OpDot",e[e.OpIAddCarry=149]="OpIAddCarry",e[e.OpISubBorrow=150]="OpISubBorrow",e[e.OpUMulExtended=151]="OpUMulExtended",e[e.OpSMulExtended=152]="OpSMulExtended",e[e.OpAny=154]="OpAny",e[e.OpAll=155]="OpAll",e[e.OpIsNan=156]="OpIsNan",e[e.OpIsInf=157]="OpIsInf",e[e.OpIsFinite=158]="OpIsFinite",e[e.OpIsNormal=159]="OpIsNormal",e[e.OpSignBitSet=160]="OpSignBitSet",e[e.OpLessOrGreater=161]="OpLessOrGreater",e[e.OpOrdered=162]="OpOrdered",e[e.OpUnordered=163]="OpUnordered",e[e.OpLogicalEqual=164]="OpLogicalEqual",e[e.OpLogicalNotEqual=165]="OpLogicalNotEqual",e[e.OpLogicalOr=166]="OpLogicalOr",e[e.OpLogicalAnd=167]="OpLogicalAnd",e[e.OpLogicalNot=168]="OpLogicalNot",e[e.OpSelect=169]="OpSelect",e[e.OpIEqual=170]="OpIEqual",e[e.OpINotEqual=171]="OpINotEqual",e[e.OpUGreaterThan=172]="OpUGreaterThan",e[e.OpSGreaterThan=173]="OpSGreaterThan",e[e.OpUGreaterThanEqual=174]="OpUGreaterThanEqual",e[e.OpSGreaterThanEqual=175]="OpSGreaterThanEqual",e[e.OpULessThan=176]="OpULessThan",e[e.OpSLessThan=177]="OpSLessThan",e[e.OpULessThanEqual=178]="OpULessThanEqual",e[e.OpSLessThanEqual=179]="OpSLessThanEqual",e[e.OpFOrdEqual=180]="OpFOrdEqual",e[e.OpFUnordEqual=181]="OpFUnordEqual",e[e.OpFOrdNotEqual=182]="OpFOrdNotEqual",e[e.OpFUnordNotEqual=183]="OpFUnordNotEqual",e[e.OpFOrdLessThan=184]="OpFOrdLessThan",e[e.OpFUnordLessThan=185]="OpFUnordLessThan",e[e.OpFOrdGreaterThan=186]="OpFOrdGreaterThan",e[e.OpFUnordGreaterThan=187]="OpFUnordGreaterThan",e[e.OpFOrdLessThanEqual=188]="OpFOrdLessThanEqual",e[e.OpFUnordLessThanEqual=189]="OpFUnordLessThanEqual",e[e.OpFOrdGreaterThanEqual=190]="OpFOrdGreaterThanEqual",e[e.OpFUnordGreaterThanEqual=191]="OpFUnordGreaterThanEqual",e[e.OpShiftRightLogical=194]="OpShiftRightLogical",e[e.OpShiftRightArithmetic=195]="OpShiftRightArithmetic",e[e.OpShiftLeftLogical=196]="OpShiftLeftLogical",e[e.OpBitwiseOr=197]="OpBitwiseOr",e[e.OpBitwiseXor=198]="OpBitwiseXor",e[e.OpBitwiseAnd=199]="OpBitwiseAnd",e[e.OpNot=200]="OpNot",e[e.OpBitFieldInsert=201]="OpBitFieldInsert",e[e.OpBitFieldSExtract=202]="OpBitFieldSExtract",e[e.OpBitFieldUExtract=203]="OpBitFieldUExtract",e[e.OpBitReverse=204]="OpBitReverse",e[e.OpBitCount=205]="OpBitCount",e[e.OpDPdx=207]="OpDPdx",e[e.OpDPdy=208]="OpDPdy",e[e.OpFwidth=209]="OpFwidth",e[e.OpDPdxFine=210]="OpDPdxFine",e[e.OpDPdyFine=211]="OpDPdyFine",e[e.OpFwidthFine=212]="OpFwidthFine",e[e.OpDPdxCoarse=213]="OpDPdxCoarse",e[e.OpDPdyCoarse=214]="OpDPdyCoarse",e[e.OpFwidthCoarse=215]="OpFwidthCoarse",e[e.OpEmitVertex=218]="OpEmitVertex",e[e.OpEndPrimitive=219]="OpEndPrimitive",e[e.OpEmitStreamVertex=220]="OpEmitStreamVertex",e[e.OpEndStreamPrimitive=221]="OpEndStreamPrimitive",e[e.OpControlBarrier=224]="OpControlBarrier",e[e.OpMemoryBarrier=225]="OpMemoryBarrier",e[e.OpAtomicLoad=227]="OpAtomicLoad",e[e.OpAtomicStore=228]="OpAtomicStore",e[e.OpAtomicExchange=229]="OpAtomicExchange",e[e.OpAtomicCompareExchange=230]="OpAtomicCompareExchange",e[e.OpAtomicCompareExchangeWeak=231]="OpAtomicCompareExchangeWeak",e[e.OpAtomicIIncrement=232]="OpAtomicIIncrement",e[e.OpAtomicIDecrement=233]="OpAtomicIDecrement",e[e.OpAtomicIAdd=234]="OpAtomicIAdd",e[e.OpAtomicISub=235]="OpAtomicISub",e[e.OpAtomicSMin=236]="OpAtomicSMin",e[e.OpAtomicUMin=237]="OpAtomicUMin",e[e.OpAtomicSMax=238]="OpAtomicSMax",e[e.OpAtomicUMax=239]="OpAtomicUMax",e[e.OpAtomicAnd=240]="OpAtomicAnd",e[e.OpAtomicOr=241]="OpAtomicOr",e[e.OpAtomicXor=242]="OpAtomicXor",e[e.OpPhi=245]="OpPhi",e[e.OpLoopMerge=246]="OpLoopMerge",e[e.OpSelectionMerge=247]="OpSelectionMerge",e[e.OpLabel=248]="OpLabel",e[e.OpBranch=249]="OpBranch",e[e.OpBranchConditional=250]="OpBranchConditional",e[e.OpSwitch=251]="OpSwitch",e[e.OpKill=252]="OpKill",e[e.OpReturn=253]="OpReturn",e[e.OpReturnValue=254]="OpReturnValue",e[e.OpUnreachable=255]="OpUnreachable",e[e.OpLifetimeStart=256]="OpLifetimeStart",e[e.OpLifetimeStop=257]="OpLifetimeStop",e[e.OpGroupAsyncCopy=259]="OpGroupAsyncCopy",e[e.OpGroupWaitEvents=260]="OpGroupWaitEvents",e[e.OpGroupAll=261]="OpGroupAll",e[e.OpGroupAny=262]="OpGroupAny",e[e.OpGroupBroadcast=263]="OpGroupBroadcast",e[e.OpGroupIAdd=264]="OpGroupIAdd",e[e.OpGroupFAdd=265]="OpGroupFAdd",e[e.OpGroupFMin=266]="OpGroupFMin",e[e.OpGroupUMin=267]="OpGroupUMin",e[e.OpGroupSMin=268]="OpGroupSMin",e[e.OpGroupFMax=269]="OpGroupFMax",e[e.OpGroupUMax=270]="OpGroupUMax",e[e.OpGroupSMax=271]="OpGroupSMax",e[e.OpReadPipe=274]="OpReadPipe",e[e.OpWritePipe=275]="OpWritePipe",e[e.OpReservedReadPipe=276]="OpReservedReadPipe",e[e.OpReservedWritePipe=277]="OpReservedWritePipe",e[e.OpReserveReadPipePackets=278]="OpReserveReadPipePackets",e[e.OpReserveWritePipePackets=279]="OpReserveWritePipePackets",e[e.OpCommitReadPipe=280]="OpCommitReadPipe",e[e.OpCommitWritePipe=281]="OpCommitWritePipe",e[e.OpIsValidReserveId=282]="OpIsValidReserveId",e[e.OpGetNumPipePackets=283]="OpGetNumPipePackets",e[e.OpGetMaxPipePackets=284]="OpGetMaxPipePackets",e[e.OpGroupReserveReadPipePackets=285]="OpGroupReserveReadPipePackets",e[e.OpGroupReserveWritePipePackets=286]="OpGroupReserveWritePipePackets",e[e.OpGroupCommitReadPipe=287]="OpGroupCommitReadPipe",e[e.OpGroupCommitWritePipe=288]="OpGroupCommitWritePipe",e[e.OpEnqueueMarker=291]="OpEnqueueMarker",e[e.OpEnqueueKernel=292]="OpEnqueueKernel",e[e.OpGetKernelNDrangeSubGroupCount=293]="OpGetKernelNDrangeSubGroupCount",e[e.OpGetKernelNDrangeMaxSubGroupSize=294]="OpGetKernelNDrangeMaxSubGroupSize",e[e.OpGetKernelWorkGroupSize=295]="OpGetKernelWorkGroupSize",e[e.OpGetKernelPreferredWorkGroupSizeMultiple=296]="OpGetKernelPreferredWorkGroupSizeMultiple",e[e.OpRetainEvent=297]="OpRetainEvent",e[e.OpReleaseEvent=298]="OpReleaseEvent",e[e.OpCreateUserEvent=299]="OpCreateUserEvent",e[e.OpIsValidEvent=300]="OpIsValidEvent",e[e.OpSetUserEventStatus=301]="OpSetUserEventStatus",e[e.OpCaptureEventProfilingInfo=302]="OpCaptureEventProfilingInfo",e[e.OpGetDefaultQueue=303]="OpGetDefaultQueue",e[e.OpBuildNDRange=304]="OpBuildNDRange",e[e.OpImageSparseSampleImplicitLod=305]="OpImageSparseSampleImplicitLod",e[e.OpImageSparseSampleExplicitLod=306]="OpImageSparseSampleExplicitLod",e[e.OpImageSparseSampleDrefImplicitLod=307]="OpImageSparseSampleDrefImplicitLod",e[e.OpImageSparseSampleDrefExplicitLod=308]="OpImageSparseSampleDrefExplicitLod",e[e.OpImageSparseSampleProjImplicitLod=309]="OpImageSparseSampleProjImplicitLod",e[e.OpImageSparseSampleProjExplicitLod=310]="OpImageSparseSampleProjExplicitLod",e[e.OpImageSparseSampleProjDrefImplicitLod=311]="OpImageSparseSampleProjDrefImplicitLod",e[e.OpImageSparseSampleProjDrefExplicitLod=312]="OpImageSparseSampleProjDrefExplicitLod",e[e.OpImageSparseFetch=313]="OpImageSparseFetch",e[e.OpImageSparseGather=314]="OpImageSparseGather",e[e.OpImageSparseDrefGather=315]="OpImageSparseDrefGather",e[e.OpImageSparseTexelsResident=316]="OpImageSparseTexelsResident",e[e.OpNoLine=317]="OpNoLine",e[e.OpAtomicFlagTestAndSet=318]="OpAtomicFlagTestAndSet",e[e.OpAtomicFlagClear=319]="OpAtomicFlagClear",e[e.OpImageSparseRead=320]="OpImageSparseRead",e[e.OpSizeOf=321]="OpSizeOf",e[e.OpTypePipeStorage=322]="OpTypePipeStorage",e[e.OpConstantPipeStorage=323]="OpConstantPipeStorage",e[e.OpCreatePipeFromPipeStorage=324]="OpCreatePipeFromPipeStorage",e[e.OpGetKernelLocalSizeForSubgroupCount=325]="OpGetKernelLocalSizeForSubgroupCount",e[e.OpGetKernelMaxNumSubgroups=326]="OpGetKernelMaxNumSubgroups",e[e.OpTypeNamedBarrier=327]="OpTypeNamedBarrier",e[e.OpNamedBarrierInitialize=328]="OpNamedBarrierInitialize",e[e.OpMemoryNamedBarrier=329]="OpMemoryNamedBarrier",e[e.OpModuleProcessed=330]="OpModuleProcessed",e[e.OpExecutionModeId=331]="OpExecutionModeId",e[e.OpDecorateId=332]="OpDecorateId",e[e.OpGroupNonUniformElect=333]="OpGroupNonUniformElect",e[e.OpGroupNonUniformAll=334]="OpGroupNonUniformAll",e[e.OpGroupNonUniformAny=335]="OpGroupNonUniformAny",e[e.OpGroupNonUniformAllEqual=336]="OpGroupNonUniformAllEqual",e[e.OpGroupNonUniformBroadcast=337]="OpGroupNonUniformBroadcast",e[e.OpGroupNonUniformBroadcastFirst=338]="OpGroupNonUniformBroadcastFirst",e[e.OpGroupNonUniformBallot=339]="OpGroupNonUniformBallot",e[e.OpGroupNonUniformInverseBallot=340]="OpGroupNonUniformInverseBallot",e[e.OpGroupNonUniformBallotBitExtract=341]="OpGroupNonUniformBallotBitExtract",e[e.OpGroupNonUniformBallotBitCount=342]="OpGroupNonUniformBallotBitCount",e[e.OpGroupNonUniformBallotFindLSB=343]="OpGroupNonUniformBallotFindLSB",e[e.OpGroupNonUniformBallotFindMSB=344]="OpGroupNonUniformBallotFindMSB",e[e.OpGroupNonUniformShuffle=345]="OpGroupNonUniformShuffle",e[e.OpGroupNonUniformShuffleXor=346]="OpGroupNonUniformShuffleXor",e[e.OpGroupNonUniformShuffleUp=347]="OpGroupNonUniformShuffleUp",e[e.OpGroupNonUniformShuffleDown=348]="OpGroupNonUniformShuffleDown",e[e.OpGroupNonUniformIAdd=349]="OpGroupNonUniformIAdd",e[e.OpGroupNonUniformFAdd=350]="OpGroupNonUniformFAdd",e[e.OpGroupNonUniformIMul=351]="OpGroupNonUniformIMul",e[e.OpGroupNonUniformFMul=352]="OpGroupNonUniformFMul",e[e.OpGroupNonUniformSMin=353]="OpGroupNonUniformSMin",e[e.OpGroupNonUniformUMin=354]="OpGroupNonUniformUMin",e[e.OpGroupNonUniformFMin=355]="OpGroupNonUniformFMin",e[e.OpGroupNonUniformSMax=356]="OpGroupNonUniformSMax",e[e.OpGroupNonUniformUMax=357]="OpGroupNonUniformUMax",e[e.OpGroupNonUniformFMax=358]="OpGroupNonUniformFMax",e[e.OpGroupNonUniformBitwiseAnd=359]="OpGroupNonUniformBitwiseAnd",e[e.OpGroupNonUniformBitwiseOr=360]="OpGroupNonUniformBitwiseOr",e[e.OpGroupNonUniformBitwiseXor=361]="OpGroupNonUniformBitwiseXor",e[e.OpGroupNonUniformLogicalAnd=362]="OpGroupNonUniformLogicalAnd",e[e.OpGroupNonUniformLogicalOr=363]="OpGroupNonUniformLogicalOr",e[e.OpGroupNonUniformLogicalXor=364]="OpGroupNonUniformLogicalXor",e[e.OpGroupNonUniformQuadBroadcast=365]="OpGroupNonUniformQuadBroadcast",e[e.OpGroupNonUniformQuadSwap=366]="OpGroupNonUniformQuadSwap",e[e.OpCopyLogical=400]="OpCopyLogical",e[e.OpPtrEqual=401]="OpPtrEqual",e[e.OpPtrNotEqual=402]="OpPtrNotEqual",e[e.OpPtrDiff=403]="OpPtrDiff",e[e.OpTerminateInvocation=4416]="OpTerminateInvocation",e[e.OpSubgroupBallotKHR=4421]="OpSubgroupBallotKHR",e[e.OpSubgroupFirstInvocationKHR=4422]="OpSubgroupFirstInvocationKHR",e[e.OpSubgroupAllKHR=4428]="OpSubgroupAllKHR",e[e.OpSubgroupAnyKHR=4429]="OpSubgroupAnyKHR",e[e.OpSubgroupAllEqualKHR=4430]="OpSubgroupAllEqualKHR",e[e.OpSubgroupReadInvocationKHR=4432]="OpSubgroupReadInvocationKHR",e[e.OpTraceRayKHR=4445]="OpTraceRayKHR",e[e.OpExecuteCallableKHR=4446]="OpExecuteCallableKHR",e[e.OpConvertUToAccelerationStructureKHR=4447]="OpConvertUToAccelerationStructureKHR",e[e.OpIgnoreIntersectionKHR=4448]="OpIgnoreIntersectionKHR",e[e.OpTerminateRayKHR=4449]="OpTerminateRayKHR",e[e.OpTypeRayQueryKHR=4472]="OpTypeRayQueryKHR",e[e.OpRayQueryInitializeKHR=4473]="OpRayQueryInitializeKHR",e[e.OpRayQueryTerminateKHR=4474]="OpRayQueryTerminateKHR",e[e.OpRayQueryGenerateIntersectionKHR=4475]="OpRayQueryGenerateIntersectionKHR",e[e.OpRayQueryConfirmIntersectionKHR=4476]="OpRayQueryConfirmIntersectionKHR",e[e.OpRayQueryProceedKHR=4477]="OpRayQueryProceedKHR",e[e.OpRayQueryGetIntersectionTypeKHR=4479]="OpRayQueryGetIntersectionTypeKHR",e[e.OpGroupIAddNonUniformAMD=5e3]="OpGroupIAddNonUniformAMD",e[e.OpGroupFAddNonUniformAMD=5001]="OpGroupFAddNonUniformAMD",e[e.OpGroupFMinNonUniformAMD=5002]="OpGroupFMinNonUniformAMD",e[e.OpGroupUMinNonUniformAMD=5003]="OpGroupUMinNonUniformAMD",e[e.OpGroupSMinNonUniformAMD=5004]="OpGroupSMinNonUniformAMD",e[e.OpGroupFMaxNonUniformAMD=5005]="OpGroupFMaxNonUniformAMD",e[e.OpGroupUMaxNonUniformAMD=5006]="OpGroupUMaxNonUniformAMD",e[e.OpGroupSMaxNonUniformAMD=5007]="OpGroupSMaxNonUniformAMD",e[e.OpFragmentMaskFetchAMD=5011]="OpFragmentMaskFetchAMD",e[e.OpFragmentFetchAMD=5012]="OpFragmentFetchAMD",e[e.OpReadClockKHR=5056]="OpReadClockKHR",e[e.OpImageSampleFootprintNV=5283]="OpImageSampleFootprintNV",e[e.OpGroupNonUniformPartitionNV=5296]="OpGroupNonUniformPartitionNV",e[e.OpWritePackedPrimitiveIndices4x8NV=5299]="OpWritePackedPrimitiveIndices4x8NV",e[e.OpReportIntersectionKHR=5334]="OpReportIntersectionKHR",e[e.OpReportIntersectionNV=5334]="OpReportIntersectionNV",e[e.OpIgnoreIntersectionNV=5335]="OpIgnoreIntersectionNV",e[e.OpTerminateRayNV=5336]="OpTerminateRayNV",e[e.OpTraceNV=5337]="OpTraceNV",e[e.OpTypeAccelerationStructureKHR=5341]="OpTypeAccelerationStructureKHR",e[e.OpTypeAccelerationStructureNV=5341]="OpTypeAccelerationStructureNV",e[e.OpExecuteCallableNV=5344]="OpExecuteCallableNV",e[e.OpTypeCooperativeMatrixNV=5358]="OpTypeCooperativeMatrixNV",e[e.OpCooperativeMatrixLoadNV=5359]="OpCooperativeMatrixLoadNV",e[e.OpCooperativeMatrixStoreNV=5360]="OpCooperativeMatrixStoreNV",e[e.OpCooperativeMatrixMulAddNV=5361]="OpCooperativeMatrixMulAddNV",e[e.OpCooperativeMatrixLengthNV=5362]="OpCooperativeMatrixLengthNV",e[e.OpBeginInvocationInterlockEXT=5364]="OpBeginInvocationInterlockEXT",e[e.OpEndInvocationInterlockEXT=5365]="OpEndInvocationInterlockEXT",e[e.OpDemoteToHelperInvocationEXT=5380]="OpDemoteToHelperInvocationEXT",e[e.OpIsHelperInvocationEXT=5381]="OpIsHelperInvocationEXT",e[e.OpSubgroupShuffleINTEL=5571]="OpSubgroupShuffleINTEL",e[e.OpSubgroupShuffleDownINTEL=5572]="OpSubgroupShuffleDownINTEL",e[e.OpSubgroupShuffleUpINTEL=5573]="OpSubgroupShuffleUpINTEL",e[e.OpSubgroupShuffleXorINTEL=5574]="OpSubgroupShuffleXorINTEL",e[e.OpSubgroupBlockReadINTEL=5575]="OpSubgroupBlockReadINTEL",e[e.OpSubgroupBlockWriteINTEL=5576]="OpSubgroupBlockWriteINTEL",e[e.OpSubgroupImageBlockReadINTEL=5577]="OpSubgroupImageBlockReadINTEL",e[e.OpSubgroupImageBlockWriteINTEL=5578]="OpSubgroupImageBlockWriteINTEL",e[e.OpSubgroupImageMediaBlockReadINTEL=5580]="OpSubgroupImageMediaBlockReadINTEL",e[e.OpSubgroupImageMediaBlockWriteINTEL=5581]="OpSubgroupImageMediaBlockWriteINTEL",e[e.OpUCountLeadingZerosINTEL=5585]="OpUCountLeadingZerosINTEL",e[e.OpUCountTrailingZerosINTEL=5586]="OpUCountTrailingZerosINTEL",e[e.OpAbsISubINTEL=5587]="OpAbsISubINTEL",e[e.OpAbsUSubINTEL=5588]="OpAbsUSubINTEL",e[e.OpIAddSatINTEL=5589]="OpIAddSatINTEL",e[e.OpUAddSatINTEL=5590]="OpUAddSatINTEL",e[e.OpIAverageINTEL=5591]="OpIAverageINTEL",e[e.OpUAverageINTEL=5592]="OpUAverageINTEL",e[e.OpIAverageRoundedINTEL=5593]="OpIAverageRoundedINTEL",e[e.OpUAverageRoundedINTEL=5594]="OpUAverageRoundedINTEL",e[e.OpISubSatINTEL=5595]="OpISubSatINTEL",e[e.OpUSubSatINTEL=5596]="OpUSubSatINTEL",e[e.OpIMul32x16INTEL=5597]="OpIMul32x16INTEL",e[e.OpUMul32x16INTEL=5598]="OpUMul32x16INTEL",e[e.OpFunctionPointerINTEL=5600]="OpFunctionPointerINTEL",e[e.OpFunctionPointerCallINTEL=5601]="OpFunctionPointerCallINTEL",e[e.OpDecorateString=5632]="OpDecorateString",e[e.OpDecorateStringGOOGLE=5632]="OpDecorateStringGOOGLE",e[e.OpMemberDecorateString=5633]="OpMemberDecorateString",e[e.OpMemberDecorateStringGOOGLE=5633]="OpMemberDecorateStringGOOGLE",e[e.OpVmeImageINTEL=5699]="OpVmeImageINTEL",e[e.OpTypeVmeImageINTEL=5700]="OpTypeVmeImageINTEL",e[e.OpTypeAvcImePayloadINTEL=5701]="OpTypeAvcImePayloadINTEL",e[e.OpTypeAvcRefPayloadINTEL=5702]="OpTypeAvcRefPayloadINTEL",e[e.OpTypeAvcSicPayloadINTEL=5703]="OpTypeAvcSicPayloadINTEL",e[e.OpTypeAvcMcePayloadINTEL=5704]="OpTypeAvcMcePayloadINTEL",e[e.OpTypeAvcMceResultINTEL=5705]="OpTypeAvcMceResultINTEL",e[e.OpTypeAvcImeResultINTEL=5706]="OpTypeAvcImeResultINTEL",e[e.OpTypeAvcImeResultSingleReferenceStreamoutINTEL=5707]="OpTypeAvcImeResultSingleReferenceStreamoutINTEL",e[e.OpTypeAvcImeResultDualReferenceStreamoutINTEL=5708]="OpTypeAvcImeResultDualReferenceStreamoutINTEL",e[e.OpTypeAvcImeSingleReferenceStreaminINTEL=5709]="OpTypeAvcImeSingleReferenceStreaminINTEL",e[e.OpTypeAvcImeDualReferenceStreaminINTEL=5710]="OpTypeAvcImeDualReferenceStreaminINTEL",e[e.OpTypeAvcRefResultINTEL=5711]="OpTypeAvcRefResultINTEL",e[e.OpTypeAvcSicResultINTEL=5712]="OpTypeAvcSicResultINTEL",e[e.OpSubgroupAvcMceGetDefaultInterBaseMultiReferencePenaltyINTEL=5713]="OpSubgroupAvcMceGetDefaultInterBaseMultiReferencePenaltyINTEL",e[e.OpSubgroupAvcMceSetInterBaseMultiReferencePenaltyINTEL=5714]="OpSubgroupAvcMceSetInterBaseMultiReferencePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultInterShapePenaltyINTEL=5715]="OpSubgroupAvcMceGetDefaultInterShapePenaltyINTEL",e[e.OpSubgroupAvcMceSetInterShapePenaltyINTEL=5716]="OpSubgroupAvcMceSetInterShapePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultInterDirectionPenaltyINTEL=5717]="OpSubgroupAvcMceGetDefaultInterDirectionPenaltyINTEL",e[e.OpSubgroupAvcMceSetInterDirectionPenaltyINTEL=5718]="OpSubgroupAvcMceSetInterDirectionPenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultIntraLumaShapePenaltyINTEL=5719]="OpSubgroupAvcMceGetDefaultIntraLumaShapePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultInterMotionVectorCostTableINTEL=5720]="OpSubgroupAvcMceGetDefaultInterMotionVectorCostTableINTEL",e[e.OpSubgroupAvcMceGetDefaultHighPenaltyCostTableINTEL=5721]="OpSubgroupAvcMceGetDefaultHighPenaltyCostTableINTEL",e[e.OpSubgroupAvcMceGetDefaultMediumPenaltyCostTableINTEL=5722]="OpSubgroupAvcMceGetDefaultMediumPenaltyCostTableINTEL",e[e.OpSubgroupAvcMceGetDefaultLowPenaltyCostTableINTEL=5723]="OpSubgroupAvcMceGetDefaultLowPenaltyCostTableINTEL",e[e.OpSubgroupAvcMceSetMotionVectorCostFunctionINTEL=5724]="OpSubgroupAvcMceSetMotionVectorCostFunctionINTEL",e[e.OpSubgroupAvcMceGetDefaultIntraLumaModePenaltyINTEL=5725]="OpSubgroupAvcMceGetDefaultIntraLumaModePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultNonDcLumaIntraPenaltyINTEL=5726]="OpSubgroupAvcMceGetDefaultNonDcLumaIntraPenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultIntraChromaModeBasePenaltyINTEL=5727]="OpSubgroupAvcMceGetDefaultIntraChromaModeBasePenaltyINTEL",e[e.OpSubgroupAvcMceSetAcOnlyHaarINTEL=5728]="OpSubgroupAvcMceSetAcOnlyHaarINTEL",e[e.OpSubgroupAvcMceSetSourceInterlacedFieldPolarityINTEL=5729]="OpSubgroupAvcMceSetSourceInterlacedFieldPolarityINTEL",e[e.OpSubgroupAvcMceSetSingleReferenceInterlacedFieldPolarityINTEL=5730]="OpSubgroupAvcMceSetSingleReferenceInterlacedFieldPolarityINTEL",e[e.OpSubgroupAvcMceSetDualReferenceInterlacedFieldPolaritiesINTEL=5731]="OpSubgroupAvcMceSetDualReferenceInterlacedFieldPolaritiesINTEL",e[e.OpSubgroupAvcMceConvertToImePayloadINTEL=5732]="OpSubgroupAvcMceConvertToImePayloadINTEL",e[e.OpSubgroupAvcMceConvertToImeResultINTEL=5733]="OpSubgroupAvcMceConvertToImeResultINTEL",e[e.OpSubgroupAvcMceConvertToRefPayloadINTEL=5734]="OpSubgroupAvcMceConvertToRefPayloadINTEL",e[e.OpSubgroupAvcMceConvertToRefResultINTEL=5735]="OpSubgroupAvcMceConvertToRefResultINTEL",e[e.OpSubgroupAvcMceConvertToSicPayloadINTEL=5736]="OpSubgroupAvcMceConvertToSicPayloadINTEL",e[e.OpSubgroupAvcMceConvertToSicResultINTEL=5737]="OpSubgroupAvcMceConvertToSicResultINTEL",e[e.OpSubgroupAvcMceGetMotionVectorsINTEL=5738]="OpSubgroupAvcMceGetMotionVectorsINTEL",e[e.OpSubgroupAvcMceGetInterDistortionsINTEL=5739]="OpSubgroupAvcMceGetInterDistortionsINTEL",e[e.OpSubgroupAvcMceGetBestInterDistortionsINTEL=5740]="OpSubgroupAvcMceGetBestInterDistortionsINTEL",e[e.OpSubgroupAvcMceGetInterMajorShapeINTEL=5741]="OpSubgroupAvcMceGetInterMajorShapeINTEL",e[e.OpSubgroupAvcMceGetInterMinorShapeINTEL=5742]="OpSubgroupAvcMceGetInterMinorShapeINTEL",e[e.OpSubgroupAvcMceGetInterDirectionsINTEL=5743]="OpSubgroupAvcMceGetInterDirectionsINTEL",e[e.OpSubgroupAvcMceGetInterMotionVectorCountINTEL=5744]="OpSubgroupAvcMceGetInterMotionVectorCountINTEL",e[e.OpSubgroupAvcMceGetInterReferenceIdsINTEL=5745]="OpSubgroupAvcMceGetInterReferenceIdsINTEL",e[e.OpSubgroupAvcMceGetInterReferenceInterlacedFieldPolaritiesINTEL=5746]="OpSubgroupAvcMceGetInterReferenceInterlacedFieldPolaritiesINTEL",e[e.OpSubgroupAvcImeInitializeINTEL=5747]="OpSubgroupAvcImeInitializeINTEL",e[e.OpSubgroupAvcImeSetSingleReferenceINTEL=5748]="OpSubgroupAvcImeSetSingleReferenceINTEL",e[e.OpSubgroupAvcImeSetDualReferenceINTEL=5749]="OpSubgroupAvcImeSetDualReferenceINTEL",e[e.OpSubgroupAvcImeRefWindowSizeINTEL=5750]="OpSubgroupAvcImeRefWindowSizeINTEL",e[e.OpSubgroupAvcImeAdjustRefOffsetINTEL=5751]="OpSubgroupAvcImeAdjustRefOffsetINTEL",e[e.OpSubgroupAvcImeConvertToMcePayloadINTEL=5752]="OpSubgroupAvcImeConvertToMcePayloadINTEL",e[e.OpSubgroupAvcImeSetMaxMotionVectorCountINTEL=5753]="OpSubgroupAvcImeSetMaxMotionVectorCountINTEL",e[e.OpSubgroupAvcImeSetUnidirectionalMixDisableINTEL=5754]="OpSubgroupAvcImeSetUnidirectionalMixDisableINTEL",e[e.OpSubgroupAvcImeSetEarlySearchTerminationThresholdINTEL=5755]="OpSubgroupAvcImeSetEarlySearchTerminationThresholdINTEL",e[e.OpSubgroupAvcImeSetWeightedSadINTEL=5756]="OpSubgroupAvcImeSetWeightedSadINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceINTEL=5757]="OpSubgroupAvcImeEvaluateWithSingleReferenceINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceINTEL=5758]="OpSubgroupAvcImeEvaluateWithDualReferenceINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminINTEL=5759]="OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceStreaminINTEL=5760]="OpSubgroupAvcImeEvaluateWithDualReferenceStreaminINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceStreamoutINTEL=5761]="OpSubgroupAvcImeEvaluateWithSingleReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceStreamoutINTEL=5762]="OpSubgroupAvcImeEvaluateWithDualReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminoutINTEL=5763]="OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminoutINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceStreaminoutINTEL=5764]="OpSubgroupAvcImeEvaluateWithDualReferenceStreaminoutINTEL",e[e.OpSubgroupAvcImeConvertToMceResultINTEL=5765]="OpSubgroupAvcImeConvertToMceResultINTEL",e[e.OpSubgroupAvcImeGetSingleReferenceStreaminINTEL=5766]="OpSubgroupAvcImeGetSingleReferenceStreaminINTEL",e[e.OpSubgroupAvcImeGetDualReferenceStreaminINTEL=5767]="OpSubgroupAvcImeGetDualReferenceStreaminINTEL",e[e.OpSubgroupAvcImeStripSingleReferenceStreamoutINTEL=5768]="OpSubgroupAvcImeStripSingleReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeStripDualReferenceStreamoutINTEL=5769]="OpSubgroupAvcImeStripDualReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeMotionVectorsINTEL=5770]="OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeMotionVectorsINTEL",e[e.OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeDistortionsINTEL=5771]="OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeDistortionsINTEL",e[e.OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeReferenceIdsINTEL=5772]="OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeReferenceIdsINTEL",e[e.OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeMotionVectorsINTEL=5773]="OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeMotionVectorsINTEL",e[e.OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeDistortionsINTEL=5774]="OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeDistortionsINTEL",e[e.OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeReferenceIdsINTEL=5775]="OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeReferenceIdsINTEL",e[e.OpSubgroupAvcImeGetBorderReachedINTEL=5776]="OpSubgroupAvcImeGetBorderReachedINTEL",e[e.OpSubgroupAvcImeGetTruncatedSearchIndicationINTEL=5777]="OpSubgroupAvcImeGetTruncatedSearchIndicationINTEL",e[e.OpSubgroupAvcImeGetUnidirectionalEarlySearchTerminationINTEL=5778]="OpSubgroupAvcImeGetUnidirectionalEarlySearchTerminationINTEL",e[e.OpSubgroupAvcImeGetWeightingPatternMinimumMotionVectorINTEL=5779]="OpSubgroupAvcImeGetWeightingPatternMinimumMotionVectorINTEL",e[e.OpSubgroupAvcImeGetWeightingPatternMinimumDistortionINTEL=5780]="OpSubgroupAvcImeGetWeightingPatternMinimumDistortionINTEL",e[e.OpSubgroupAvcFmeInitializeINTEL=5781]="OpSubgroupAvcFmeInitializeINTEL",e[e.OpSubgroupAvcBmeInitializeINTEL=5782]="OpSubgroupAvcBmeInitializeINTEL",e[e.OpSubgroupAvcRefConvertToMcePayloadINTEL=5783]="OpSubgroupAvcRefConvertToMcePayloadINTEL",e[e.OpSubgroupAvcRefSetBidirectionalMixDisableINTEL=5784]="OpSubgroupAvcRefSetBidirectionalMixDisableINTEL",e[e.OpSubgroupAvcRefSetBilinearFilterEnableINTEL=5785]="OpSubgroupAvcRefSetBilinearFilterEnableINTEL",e[e.OpSubgroupAvcRefEvaluateWithSingleReferenceINTEL=5786]="OpSubgroupAvcRefEvaluateWithSingleReferenceINTEL",e[e.OpSubgroupAvcRefEvaluateWithDualReferenceINTEL=5787]="OpSubgroupAvcRefEvaluateWithDualReferenceINTEL",e[e.OpSubgroupAvcRefEvaluateWithMultiReferenceINTEL=5788]="OpSubgroupAvcRefEvaluateWithMultiReferenceINTEL",e[e.OpSubgroupAvcRefEvaluateWithMultiReferenceInterlacedINTEL=5789]="OpSubgroupAvcRefEvaluateWithMultiReferenceInterlacedINTEL",e[e.OpSubgroupAvcRefConvertToMceResultINTEL=5790]="OpSubgroupAvcRefConvertToMceResultINTEL",e[e.OpSubgroupAvcSicInitializeINTEL=5791]="OpSubgroupAvcSicInitializeINTEL",e[e.OpSubgroupAvcSicConfigureSkcINTEL=5792]="OpSubgroupAvcSicConfigureSkcINTEL",e[e.OpSubgroupAvcSicConfigureIpeLumaINTEL=5793]="OpSubgroupAvcSicConfigureIpeLumaINTEL",e[e.OpSubgroupAvcSicConfigureIpeLumaChromaINTEL=5794]="OpSubgroupAvcSicConfigureIpeLumaChromaINTEL",e[e.OpSubgroupAvcSicGetMotionVectorMaskINTEL=5795]="OpSubgroupAvcSicGetMotionVectorMaskINTEL",e[e.OpSubgroupAvcSicConvertToMcePayloadINTEL=5796]="OpSubgroupAvcSicConvertToMcePayloadINTEL",e[e.OpSubgroupAvcSicSetIntraLumaShapePenaltyINTEL=5797]="OpSubgroupAvcSicSetIntraLumaShapePenaltyINTEL",e[e.OpSubgroupAvcSicSetIntraLumaModeCostFunctionINTEL=5798]="OpSubgroupAvcSicSetIntraLumaModeCostFunctionINTEL",e[e.OpSubgroupAvcSicSetIntraChromaModeCostFunctionINTEL=5799]="OpSubgroupAvcSicSetIntraChromaModeCostFunctionINTEL",e[e.OpSubgroupAvcSicSetBilinearFilterEnableINTEL=5800]="OpSubgroupAvcSicSetBilinearFilterEnableINTEL",e[e.OpSubgroupAvcSicSetSkcForwardTransformEnableINTEL=5801]="OpSubgroupAvcSicSetSkcForwardTransformEnableINTEL",e[e.OpSubgroupAvcSicSetBlockBasedRawSkipSadINTEL=5802]="OpSubgroupAvcSicSetBlockBasedRawSkipSadINTEL",e[e.OpSubgroupAvcSicEvaluateIpeINTEL=5803]="OpSubgroupAvcSicEvaluateIpeINTEL",e[e.OpSubgroupAvcSicEvaluateWithSingleReferenceINTEL=5804]="OpSubgroupAvcSicEvaluateWithSingleReferenceINTEL",e[e.OpSubgroupAvcSicEvaluateWithDualReferenceINTEL=5805]="OpSubgroupAvcSicEvaluateWithDualReferenceINTEL",e[e.OpSubgroupAvcSicEvaluateWithMultiReferenceINTEL=5806]="OpSubgroupAvcSicEvaluateWithMultiReferenceINTEL",e[e.OpSubgroupAvcSicEvaluateWithMultiReferenceInterlacedINTEL=5807]="OpSubgroupAvcSicEvaluateWithMultiReferenceInterlacedINTEL",e[e.OpSubgroupAvcSicConvertToMceResultINTEL=5808]="OpSubgroupAvcSicConvertToMceResultINTEL",e[e.OpSubgroupAvcSicGetIpeLumaShapeINTEL=5809]="OpSubgroupAvcSicGetIpeLumaShapeINTEL",e[e.OpSubgroupAvcSicGetBestIpeLumaDistortionINTEL=5810]="OpSubgroupAvcSicGetBestIpeLumaDistortionINTEL",e[e.OpSubgroupAvcSicGetBestIpeChromaDistortionINTEL=5811]="OpSubgroupAvcSicGetBestIpeChromaDistortionINTEL",e[e.OpSubgroupAvcSicGetPackedIpeLumaModesINTEL=5812]="OpSubgroupAvcSicGetPackedIpeLumaModesINTEL",e[e.OpSubgroupAvcSicGetIpeChromaModeINTEL=5813]="OpSubgroupAvcSicGetIpeChromaModeINTEL",e[e.OpSubgroupAvcSicGetPackedSkcLumaCountThresholdINTEL=5814]="OpSubgroupAvcSicGetPackedSkcLumaCountThresholdINTEL",e[e.OpSubgroupAvcSicGetPackedSkcLumaSumThresholdINTEL=5815]="OpSubgroupAvcSicGetPackedSkcLumaSumThresholdINTEL",e[e.OpSubgroupAvcSicGetInterRawSadsINTEL=5816]="OpSubgroupAvcSicGetInterRawSadsINTEL",e[e.OpLoopControlINTEL=5887]="OpLoopControlINTEL",e[e.OpReadPipeBlockingINTEL=5946]="OpReadPipeBlockingINTEL",e[e.OpWritePipeBlockingINTEL=5947]="OpWritePipeBlockingINTEL",e[e.OpFPGARegINTEL=5949]="OpFPGARegINTEL",e[e.OpRayQueryGetRayTMinKHR=6016]="OpRayQueryGetRayTMinKHR",e[e.OpRayQueryGetRayFlagsKHR=6017]="OpRayQueryGetRayFlagsKHR",e[e.OpRayQueryGetIntersectionTKHR=6018]="OpRayQueryGetIntersectionTKHR",e[e.OpRayQueryGetIntersectionInstanceCustomIndexKHR=6019]="OpRayQueryGetIntersectionInstanceCustomIndexKHR",e[e.OpRayQueryGetIntersectionInstanceIdKHR=6020]="OpRayQueryGetIntersectionInstanceIdKHR",e[e.OpRayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR=6021]="OpRayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR",e[e.OpRayQueryGetIntersectionGeometryIndexKHR=6022]="OpRayQueryGetIntersectionGeometryIndexKHR",e[e.OpRayQueryGetIntersectionPrimitiveIndexKHR=6023]="OpRayQueryGetIntersectionPrimitiveIndexKHR",e[e.OpRayQueryGetIntersectionBarycentricsKHR=6024]="OpRayQueryGetIntersectionBarycentricsKHR",e[e.OpRayQueryGetIntersectionFrontFaceKHR=6025]="OpRayQueryGetIntersectionFrontFaceKHR",e[e.OpRayQueryGetIntersectionCandidateAABBOpaqueKHR=6026]="OpRayQueryGetIntersectionCandidateAABBOpaqueKHR",e[e.OpRayQueryGetIntersectionObjectRayDirectionKHR=6027]="OpRayQueryGetIntersectionObjectRayDirectionKHR",e[e.OpRayQueryGetIntersectionObjectRayOriginKHR=6028]="OpRayQueryGetIntersectionObjectRayOriginKHR",e[e.OpRayQueryGetWorldRayDirectionKHR=6029]="OpRayQueryGetWorldRayDirectionKHR",e[e.OpRayQueryGetWorldRayOriginKHR=6030]="OpRayQueryGetWorldRayOriginKHR",e[e.OpRayQueryGetIntersectionObjectToWorldKHR=6031]="OpRayQueryGetIntersectionObjectToWorldKHR",e[e.OpRayQueryGetIntersectionWorldToObjectKHR=6032]="OpRayQueryGetIntersectionWorldToObjectKHR",e[e.OpAtomicFAddEXT=6035]="OpAtomicFAddEXT",e[e.OpMax=2147483647]="OpMax"}(se||(se={})),function(e){e[e.SPIRVCrossDecorationBufferBlockRepacked=0]="SPIRVCrossDecorationBufferBlockRepacked",e[e.SPIRVCrossDecorationPhysicalTypeID=1]="SPIRVCrossDecorationPhysicalTypeID",e[e.SPIRVCrossDecorationPhysicalTypePacked=2]="SPIRVCrossDecorationPhysicalTypePacked",e[e.SPIRVCrossDecorationPaddingTarget=3]="SPIRVCrossDecorationPaddingTarget",e[e.SPIRVCrossDecorationInterfaceMemberIndex=4]="SPIRVCrossDecorationInterfaceMemberIndex",e[e.SPIRVCrossDecorationInterfaceOrigID=5]="SPIRVCrossDecorationInterfaceOrigID",e[e.SPIRVCrossDecorationResourceIndexPrimary=6]="SPIRVCrossDecorationResourceIndexPrimary",e[e.SPIRVCrossDecorationResourceIndexSecondary=7]="SPIRVCrossDecorationResourceIndexSecondary",e[e.SPIRVCrossDecorationResourceIndexTertiary=8]="SPIRVCrossDecorationResourceIndexTertiary",e[e.SPIRVCrossDecorationResourceIndexQuaternary=9]="SPIRVCrossDecorationResourceIndexQuaternary",e[e.SPIRVCrossDecorationExplicitOffset=10]="SPIRVCrossDecorationExplicitOffset",e[e.SPIRVCrossDecorationBuiltInDispatchBase=11]="SPIRVCrossDecorationBuiltInDispatchBase",e[e.SPIRVCrossDecorationDynamicImageSampler=12]="SPIRVCrossDecorationDynamicImageSampler",e[e.SPIRVCrossDecorationBuiltInStageInputSize=13]="SPIRVCrossDecorationBuiltInStageInputSize",e[e.SPIRVCrossDecorationTessIOOriginalInputTypeID=14]="SPIRVCrossDecorationTessIOOriginalInputTypeID",e[e.SPIRVCrossDecorationInterpolantComponentExpr=15]="SPIRVCrossDecorationInterpolantComponentExpr",e[e.SPIRVCrossDecorationCount=16]="SPIRVCrossDecorationCount"}(ce||(ce={}));var ue,_e=function(){this.flags=new le,this.values=new Uint32Array(ce.SPIRVCrossDecorationCount)},fe=function(){this.decoration_flags=new le,this.builtin_type=P.BuiltInMax,this.location=0,this.component=0,this.set=0,this.binding=0,this.offset=0,this.xfb_buffer=0,this.xfb_stride=0,this.stream=0,this.array_stride=0,this.matrix_stride=0,this.input_attachment=0,this.spec_id=0,this.index=0,this.fp_rounding_mode=D.FPRoundingModeMax,this.builtin=!1,this.extended=new _e},me=function(){this.decoration=new fe,this.members=[],this.decoration_word_offset=[],this.hlsl_is_magic_counter_buffer=!1,this.hlsl_magic_counter_buffer=0},de=function(){function e(e,t){this.owner=e,this.propName=t}return e.prototype.get=function(){return this.owner[this.propName]},e.prototype.set=function(e){this.owner[this.propName]=e},e}(),he=function(){function e(){this.self=0}return e.prototype.clone=function(e){var t=e.allocate(this);return f(this,t),t},e}(),ge=function(e){function r(t){var a=e.call(this)||this;return a.basetype=0,a.storage=I.StorageClassGeneric,a.decoration=0,a.initializer=0,a.basevariable=0,a.compat_builtin=!1,a.statically_assigned=!1,a.static_expression=0,a.dependees=[],a.forwardable=!0,a.deferred_declaration=!1,a.phi_variable=!1,a.allocate_temporary_copy=!1,a.remapped_variable=!1,a.remapped_components=0,a.dominator=0,a.loop_variable=!1,a.loop_variable_enable=!1,a.parameter=null,t instanceof r?f(a,t):a.basetype=t,a}return i(r,e),r.type=t.TypeVariable,r}(he);!function(e){e[e.Unknown=0]="Unknown",e[e.Void=1]="Void",e[e.Boolean=2]="Boolean",e[e.SByte=3]="SByte",e[e.UByte=4]="UByte",e[e.Short=5]="Short",e[e.UShort=6]="UShort",e[e.Int=7]="Int",e[e.UInt=8]="UInt",e[e.Int64=9]="Int64",e[e.UInt64=10]="UInt64",e[e.AtomicCounter=11]="AtomicCounter",e[e.Half=12]="Half",e[e.Float=13]="Float",e[e.Double=14]="Double",e[e.Struct=15]="Struct",e[e.Image=16]="Image",e[e.SampledImage=17]="SampledImage",e[e.Sampler=18]="Sampler",e[e.AccelerationStructure=19]="AccelerationStructure",e[e.RayQuery=20]="RayQuery",e[e.ControlPointArray=21]="ControlPointArray",e[e.Interpolant=22]="Interpolant",e[e.Char=23]="Char"}(ue||(ue={}));var ye,be,Se,Ie,ve,Oe=function(){function e(){}return e.prototype.clone=function(){return m(e,this)},e.prototype.equals=function(e){return this.type===e.type&&this.dim===e.dim&&this.depth===e.depth&&this.arrayed===e.arrayed&&this.ms===e.ms&&this.sampled===e.sampled&&this.format===e.format&&this.access===e.access},e}(),Ce=function(e){function r(t){var r=e.call(this)||this;return r.basetype=ue.Unknown,r.width=0,r.vecsize=1,r.columns=1,r.array=[],r.array_size_literal=[],r.pointer_depth=0,r.pointer=!1,r.forward_pointer=!1,r.storage=I.StorageClassGeneric,r.member_types=[],r.member_type_index_redirection=[],r.image=new Oe,r.type_alias=0,r.parent_type=0,r.member_name_cache=new Set,t&&f(r,t),r}return i(r,e),r.type=t.TypeType,r}(he),Ee=new DataView(new ArrayBuffer(4)),xe=function(){function e(){this.value=new ArrayBuffer(16),this._dataView=new DataView(this.value)}return Object.defineProperty(e.prototype,"u32",{get:function(){return this._dataView.getUint32(0)},set:function(e){this._dataView.setUint32(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i32",{get:function(){return this._dataView.getInt32(0)},set:function(e){this._dataView.setInt32(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f32",{get:function(){return this._dataView.getFloat32(0)},set:function(e){this._dataView.setFloat32(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"u64",{get:function(){return this._dataView.getBigUint64(0)},set:function(e){this._dataView.setBigUint64(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i64",{get:function(){return this._dataView.getBigInt64(0)},set:function(e){this._dataView.setBigInt64(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this._dataView.getFloat64(0)},set:function(e){this._dataView.setFloat64(0,e)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return m(e,this)},e}(),ke=function(){function e(){this.vecsize=1,this.r=n(4,(function(){return new xe})),this.id=n(4,(function(){return 0}))}return e.prototype.clone=function(){return m(e,this)},e}(),Le=function(){function e(){this.columns=1,this.c=n(4,(function(){return new ke})),this.id=n(4,(function(){return 0}))}return e.prototype.clone=function(){return m(e,this)},e}(),Me=function(e){function r(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var i=e.call(this)||this;return i.constant_type=0,i.m=new Le,i.specialization=!1,i.is_used_as_array_length=!1,i.is_used_as_lut=!1,i.subconstants=new Uint32Array,i.specialization_constant_macro_name="",0===t.length||(1===t.length?t[0]instanceof r?f(t[0],i):i._construct(t[0]):"bigint"==typeof t[1]?i._constructScalar64(t[0],t[1],t[2]):"number"==typeof t[1]?i._constructScalar32(t[0],t[1],t[2]):"number"==typeof t[1][0]?i._constructArray(t[0],t[1],t[2],t[3]):i._constructVecMat(t[0],t[1],t[2],t[3])),i}return i(r,e),r.prototype.f16_to_f32=function(e){var t=e>>15&1,r=e>>10&31,a=e>>0&1023;if(0===r){if(0===a)return Ee.setUint32(0,t<<31),Ee.getFloat32(0);for(;0==(1024&a);)a<<=1,r--;r++,a&=-1025}else if(31===r)return 0===a?(Ee.setUint32(0,t<<31|2139095040),Ee.getFloat32(0)):(Ee.setUint32(0,t<<31|2139095040|a<<13),Ee.getFloat32(0));return r+=112,a<<=13,Ee.setUint32(0,t<<31|r<<23|a),Ee.getFloat32(0)},r.prototype.specialization_constant_id=function(e,t){return void 0===t?this.m.id[e]:this.m.c[e].id[t]},r.prototype.scalar=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].u32},r.prototype.scalar_i16=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),65535&this.m.c[e].r[t].u32},r.prototype.scalar_u16=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),65535&this.m.c[e].r[t].u32},r.prototype.scalar_i8=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),255&this.m.c[e].r[t].u32},r.prototype.scalar_u8=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),255&this.m.c[e].r[t].u32},r.prototype.scalar_f16=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.f16_to_f32(this.scalar_u16(e,t))},r.prototype.scalar_f32=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].f32},r.prototype.scalar_i32=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].i32},r.prototype.scalar_f64=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].f64},r.prototype.scalar_i64=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].i64},r.prototype.scalar_u64=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].u64},r.prototype.vector=function(){return this.m.c[0]},r.prototype.vector_size=function(){return this.m.c[0].vecsize},r.prototype.columns=function(){return this.m.columns},r.prototype.make_null=function(e){this.m=new Le,this.m.columns=e.columns;for(var t=0,r=this.m.c;t<r.length;t++){r[t].vecsize=e.vecsize}},r.prototype.constant_is_null=function(){if(this.specialization)return!1;if(0!==this.subconstants.length)return!1;for(var e=0;e<this.columns();e++)for(var t=0;t<this.vector_size();t++)if(this.scalar_u64(e,t)!==BigInt(0))return!1;return!0},r.prototype._construct=function(e){this.constant_type=e},r.prototype._constructArray=function(e,t,r,a){this.constant_type=e,this.specialization=a,this.subconstants=t},r.prototype._constructScalar32=function(e,t,r){this.constant_type=e,this.specialization=r,this.m.c[0].r[0].u32=t,this.m.c[0].vecsize=1,this.m.columns=1},r.prototype._constructScalar64=function(e,t,r){this.constant_type=e,this.specialization=r,this.m.c[0].r[0].u64=t,this.m.c[0].vecsize=1,this.m.columns=1},r.prototype._constructVecMat=function(e,t,r,a){if(this.constant_type=e,this.specialization=a,t[0].m.c[0].vecsize>1){this.m.columns=r;for(var i=0;i<r;i++)this.m.c[i]=t[i].m.c[0],t[i].specialization&&(this.m.id[i]=t[i].self)}else{this.m.c[0].vecsize=r,this.m.columns=1;for(i=0;i<r;i++)this.m.c[0].r[i]=t[i].m.c[0].r[0],t[i].specialization&&(this.m.c[0].id[i]=t[i].self)}},r.type=t.TypeConstant,r}(he),Re=function(e){function r(t,a,i){var o=e.call(this)||this;return o.arguments=[],t instanceof r?f(o,t):(o.basetype=t,o.opcode=a,o.arguments=i.slice()),o}return i(r,e),r.type=t.TypeConstantOp,r}(he),Te=function(e){function t(t){var r=e.call(this)||this;return r.classRef=t,r}return i(t,e),t.prototype.allocate=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=this.classRef).bind.apply(e,o([void 0],t,!1)))},t.prototype.deallocate=function(e){},t.prototype.deallocate_opaque=function(e){this.deallocate(e)},t.prototype.clear=function(){},t}((function(){})),De=function(){function e(e,t,r,a,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=!1),this.type=e,this.id=t,this.read_count=r,this.write_count=a,this.alias_global_variable=i}return e.prototype.clone=function(){return m(e,this)},e}(),Ae=function(){function e(e,t,r,a,i,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),this.id=e,this.image_id=t,this.sampler_id=r,this.global_image=a,this.global_sampler=i,this.depth=o}return e.prototype.clone=function(){return m(e,this)},e}(),Be=function(){function e(){this.file_id=0,this.line_literal=0}return e.prototype.clone=function(){return m(e,this)},e}(),we=function(e){function r(t,a){var i=e.call(this)||this;return i.arguments=[],i.shadow_arguments=[],i.local_variables=[],i.entry_block=0,i.blocks=[],i.combined_parameters=[],i.entry_line=new Be,i.fixup_hooks_out=[],i.fixup_hooks_in=[],i.constant_arrays_needed_on_stack=[],i.active=!1,i.flush_undeclared=!0,i.do_combined_parameters=!0,t instanceof r?f(i,t):(i.return_type=t,i.function_type=a),i}return i(r,e),r.prototype.add_local_variable=function(e){this.local_variables.push(e)},r.prototype.add_parameter=function(e,t,r){void 0===r&&(r=!1),this.arguments.push(new De(e,t,0,0,r))},r.type=t.TypeFunction,r}(he),Ne=function(e){function r(t){var a=e.call(this)||this;return a.parameter_types=[],t instanceof r?f(a,t):a.return_type=t,a}return i(r,e),r.type=t.TypeFunctionPrototype,r}(he);!function(e){e[e.Unknown=0]="Unknown",e[e.Direct=1]="Direct",e[e.Select=2]="Select",e[e.MultiSelect=3]="MultiSelect",e[e.Return=4]="Return",e[e.Unreachable=5]="Unreachable",e[e.Kill=6]="Kill",e[e.IgnoreIntersection=7]="IgnoreIntersection",e[e.TerminateRay=8]="TerminateRay"}(ye||(ye={})),function(e){e[e.MergeNone=0]="MergeNone",e[e.MergeLoop=1]="MergeLoop",e[e.MergeSelection=2]="MergeSelection"}(be||(be={})),function(e){e[e.HintNone=0]="HintNone",e[e.HintUnroll=1]="HintUnroll",e[e.HintDontUnroll=2]="HintDontUnroll",e[e.HintFlatten=3]="HintFlatten",e[e.HintDontFlatten=4]="HintDontFlatten"}(Se||(Se={})),function(e){e[e.MergeToSelectForLoop=0]="MergeToSelectForLoop",e[e.MergeToDirectForLoop=1]="MergeToDirectForLoop",e[e.MergeToSelectContinueForLoop=2]="MergeToSelectContinueForLoop"}(Ie||(Ie={})),function(e){e[e.ContinueNone=0]="ContinueNone",e[e.ForLoop=1]="ForLoop",e[e.WhileLoop=2]="WhileLoop",e[e.DoWhileLoop=3]="DoWhileLoop",e[e.ComplexLoop=4]="ComplexLoop"}(ve||(ve={}));var Pe,Ge=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.local_variable=e,this.parent=t,this.function_variable=r}return e.prototype.clone=function(){return m(e,this)},e}(),Fe=function(){function e(e,t){void 0===e&&(e=BigInt(0)),void 0===t&&(t=0),this.value=e,this.block=t}return e.prototype.clone=function(){return m(e,this)},e}(),Ue=function(e){function r(t){var r=e.call(this)||this;return r.terminator=ye.Unknown,r.merge=be.MergeNone,r.hint=Se.HintNone,r.next_block=0,r.merge_block=0,r.continue_block=0,r.return_value=0,r.condition=0,r.true_block=0,r.false_block=0,r.default_block=0,r.ops=[],r.phi_variables=[],r.declare_temporary=[],r.potential_declare_temporary=[],r.cases_32bit=[],r.cases_64bit=[],r.disable_block_optimization=!1,r.complex_continue=!1,r.need_ladder_break=!1,r.ignore_phi_from_block=0,r.loop_dominator=0,r.dominated_variables=[],r.loop_variables=[],r.invalidate_expressions=[],t&&f(t,r),r}return i(r,e),r.type=t.TypeBlock,r.NoDominator=4294967295,r}(he);!function(e){e[e.Unsupported=0]="Unsupported",e[e.GLSL=1]="GLSL",e[e.SPV_debug_info=2]="SPV_debug_info",e[e.SPV_AMD_shader_ballot=3]="SPV_AMD_shader_ballot",e[e.SPV_AMD_shader_explicit_vertex_parameter=4]="SPV_AMD_shader_explicit_vertex_parameter",e[e.SPV_AMD_shader_trinary_minmax=5]="SPV_AMD_shader_trinary_minmax",e[e.SPV_AMD_gcn_shader=6]="SPV_AMD_gcn_shader"}(Pe||(Pe={}));var Ve,ze=function(e){function r(t){var a=e.call(this)||this;return t instanceof r?f(a,t):a.ext=t,a}return i(r,e),r.type=t.TypeExtension,r}(he),He=function(e){function r(t,a,i){var o=e.call(this)||this;return o.base_expression=0,o.expression_type=0,o.loaded_from=0,o.immutable=!1,o.need_transpose=!1,o.access_chain=!1,o.expression_dependencies=[],o.implied_read_expressions=[],o.emitted_loop_level=0,t instanceof r?f(o,t):(o.expression=t,o.expression_type=a,o.immutable=i),o}return i(r,e),r.type=t.TypeExpression,r}(he),Ke=function(e){function r(t,a,i){var o=e.call(this)||this;return t instanceof r?f(o,t):(o.combined_type=t,o.image=a,o.sampler=i),o}return i(r,e),r.type=t.TypeCombinedImageSampler,r}(he),qe=function(e){function r(t,a,i,o,n){void 0===t&&(t=0);var s=e.call(this)||this;return s.loaded_from=0,s.matrix_stride=0,s.array_stride=0,s.row_major_matrix=!1,s.immutable=!1,s.implied_read_expressions=[],t instanceof r?f(t,s):(s.basetype=t,s.base=i,s.dynamic_index=o,s.static_index=n),s}return i(r,e),r.type=t.TypeAccessChain,r}(he),Xe=function(e){function r(t){var a=e.call(this)||this;return t instanceof r?f(a,t):a.basetype=t,a}return i(r,e),r.type=t.TypeUndef,r}(he),We=function(e){function r(t){var a=e.call(this)||this;return t instanceof r?f(a,t):a.str=t,a}return i(r,e),r.type=t.TypeString,r}(he);function Qe(e,t,r){return e.substring(0,t)+r+e.substring(t+1)}function je(e,t,r){return void 0===t?e.toString():e.toString()+(r?"ll":"l")}!function(e){e[e.BLOCK_META_LOOP_HEADER_BIT=1]="BLOCK_META_LOOP_HEADER_BIT",e[e.BLOCK_META_CONTINUE_BIT=2]="BLOCK_META_CONTINUE_BIT",e[e.BLOCK_META_LOOP_MERGE_BIT=4]="BLOCK_META_LOOP_MERGE_BIT",e[e.BLOCK_META_SELECTION_MERGE_BIT=8]="BLOCK_META_SELECTION_MERGE_BIT",e[e.BLOCK_META_MULTISELECT_MERGE_BIT=16]="BLOCK_META_MULTISELECT_MERGE_BIT"}(Ve||(Ve={}));var Ze=function(){this.version=0,this.es=!1,this.known=!1,this.hlsl=!1},Ye=function(){function e(e){this.lock=e,this.lock.set(this.lock.get()+1)}return e.prototype.dispose=function(){this.lock.set(this.lock.get()-1)},e}(),Je=function(){function e(){this.ids=[],this.meta=[],this.ids_for_type=new Array(t.TypeCount),this.ids_for_constant_or_type=[],this.ids_for_constant_or_variable=[],this.load_type_width=[],this.declared_capabilities=[],this.declared_extensions=[],this.block_meta=[],this.continue_block_to_loop_header=[],this.entry_points=[],this.default_entry_point=0,this.source=new Ze,this.addressing_model=y.AddressingModelMax,this.memory_model=b.MemoryModelMax,this.loop_iteration_depth_hard=0,this.loop_iteration_depth_soft=0,this.empty_string="",this.cleared_bitset=new le,this.meta_needing_name_fixup=new Set;for(var e=0;e<this.ids_for_type.length;++e)this.ids_for_type[e]=[];this.pool_group=new _,this.pool_group.pools[t.TypeType]=new Te(Ce),this.pool_group.pools[t.TypeVariable]=new Te(ge),this.pool_group.pools[t.TypeConstant]=new Te(Me),this.pool_group.pools[t.TypeFunction]=new Te(we),this.pool_group.pools[t.TypeFunctionPrototype]=new Te(Ne),this.pool_group.pools[t.TypeBlock]=new Te(Ue),this.pool_group.pools[t.TypeExtension]=new Te(ze),this.pool_group.pools[t.TypeExpression]=new Te(He),this.pool_group.pools[t.TypeConstantOp]=new Te(Re),this.pool_group.pools[t.TypeCombinedImageSampler]=new Te(Ke),this.pool_group.pools[t.TypeAccessChain]=new Te(qe),this.pool_group.pools[t.TypeUndef]=new Te(Xe),this.pool_group.pools[t.TypeString]=new Te(We)}return e.prototype.set_id_bounds=function(e){var t=this;this.ids=n(e,(function(){return new l(t.pool_group)})),this.block_meta=n(e,(function(){return 0}))},e.prototype.set_name=function(e,t){this.get_meta(e).decoration.alias=t,tt(t)&&!at(t,!1,!1)||this.meta_needing_name_fixup.add(e)},e.prototype.get_name=function(e){var t=this.find_meta(e);return t?t.decoration.alias:this.empty_string},e.prototype.set_decoration=function(e,t,r){void 0===r&&(r=0);var a=this.get_meta(e).decoration;switch(a.decoration_flags.set(t),t){case N.DecorationBuiltIn:a.builtin=!0,a.builtin_type=r;break;case N.DecorationLocation:a.location=r;break;case N.DecorationComponent:a.component=r;break;case N.DecorationOffset:a.offset=r;break;case N.DecorationXfbBuffer:a.xfb_buffer=r;break;case N.DecorationXfbStride:a.xfb_stride=r;break;case N.DecorationStream:a.stream=r;break;case N.DecorationArrayStride:a.array_stride=r;break;case N.DecorationMatrixStride:a.matrix_stride=r;break;case N.DecorationBinding:a.binding=r;break;case N.DecorationDescriptorSet:a.set=r;break;case N.DecorationInputAttachmentIndex:a.input_attachment=r;break;case N.DecorationSpecId:a.spec_id=r;break;case N.DecorationIndex:a.index=r;break;case N.DecorationHlslCounterBufferGOOGLE:this.get_meta(e).hlsl_magic_counter_buffer=r,this.meta[r].hlsl_is_magic_counter_buffer=!0;break;case N.DecorationFPRoundingMode:a.fp_rounding_mode=r}},e.prototype.set_decoration_string=function(e,t,r){var a=this.get_meta(e).decoration;if(a.decoration_flags.set(t),t===N.DecorationHlslSemanticGOOGLE)a.hlsl_semantic=r},e.prototype.has_decoration=function(e,t){return this.get_decoration_bitset(e).get(t)},e.prototype.get_decoration=function(e,t){var r=this.find_meta(e);if(!r)return 0;var a=r.decoration;if(!a.decoration_flags.get(t))return 0;switch(t){case N.DecorationBuiltIn:return a.builtin_type;case N.DecorationLocation:return a.location;case N.DecorationComponent:return a.component;case N.DecorationOffset:return a.offset;case N.DecorationXfbBuffer:return a.xfb_buffer;case N.DecorationXfbStride:return a.xfb_stride;case N.DecorationStream:return a.stream;case N.DecorationBinding:return a.binding;case N.DecorationDescriptorSet:return a.set;case N.DecorationInputAttachmentIndex:return a.input_attachment;case N.DecorationSpecId:return a.spec_id;case N.DecorationArrayStride:return a.array_stride;case N.DecorationMatrixStride:return a.matrix_stride;case N.DecorationIndex:return a.index;case N.DecorationFPRoundingMode:return a.fp_rounding_mode;default:return 1}},e.prototype.get_decoration_string=function(e,t){var r=this.find_meta(e);if(!r)return this.empty_string;var a=r.decoration;return a.decoration_flags.get(t)&&t===N.DecorationHlslSemanticGOOGLE?a.hlsl_semantic:this.empty_string},e.prototype.get_decoration_bitset=function(e){var t=this.find_meta(e);return t?t.decoration.decoration_flags:this.cleared_bitset},e.prototype.unset_decoration=function(e,t){var r=this.get_meta(e).decoration;switch(r.decoration_flags.clear(t),t){case N.DecorationBuiltIn:r.builtin=!1;break;case N.DecorationLocation:r.location=0;break;case N.DecorationComponent:r.component=0;break;case N.DecorationOffset:r.offset=0;break;case N.DecorationXfbBuffer:r.xfb_buffer=0;break;case N.DecorationXfbStride:r.xfb_stride=0;break;case N.DecorationStream:r.stream=0;break;case N.DecorationBinding:r.binding=0;break;case N.DecorationDescriptorSet:r.set=0;break;case N.DecorationInputAttachmentIndex:r.input_attachment=0;break;case N.DecorationSpecId:r.spec_id=0;break;case N.DecorationHlslSemanticGOOGLE:r.hlsl_semantic="";break;case N.DecorationFPRoundingMode:r.fp_rounding_mode=D.FPRoundingModeMax;break;case N.DecorationHlslCounterBufferGOOGLE:var a=this.get_meta(e),i=a.hlsl_magic_counter_buffer;i&&(this.meta[i].hlsl_is_magic_counter_buffer=!1,a.hlsl_magic_counter_buffer=0)}},e.prototype.resize_members=function(e,t){var r=e.length;e.length=t;for(var a=r;a<t;++a)e[a]=new fe},e.prototype.set_member_name=function(e,t,r){var a=this.get_meta(e);this.resize_members(a.members,Math.max(a.members.length,t+1)),a.members[t].alias=r,tt(r)&&!at(r,!0,!1)||this.meta_needing_name_fixup.add(e)},e.prototype.get_member_name=function(e,t){var r=this.find_meta(e);return r?t>=r.members.length?this.empty_string:r.members[t].alias:this.empty_string},e.prototype.set_member_decoration=function(e,t,r,a){void 0===a&&(a=0);var i=this.get_meta(e);this.resize_members(i.members,Math.max(i.members.length,t+1));var o=i.members[t];switch(o.decoration_flags.set(r),r){case N.DecorationBuiltIn:o.builtin=!0,o.builtin_type=a;break;case N.DecorationLocation:o.location=a;break;case N.DecorationComponent:o.component=a;break;case N.DecorationBinding:o.binding=a;break;case N.DecorationOffset:o.offset=a;break;case N.DecorationXfbBuffer:o.xfb_buffer=a;break;case N.DecorationXfbStride:o.xfb_stride=a;break;case N.DecorationStream:o.stream=a;break;case N.DecorationSpecId:o.spec_id=a;break;case N.DecorationMatrixStride:o.matrix_stride=a;break;case N.DecorationIndex:o.index=a}},e.prototype.set_member_decoration_string=function(e,t,r,a){var i=this.get_meta(e);this.resize_members(i.members,Math.max(i.members.length,t+1));var o=i.members[t];if(o.decoration_flags.set(r),r===N.DecorationHlslSemanticGOOGLE)o.hlsl_semantic=a},e.prototype.get_member_decoration=function(e,t,r){var a=this.find_meta(e);if(!a)return 0;if(t>=a.members.length)return 0;var i=a.members[t];if(!i.decoration_flags.get(r))return 0;switch(r){case N.DecorationBuiltIn:return i.builtin_type;case N.DecorationLocation:return i.location;case N.DecorationComponent:return i.component;case N.DecorationBinding:return i.binding;case N.DecorationOffset:return i.offset;case N.DecorationXfbBuffer:return i.xfb_buffer;case N.DecorationXfbStride:return i.xfb_stride;case N.DecorationStream:return i.stream;case N.DecorationSpecId:return i.spec_id;case N.DecorationIndex:return i.index;default:return 1}},e.prototype.get_member_decoration_string=function(e,t,r){var a=this.find_meta(e);if(a){if(!this.has_member_decoration(e,t,r))return this.empty_string;var i=a.members[t];return r===N.DecorationHlslSemanticGOOGLE?i.hlsl_semantic:this.empty_string}return this.empty_string},e.prototype.has_member_decoration=function(e,t,r){return this.get_member_decoration_bitset(e,t,!1).get(r)},e.prototype.get_member_decoration_bitset=function(e,t,r){var a=this.find_meta(e);return a?t>=a.members.length?this.cleared_bitset.clone():a.members[t].decoration_flags:this.cleared_bitset.clone()},e.prototype.unset_member_decoration=function(e,t,r){var a=this.get_meta(e);if(!(t>=a.members.length)){var i=a.members[t];switch(i.decoration_flags.clear(r),r){case N.DecorationBuiltIn:i.builtin=!1;break;case N.DecorationLocation:i.location=0;break;case N.DecorationComponent:i.component=0;break;case N.DecorationOffset:i.offset=0;break;case N.DecorationXfbBuffer:i.xfb_buffer=0;break;case N.DecorationXfbStride:i.xfb_stride=0;break;case N.DecorationStream:i.stream=0;break;case N.DecorationSpecId:i.spec_id=0;break;case N.DecorationHlslSemanticGOOGLE:i.hlsl_semantic=""}}},e.prototype.mark_used_as_array_length=function(e){switch(this.ids[e].get_type()){case t.TypeConstant:this.get(Me,e).is_used_as_array_length=!0;break;case t.TypeConstantOp:var r=this.get(Re,e);if(r.opcode===se.OpCompositeExtract)this.mark_used_as_array_length(r.arguments[0]);else if(r.opcode===se.OpCompositeInsert)this.mark_used_as_array_length(r.arguments[0]),this.mark_used_as_array_length(r.arguments[1]);else for(var a=0,i=r.arguments;a<i.length;a++){var o=i[a];this.mark_used_as_array_length(o)}break;case t.TypeUndef:break;default:throw new Error("Shouldn't reach this branch")}},e.prototype.get_buffer_block_flags=function(e){var t,r=this.get(Ce,e.basetype);if(r.basetype!==ue.Struct)throw new Error("Assertion failure");var a=this.find_meta(e.self);if(a&&(t=a.decoration.decoration_flags),0===r.member_types.length)return t.clone()||new le;var i=this.get_buffer_block_type_flags(r);return t.merge_or(i),t.clone()||new le},e.prototype.get_buffer_block_type_flags=function(e){if(0===e.member_types.length)return new le;for(var t=this.get_member_decoration_bitset(e.self,0),r=1;r<e.member_types.length;r++)t.merge_and(this.get_member_decoration_bitset(e.self,r,!1));return t},e.prototype.add_typed_id=function(e,r){if(0!==this.loop_iteration_depth_hard)throw new Error("Cannot add typed ID while looping over it.");var a=this.ids[r];if(0!==this.loop_iteration_depth_soft&&!a.empty())throw new Error("Cannot override IDs when loop is soft locked.");if(a.empty()||a.get_type()!==e)switch(e){case t.TypeConstant:this.ids_for_constant_or_variable.push(r),this.ids_for_constant_or_type.push(r);break;case t.TypeVariable:this.ids_for_constant_or_variable.push(r);break;case t.TypeType:case t.TypeConstantOp:this.ids_for_constant_or_type.push(r)}a.empty()?this.ids_for_type[e].push(r):a.get_type()!==e&&(this.remove_typed_id(a.get_type(),r),this.ids_for_type[e].push(r))},e.prototype.remove_typed_id=function(e,t){!function(e,t){for(var r=e.indexOf(t);r>=0;r=e.indexOf(t))e.splice(r,1)}(this.ids_for_type[e],t)},e.prototype.create_loop_hard_lock=function(){return new Ye(new de(this,"loop_iteration_depth_hard"))},e.prototype.create_loop_soft_lock=function(){return new Ye(new de(this,"loop_iteration_depth_soft"))},e.prototype.for_each_typed_id=function(e,t){for(var r=this.create_loop_hard_lock(),a=0,i=this.ids_for_type[e.type];a<i.length;a++){var o=i[a];this.ids[o].get_type()===e.type&&t(o,this.get(e,o))}r.dispose()},e.prototype.reset_all_of_type=function(e){if("number"==typeof e){for(var t=0,r=this.ids_for_type[e];t<r.length;t++){var a=r[t];this.ids[a].get_type()===e&&this.ids[a].reset()}this.ids_for_type[e]=[]}else this.reset_all_of_type(e.type)},e.prototype.get_meta=function(e){return this.meta[e]||(this.meta[e]=new me),this.meta[e]},e.prototype.find_meta=function(e){return this.meta[e]},e.prototype.get_empty_string=function(){return this.empty_string},e.prototype.make_constant_null=function(e,r,a){var i=this.get(Ce,r);if(i.pointer)a&&this.add_typed_id(t.TypeConstant,e),(l=u(Me,this.ids[e],r)).self=e,l.make_null(i);else if(0!==i.array.length){console.assert(i.parent_type);var o=this.increase_bound_by(1);this.make_constant_null(o,i.parent_type,a);for(var n=[],s=0;s<i.array.length;s++)n[s]=o;a&&this.add_typed_id(t.TypeConstant,e),u(Me,this.ids[e],r,n,n.length,!1).self=e}else if(0!==i.member_types.length){var c=this.increase_bound_by(i.member_types.length);for(n=[],s=0;s<i.member_types.length;s++)this.make_constant_null(c+s,i.member_types[s],a),n[s]=c+s;a&&this.add_typed_id(t.TypeConstant,e),u(Me,this.ids[e],r,n,n.length,!1).self=e}else{var l;a&&this.add_typed_id(t.TypeConstant,e),(l=u(Me,this.ids[e],r)).self=e,l.make_null(i)}},e.prototype.fixup_reserved_names=function(){for(var t=this.meta_needing_name_fixup.values(),r=null;r=t.next().value;){var a=this.get_meta(r);a.decoration.alias=e.sanitize_identifier(a.decoration.alias,!1,!1);for(var i=0,o=a.members;i<o.length;i++){var n=o[i];n.alias=e.sanitize_identifier(n.alias,!0,!1)}}this.meta_needing_name_fixup.clear()},e.sanitize_identifier=function(e,t,r){return tt(e)||(e=it(e)),at(e,t,r)&&(e=function(e){return rt(e)?"_RESERVED_IDENTIFIER_FIXUP_"+e:"_RESERVED_IDENTIFIER_FIXUP"+e}(e)),e},e.sanitize_underscores=function(e){return e.replace(/_+/g,"_")},e.is_globally_reserved_identifier=function(e,t){return at(e,!1,t)},e.prototype.increase_bound_by=function(e){var t=this.ids.length,r=t+e;this.ids.length+=e;for(var a=0;a<e;a++)this.ids[a]=new l(this.pool_group);return this.block_meta.length=r,t},e.prototype.get_spirv_version=function(){return this.spirv[1]},e.prototype.get=function(e,t){return p(e,this.ids[t])},e}();function $e(e){return e>="0"&&e<="9"}function et(e){return function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}(e)||$e(e)}function tt(e){if(""===e)return!0;if($e(e[0]))return!1;for(var t=0;t<e.length;++t){if(!et(a=e.charAt(t))&&"_"!==a)return!1}var r=!1;for(t=0;t<e.length;++t){var a,i="_"===(a=e.charAt(t));if(i&&r)return!1;r=i}return!0}function rt(e){var t=e.substring(0,3);return"gl_"===t||"spv"===t}function at(e,t,r){if(!r&&rt(e))return!0;if(t){if(e.length<3)return!1;if("_m"===e.substring(0,2))return!1;for(var a=2;a<e.length&&$e(e[a]);)a++;return a===e.length}if(e.length<2)return!1;if("_"!==e.charAt(0)||!$e(e.charAt(1)))return!1;for(a=2;a<e.length&&$e(e[a]);)a++;return a===e.length||a<e.length&&"_"===e[a]}function it(e){var t=e.substring(0,e.indexOf("("));if(0===t.length)return t;$e(t.charAt(0))&&(t="_"+t.substring(1));for(var r=0;r<t.length;++r){var a=t.charAt(r);et(a)||"_"===a||(t=Qe(t,r,"_"))}return Je.sanitize_underscores(t)}var ot=function(){function e(){this.op=0,this.count=0,this.offset=0,this.length=0}return e.prototype.is_embedded=function(){return 0===this.offset},e}();!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ops=[],t}i(t,e)}(ot);var nt=function(){function e(e,t){this.first=e,this.second=t}return e.prototype.equals=function(e){return this.first===e.first&&this.second===e.second},e.prototype.clone=function(){var t=new e;return f(this,t),t},e}(),st=function(){function e(){this.x=0,this.y=0,this.z=0,this.id_x=0,this.id_y=0,this.id_z=0,this.constant=0}return e.prototype.clone=function(){return m(e,this)},e}(),ct=function(e,t,r){this.self=0,this.interface_variables=[],this.flags=new le,this.workgroup_size=new st,this.invocations=0,this.output_vertices=0,this.model=g.ExecutionModelMax,this.geometry_passthrough=!1,this.self=e,this.name=r,this.orig_name=r,this.model=t},lt=function(){function e(e){this.ir=new Je,this.global_struct_cache=[],this.forward_pointer_fixups=[],this.ir.spirv=e}return e.prototype.get_parsed_ir=function(){return this.ir},e.prototype.parse=function(){var e=this,t=this.ir.spirv,r=t.length;if(r<5)throw new Error("SPIRV file too small.");var a=t;if(a[0]===pt(pe)&&function(e,t,r,a){void 0===r&&(r=0),void 0===a&&(a=e.length);for(var i=r;i<a;++i)e[i]=t[i]}(a,(function(e){return pt(e)})),a[0]!==pe||!function(e){switch(e){case 99:case 65536:case 65792:case 66048:case 66304:case 66560:case 66816:return!0;default:return!1}}(a[1]))throw new Error("Invalid SPIRV format.");var i=a[3];if(i>4194303)throw new Error("ID bound exceeds limit of 0x3fffff.");this.ir.set_id_bounds(i);for(var o=5,n=[];o<r;){var s=new ot;if(s.op=65535&t[o],s.count=t[o]>>16&65535,0===s.count)throw new Error("SPIR-V instructions cannot consume 0 words. Invalid SPIR-V file.");if(s.offset=o+1,s.length=s.count-1,(o+=s.count)>t.length)throw new Error("SPIR-V instruction goes out of bounds.");n.push(s)}if(n.forEach((function(t){return e.parseInstruction(t)})),this.forward_pointer_fixups.forEach((function(t){var r=e.get(Ce,t.first),a=e.get(Ce,t.second);r.member_types=a.member_types,r.basetype=a.basetype,r.self=a.self})),this.forward_pointer_fixups=[],this.current_function)throw new Error("Function was not terminated.");if(this.current_block)throw new Error("Block was not terminated.");if(0===this.ir.default_entry_point)throw new Error("There is no entry point in the SPIR-V module.")},e.prototype.parseInstruction=function(e){var t=this.stream(e),r=e.op,a=this.ir,i=e.length;switch(r){case se.OpSourceContinued:case se.OpSourceExtension:case se.OpNop:case se.OpModuleProcessed:break;case se.OpString:this.set(We,t[0],ut(a.spirv,e.offset+1));break;case se.OpMemoryModel:a.addressing_model=t[0],a.memory_model=t[1];break;case se.OpSource:switch(t[0]){case h.SourceLanguageESSL:a.source.es=!0,a.source.version=t[1],a.source.known=!0,a.source.hlsl=!1;break;case h.SourceLanguageGLSL:a.source.es=!1,a.source.version=t[1],a.source.known=!0,a.source.hlsl=!1;break;case h.SourceLanguageHLSL:a.source.es=!1,a.source.version=450,a.source.known=!0,a.source.hlsl=!0;break;default:a.source.known=!1}break;case se.OpUndef:var o=t[0],s=t[1];this.set(Xe,s,o),this.current_block&&this.current_block.ops.push(e);break;case se.OpCapability:if(t[0]===$.CapabilityKernel)throw new Error("Kernel capability not supported.");a.declared_capabilities.push(t[0]);break;case se.OpExtension:var c=ut(a.spirv,e.offset);a.declared_extensions.push(c);break;case se.OpExtInstImport:s=t[0];"GLSL.std.450"===(c=ut(a.spirv,e.offset+1))?this.set(ze,s,Pe.GLSL):"DebugInfo"===c?this.set(ze,s,Pe.SPV_debug_info):"SPV_AMD_shader_ballot"===c?this.set(ze,s,Pe.SPV_AMD_shader_ballot):"SPV_AMD_shader_explicit_vertex_parameter"===c?this.set(ze,s,Pe.SPV_AMD_shader_explicit_vertex_parameter):"SPV_AMD_shader_trinary_minmax"===c?this.set(ze,s,Pe.SPV_AMD_shader_trinary_minmax):"SPV_AMD_gcn_shader"===c?this.set(ze,s,Pe.SPV_AMD_gcn_shader):this.set(ze,s,Pe.Unsupported);break;case se.OpExtInst:this.current_block&&this.current_block.ops.push(e);break;case se.OpEntryPoint:var l=new ct(t[1],t[0],ut(a.spirv,e.offset+2));a.entry_points[t[1]]=l;for(var p=(l.name.length+1+3>>2)+2;p<e.length;p++)l.interface_variables.push(t[p]);a.set_name(t[1],l.name),a.default_entry_point||(a.default_entry_point=t[1]);break;case se.OpExecutionMode:var u=a.entry_points[t[0]],_=t[1];switch(u.flags.set(_),_){case S.ExecutionModeInvocations:u.invocations=t[2];break;case S.ExecutionModeLocalSize:u.workgroup_size.x=t[2],u.workgroup_size.y=t[3],u.workgroup_size.z=t[4];break;case S.ExecutionModeOutputVertices:u.output_vertices=t[2]}break;case se.OpName:s=t[0];a.set_name(s,ut(a.spirv,e.offset+1));break;case se.OpMemberName:s=t[0];var m=t[1];a.set_member_name(s,m,ut(a.spirv,e.offset+2));break;case se.OpDecorationGroup:break;case se.OpGroupDecorate:var d=t[0],g=a.get_meta(d).decoration.decoration_flags,y=function(e){var r=t[e];g.for_each_bit((function(e){var t=e;_t(t)?a.set_decoration_string(r,t,a.get_decoration_string(d,t)):(a.get_meta(r).decoration_word_offset[t]=a.get_meta(d).decoration_word_offset[t],a.set_decoration(r,t,a.get_decoration(d,t)))}))};for(p=1;p<i;p++)y(p);break;case se.OpGroupMemberDecorate:var b=t[0],v=(g=a.get_meta(b).decoration.decoration_flags,function(e){var r=t[e],i=t[e+1];g.for_each_bit((function(e){var t=e;_t(t)?a.set_member_decoration_string(r,i,t,a.get_decoration_string(b,t)):a.set_member_decoration(r,i,t,a.get_decoration(b,t))}))});for(p=1;p+1<i;p+=2)v(p);break;case se.OpDecorate:case se.OpDecorateId:s=t[0];var O=t[1];i>=3?(a.get_meta(s).decoration_word_offset[O]=e.offset+2,a.set_decoration(s,O,t[2])):a.set_decoration(s,O);break;case se.OpDecorateStringGOOGLE:s=t[0],O=t[1];a.set_decoration_string(s,O,ut(a.spirv,e.offset+2));break;case se.OpMemberDecorate:s=t[0],m=t[1],O=t[2];i>=4?a.set_member_decoration(s,m,O,t[3]):a.set_member_decoration(s,m,O);break;case se.OpMemberDecorateStringGOOGLE:s=t[0],m=t[1],O=t[2];a.set_member_decoration_string(s,m,O,ut(a.spirv,e.offset+3));break;case se.OpTypeVoid:s=t[0];(E=this.set(Ce,s)).basetype=ue.Void;break;case se.OpTypeBool:s=t[0];(E=this.set(Ce,s)).basetype=ue.Boolean,E.width=1;break;case se.OpTypeFloat:s=t[0];var C=t[1],E=this.set(Ce,s);if(64===C)E.basetype=ue.Double;else if(32===C)E.basetype=ue.Float;else{if(16!==C)throw new Error("Unrecognized bit-width of floating point type.");E.basetype=ue.Half}E.width=C;break;case se.OpTypeInt:s=t[0],C=t[1];var x=0!==t[2];(E=this.set(Ce,s)).basetype=x?function(e){switch(e){case 8:return ue.SByte;case 16:return ue.Short;case 32:return ue.Int;case 64:return ue.Int64;default:throw new Error("Invalid bit width.")}}(C):function(e){switch(e){case 8:return ue.UByte;case 16:return ue.UShort;case 32:return ue.UInt;case 64:return ue.UInt64;default:throw new Error("Invalid bit width.")}}(C),E.width=C;break;case se.OpTypeVector:s=t[0];var k=t[2],L=this.get(Ce,t[1]),M=this.set(Ce,s);f(L,M),M.vecsize=k,M.self=s,M.parent_type=t[1];break;case se.OpTypeMatrix:s=t[0];var R=t[2],T=(L=this.get(Ce,t[1]),this.set(Ce,s));f(L,T),T.columns=R,T.self=s,T.parent_type=t[1];break;case se.OpTypeArray:s=t[0];var D=this.set(Ce,s),A=t[1];f(L=this.get(Ce,A),D),D.parent_type=A;var w=t[2];a.mark_used_as_array_length(w);var N=(Y=this.maybe_get(Me,w))&&!Y.specialization;L.forward_pointer&&this.forward_pointer_fixups.push(new nt(s,A)),D.array_size_literal.push(N),D.array.push(N?Y.scalar():w);break;case se.OpTypeRuntimeArray:s=t[0],L=this.get(Ce,t[1]),D=this.set(Ce,s);L.forward_pointer&&this.forward_pointer_fixups.push(new nt(s,t[1])),f(L,D),D.array.push(0),D.array_size_literal.push(!0),D.parent_type=t[1];break;case se.OpTypeImage:s=t[0];(E=this.set(Ce,s)).basetype=ue.Image,E.image.type=t[1],E.image.dim=t[2],E.image.depth=1===t[3],E.image.arrayed=0!==t[4],E.image.ms=0!==t[5],E.image.sampled=t[6],E.image.format=t[7],E.image.access=i>=9?t[8]:B.AccessQualifierMax;break;case se.OpTypeSampledImage:s=t[0];var P=t[1];E=this.set(Ce,s);f(this.get(Ce,P),E),E.basetype=ue.SampledImage,E.self=s;break;case se.OpTypeSampler:s=t[0];(E=this.set(Ce,s)).basetype=ue.Sampler;break;case se.OpTypePointer:s=t[0],L=this.maybe_get(Ce,t[2]);var G=this.set(Ce,s);L&&f(L,G),G.pointer=!0,G.pointer_depth++,G.storage=t[1],G.storage===I.StorageClassAtomicCounter&&(G.basetype=ue.AtomicCounter),L&&L.forward_pointer&&this.forward_pointer_fixups.push(new nt(s,t[2])),G.parent_type=t[2];break;case se.OpTypeForwardPointer:s=t[0];(G=this.set(Ce,s)).pointer=!0,G.pointer_depth++,G.storage=t[1],G.forward_pointer=!0,G.storage===I.StorageClassAtomicCounter&&(G.basetype=ue.AtomicCounter);break;case se.OpTypeStruct:s=t[0];(E=this.set(Ce,s)).basetype=ue.Struct;for(p=1;p<i;p++)E.member_types.push(t[p]);if(0===a.get_name(E.self).length){for(var U=0,z=this.global_struct_cache;U<z.length;U++){var H=z[U];if(a.get_name(E.self)===a.get_name(H)&&this.types_are_logically_equivalent(E,this.get(Ce,H))){E.type_alias=H;break}}0===E.type_alias&&this.global_struct_cache.push(s)}break;case se.OpTypeFunction:s=t[0];var K=t[1],q=this.set(Ne,s,K);for(p=2;p<i;p++)q.parameter_types.push(t[p]);break;case se.OpTypeAccelerationStructureKHR:s=t[0];(E=this.set(Ce,s)).basetype=ue.AccelerationStructure;break;case se.OpTypeRayQueryKHR:s=t[0];(E=this.set(Ce,s)).basetype=ue.RayQuery;break;case se.OpVariable:E=t[0],s=t[1];var X=t[2],W=4===i?t[3]:0;if(X===I.StorageClassFunction){if(!this.current_function)throw new Error("No function currently in scope");this.current_function.add_local_variable(s)}this.set(ge,s,E,X,W);break;case se.OpPhi:if(!this.current_function)throw new Error("No function currently in scope");if(!this.current_block)throw new Error("No block currently in scope");o=t[0],s=t[1];this.set(ge,s,o,I.StorageClassFunction).phi_variable=!0,this.current_function.add_local_variable(s);for(p=2;p+2<=i;p+=2)this.current_block.phi_variables.push(new Ge(t[p],t[p+1],s));break;case se.OpSpecConstant:case se.OpConstant:s=t[1];(E=this.get(Ce,t[0])).width>32?this.set(Me,s,t[0],bigintFrom(t[3],t[2]),r===se.OpSpecConstant):this.set(Me,s,t[0],t[2],r===se.OpSpecConstant);break;case se.OpSpecConstantFalse:case se.OpConstantFalse:this.set(Me,t[1],t[0],0,r===se.OpSpecConstantFalse);break;case se.OpSpecConstantTrue:case se.OpConstantTrue:this.set(Me,t[1],t[0],1,r===se.OpSpecConstantTrue);break;case se.OpConstantNull:a.make_constant_null(t[1],t[0],!0);break;case se.OpSpecConstantComposite:case se.OpConstantComposite:s=t[1],E=t[0];var Q=this.get(Ce,E);if(Q.basetype===ue.Struct||0!==Q.array.length){var j=t.slice(2);this.set(Me,s,E,j,i-2,r===se.OpSpecConstantComposite)}else{if((j=i-2)>4)throw new Error("OpConstantComposite only supports 1, 2, 3 and 4 elements.");var Z=n(4,(function(){return new Me})),Y=new Array(4);for(p=0;p<j;p++){var J=this.maybe_get(Re,t[2+p]),ee=this.maybe_get(Xe,t[2+p]);if(J){if(r===se.OpConstantComposite)throw new Error("Specialization constant operation used in OpConstantComposite.");Z[p].make_null(this.get(Ce,J.basetype)),Z[p].self=J.self,Z[p].constant_type=J.basetype,Z[p].specialization=!0,Y[p]=Z[p]}else ee?(Z[p].make_null(this.get(Ce,ee.basetype)),Z[p].constant_type=ee.basetype,Y[p]=Z[p]):Y[p]=this.get(Me,t[2+p])}this.set(Me,s,E,Y,j,r===se.OpSpecConstantComposite)}break;case se.OpFunction:var te=t[0];s=t[1],E=t[3];if(this.current_function)throw new Error("Must end a function before starting a new one!");this.current_function=this.set(we,s,te,E);break;case se.OpFunctionParameter:E=t[0],s=t[1];if(!this.current_function)throw new Error("Must be in a function!");this.current_function.add_parameter(E,s),this.set(ge,s,E,I.StorageClassFunction);break;case se.OpFunctionEnd:if(this.current_block)throw new Error("Cannot end a function before ending the current block.\nLikely cause: If this SPIR-V was created from glslang HLSL, make sure the entry point is valid.");this.current_function=null;break;case se.OpLabel:if(!this.current_function)throw new Error("Blocks cannot exist outside functions!");s=t[0];if(this.current_function.blocks.push(s),this.current_function.entry_block||(this.current_function.entry_block=s),this.current_block)throw new Error("Cannot start a block before ending the current block.");this.current_block=this.set(Ue,s);break;case se.OpBranch:if(!this.current_block)throw new Error("Trying to end a non-existing block.");var re=t[0];(ne=this.current_block).terminator=ye.Direct,ne.next_block=re,this.current_block=null;break;case se.OpBranchConditional:if(!this.current_block)throw new Error("Trying to end a non-existing block.");if((ne=this.current_block).condition=t[0],ne.true_block=t[1],ne.false_block=t[2],ne.terminator=ye.Select,ne.true_block===ne.false_block)if(ne.true_block!==ne.next_block&&ne.merge===be.MergeSelection){var ae=a.increase_bound_by(2);(E=new Ce).basetype=ue.Int,E.width=32,this.set(Ce,ae,E);Y=this.set(Me,ae+1,ae);ne.condition=Y.self,ne.default_block=ne.true_block,ne.terminator=ye.MultiSelect,a.block_meta[ne.next_block]&=~Ve.BLOCK_META_SELECTION_MERGE_BIT,a.block_meta[ne.next_block]|=Ve.BLOCK_META_MULTISELECT_MERGE_BIT}else a.block_meta[ne.next_block]&=~Ve.BLOCK_META_SELECTION_MERGE_BIT,ne.next_block=ne.true_block,ne.condition=0,ne.true_block=0,ne.false_block=0,ne.merge_block=0,ne.merge=be.MergeNone,ne.terminator=ye.Direct;this.current_block=null;break;case se.OpSwitch:if(!(ne=this.current_block))throw new Error("Trying to end a non-existing block.");ne.terminator=ye.MultiSelect,ne.condition=t[0],ne.default_block=t[1];var ie=i-2;if(ie%2==0)for(p=2;p+2<=i;p+=2)ne.cases_32bit.push(new Fe(BigInt(t[p]),t[p+1]));if(ie%3==0)for(p=2;p+3<=i;p+=3)ne.cases_64bit.push(new Fe(bigintFrom(t[p+1],t[p]),t[p+2]));a.block_meta[ne.next_block]|=Ve.BLOCK_META_MULTISELECT_MERGE_BIT,this.current_block=null;break;case se.OpKill:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=ye.Kill,this.current_block=null;break;case se.OpTerminateRayKHR:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=ye.TerminateRay,this.current_block=null;break;case se.OpIgnoreIntersectionKHR:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=ye.IgnoreIntersection,this.current_block=null;break;case se.OpReturn:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=ye.Return,this.current_block=null;break;case se.OpReturnValue:if(!(ne=this.current_block))throw new Error("Trying to end a non-existing block.");ne.terminator=ye.Return,ne.return_value=t[0],this.current_block=null;break;case se.OpUnreachable:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=ye.Unreachable,this.current_block=null;break;case se.OpSelectionMerge:if(!(ne=this.current_block))throw new Error("Trying to modify a non-existing block.");ne.next_block=t[0],ne.merge=be.MergeSelection,a.block_meta[ne.next_block]|=Ve.BLOCK_META_SELECTION_MERGE_BIT,i>=2&&(t[1]&F.SelectionControlFlattenMask?ne.hint=Se.HintFlatten:t[1]&F.SelectionControlDontFlattenMask&&(ne.hint=Se.HintDontFlatten));break;case se.OpLoopMerge:if(!(ne=this.current_block))throw new Error("Trying to modify a non-existing block.");ne.merge_block=t[0],ne.continue_block=t[1],ne.merge=be.MergeLoop,a.block_meta[ne.self]|=Ve.BLOCK_META_LOOP_HEADER_BIT,a.block_meta[ne.merge_block]|=Ve.BLOCK_META_LOOP_MERGE_BIT,a.continue_block_to_loop_header[ne.continue_block]=ne.self,ne.continue_block!==ne.self&&(a.block_meta[ne.continue_block]|=Ve.BLOCK_META_CONTINUE_BIT),i>=3&&(t[2]&V.LoopControlUnrollMask?ne.hint=Se.HintUnroll:t[2]&V.LoopControlDontUnrollMask&&(ne.hint=Se.HintDontUnroll));break;case se.OpSpecConstantOp:if(i<3)throw new Error("OpSpecConstantOp not enough arguments.");o=t[0],s=t[1];var oe=t[2];this.set(Re,s,o,oe,t.slice(3));break;case se.OpLine:var ne;(ne=this.current_block)&&ne.ops.push(e);var ce=this.current_function;ce&&0===ce.entry_line.file_id&&(ce.entry_line.file_id=t[0],ce.entry_line.line_literal=t[1]);break;case se.OpNoLine:this.current_block&&this.current_block.ops.push(e);break;default:if(i>=2)(E=this.maybe_get(Ce,t[0]))&&(a.load_type_width[t[1]]=E.width);if(!this.current_block)throw new Error("Currently no block to insert opcode.");this.current_block.ops.push(e)}},e.prototype.stream=function(e){if(0===e.length)return null;if(e.offset+e.length>this.ir.spirv.length)throw new Error("Compiler::stream() out of range.");return this.ir.spirv.slice(e.offset,e.offset+e.length)},e.prototype.set=function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];this.ir.add_typed_id(e.type,t);var i=u.apply(void 0,o([e,this.ir.ids[t]],r,!1));return i.self=t,i},e.prototype.get=function(e,t){return p(e,this.ir.ids[t])},e.prototype.maybe_get=function(e,t){return this.ir.ids[t].get_type()===e.type?this.get(e,t):null},e.prototype.types_are_logically_equivalent=function(e,t){if(e.basetype!==t.basetype)return!1;if(e.width!==t.width)return!1;if(e.vecsize!==t.vecsize)return!1;if(e.columns!==t.columns)return!1;if(!s(e.array,t.array))return!1;if((e.basetype===ue.Image||e.basetype===ue.SampledImage)&&!e.image.equals(t.image))return!1;if(!s(e.member_types,t.member_types))return!1;for(var r=e.member_types.length,a=0;a<r;a++)if(!this.types_are_logically_equivalent(this.get(Ce,e.member_types[a]),this.get(Ce,t.member_types[a])))return!1;return!0},e}();function pt(e){return e>>24&255|e>>8&65280|e<<8&16711680|e<<24&4278190080}function ut(e,t){for(var r="",a=t;a<e.length;a++)for(var i=e[a],o=0;o<4;o++,i>>=8){var n=255&i;if(0===n)return r;r+=String.fromCharCode(n)}throw new Error("String was not terminated before EOF")}function _t(e){return e===N.DecorationHlslSemanticGOOGLE}var ft,mt,dt=function(e,t){this.name=e,this.execution_model=t},ht=function(){function e(){}return e.prototype.handle_terminator=function(e){return!0},e.prototype.follow_function_call=function(e){return!0},e.prototype.set_current_block=function(e){},e.prototype.rearm_current_block=function(e){},e.prototype.begin_function_scope=function(e,t){return!0},e.prototype.end_function_scope=function(e,t){return!0},e}(),gt=function(e){function t(t){var r=e.call(this)||this;return r.need_dummy_sampler=!1,r.compiler=t,r}return i(t,e),t.prototype.handle=function(e,t,r){if(this.need_dummy_sampler)return!1;var a=this.compiler;switch(e){case se.OpLoad:if(r<3)return!1;var i=t[0];if(!((c=a.get(Ce,i)).basetype===ue.Image&&1===c.image.sampled&&c.image.dim!==v.DimBuffer))return!0;var o=t[1],n=t[2];a.set(He,o,"",i,!0),a.register_read(o,n,!0);break;case se.OpImageFetch:case se.OpImageQuerySizeLod:case se.OpImageQuerySize:case se.OpImageQueryLevels:case se.OpImageQuerySamples:var s=a.maybe_get_backing_variable(t[2]);if(s)(c=a.get(Ce,s.basetype)).basetype===ue.Image&&1===c.image.sampled&&c.image.dim!==v.DimBuffer&&(this.need_dummy_sampler=!0);break;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;var c;i=t[0];if(!((c=a.get(Ce,i)).basetype===ue.Image&&1===c.image.sampled&&c.image.dim!==v.DimBuffer))return!0;o=t[1],n=t[2];a.set(He,o,"",i,!0),a.register_read(o,n,!0),a.ir.ids[o].set_allow_type_rewrite()}return!0},t}(ht);!function(e){e[e.GLSLstd450Bad=0]="GLSLstd450Bad",e[e.GLSLstd450Round=1]="GLSLstd450Round",e[e.GLSLstd450RoundEven=2]="GLSLstd450RoundEven",e[e.GLSLstd450Trunc=3]="GLSLstd450Trunc",e[e.GLSLstd450FAbs=4]="GLSLstd450FAbs",e[e.GLSLstd450SAbs=5]="GLSLstd450SAbs",e[e.GLSLstd450FSign=6]="GLSLstd450FSign",e[e.GLSLstd450SSign=7]="GLSLstd450SSign",e[e.GLSLstd450Floor=8]="GLSLstd450Floor",e[e.GLSLstd450Ceil=9]="GLSLstd450Ceil",e[e.GLSLstd450Fract=10]="GLSLstd450Fract",e[e.GLSLstd450Radians=11]="GLSLstd450Radians",e[e.GLSLstd450Degrees=12]="GLSLstd450Degrees",e[e.GLSLstd450Sin=13]="GLSLstd450Sin",e[e.GLSLstd450Cos=14]="GLSLstd450Cos",e[e.GLSLstd450Tan=15]="GLSLstd450Tan",e[e.GLSLstd450Asin=16]="GLSLstd450Asin",e[e.GLSLstd450Acos=17]="GLSLstd450Acos",e[e.GLSLstd450Atan=18]="GLSLstd450Atan",e[e.GLSLstd450Sinh=19]="GLSLstd450Sinh",e[e.GLSLstd450Cosh=20]="GLSLstd450Cosh",e[e.GLSLstd450Tanh=21]="GLSLstd450Tanh",e[e.GLSLstd450Asinh=22]="GLSLstd450Asinh",e[e.GLSLstd450Acosh=23]="GLSLstd450Acosh",e[e.GLSLstd450Atanh=24]="GLSLstd450Atanh",e[e.GLSLstd450Atan2=25]="GLSLstd450Atan2",e[e.GLSLstd450Pow=26]="GLSLstd450Pow",e[e.GLSLstd450Exp=27]="GLSLstd450Exp",e[e.GLSLstd450Log=28]="GLSLstd450Log",e[e.GLSLstd450Exp2=29]="GLSLstd450Exp2",e[e.GLSLstd450Log2=30]="GLSLstd450Log2",e[e.GLSLstd450Sqrt=31]="GLSLstd450Sqrt",e[e.GLSLstd450InverseSqrt=32]="GLSLstd450InverseSqrt",e[e.GLSLstd450Determinant=33]="GLSLstd450Determinant",e[e.GLSLstd450MatrixInverse=34]="GLSLstd450MatrixInverse",e[e.GLSLstd450Modf=35]="GLSLstd450Modf",e[e.GLSLstd450ModfStruct=36]="GLSLstd450ModfStruct",e[e.GLSLstd450FMin=37]="GLSLstd450FMin",e[e.GLSLstd450UMin=38]="GLSLstd450UMin",e[e.GLSLstd450SMin=39]="GLSLstd450SMin",e[e.GLSLstd450FMax=40]="GLSLstd450FMax",e[e.GLSLstd450UMax=41]="GLSLstd450UMax",e[e.GLSLstd450SMax=42]="GLSLstd450SMax",e[e.GLSLstd450FClamp=43]="GLSLstd450FClamp",e[e.GLSLstd450UClamp=44]="GLSLstd450UClamp",e[e.GLSLstd450SClamp=45]="GLSLstd450SClamp",e[e.GLSLstd450FMix=46]="GLSLstd450FMix",e[e.GLSLstd450IMix=47]="GLSLstd450IMix",e[e.GLSLstd450Step=48]="GLSLstd450Step",e[e.GLSLstd450SmoothStep=49]="GLSLstd450SmoothStep",e[e.GLSLstd450Fma=50]="GLSLstd450Fma",e[e.GLSLstd450Frexp=51]="GLSLstd450Frexp",e[e.GLSLstd450FrexpStruct=52]="GLSLstd450FrexpStruct",e[e.GLSLstd450Ldexp=53]="GLSLstd450Ldexp",e[e.GLSLstd450PackSnorm4x8=54]="GLSLstd450PackSnorm4x8",e[e.GLSLstd450PackUnorm4x8=55]="GLSLstd450PackUnorm4x8",e[e.GLSLstd450PackSnorm2x16=56]="GLSLstd450PackSnorm2x16",e[e.GLSLstd450PackUnorm2x16=57]="GLSLstd450PackUnorm2x16",e[e.GLSLstd450PackHalf2x16=58]="GLSLstd450PackHalf2x16",e[e.GLSLstd450PackDouble2x32=59]="GLSLstd450PackDouble2x32",e[e.GLSLstd450UnpackSnorm2x16=60]="GLSLstd450UnpackSnorm2x16",e[e.GLSLstd450UnpackUnorm2x16=61]="GLSLstd450UnpackUnorm2x16",e[e.GLSLstd450UnpackHalf2x16=62]="GLSLstd450UnpackHalf2x16",e[e.GLSLstd450UnpackSnorm4x8=63]="GLSLstd450UnpackSnorm4x8",e[e.GLSLstd450UnpackUnorm4x8=64]="GLSLstd450UnpackUnorm4x8",e[e.GLSLstd450UnpackDouble2x32=65]="GLSLstd450UnpackDouble2x32",e[e.GLSLstd450Length=66]="GLSLstd450Length",e[e.GLSLstd450Distance=67]="GLSLstd450Distance",e[e.GLSLstd450Cross=68]="GLSLstd450Cross",e[e.GLSLstd450Normalize=69]="GLSLstd450Normalize",e[e.GLSLstd450FaceForward=70]="GLSLstd450FaceForward",e[e.GLSLstd450Reflect=71]="GLSLstd450Reflect",e[e.GLSLstd450Refract=72]="GLSLstd450Refract",e[e.GLSLstd450FindILsb=73]="GLSLstd450FindILsb",e[e.GLSLstd450FindSMsb=74]="GLSLstd450FindSMsb",e[e.GLSLstd450FindUMsb=75]="GLSLstd450FindUMsb",e[e.GLSLstd450InterpolateAtCentroid=76]="GLSLstd450InterpolateAtCentroid",e[e.GLSLstd450InterpolateAtSample=77]="GLSLstd450InterpolateAtSample",e[e.GLSLstd450InterpolateAtOffset=78]="GLSLstd450InterpolateAtOffset",e[e.GLSLstd450NMin=79]="GLSLstd450NMin",e[e.GLSLstd450NMax=80]="GLSLstd450NMax",e[e.GLSLstd450NClamp=81]="GLSLstd450NClamp",e[e.GLSLstd450Count=82]="GLSLstd450Count"}(ft||(ft={})),function(e){e[e.PlsNone=0]="PlsNone",e[e.PlsR11FG11FB10F=1]="PlsR11FG11FB10F",e[e.PlsR32F=2]="PlsR32F",e[e.PlsRG16F=3]="PlsRG16F",e[e.PlsRGB10A2=4]="PlsRGB10A2",e[e.PlsRGBA8=5]="PlsRGBA8",e[e.PlsRG16=6]="PlsRG16",e[e.PlsRGBA8I=7]="PlsRGBA8I",e[e.PlsRG16I=8]="PlsRG16I",e[e.PlsRGB10A2UI=9]="PlsRGB10A2UI",e[e.PlsRGBA8UI=10]="PlsRGBA8UI",e[e.PlsRG16UI=11]="PlsRG16UI",e[e.PlsR32UI=12]="PlsR32UI"}(mt||(mt={}));var yt=function(){this.discard_literal="discard",this.demote_literal="demote",this.null_pointer_literal="",this.float_literal_suffix=!1,this.double_literal_suffix=!0,this.uint32_t_literal_suffix=!0,this.long_long_literal_suffix=!1,this.basic_int_type="int",this.basic_uint_type="uint",this.basic_int8_type="int8_t",this.basic_uint8_type="uint8_t",this.basic_int16_type="int16_t",this.basic_uint16_type="uint16_t",this.int16_t_literal_suffix="s",this.uint16_t_literal_suffix="us",this.nonuniform_qualifier="nonuniformEXT",this.boolean_mix_function="mix",this.swizzle_is_function=!1,this.shared_is_implied=!1,this.unsized_array_supported=!0,this.explicit_struct_type=!1,this.use_initializer_list=!1,this.use_typed_initializer_list=!1,this.can_declare_struct_inline=!0,this.can_declare_arrays_inline=!0,this.native_row_major_matrix=!0,this.use_constructor_splatting=!0,this.allow_precision_qualifiers=!1,this.can_swizzle_scalar=!1,this.force_gl_in_out_block=!1,this.can_return_array=!0,this.allow_truncated_access_chain=!1,this.supports_extensions=!1,this.supports_empty_struct=!1,this.array_is_value_type=!0,this.buffer_offset_array_is_value_type=!0,this.comparison_image_samples_scalar=!1,this.native_pointers=!1,this.support_small_type_sampling_result=!1,this.support_case_fallthrough=!0,this.use_array_constructor=!1,this.needs_row_major_load_workaround=!1,this.support_pointer_to_pointer=!1,this.support_precise_qualifier=!1,this.support_64bit_switch=!1,this.workgroup_size_is_hidden=!1},bt=function(e){function t(t,r){var a=e.call(this)||this;return a.compiler=t,a.variables=r,a}return i(t,e),t.prototype.handle=function(e,t,r){var a=this.compiler,i=this.variables,o=0,n=0;switch(e){default:break;case se.OpFunctionCall:if(r<3)return!1;var s=r-3;n+=3;for(var c=0;c<s;c++){(l=a.maybe_get(ge,t[n+c]))&&St(l.storage)&&i.add(t[n+c])}break;case se.OpSelect:if(r<5)return!1;s=r-3;n+=3;for(c=0;c<s;c++){(l=a.maybe_get(ge,t[n+c]))&&St(l.storage)&&i.add(t[n+c])}break;case se.OpPhi:if(r<2)return!1;s=r-2;n+=2;for(c=0;c<s;c+=2){(l=a.maybe_get(ge,t[n+c]))&&St(l.storage)&&i.add(t[n+c])}break;case se.OpAtomicStore:case se.OpStore:if(r<1)return!1;o=t[n];break;case se.OpCopyMemory:if(r<2)return!1;(l=a.maybe_get(ge,t[n]))&&St(l.storage)&&i.add(t[n]),(l=a.maybe_get(ge,t[n+1]))&&St(l.storage)&&i.add(t[n+1]);break;case se.OpExtInst:if(r<5)return!1;switch(a.get(ze,t[n+2]).ext){case Pe.GLSL:switch(t[n+3]){case ft.GLSLstd450InterpolateAtCentroid:case ft.GLSLstd450InterpolateAtSample:case ft.GLSLstd450InterpolateAtOffset:(l=a.maybe_get(ge,t[n+4]))&&St(l.storage)&&i.add(t[n+4]);break;case ft.GLSLstd450Modf:case ft.GLSLstd450Fract:(l=a.maybe_get(ge,t[n+5]))&&St(l.storage)&&i.add(t[n+5])}break;case Pe.SPV_AMD_shader_explicit_vertex_parameter:var l;if(1===t[n+3])(l=a.maybe_get(ge,t[n+4]))&&St(l.storage)&&i.add(t[n+4])}break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:case se.OpLoad:case se.OpCopyObject:case se.OpImageTexelPointer:case se.OpAtomicLoad:case se.OpAtomicExchange:case se.OpAtomicCompareExchange:case se.OpAtomicCompareExchangeWeak:case se.OpAtomicIIncrement:case se.OpAtomicIDecrement:case se.OpAtomicIAdd:case se.OpAtomicISub:case se.OpAtomicSMin:case se.OpAtomicUMin:case se.OpAtomicSMax:case se.OpAtomicUMax:case se.OpAtomicAnd:case se.OpAtomicOr:case se.OpAtomicXor:case se.OpArrayLength:if(r<3)return!1;o=t[n+2]}o&&((l=a.maybe_get(ge,o))&&St(l.storage)&&i.add(o));return!0},t}(ht);function St(e){switch(e){case I.StorageClassInput:case I.StorageClassOutput:case I.StorageClassUniform:case I.StorageClassUniformConstant:case I.StorageClassAtomicCounter:case I.StorageClassPushConstant:case I.StorageClassStorageBuffer:return!0;default:return!1}}var It=function(e,t,r,a){this.name="",this.id=e,this.type_id=t,this.base_type_id=r,this.name=a},vt=function(){},Ot=function(){this.uniform_buffers=[],this.storage_buffers=[],this.stage_inputs=[],this.stage_outputs=[],this.subpass_inputs=[],this.storage_images=[],this.sampled_images=[],this.atomic_counters=[],this.acceleration_structures=[],this.push_constant_buffers=[],this.separate_images=[],this.separate_samplers=[],this.builtin_inputs=[],this.builtin_outputs=[]},Ct=function(e,t,r){this.combined_id=e,this.image_id=t,this.sampler_id=r},Et=function(e){function t(t){var r=e.call(this)||this;return r.parameter_remapping=[],r.functions=[],r.compiler=t,r}return i(t,e),t.prototype.handle=function(e,t,r){var a=this.compiler,i=!1;switch(e){case se.OpLoad:if(r<3)return!1;var o=t[0],n=(k=a.get(Ce,o)).basetype===ue.Image&&1===k.image.sampled,s=k.basetype===ue.Sampler;if(!n&&!s)return!0;var c=t[1],l=t[2];return a.set(He,c,"",o,!0),a.register_read(c,l,!0),!0;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;o=t[0],n=(k=a.get(Ce,o)).basetype===ue.Image&&1===k.image.sampled;if(s=k.basetype===ue.Sampler)throw new Error("Attempting to use arrays or structs of separate samplers. This is not possible to statically remap to plain GLSL.");if(n){c=t[1],l=t[2];a.set(He,c,"",o,!0),a.register_read(c,l,!0)}return!0;case se.OpImageFetch:case se.OpImageQuerySizeLod:case se.OpImageQuerySize:case se.OpImageQueryLevels:case se.OpImageQuerySamples:if(!(E=a.maybe_get_backing_variable(t[2])))return!0;if((k=a.get(Ce,E.basetype)).basetype===ue.Image&&1===k.image.sampled&&k.image.dim!==v.DimBuffer){if(0===a.dummy_sampler_id)throw new Error("texelFetch without sampler was found, but no dummy sampler has been created with build_dummy_sampler_for_combined_images().");i=!0;break}return!0;case se.OpSampledImage:break;default:return!0}if(0!==this.functions.length){var p=this.functions[this.functions.length-1];if(p.do_combined_parameters){var u=t[2],_=a.maybe_get_backing_variable(u);_&&(u=_.self);var m=i?a.dummy_sampler_id:t[3],d=a.maybe_get_backing_variable(m);d&&(m=d.self);var h=t[1],g=a.get(Ce,t[0]);this.register_combined_image_sampler(p,h,u,m,g.image.depth)}}var y=this.remap_parameter(t[2]),b=i?a.dummy_sampler_id:this.remap_parameter(t[3]);if(!a.combined_image_samplers.find((function(e){return e.image_id==y&&e.sampler_id==b}))){var S=void 0,O=void 0;if(i){S=a.ir.increase_bound_by(1);var C=a.set(Ce,S);f(a.expression_type(t[2]),C),C.self=S,C.basetype=ue.SampledImage,C.image.depth=!1,O=0}else S=t[0],O=t[1];var E,x=(c=a.ir.increase_bound_by(2))+0,k=(h=c+1,a.set(Ce,x));if(f(a.get(Ce,S),k),k.pointer=!0,k.storage=I.StorageClassUniformConstant,k.parent_type=x,a.set(ge,h,x,I.StorageClassUniformConstant,0),(b&&a.has_decoration(b,N.DecorationRelaxedPrecision)||y&&a.has_decoration(y,N.DecorationRelaxedPrecision)||O&&a.has_decoration(O,N.DecorationRelaxedPrecision))&&a.set_decoration(h,N.DecorationRelaxedPrecision),E=a.maybe_get_backing_variable(y)){var L=a.get(Ce,E.basetype);k.array=L.array,k.array_size_literal=L.array_size_literal}a.combined_image_samplers.push(new Ct(h,y,b))}return!0},t.prototype.begin_function_scope=function(e,t){if(t<3)return!1;var r=this.compiler.get(we,e[2]);return e=e.slice(3),t-=3,this.push_remap_parameters(r,e,t),this.functions.push(r),!0},t.prototype.end_function_scope=function(e,t){if(t<3)return!1;var r=this.functions,a=this.compiler,i=a.get(we,e[2]);e=e.slice(3),this.pop_remap_parameters(),i.do_combined_parameters=!1;var o=r.pop().combined_parameters;if(0===r.length)return!0;var n=r[r.length-1];if(n.do_combined_parameters)for(var s=0,c=o;s<c.length;s++){var l=c[s],p=l.global_image?l.image_id:e[l.image_id],u=l.global_sampler?l.sampler_id:e[l.sampler_id],_=a.maybe_get_backing_variable(p),f=a.maybe_get_backing_variable(u);_&&(p=_.self),f&&(u=f.self),this.register_combined_image_sampler(n,0,p,u,l.depth)}return!0},t.prototype.remap_parameter=function(e){var t=this.compiler.maybe_get_backing_variable(e);t&&(e=t.self);var r=this.parameter_remapping;if(0===r.length)return e;var a=r[r.length-1][e];return void 0!==a?a:e},t.prototype.push_remap_parameters=function(e,t,r){for(var a=[],i=0;i<r;i++)a[e.arguments[i].id]=this.remap_parameter(t[i]);this.parameter_remapping.push(a)},t.prototype.pop_remap_parameters=function(){this.parameter_remapping.pop()},t.prototype.register_combined_image_sampler=function(e,t,r,a,i){var o=new Ae(0,r,a,!0,!0,i),n=e.arguments.find((function(e){return e.id===r})),s=e.arguments.find((function(e){return e.id===a}));if(n&&(o.global_image=!1,o.image_id=e.arguments.indexOf(n)),s&&(o.global_sampler=!1,o.sampler_id=e.arguments.indexOf(s)),!o.global_image||!o.global_sampler){var c=e.combined_parameters.find((function(e){return o.image_id==e.image_id&&o.sampler_id==e.sampler_id&&o.global_image==e.global_image&&o.global_sampler==e.global_sampler})),l=this.compiler;if(!c){var p=l.ir.increase_bound_by(3),u=p,_=p+1,m=p+2,d=l.expression_type(r),h=l.set(Ce,u),g=l.set(Ce,_);f(d,h),h.self=u,h.basetype=ue.SampledImage,h.pointer=!1,h.storage=I.StorageClassGeneric,h.image.depth=i,f(h,g),g.pointer=!0,g.storage=I.StorageClassUniformConstant,g.parent_type=u,l.set(ge,m,_,I.StorageClassFunction,0),(l.has_decoration(a,N.DecorationRelaxedPrecision)||l.has_decoration(r,N.DecorationRelaxedPrecision)||t&&l.has_decoration(t,N.DecorationRelaxedPrecision))&&l.set_decoration(m,N.DecorationRelaxedPrecision),o.id=m,l.set_name(m,"SPIRV_Cross_Combined"+l.to_name(r)+l.to_name(a)),e.combined_parameters.push(o),e.shadow_arguments.push(new De(_,m,0,0,!0))}}},t}(ht),xt=function(){function e(e){this.dominator=0,this.cfg=e}return e.prototype.add_block=function(e){this.cfg.get_immediate_dominator(e)&&(this.dominator?e!==this.dominator&&(this.dominator=this.cfg.find_common_dominator(e,this.dominator)):this.dominator=e)},e.prototype.get_dominator=function(){return this.dominator},e.prototype.lift_continue_block_dominator=function(){if(this.dominator){var e=this.cfg,t=e.get_compiler().get(Ue,this.dominator),r=e.get_visit_order(this.dominator),a=!1;switch(t.terminator){case ye.Direct:e.get_visit_order(t.next_block)>r&&(a=!0);break;case ye.Select:e.get_visit_order(t.true_block)>r&&(a=!0),e.get_visit_order(t.false_block)>r&&(a=!0);break;case ye.MultiSelect:for(var i=0,o=e.get_compiler().get_case_list(t);i<o.length;i++){var n=o[i];e.get_visit_order(n.block)>r&&(a=!0)}t.default_block&&e.get_visit_order(t.default_block)>r&&(a=!0)}a&&(this.dominator=e.get_function().entry_block)}},e}(),kt=function(){function e(e,t){this.preceding_edges=[],this.succeeding_edges=[],this.immediate_dominators=[],this.visit_order=[],this.post_order=[],this.empty_vector=[],this.compiler=e,this.func=t}return e.prototype.get_compiler=function(){return this.compiler},e.prototype.get_function=function(){return this.func},e.prototype.get_immediate_dominator=function(e){var t=this.immediate_dominators[e];return t||0},e.prototype.get_visit_order=function(e){var t=this.visit_order[e];console.assert(t);var r=t.get();return console.assert(r>0),r},e.prototype.find_common_dominator=function(e,t){for(;e!==t;)this.get_visit_order(e)<this.get_visit_order(t)?e=this.get_immediate_dominator(e):t=this.get_immediate_dominator(t);return e},e.prototype.get_preceding_edges=function(e){return this.preceding_edges[e]||this.empty_vector},e.prototype.get_succeeding_edges=function(e){return this.succeeding_edges[e]||this.empty_vector},e.prototype.walk_from=function(e,t,r){if(!e.has(t)&&(e.add(t),r(t)))for(var a=0,i=this.get_succeeding_edges(t);a<i.length;a++){var o=i[a];this.walk_from(e,o,r)}},e.prototype.find_loop_dominator=function(e){for(;e!==Ue.NoDominator;){var t=this.preceding_edges[e];if(!t)return Ue.NoDominator;if(0===t.length)return Ue.NoDominator;for(var r=Ue.NoDominator,a=!1,i=0,o=t;i<o.length;i++){var n=o[i],s=this.compiler.get(Ue,n);if(s.merge==be.MergeLoop&&s.merge_block==e){r=n,a=!0;break}if(s.merge==be.MergeSelection&&s.next_block==e){r=n;break}}if(r==Ue.NoDominator&&(r=t[0]),e=r,!a&&e)if(this.compiler.get(Ue,e).merge==be.MergeLoop)return e}return e},e.prototype.node_terminates_control_flow_in_sub_graph=function(e,t){var r=this.compiler,a=r.get(Ue,e),i=0;for(a.merge===be.MergeLoop&&(i=a.merge_block);t!=e;){var o=this.preceding_edges[t];if(!o)return!1;for(var n=new xt(this),s=0,c=o;s<c.length;s++){var l=c[s];n.add_block(l)}var p=n.get_dominator();if(0===p)return!1;var u=r.get(Ue,p),_=!1,f=!1;if(i&&u.terminator===ye.Select){var m=r.get(Ue,u.true_block),d=r.get(Ue,u.false_block),h=r.get(Ue,i);_=r.execution_is_branchless(m,h),f=r.execution_is_branchless(d,h)}if(!(u.merge===be.MergeSelection&&u.next_block==t||u.merge===be.MergeLoop&&u.merge_block==t||u.terminator==ye.Direct&&u.next_block==t||u.terminator==ye.Select&&u.true_block==t&&f||u.terminator==ye.Select&&u.false_block==t&&_))return!1;t=p}return!0},e}(),Lt=function(e){function t(t){var r=e.call(this)||this;return r.function_cfgs=[],r.compiler=t,r}return i(t,e),t.prototype.handle=function(e,t,r){return!0},t.prototype.follow_function_call=function(e){return!this.function_cfgs[e.self]&&(this.function_cfgs[e.self]=new kt(this.compiler,e),!0)},t}(ht);function Mt(e,t,r){return t[r]||(t[r]=0===e?e:new e),t[r]}var Rt=function(e){function r(t,r){var a=e.call(this)||this;return a.accessed_variables_to_block=[],a.accessed_temporaries_to_block=[],a.result_id_to_type=[],a.complete_write_variables_to_block=[],a.partial_write_variables_to_block=[],a.access_chain_expressions=new Set,a.access_chain_children=[],a.current_block=null,a.compiler=t,a.entry=r,a}return i(r,e),r.prototype.follow_function_call=function(e){return!1},r.prototype.set_current_block=function(e){var t=this,r=this.compiler;this.current_block=e;var a=function(a){for(var i=r.get(Ue,a),o=0,n=i.phi_variables;o<n.length;o++){var s=n[o];s.parent===e.self&&(Mt(Set,t.accessed_variables_to_block,s.function_variable).add(e.self),Mt(Set,t.accessed_variables_to_block,s.function_variable).add(i.self),t.notify_variable_access(s.local_variable,e.self))}};switch(e.terminator){case ye.Direct:this.notify_variable_access(e.condition,e.self),a(e.next_block);break;case ye.Select:this.notify_variable_access(e.condition,e.self),a(e.true_block),a(e.false_block);break;case ye.MultiSelect:this.notify_variable_access(e.condition,e.self);for(var i=0,o=r.get_case_list(e);i<o.length;i++){a(o[i].block)}e.default_block&&a(e.default_block)}},r.prototype.notify_variable_access=function(e,t){var r=this;if(0!=e){var a=this.access_chain_children[e];a&&a.forEach((function(e){return r.notify_variable_access(e,t)})),this.id_is_phi_variable(e)?Mt(Set,this.accessed_variables_to_block,e).add(t):this.id_is_potential_temporary(e)&&Mt(Set,this.accessed_temporaries_to_block,e).add(t)}},r.prototype.id_is_phi_variable=function(e){if(e>=this.compiler.get_current_id_bound())return!1;var t=this.compiler.maybe_get(ge,e);return t&&t.phi_variable},r.prototype.id_is_potential_temporary=function(e){return!(e>=this.compiler.get_current_id_bound())&&(this.compiler.ir.ids[e].empty()||this.compiler.ir.ids[e].get_type()===t.TypeExpression)},r.prototype.handle=function(e,t,r){var a=this.compiler,i={result_type:0,result_id:0};switch(a.instruction_to_result_type(i,e,t,r)&&(this.result_id_to_type[i.result_id]=i.result_type),e){case se.OpStore:if(r<2)return!1;var o=t[0];(_=a.maybe_get_backing_variable(o))&&(Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),_.self==o?Mt(Set,this.complete_write_variables_to_block,_.self).add(this.current_block.self):Mt(Set,this.partial_write_variables_to_block,_.self).add(this.current_block.self)),this.notify_variable_access(t[0],this.current_block.self),this.notify_variable_access(t[1],this.current_block.self);break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;o=t[2];(_=this.compiler.maybe_get(ge,o))&&(Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),Mt(Set,this.access_chain_children,t[1]).add(_.self));for(var n=2;n<r;n++)this.notify_variable_access(t[n],this.current_block.self),Mt(Set,this.access_chain_children,t[1]).add(t[n]);this.notify_variable_access(t[1],this.current_block.self);var s=a.set(He,t[1],"",t[0],!0),c=a.maybe_get_backing_variable(o);s.loaded_from=c?c.self:0,a.ir.ids[t[1]].set_allow_type_rewrite(),this.access_chain_expressions.add(t[1]);break;case se.OpCopyMemory:if(r<2)return!1;var l=t[0],p=t[1];(_=a.maybe_get_backing_variable(l))&&(Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),_.self==l?Mt(Set,this.complete_write_variables_to_block,_.self).add(this.current_block.self):Mt(Set,this.partial_write_variables_to_block,_.self).add(this.current_block.self));for(n=0;n<2;n++)this.notify_variable_access(t[n],this.current_block.self);(_=a.maybe_get_backing_variable(p))&&Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self);break;case se.OpCopyObject:if(r<3)return!1;(_=a.maybe_get_backing_variable(t[2]))&&Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),this.notify_variable_access(t[1],this.current_block.self),this.access_chain_expressions.has(t[2])&&this.access_chain_expressions.add(t[1]),this.notify_variable_access(t[2],this.current_block.self);break;case se.OpLoad:if(r<3)return!1;o=t[2];(_=a.maybe_get_backing_variable(o))&&Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),this.notify_variable_access(t[1],this.current_block.self),this.notify_variable_access(t[2],this.current_block.self);break;case se.OpFunctionCall:if(r<3)return!1;a.get_type(t[0]).basetype!==ue.Void&&this.notify_variable_access(t[1],this.current_block.self),r-=3,t=t.slice(3);for(n=0;n<r;n++){(_=a.maybe_get_backing_variable(t[n]))&&(Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),Mt(Set,this.partial_write_variables_to_block,_.self).add(this.current_block.self)),this.notify_variable_access(t[n],this.current_block.self)}break;case se.OpSelect:for(n=1;n<r;n++){if(n>=3)(_=a.maybe_get_backing_variable(t[n]))&&(Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),Mt(Set,this.partial_write_variables_to_block,_.self).add(this.current_block.self));this.notify_variable_access(t[n],this.current_block.self)}break;case se.OpExtInst:for(n=4;n<r;n++)this.notify_variable_access(t[n],this.current_block.self);this.notify_variable_access(t[1],this.current_block.self);var u=t[2];if(a.get(ze,u).ext===Pe.GLSL)switch(t[3]){case ft.GLSLstd450Modf:case ft.GLSLstd450Frexp:var _;o=t[5];(_=a.maybe_get_backing_variable(o))&&(Mt(Set,this.accessed_variables_to_block,_.self).add(this.current_block.self),_.self==o?Mt(Set,this.complete_write_variables_to_block,_.self).add(this.current_block.self):Mt(Set,this.partial_write_variables_to_block,_.self).add(this.current_block.self))}break;case se.OpArrayLength:this.notify_variable_access(t[1],this.current_block.self);break;case se.OpLine:case se.OpNoLine:break;case se.OpCompositeInsert:case se.OpVectorShuffle:for(n=1;n<4;n++)this.notify_variable_access(t[n],this.current_block.self);break;case se.OpCompositeExtract:for(n=1;n<3;n++)this.notify_variable_access(t[n],this.current_block.self);break;case se.OpImageWrite:for(n=0;n<r;n++)3!=n&&this.notify_variable_access(t[n],this.current_block.self);break;case se.OpImageSampleImplicitLod:case se.OpImageSampleExplicitLod:case se.OpImageSparseSampleImplicitLod:case se.OpImageSparseSampleExplicitLod:case se.OpImageSampleProjImplicitLod:case se.OpImageSampleProjExplicitLod:case se.OpImageSparseSampleProjImplicitLod:case se.OpImageSparseSampleProjExplicitLod:case se.OpImageFetch:case se.OpImageSparseFetch:case se.OpImageRead:case se.OpImageSparseRead:for(n=1;n<r;n++)4!=n&&this.notify_variable_access(t[n],this.current_block.self);break;case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleDrefExplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleDrefExplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:case se.OpImageGather:case se.OpImageSparseGather:case se.OpImageDrefGather:case se.OpImageSparseDrefGather:for(n=1;n<r;n++)5!=n&&this.notify_variable_access(t[n],this.current_block.self);break;default:for(n=0;n<r;n++)this.notify_variable_access(t[n],this.current_block.self)}return!0},r.prototype.handle_terminator=function(e){switch(e.terminator){case ye.Return:e.return_value&&this.notify_variable_access(e.return_value,e.self);break;case ye.Select:case ye.MultiSelect:this.notify_variable_access(e.condition,e.self)}return!0},r}(ht),Tt=function(e){function t(t,r){var a=e.call(this)||this;return a.static_expression=0,a.write_count=0,a.variable_id=r,a}return i(t,e),t.prototype.follow_function_call=function(e){return!1},t.prototype.handle=function(e,t,r){switch(e){case se.OpStore:if(r<2)return!1;t[0]===this.variable_id&&(this.static_expression=t[1],this.write_count++);break;case se.OpLoad:if(r<3)return!1;if(t[2]==this.variable_id&&0===this.static_expression)return!1;break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;if(t[2]===this.variable_id)return!1}return!0},t}(ht),Dt=function(e){function t(t){var r=e.call(this)||this;return r.compiler=t,r}return i(t,e),t.prototype.handle=function(e,t,r){return!1},t.prototype.handle_builtin=function(e,t,r){if(t===P.BuiltInClipDistance){if(!e.array_size_literal[0])throw new Error("Array size for ClipDistance must be a literal.");if(0===(a=e.array[0]))throw new Error("Array size for ClipDistance must not be unsized.");this.compiler.clip_distance_count=a}else if(t===P.BuiltInCullDistance){if(!e.array_size_literal[0])throw new Error("Array size for CullDistance must be a literal.");var a;if(0===(a=e.array[0]))throw new Error("Array size for CullDistance must not be unsized.");this.compiler.cull_distance_count=a}else t===P.BuiltInPosition&&r.get(N.DecorationInvariant)&&(this.compiler.position_invariant=!0)},t.prototype.add_if_builtin_or_block=function(e){this.add_if_builtin(e,!0)},t.prototype.add_if_builtin=function(e,t){void 0===t&&(t=!1);var r=this.compiler,a=r.maybe_get(ge,e),i=r.ir.find_meta(e);if(a&&i){var o=r.get(Ce,a.basetype),n=i.decoration,s=o.storage==I.StorageClassInput?r.active_input_builtins:r.active_output_builtins;if(n.builtin)s.set(n.builtin_type),this.handle_builtin(o,n.builtin_type,n.decoration_flags);else if(t&&r.has_decoration(o.self,N.DecorationBlock))for(var c=o.member_types.length,l=0;l<c;l++)if(r.has_member_decoration(o.self,l,N.DecorationBuiltIn)){var p=r.get(Ce,o.member_types[l]),u=r.get_member_decoration(o.self,l,N.DecorationBuiltIn);s.set(u),this.handle_builtin(p,u,r.get_member_decoration_bitset(o.self,l))}}},t}(ht),At=function(e){function t(t){var r=e.call(this)||this;return r.dref_combined_samplers=new Set,r.compiler=t,r}return i(t,e),t.prototype.handle=function(e,t,r){switch(e){case se.OpImageSampleDrefExplicitLod:case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:case se.OpImageSparseSampleDrefExplicitLod:case se.OpImageDrefGather:case se.OpImageSparseDrefGather:return this.dref_combined_samplers.add(t[2]),!0}return!0},t}(ht),Bt=function(e){function t(t,r){var a=e.call(this)||this;return a.dref_combined_samplers=new Set,a.dependency_hierarchy=[],a.comparison_ids=new Set,a.need_subpass_input=!1,a.compiler=t,a.dref_combined_samplers=r,a}return i(t,e),t.prototype.begin_function_scope=function(e,t){if(t<3)return!1;var r=this.compiler.get(we,e[2]);t-=3;for(var a=0;a<t;a++){var i=r.arguments[a];this.add_dependency(i.id,e[3+a])}return!0},t.prototype.handle=function(e,t,r){switch(e){case se.OpImageSampleDrefExplicitLod:case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:case se.OpImageSparseSampleDrefExplicitLod:case se.OpImageDrefGather:case se.OpImageSparseDrefGather:return this.dref_combined_samplers.add(t[2]),!0}return!0},t.prototype.add_hierarchy_to_comparison_ids=function(e){var t=this;this.comparison_ids.add(e),Mt(Set,this.dependency_hierarchy,e).forEach((function(e){return t.add_hierarchy_to_comparison_ids(e)}))},t.prototype.add_dependency=function(e,t){Mt(Set,this.dependency_hierarchy,e).add(t),this.comparison_ids.has(t)&&this.comparison_ids.add(e)},t}(ht),wt=function(e){function t(t,r){var a=e.call(this)||this;return a.interlock_function_id=0,a.current_block_id=0,a.split_function_case=!1,a.control_flow_interlock=!1,a.call_stack=[],a.compiler=t,a.call_stack.push(r),a}return i(t,e),t.prototype.rearm_current_block=function(e){this.current_block_id=e.self},t.prototype.begin_function_scope=function(e,t){return!(t<3)&&(this.call_stack.push(e[2]),!0)},t.prototype.end_function_scope=function(e,t){return this.call_stack.pop(),!0},t.prototype.handle=function(e,t,r){if(e===se.OpBeginInvocationInterlockEXT||e===se.OpEndInvocationInterlockEXT){if(0!=this.interlock_function_id&&this.interlock_function_id!==this.call_stack[this.call_stack.length-1])return this.split_function_case=!0,!1;var a=this.compiler;this.interlock_function_id=this.call_stack[this.call_stack.length-1];var i=a.get_cfg_for_function(this.interlock_function_id),o=a.get(we,this.interlock_function_id).entry_block;i.node_terminates_control_flow_in_sub_graph(o,this.current_block_id)||(this.control_flow_interlock=!0)}return!0},t}(ht),Nt=function(e){function t(t,r){var a=e.call(this)||this;return a.in_crit_sec=!1,a.interlock_function_id=0,a.split_function_case=!1,a.control_flow_interlock=!1,a.use_critical_section=!1,a.call_stack_is_interlocked=!1,a.call_stack=[],a.compiler=t,a.call_stack.push(r),a}return i(t,e),t.prototype.handle=function(e,t,r){if(this.use_critical_section){if(e===se.OpBeginInvocationInterlockEXT)return this.in_crit_sec=!0,!0;if(e===se.OpEndInvocationInterlockEXT)return!1}var a=this.compiler;switch(e){case se.OpLoad:if(r<3)return!1;var i=t[2];if(!(f=this.compiler.maybe_get_backing_variable(i)))break;switch(f.storage){default:break;case I.StorageClassUniformConstant:var o=t[0],n=t[1];a.set(He,n,"",o,!0),a.register_read(n,i,!0);break;case I.StorageClassUniform:if(!a.has_decoration(a.get(Ce,f.basetype).self,N.DecorationBufferBlock))break;case I.StorageClassStorageBuffer:this.access_potential_resource(f.self)}break;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;o=t[0];var s=a.get(Ce,o);if(s.storage==I.StorageClassUniform||s.storage==I.StorageClassUniformConstant||s.storage==I.StorageClassStorageBuffer){n=t[1],i=t[2];a.set(He,n,"",o,!0),a.register_read(n,i,!0),a.ir.ids[n].set_allow_type_rewrite()}break;case se.OpImageTexelPointer:if(r<3)return!1;o=t[0],n=t[1],i=t[2];var c=a.set(He,n,"",o,!0);(f=a.maybe_get_backing_variable(i))&&(c.loaded_from=f.self);break;case se.OpStore:case se.OpImageWrite:case se.OpAtomicStore:if(r<1)return!1;i=t[0];!(f=a.maybe_get_backing_variable(i))||f.storage!==I.StorageClassUniform&&f.storage!==I.StorageClassUniformConstant&&f.storage!==I.StorageClassStorageBuffer||this.access_potential_resource(f.self);break;case se.OpCopyMemory:if(r<2)return!1;var l=t[0],p=t[1],u=a.maybe_get_backing_variable(l),_=a.maybe_get_backing_variable(p);if(!u||u.storage!==I.StorageClassUniform&&u.storage!==I.StorageClassStorageBuffer||this.access_potential_resource(u.self),_){if(_.storage!=I.StorageClassUniform&&_.storage!=I.StorageClassStorageBuffer)break;if(_.storage==I.StorageClassUniform&&!a.has_decoration(a.get(Ce,_.basetype).self,N.DecorationBufferBlock))break;this.access_potential_resource(_.self)}break;case se.OpImageRead:case se.OpAtomicLoad:if(r<3)return!1;i=t[2];if(!(f=a.maybe_get_backing_variable(i)))break;switch(f.storage){default:break;case I.StorageClassUniform:if(!a.has_decoration(a.get(Ce,f.basetype).self,N.DecorationBufferBlock))break;case I.StorageClassUniformConstant:case I.StorageClassStorageBuffer:this.access_potential_resource(f.self)}break;case se.OpAtomicExchange:case se.OpAtomicCompareExchange:case se.OpAtomicIIncrement:case se.OpAtomicIDecrement:case se.OpAtomicIAdd:case se.OpAtomicISub:case se.OpAtomicSMin:case se.OpAtomicUMin:case se.OpAtomicSMax:case se.OpAtomicUMax:case se.OpAtomicAnd:case se.OpAtomicOr:case se.OpAtomicXor:if(r<3)return!1;var f;i=t[2];!(f=a.maybe_get_backing_variable(i))||f.storage!=I.StorageClassUniform&&f.storage!=I.StorageClassUniformConstant&&f.storage!=I.StorageClassStorageBuffer||this.access_potential_resource(f.self)}return!0},t.prototype.begin_function_scope=function(e,t){return!(t<3)&&(e[2]===this.interlock_function_id&&(this.call_stack_is_interlocked=!0),this.call_stack.push(e[2]),!0)},t.prototype.end_function_scope=function(e,t){return this.call_stack[this.call_stack.length-1]===this.interlock_function_id&&(this.call_stack_is_interlocked=!1),this.call_stack.pop(),!0},t.prototype.access_potential_resource=function(e){(this.use_critical_section&&this.in_crit_sec||this.control_flow_interlock&&this.call_stack_is_interlocked||this.split_function_case)&&this.compiler.interlocked_resources.add(e)},t}(ht),Pt=function(){this.alignment=0},Gt=function(e){function t(t){var r=e.call(this)||this;return r.non_block_types=new Set,r.physical_block_type_meta=[],r.access_chain_to_physical_block=[],r.compiler=t,r}return i(t,e),t.prototype.handle=function(e,t,r){switch(e){case se.OpConvertUToPtr:case se.OpBitcast:case se.OpCompositeExtract:this.setup_meta_chain(t[0],t[1]);break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:case se.OpCopyObject:var a=this.access_chain_to_physical_block[t[2]];a&&(this.access_chain_to_physical_block[t[1]]=a);break;case se.OpLoad:this.setup_meta_chain(t[0],t[1]),r>=4&&this.mark_aligned_access(t[2],t.slice(3),r-3);break;case se.OpStore:r>=3&&this.mark_aligned_access(t[0],t.slice(3),r-2)}return!0},t.prototype.mark_aligned_access=function(e,t,r){var a=t[0],i=0;if(--r&&0!=(a&W.MemoryAccessVolatileMask)&&(i++,r--),r&&0!=(a&W.MemoryAccessAlignedMask)){var o=t[i],n=this.find_block_meta(e);n&&o>n.alignment&&(n.alignment=o)}},t.prototype.find_block_meta=function(e){return this.access_chain_to_physical_block[e]||null},t.prototype.type_is_bda_block_entry=function(e){var t=this.compiler.get(Ce,e);return t.storage==I.StorageClassPhysicalStorageBufferEXT&&t.pointer&&1==t.pointer_depth&&!this.compiler.type_is_array_of_pointers(t)},t.prototype.setup_meta_chain=function(e,t){if(this.type_is_bda_block_entry(e)){var r=Mt(Pt,this.physical_block_type_meta,e);this.access_chain_to_physical_block[t]=r;var a=this.compiler.get(Ce,e);a.basetype!=ue.Struct&&this.non_block_types.add(e),0==r.alignment&&(r.alignment=this.get_minimum_scalar_alignment(this.compiler.get_pointee_type(a)))}},t.prototype.get_minimum_scalar_alignment=function(e){if(e.storage==I.StorageClassPhysicalStorageBufferEXT)return 8;if(e.basetype===ue.Struct){for(var t=0,r=0,a=e.member_types;r<a.length;r++){var i=a[r],o=this.get_minimum_scalar_alignment(this.compiler.get(Ce,i));o>t&&(t=o)}return t}return e.width/8},t.prototype.analyze_non_block_types_from_block=function(e){for(var t=0,r=e.member_types;t<r.length;t++){var a=r[t],i=this.compiler.get(Ce,a);i.basetype!==ue.Struct&&i.pointer&&i.storage===I.StorageClassPhysicalStorageBufferEXT?this.non_block_types.add(this.get_base_non_block_type_id(a)):i.basetype!==ue.Struct||i.pointer||this.analyze_non_block_types_from_block(i)}},t.prototype.get_base_non_block_type_id=function(e){for(var t=this.compiler.get(Ce,e);t.pointer&&t.storage==I.StorageClassPhysicalStorageBufferEXT&&!this.type_is_bda_block_entry(e);)e=t.parent_type,t=this.compiler.get(Ce,e);return console.assert(this.type_is_bda_block_entry(e)),e},t}(ht),Ft=function(){function e(e){this.global_variables=[],this.aliased_variables=[],this.current_loop_level=0,this.active_interface_variables=new Set,this.check_active_interface_variables=!1,this.invalid_expressions=new Set,this.is_force_recompile=!1,this.combined_image_samplers=[],this.forced_temporaries=new Set,this.forwarded_temporaries=new Set,this.suppressed_usage_tracking=new Set,this.hoisted_temporaries=new Set,this.forced_invariant_temporaries=new Set,this.active_input_builtins=new le,this.active_output_builtins=new le,this.clip_distance_count=0,this.cull_distance_count=0,this.position_invariant=!1,this.comparison_ids=new Set,this.need_subpass_input=!1,this.physical_storage_non_block_pointer_types=[],this.physical_storage_type_to_alignment=[],this.interlocked_resources=new Set,this.interlocked_is_complex=!1,this.declared_block_names=[],this.set_ir(e)}return e.prototype.get_name=function(e){return this.ir.get_name(e)},e.prototype.set_decoration=function(e,t,r){void 0===r&&(r=0),this.ir.set_decoration(e,t,r)},e.prototype.set_decoration_string=function(e,t,r){this.ir.set_decoration_string(e,t,r)},e.prototype.set_name=function(e,t){this.ir.set_name(e,t)},e.prototype.get_decoration_bitset=function(e){return this.ir.get_decoration_bitset(e)},e.prototype.get_declared_struct_member_size=function(e,t){if(0===e.member_types.length)throw new Error("Declared struct in block cannot be empty.");var r=this.get_member_decoration_bitset(e.self,t),a=this.get(Ce,e.member_types[t]);switch(a.basetype){case ue.Unknown:case ue.Void:case ue.Boolean:case ue.AtomicCounter:case ue.Image:case ue.SampledImage:case ue.Sampler:throw new Error("Querying size for object with opaque size.")}if(a.pointer&&a.storage===I.StorageClassPhysicalStorageBuffer&&a.pointer_depth>this.get(Ce,a.parent_type).pointer_depth)return 8;if(a.array.length>0){var i=a.array_size_literal[a.array_size_literal.length-1]?a.array[a.array.length-1]:this.evaluate_constant_u32(a.array[a.array.length-1]);return this.type_struct_member_array_stride(e,t)*i}if(a.basetype===ue.Struct)return this.get_declared_struct_size(a);var o=a.vecsize,n=a.columns;if(1===n)return o*(a.width/8);var s=this.type_struct_member_matrix_stride(e,t);if(r.get(N.DecorationRowMajor))return s*o;if(r.get(N.DecorationColMajor))return s*n;throw new Error("Either row-major or column-major must be declared for matrices.")},e.prototype.get_active_interface_variables=function(){var e=this,t=this.ir,r=new Set,a=new bt(this,r);return this.traverse_all_reachable_opcodes(this.get(we,t.default_entry_point),a),t.for_each_typed_id(ge,(function(t,a){a.storage===I.StorageClassOutput&&e.interface_variable_exists_in_entry_point(a.self)&&(0===a.initializer&&e.get_execution_model()===g.ExecutionModelFragment||r.add(a.self))})),this.dummy_sampler_id&&r.add(this.dummy_sampler_id),r},e.prototype.set_enabled_interface_variables=function(e){this.active_interface_variables=e,this.check_active_interface_variables=!0},e.prototype.get_shader_resources=function(e){var t=this,r=new Ot,a=this.ir,i=this.reflection_ssbo_instance_name_is_significant();return a.for_each_typed_id(ge,(function(o,n){var s=t.get(Ce,n.basetype);if(n.storage!==I.StorageClassFunction&&s.pointer&&(!e||e.has(n.self))){var c=!0;if(a.get_spirv_version()<66560&&n.storage!==I.StorageClassInput&&n.storage!==I.StorageClassOutput||(c=t.interface_variable_exists_in_entry_point(n.self)),c)if(t.is_builtin_variable(n)){if(n.storage!==I.StorageClassInput&&n.storage!==I.StorageClassOutput)return;var l=n.storage===I.StorageClassInput?r.builtin_inputs:r.builtin_outputs,p=new vt;if(t.has_decoration(s.self,N.DecorationBlock)){p.resource=new It(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1));for(var u=0;u<s.member_types.length;u++)p.value_type_id=s.member_types[u],p.builtin=t.get_member_decoration(s.self,u,N.DecorationBuiltIn),l.push(p)}else{var _=!t.has_decoration(n.self,N.DecorationPatch)&&(t.get_execution_model()===g.ExecutionModelTessellationControl||t.get_execution_model()===g.ExecutionModelTessellationEvaluation&&n.storage===I.StorageClassInput);p.resource=new It(n.self,n.basetype,s.self,t.get_name(n.self)),_&&s.array.length>0?p.value_type_id=t.get_variable_data_type(n).parent_type:p.value_type_id=t.get_variable_data_type_id(n),console.assert(p.value_type_id),p.builtin=t.get_decoration(n.self,N.DecorationBuiltIn),l.push(p)}}else n.storage===I.StorageClassInput?t.has_decoration(s.self,N.DecorationBlock)?r.stage_inputs.push(new It(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1))):r.stage_inputs.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):n.storage===I.StorageClassUniformConstant&&s.image.dim===v.DimSubpassData?r.subpass_inputs.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):n.storage===I.StorageClassOutput?t.has_decoration(s.self,N.DecorationBlock)?r.stage_outputs.push(new It(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1))):r.stage_outputs.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassUniform&&t.has_decoration(s.self,N.DecorationBlock)?r.uniform_buffers.push(new It(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1))):s.storage===I.StorageClassUniform&&t.has_decoration(s.self,N.DecorationBufferBlock)||s.storage===I.StorageClassStorageBuffer?r.storage_buffers.push(new It(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,i))):s.storage===I.StorageClassPushConstant?r.push_constant_buffers.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassUniformConstant&&s.basetype===ue.Image&&2===s.image.sampled?r.storage_images.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassUniformConstant&&s.basetype===ue.Image&&1===s.image.sampled?r.separate_images.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassUniformConstant&&s.basetype===ue.Sampler?r.separate_samplers.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassUniformConstant&&s.basetype===ue.SampledImage?r.sampled_images.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassAtomicCounter?r.atomic_counters.push(new It(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===I.StorageClassUniformConstant&&s.basetype===ue.AccelerationStructure&&r.acceleration_structures.push(new It(n.self,n.basetype,s.self,t.get_name(n.self)))}})),r},e.prototype.get_common_basic_type=function(e){var t;if(e.basetype===ue.Struct){t=ue.Unknown;for(var r=0,a=e.member_types;r<a.length;r++){var i=a[r],o=this.get_common_basic_type(this.get(Ce,i));if(void 0===o)return;if(t===ue.Unknown)t=o;else if(t!==o)return}return t}return t=e.basetype},e.prototype.set_remapped_variable_state=function(e,t){this.get(ge,e).remapped_variable=t},e.prototype.get_remapped_variable_state=function(e){return this.get(ge,e).remapped_variable},e.prototype.set_subpass_input_remapped_components=function(e,t){this.get(ge,e).remapped_components=t},e.prototype.get_subpass_input_remapped_components=function(e){return this.get(ge,e).remapped_components},e.prototype.get_entry_points_and_stages=function(){var e=[];return this.ir.entry_points.forEach((function(t){return e.push(new dt(t.orig_name,t.model))})),e},e.prototype.set_entry_point=function(e,t){var r=this.get_entry_point(e,t);this.ir.default_entry_point=r.self},e.prototype.rename_entry_point=function(e,t,r){var a=this.get_entry_point(e,r);a.orig_name=t,a.name=t},e.prototype.get_entry_point=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.ir;if(0===e.length)return r.entry_points[r.default_entry_point];var a=r.entry_points.find((function(t){return t.orig_name===e[0]&&t.model===e[1]}));if(!a)throw new Error("Entry point does not exist.");return a},e.prototype.update_active_builtins=function(){var e=this,t=this.ir;this.active_input_builtins.reset(),this.active_output_builtins.reset(),this.cull_distance_count=0,this.clip_distance_count=0;var r=new Dt(this);this.traverse_all_reachable_opcodes(this.get(we,t.default_entry_point),r),t.for_each_typed_id(ge,(function(t,a){a.storage===I.StorageClassOutput&&e.interface_variable_exists_in_entry_point(a.self)&&0!==a.initializer&&r.add_if_builtin_or_block(a.self)}))},e.prototype.has_active_builtin=function(e,t){var r;switch(t){case I.StorageClassInput:r=this.active_input_builtins;break;case I.StorageClassOutput:r=this.active_output_builtins;break;default:return!1}return r.get(e)},e.prototype.get_execution_model=function(){return this.get_entry_point().model},e.prototype.build_dummy_sampler_for_combined_images=function(){var e=new gt(this);this.traverse_all_reachable_opcodes(this.get(we,this.ir.default_entry_point),e);var t=this.ir;if(e.need_dummy_sampler){var r=t.increase_bound_by(3),a=r,i=r+1,o=r+2,n=this.set(Ce,a);n.basetype=ue.Sampler;var s=this.set(Ce,i);return f(n,s),s.self=a,s.storage=I.StorageClassUniformConstant,s.pointer=!0,s.parent_type=a,this.set(ge,o,i,I.StorageClassUniformConstant,0),this.set_name(o,"SPIRV_Cross_DummySampler"),this.dummy_sampler_id=o,o}return 0},e.prototype.build_combined_image_samplers=function(){this.ir.for_each_typed_id(we,(function(e,t){t.combined_parameters=[],t.shadow_arguments=[],t.do_combined_parameters=!0})),this.combined_image_samplers=[];var e=new Et(this);this.traverse_all_reachable_opcodes(this.get(we,this.ir.default_entry_point),e)},e.prototype.get_combined_image_samplers=function(){return this.combined_image_samplers},e.prototype.set_variable_type_remap_callback=function(e){this.variable_remap_callback=e},e.prototype.get_current_id_bound=function(){return this.ir.ids.length},e.prototype.stream=function(e){if(!e.length)return null;if(e.is_embedded()){var t=e;return console.assert(t.ops.length===e.length),new Uint32Array(t.ops)}if(e.offset+e.length>this.ir.spirv.length)throw new Error("Compiler::stream() out of range.");return this.ir.spirv.slice(e.offset,e.offset+e.length)},e.prototype.execution_is_branchless=function(e,t){for(var r=e;;){if(r.self===t.self)return!0;if(r.terminator!==ye.Direct||r.merge!==be.MergeNone)return!1;r=this.get(Ue,r.next_block)}},e.prototype.execution_is_direct_branch=function(e,t){return e.terminator===ye.Direct&&e.merge===be.MergeNone&&e.next_block===t.self},e.prototype.update_name_cache=function(e,t,r){if(r||(r=t,t=e),null!==r){var a=function(r){return!!e.has(r)||!(e===t||!t.has(r))},i=function(t){e.add(t)};if(!a(r))return i(r),r;var o=0,n=r,s=!0;"_"===n?n+="0":"_"===n.charAt(n.length-1)&&(s=!1);do{r=n+(s?"_":"")+je(++o)}while(a(r));return i(r),r}},e.prototype.force_recompile=function(){this.is_force_recompile=!0},e.prototype.is_forcing_recompilation=function(){return this.is_force_recompile},e.prototype.clear_force_recompile=function(){this.is_force_recompile=!1},e.prototype.interface_variable_exists_in_entry_point=function(e){var t=this.get(ge,e),r=this.ir;if(r.get_spirv_version()<66560){if(t.storage!==I.StorageClassInput&&t.storage!==I.StorageClassOutput&&t.storage!==I.StorageClassUniformConstant)throw new Error("Only Input, Output variables and Uniform constants are part of a shader linking interface.");if(c(r.entry_points)<=1)return!0}return this.get_entry_point().interface_variables.indexOf(e)>=0},e.prototype.remap_variable_type_name=function(e,t,r){return this.variable_remap_callback?this.variable_remap_callback(e,t,r):r},e.prototype.set_ir=function(e){this.ir=e,this.parse_fixup()},e.prototype.parse_fixup=function(){for(var e=this.ir,r=0,a=e.ids_for_constant_or_variable;r<a.length;r++){var i=a[r],o=e.ids[i];if(o.get_type()===t.TypeConstant){var n=o.get(Me);if(e.get_meta(n.self).decoration.builtin&&e.get_meta(n.self).decoration.builtin_type===P.BuiltInWorkgroupSize)for(var s=0,c=e.entry_points;s<c.length;s++){var l=c[s];l.workgroup_size.constant=n.self,l.workgroup_size.x=n.scalar(0,0),l.workgroup_size.y=n.scalar(0,1),l.workgroup_size.z=n.scalar(0,2)}}else if(o.get_type()===t.TypeVariable){var p=o.get(ge);p.storage!==I.StorageClassPrivate&&p.storage!==I.StorageClassWorkgroup&&p.storage!==I.StorageClassOutput||this.global_variables.push(p.self),this.variable_storage_is_aliased(p)&&this.aliased_variables.push(p.self)}}},e.prototype.variable_storage_is_aliased=function(e){var t=this.get(Ce,e.basetype),r=e.storage===I.StorageClassStorageBuffer||this.ir.get_meta(t.self).decoration.decoration_flags.get(N.DecorationBufferBlock),a=t.basetype===ue.Image,i=t.basetype===ue.AtomicCounter,o=t.storage===I.StorageClassPhysicalStorageBufferEXT;return!(r?this.ir.get_buffer_block_flags(e).get(N.DecorationRestrict):this.has_decoration(e.self,N.DecorationRestrict))&&(r||a||i||o)},e.prototype.set_initializers=function(e){e instanceof He&&(e.emitted_loop_level=this.current_loop_level)},e.prototype.set=function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];this.ir.add_typed_id(e.type,t);var i=u.apply(void 0,o([e,this.ir.ids[t]],r,!1));return i.self=t,this.set_initializers(i),i},e.prototype.get=function(e,t){return p(e,this.ir.ids[t])},e.prototype.has_decoration=function(e,t){return this.ir.has_decoration(e,t)},e.prototype.get_decoration=function(e,t){return this.ir.get_decoration(e,t)},e.prototype.get_decoration_string=function(e,t){return this.ir.get_decoration_string(e,t)},e.prototype.unset_decoration=function(e,t){this.ir.unset_decoration(e,t)},e.prototype.get_type=function(e){return this.get(Ce,e)},e.prototype.get_fallback_name=function(e){return"_"+e},e.prototype.get_block_fallback_name=function(e){var t=this.get(ge,e);return""===this.get_name(e)?"_"+this.get(Ce,t.basetype).self+"_"+e:this.get_name(e)},e.prototype.get_member_name=function(e,t){return this.ir.get_member_name(e,t)},e.prototype.get_member_decoration=function(e,t,r){return this.ir.get_member_decoration(e,t,r)},e.prototype.get_member_decoration_string=function(e,t,r){return this.ir.get_member_decoration_string(e,t,r)},e.prototype.set_member_name=function(e,t,r){this.ir.set_member_name(e,t,r)},e.prototype.get_member_qualified_name=function(e,t){var r=this.ir.find_meta(e);return r&&t<r.members.length?r.members[t].qualified_alias:this.ir.get_empty_string()},e.prototype.get_member_decoration_bitset=function(e,t){return this.ir.get_member_decoration_bitset(e,t)},e.prototype.has_member_decoration=function(e,t,r){return this.ir.has_member_decoration(e,t,r)},e.prototype.set_member_decoration=function(e,t,r,a){void 0===a&&(a=0),this.ir.set_member_decoration(e,t,r,a)},e.prototype.set_member_decoration_string=function(e,t,r,a){this.ir.set_member_decoration_string(e,t,r,a)},e.prototype.unset_member_decoration=function(e,t,r){this.ir.unset_member_decoration(e,t,r)},e.prototype.get_fallback_member_name=function(e){return"_"+e},e.prototype.get_declared_struct_size=function(e){if(0===e.member_types.length)throw new Error("Declared struct in block cannot be empty.");for(var t=0,r=0,a=0;a<e.member_types.length;a++){var i=this.type_struct_member_offset(e,a);i>r&&(r=i,t=a)}return r+this.get_declared_struct_member_size(e,t)},e.prototype.maybe_get=function(e,t){var r=this.ir;return t>=r.ids.length?null:r.ids[t].get_type()===e.type?this.get(e,t):null},e.prototype.get_pointee_type_id=function(e){var t=this.get(Ce,e);return t.pointer&&(console.assert(t.parent_type),e=t.parent_type),e},e.prototype.get_pointee_type=function(e){if("number"==typeof e)return this.get_pointee_type(this.get(Ce,e));var t=e;return t.pointer&&(console.assert(t.parent_type),t=this.get(Ce,t.parent_type)),t},e.prototype.get_variable_data_type_id=function(e){return e.phi_variable?e.basetype:this.get_pointee_type_id(e.basetype)},e.prototype.get_variable_data_type=function(e){return this.get(Ce,this.get_variable_data_type_id(e))},e.prototype.is_immutable=function(e){var r=this.ir;if(r.ids[e].get_type()===t.TypeVariable){var a=this.get(ge,e);return a.storage===I.StorageClassUniformConstant||a.phi_variable||!this.expression_is_lvalue(e)}return r.ids[e].get_type()===t.TypeAccessChain?this.get(qe,e).immutable:r.ids[e].get_type()===t.TypeExpression?this.get(He,e).immutable:r.ids[e].get_type()===t.TypeConstant||r.ids[e].get_type()===t.TypeConstantOp||r.ids[e].get_type()===t.TypeUndef},e.prototype.maybe_get_backing_variable=function(e){var t=this.maybe_get(ge,e);if(!t){var r=this.maybe_get(He,e);r&&(t=this.maybe_get(ge,r.loaded_from));var a=this.maybe_get(qe,e);a&&(t=this.maybe_get(ge,a.loaded_from))}return t},e.prototype.to_name=function(e,r){void 0===r&&(r=!0);var a=this.ir;if(r&&a.ids[e].get_type()===t.TypeType){var i=this.get(Ce,e);if(i.type_alias&&!this.has_extended_decoration(i.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked))return this.to_name(i.type_alias)}var o=a.get_name(e);return o&&""!==o?o:"_"+e},e.prototype.is_builtin_variable=function(e){var t=this.ir.find_meta(e.self);return!!(e.compat_builtin||t&&t.decoration.builtin)||this.is_builtin_type(this.get(Ce,e.basetype))},e.prototype.is_builtin_type=function(e){var t=this.ir.find_meta(e.self);if(t)for(var r=0,a=t.members;r<a.length;r++){if(a[r].builtin)return!0}return!1},e.prototype.is_hidden_variable=function(e,t){return void 0===t&&(t=!1),!!(this.is_builtin_variable(e)&&!t||e.remapped_variable)||!this.combined_image_samplers.find((function(t){return t.combined_id===e.self}))&&(this.ir.get_spirv_version()>=66560&&e.storage!==I.StorageClassGeneric&&e.storage!==I.StorageClassFunction&&!this.interface_variable_exists_in_entry_point(e.self)||this.check_active_interface_variables&&function(e){switch(e){case I.StorageClassInput:case I.StorageClassOutput:case I.StorageClassUniform:case I.StorageClassUniformConstant:case I.StorageClassAtomicCounter:case I.StorageClassPushConstant:case I.StorageClassStorageBuffer:return!0;default:return!1}}(e.storage)&&this.active_interface_variables.has(e.self))},e.prototype.is_member_builtin=function(e,t){var r=this.ir.find_meta(e.self);if(r){var a=r.members;if(t<a.length&&a[t].builtin)return a[t].builtin_type}},e.prototype.is_scalar=function(e){return e.basetype!==ue.Struct&&1===e.vecsize&&1===e.columns},e.prototype.is_vector=function(e){return e.vecsize>1&&1==e.columns},e.prototype.is_matrix=function(e){return e.vecsize>1&&e.columns>1},e.prototype.is_array=function(e){return e.array.length>0},e.prototype.expression_type_id=function(e){switch(this.ir.ids[e].get_type()){case t.TypeVariable:return this.get(ge,e).basetype;case t.TypeExpression:return this.get(He,e).expression_type;case t.TypeConstant:return this.get(Me,e).constant_type;case t.TypeConstantOp:return this.get(Re,e).basetype;case t.TypeUndef:return this.get(Xe,e).basetype;case t.TypeCombinedImageSampler:return this.get(Ke,e).combined_type;case t.TypeAccessChain:return this.get(qe,e).basetype;default:throw new Error("Cannot resolve expression type.")}},e.prototype.expression_type=function(e){return this.get(Ce,this.expression_type_id(e))},e.prototype.expression_is_lvalue=function(e){switch(this.expression_type(e).basetype){case ue.SampledImage:case ue.Image:case ue.Sampler:return!1;default:return!0}},e.prototype.register_read=function(e,t,r){var a=this.get(He,e),i=this.maybe_get_backing_variable(t);i&&(a.loaded_from=i.self,r&&!this.is_immutable(i.self)&&i.dependees.push(a.self),i&&i.parameter&&i.parameter.read_count++)},e.prototype.is_continue=function(e){return 0!=(this.ir.block_meta[e]&Ve.BLOCK_META_CONTINUE_BIT)},e.prototype.is_single_block_loop=function(e){var t=this.get(Ue,e);return t.merge===be.MergeLoop&&t.continue_block===e},e.prototype.traverse_all_reachable_opcodes=function(e,t){if(e instanceof we){for(var r=0,a=e.blocks;r<a.length;r++){var i=a[r];if(!this.traverse_all_reachable_opcodes(this.get(Ue,i),t))return!1}return!0}var o=e;t.set_current_block(o),t.rearm_current_block(o);for(var n=0,s=o.ops;n<s.length;n++){var c=s[n],l=this.stream(c),p=c.op;if(!t.handle(p,l,c.length))return!1;if(p===se.OpFunctionCall){var u=this.get(we,l[2]);if(t.follow_function_call(u)){if(!t.begin_function_scope(l,c.length))return!1;if(!this.traverse_all_reachable_opcodes(this.get(we,l[2]),t))return!1;if(!t.end_function_scope(l,c.length))return!1;t.rearm_current_block(o)}}}return!!t.handle_terminator(o)},e.prototype.analyze_image_and_sampler_usage=function(){var e=this.ir,t=new At(this);this.traverse_all_reachable_opcodes(this.get(we,e.default_entry_point),t);var r=new Bt(this,t.dref_combined_samplers);this.traverse_all_reachable_opcodes(this.get(we,e.default_entry_point),r),r.dependency_hierarchy=[],this.traverse_all_reachable_opcodes(this.get(we,e.default_entry_point),r),this.comparison_ids=r.comparison_ids,this.need_subpass_input=r.need_subpass_input;for(var a=0,i=this.combined_image_samplers;a<i.length;a++){var o=i[a];this.comparison_ids.has(o.sampler_id)&&this.comparison_ids.add(o.combined_id)}},e.prototype.build_function_control_flow_graphs_and_analyze=function(){var e=this,t=this.ir,r=new Lt(this);r.function_cfgs[t.default_entry_point]=new kt(this,this.get(we,t.default_entry_point)),this.traverse_all_reachable_opcodes(this.get(we,t.default_entry_point),r);var a=this.function_cfgs=r.function_cfgs,i=c(a)<=1;a.forEach((function(t,r){var a=e.get(we,r),o=new Rt(e,a);e.analyze_variable_scope(a,o),e.find_function_local_luts(a,o,i);for(var n=0,s=a.blocks;n<s.length;n++){var c=s[n],l=e.get(Ue,c);if(!(l.loop_variables.length<2)){for(var p=e.get_decoration_bitset(l.loop_variables[0]),u=e.get(ge,l.loop_variables[0]).basetype,_=!1,f=0,m=l.loop_variables;f<m.length;f++){var d=m[f];if(p!==e.get_decoration_bitset(d)||u!==e.get(ge,l.loop_variables[0]).basetype){_=!0;break}}if(_){for(var h=0,g=l.loop_variables;h<g.length;h++){d=g[h];e.get(ge,d).loop_variable=!1}l.loop_variables=[]}}}}))},e.prototype.get_cfg_for_current_function=function(){return console.assert(this.current_function),this.get_cfg_for_function(this.current_function.self)},e.prototype.get_cfg_for_function=function(e){var t=this.function_cfgs[e];return console.assert(t),t},e.prototype.analyze_parameter_preservation=function(e,t,r,a){for(var i=0,o=e.arguments;i<o.length;i++){var n=o[i],s=this.get(Ce,n.type);if(s.pointer){var c=void 0;switch(s.basetype){case ue.Sampler:case ue.Image:case ue.SampledImage:case ue.AtomicCounter:c=!1;break;default:c=!0}if(c&&r.hasOwnProperty(n.id))if(a.hasOwnProperty(n.id)){var l=a[n.id],p=new Set;Ut(t,e.entry_block,l,p)&&n.read_count++}else n.read_count++}}},e.prototype.analyze_non_block_pointer_types=function(){var e=this,t=this.ir,r=new Gt(this);this.traverse_all_reachable_opcodes(this.get(we,t.default_entry_point),r),t.for_each_typed_id(Ce,(function(t,a){(e.has_decoration(a.self,N.DecorationBlock)||e.has_decoration(a.self,N.DecorationBufferBlock))&&r.analyze_non_block_types_from_block(a)})),r.non_block_types.forEach((function(t){return e.physical_storage_non_block_pointer_types.push(t)})),this.physical_storage_non_block_pointer_types.sort(),this.physical_storage_type_to_alignment=r.physical_block_type_meta},e.prototype.analyze_variable_scope=function(e,t){var r=this;this.traverse_all_reachable_opcodes(e,t);var a=this.ir,i=this.function_cfgs[e.self];this.analyze_parameter_preservation(e,i,t.accessed_variables_to_block,t.complete_write_variables_to_block);for(var o=[],n=0,s=e.blocks;n<s.length;n++){var c=s[n],l=this.get(Ue,c),p=a.continue_block_to_loop_header[c];if(void 0!==p&&p!==c)l.loop_dominator=p;else{var u=i.find_loop_dominator(c);l.loop_dominator=u!==c?u:Ue.NoDominator}}t.accessed_variables_to_block.forEach((function(t,n){if(!(e.local_variables.indexOf(n)<0)){var s=new xt(i),c=t,l=r.expression_type(n);c.forEach((function(e){if(r.is_continue(e)&&(s.add_block(a.continue_block_to_loop_header[e]),1===l.vecsize&&1===l.columns&&l.basetype!==ue.Struct&&0===l.array.length)){var t=Mt(0,o,n);o[n]=0===t?e:-1}s.add_block(e)})),s.lift_continue_block_dominator();var p=s.get_dominator();if(p)if(!r.get(ge,n).phi_variable){var u=r.get(Ue,p);if(r.may_read_undefined_variable_in_block(u,n)){for(;u.loop_dominator!==Ue.NoDominator;)u=r.get(Ue,u.loop_dominator);u.self!==p&&(s.add_block(u.self),p=s.get_dominator())}}if(p)(u=r.get(Ue,p)).dominated_variables.push(n),r.get(ge,n).dominator=p}})),t.accessed_temporaries_to_block.forEach((function(e,o){if(t.result_id_to_type.hasOwnProperty(o)){var n=t.result_id_to_type[o],s=r.get(Ce,n);if(!r.type_is_opaque_value(s)){var c=new xt(i),l=!1,p=!1,u=e;u.forEach((function(e){if(c.add_block(e),1!==u.size&&r.is_continue(e)){var t=r.get(Ue,a.continue_block_to_loop_header[e]);console.assert(t.merge===be.MergeLoop),c.add_block(t.self),p=!0}}));var _=c.get_dominator();if(1!==u.size&&r.is_single_block_loop(_)&&(l=!0),_)if(!u.has(_)||l)if(t.access_chain_expressions.has(o)){if(p){var f=r.get(Ue,_);console.assert(f.merge===be.MergeLoop),f.complex_continue=!0}}else r.hoisted_temporaries.add(o),r.forced_temporaries.add(o),r.get(Ue,_).declare_temporary.push(new nt(t.result_id_to_type[o],o));else if(u.size>1){r.get(Ue,_).potential_declare_temporary.push(new nt(t.result_id_to_type[o],o))}}}}));var _=new Set;o.forEach((function(e,o){var n=r.get(ge,o).dominator,s=e;if(-1!==s&&0!==s&&0!==n){var c=0;a.continue_block_to_loop_header.hasOwnProperty(s)?c=a.continue_block_to_loop_header[s]:r.get(Ue,s).continue_block===s&&(c=s),console.assert(c);for(var l=r.get(Ue,c),p=Mt(Set,t.accessed_variables_to_block,o),u=p.has(c),f=!0;n!==c;){p.has(n)&&(u=!0);var m=i.get_succeeding_edges(n);if(1!==m.length){f=!1;break}var d=i.get_preceding_edges(m[0]);if(1!==d.length||d[0]!==n){f=!1;break}n=m[0]}f&&u&&(_.clear(),i.walk_from(_,l.merge_block,(function(e){return p.has(e)&&(f=!1),!0})),f&&(l.loop_variables.push(o),l.loop_variables.sort(),r.get(ge,o).loop_variable=!0))}}))},e.prototype.find_function_local_luts=function(e,r,a){var i=this,o=this.function_cfgs[e.self],n=this.ir;r.accessed_variables_to_block.forEach((function(e,s){var c=e,l=i.get(ge,s),p=i.expression_type(s);if((l.storage===I.StorageClassFunction||a&&l.storage===I.StorageClassPrivate)&&!l.phi_variable&&0!==p.array.length){var u=0;if(l.initializer){if(n.ids[l.initializer].get_type()!==t.TypeConstant)return;if(u=l.initializer,r.complete_write_variables_to_block.hasOwnProperty(l.self)||r.partial_write_variables_to_block.hasOwnProperty(l.self))return}else{if(r.partial_write_variables_to_block.hasOwnProperty(l.self))return;var _=r.complete_write_variables_to_block[l.self];if(!_)return;var f=_;if(1!==f.size)return;var m=new xt(o);c.forEach((function(e){return m.add_block(e)}));var d=m.get_dominator();if(f.has(d))return;var h=new Tt(i,l.self);if(i.traverse_all_reachable_opcodes(i.get(Ue,d),h),1!==h.write_count||0===h.static_expression)return;if(n.ids[h.static_expression].get_type()!==t.TypeConstant)return;u=h.static_expression}i.get(Me,u).is_used_as_lut=!0,l.static_expression=u,l.statically_assigned=!0,l.remapped_variable=!0}}))},e.prototype.may_read_undefined_variable_in_block=function(e,t){for(var r=0,a=e.ops;r<a.length;r++){var i=a[r],o=this.stream(i);switch(i.op){case se.OpStore:case se.OpCopyMemory:if(o[0]===t)return!1;break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:if(o[2]===t)return!0;break;case se.OpSelect:if(o[3]===t||o[4]===t)return!0;break;case se.OpPhi:if(i.length<2)break;for(var n=i.length-2,s=0;s<n;s+=2)if(o[s+2]===t)return!0;break;case se.OpCopyObject:case se.OpLoad:if(o[2]===t)return!0;break;case se.OpFunctionCall:if(i.length<3)break;var c=i.length-3;for(s=0;s<c;s++)if(o[s+3]===t)return!0}}return!0},e.prototype.analyze_interlocked_resource_usage=function(){if(this.get_execution_model()===g.ExecutionModelFragment&&(this.get_entry_point().flags.get(S.ExecutionModePixelInterlockOrderedEXT)||this.get_entry_point().flags.get(S.ExecutionModePixelInterlockUnorderedEXT)||this.get_entry_point().flags.get(S.ExecutionModeSampleInterlockOrderedEXT)||this.get_entry_point().flags.get(S.ExecutionModeSampleInterlockUnorderedEXT))){var e=this.ir,t=new wt(this,e.default_entry_point);this.traverse_all_reachable_opcodes(this.get(we,e.default_entry_point),t);var r=new Nt(this,e.default_entry_point);r.interlock_function_id=t.interlock_function_id,r.split_function_case=t.split_function_case,r.control_flow_interlock=t.control_flow_interlock,r.use_critical_section=!r.split_function_case&&!r.control_flow_interlock,this.traverse_all_reachable_opcodes(this.get(we,e.default_entry_point),r),this.interlocked_is_complex=!r.use_critical_section||r.interlock_function_id!==e.default_entry_point}},e.prototype.instruction_to_result_type=function(e,t,r,a){switch(t){case se.OpStore:case se.OpCopyMemory:case se.OpCopyMemorySized:case se.OpImageWrite:case se.OpAtomicStore:case se.OpAtomicFlagClear:case se.OpEmitStreamVertex:case se.OpEndStreamPrimitive:case se.OpControlBarrier:case se.OpMemoryBarrier:case se.OpGroupWaitEvents:case se.OpRetainEvent:case se.OpReleaseEvent:case se.OpSetUserEventStatus:case se.OpCaptureEventProfilingInfo:case se.OpCommitReadPipe:case se.OpCommitWritePipe:case se.OpGroupCommitReadPipe:case se.OpGroupCommitWritePipe:case se.OpLine:case se.OpNoLine:return!1;default:return a>1&&null!==this.maybe_get(Ce,r[0])&&(e.result_type=r[0],e.result_id=r[1],!0)}},e.prototype.combined_decoration_for_member=function(e,t){var r=new le,a=this.ir.find_meta(e.self);if(a){var i=a.members;if(t>=i.length)return r;var o=i[t];r.merge_or(o.decoration_flags);for(var n=this.get(Ce,e.member_types[t]),s=n.member_types,c=0;c<s.length;c++){this.get(Ce,s[c]).pointer||r.merge_or(this.combined_decoration_for_member(n,c))}}return r},e.prototype.is_desktop_only_format=function(e){switch(e){case E.ImageFormatR11fG11fB10f:case E.ImageFormatR16f:case E.ImageFormatRgb10A2:case E.ImageFormatR8:case E.ImageFormatRg8:case E.ImageFormatR16:case E.ImageFormatRg16:case E.ImageFormatRgba16:case E.ImageFormatR16Snorm:case E.ImageFormatRg16Snorm:case E.ImageFormatRgba16Snorm:case E.ImageFormatR8Snorm:case E.ImageFormatRg8Snorm:case E.ImageFormatR8ui:case E.ImageFormatRg8ui:case E.ImageFormatR16ui:case E.ImageFormatRgb10a2ui:case E.ImageFormatR8i:case E.ImageFormatRg8i:case E.ImageFormatR16i:return!0}return!1},e.prototype.set_extended_decoration=function(e,t,r){void 0===r&&(r=0);var a=Mt(me,this.ir.meta,e).decoration;a.extended.flags.set(t),a.extended.values[t]=r},e.prototype.get_extended_decoration=function(e,t){var r=this.ir.find_meta(e);if(!r)return 0;var a=r.decoration;return a.extended.flags.get(t)?a.extended.values[t]:Vt(t)},e.prototype.has_extended_decoration=function(e,t){var r=this.ir.find_meta(e);return!!r&&r.decoration.extended.flags.get(t)},e.prototype.set_extended_member_decoration=function(e,t,r,a){void 0===a&&(a=0);var i=Mt(me,this.ir.meta,e).members;t===i.length&&i.push(new fe);var o=i[t];o.extended.flags.set(r),o.extended.values[r]=a},e.prototype.get_extended_member_decoration=function(e,t,r){var a=this.ir.find_meta(e);if(!a)return 0;if(t>=a.members.length)return 0;var i=a.members[t];return i.extended.flags.get(r)?i.extended.values[r]:Vt(r)},e.prototype.has_extended_member_decoration=function(e,t,r){var a=this.ir.find_meta(e);return!!a&&(!(t>=a.members.length)&&a.members[t].extended.flags.get(r))},e.prototype.unset_extended_member_decoration=function(e,t,r){var a=Mt(me,this.ir.meta,e).members;t===a.length&&a.push(new fe);var i=a[t];i.extended.flags.clear(r),i.extended.values[r]=0},e.prototype.type_is_array_of_pointers=function(e){return!!e.pointer&&e.pointer_depth===this.get(Ce,e.parent_type).pointer_depth},e.prototype.type_is_opaque_value=function(e){return!e.pointer&&(e.basetype===ue.SampledImage||e.basetype===ue.Image||e.basetype===ue.Sampler)},e.prototype.is_depth_image=function(e,t){return e.image.depth&&e.image.format===E.ImageFormatUnknown||this.comparison_ids.has(t)},e.prototype.reflection_ssbo_instance_name_is_significant=function(){var e=this,t=this.ir;if(t.source.known)return t.source.hlsl;var r=new Set,a=!1;return t.for_each_typed_id(ge,(function(t,i){var o=e.get(Ce,i.basetype);o.pointer&&i.storage!==I.StorageClassFunction&&((i.storage===I.StorageClassStorageBuffer||i.storage===I.StorageClassUniform&&e.has_decoration(o.self,N.DecorationBufferBlock))&&(r.has(o.self)?a=!0:r.add(o.self)))})),a},e.prototype.type_struct_member_offset=function(e,t){var r=this.ir.find_meta(e.self);if(r){var a=r.members[t];if(a.decoration_flags.get(N.DecorationOffset))return a.offset;throw new Error("Struct member does not have Offset set.")}throw new Error("Struct member does not have Offset set.")},e.prototype.type_struct_member_array_stride=function(e,t){var r=this.ir.find_meta(e.self);if(r){var a=r.decoration;if(a.decoration_flags.get(N.DecorationArrayStride))return a.array_stride;throw new Error("Struct member does not have ArrayStride set.")}throw new Error("Struct member does not have ArrayStride set.")},e.prototype.type_struct_member_matrix_stride=function(e,t){var r=this.ir.find_meta(e.self);if(r){var a=r.members[t];if(a.decoration_flags.get(N.DecorationMatrixStride))return a.matrix_stride;throw new Error("Struct member does not have MatrixStride set.")}throw new Error("Struct member does not have MatrixStride set.")},e.prototype.get_remapped_declared_block_name=function(e,t){var r=this.declared_block_names[e];if(r)return r;var a=this.get(ge,e);if(t)return this.to_name(a.self);var i=this.get(Ce,a.basetype),o=this.ir.find_meta(i.self),n=o?o.decoration.alias:null;return n&&""!==n?n:this.get_block_fallback_name(e)},e.prototype.type_is_block_like=function(e){if(e.basetype!==ue.Struct)return!1;if(this.has_decoration(e.self,N.DecorationBlock)||this.has_decoration(e.self,N.DecorationBufferBlock))return!0;for(var t=0;t<e.member_types.length;t++)if(this.has_member_decoration(e.self,t,N.DecorationOffset))return!0;return!1},e.prototype.evaluate_spec_constant_u32=function(e){var t=this,r=this.get(Ce,e.basetype);if(r.basetype!==ue.UInt&&r.basetype!==ue.Int&&r.basetype!==ue.Boolean)throw new Error("Only 32-bit integers and booleans are currently supported when evaluating specialization constants.");if(!this.is_scalar(r))throw new Error("Spec constant evaluation must be a scalar.\n");var a=0,i=function(e){var r=t.expression_type(e);if(r.basetype!==ue.UInt&&r.basetype!==ue.Int&&r.basetype!==ue.Boolean)throw new Error("Only 32-bit integers and booleans are currently supported when evaluating specialization constants.");if(!t.is_scalar(r))throw new Error("Spec constant evaluation must be a scalar.");var a=t.maybe_get(Me,e);return a?a.scalar():t.evaluate_spec_constant_u32(t.get(Re,e))};switch(e.opcode){case se.OpIAdd:a=i(e.arguments[0])+i(e.arguments[1]);break;case se.OpISub:a=i(e.arguments[0])-i(e.arguments[1]);break;case se.OpIMul:a=i(e.arguments[0])*i(e.arguments[1]);break;case se.OpBitwiseAnd:a=i(e.arguments[0])&i(e.arguments[1]);break;case se.OpBitwiseOr:a=i(e.arguments[0])|i(e.arguments[1]);break;case se.OpBitwiseXor:a=i(e.arguments[0])^i(e.arguments[1]);break;case se.OpLogicalAnd:a=i(e.arguments[0])&i(e.arguments[1]);break;case se.OpLogicalOr:a=i(e.arguments[0])|i(e.arguments[1]);break;case se.OpShiftLeftLogical:a=i(e.arguments[0])<<i(e.arguments[1]);break;case se.OpShiftRightLogical:case se.OpShiftRightArithmetic:a=i(e.arguments[0])>>i(e.arguments[1]);break;case se.OpLogicalEqual:case se.OpIEqual:a=i(e.arguments[0])==i(e.arguments[1])?1:0;break;case se.OpLogicalNotEqual:case se.OpINotEqual:a=i(e.arguments[0])!=i(e.arguments[1])?1:0;break;case se.OpULessThan:case se.OpSLessThan:a=i(e.arguments[0])<i(e.arguments[1])?1:0;break;case se.OpULessThanEqual:case se.OpSLessThanEqual:a=i(e.arguments[0])<=i(e.arguments[1])?1:0;break;case se.OpUGreaterThan:case se.OpSGreaterThan:a=i(e.arguments[0])>i(e.arguments[1])?1:0;break;case se.OpUGreaterThanEqual:case se.OpSGreaterThanEqual:a=i(e.arguments[0])>=i(e.arguments[1])?1:0;break;case se.OpLogicalNot:a=i(e.arguments[0])?0:1;break;case se.OpNot:a=~i(e.arguments[0]);break;case se.OpSNegate:a=-i(e.arguments[0]);break;case se.OpSelect:a=i(e.arguments[0])?i(e.arguments[1]):i(e.arguments[2]);break;case se.OpUMod:case se.OpSMod:case se.OpSRem:var o=i(e.arguments[0]);if(0===(n=i(e.arguments[1])))throw new Error("Undefined behavior in Mod, b === 0.\n");a=o%n;break;case se.OpUDiv:case se.OpSDiv:var n;o=i(e.arguments[0]);if(0===(n=i(e.arguments[1])))throw new Error("Undefined behavior in Div, b === 0.\n");a=o/n;break;default:throw new Error("Unsupported spec constant opcode for evaluation.\n")}return a},e.prototype.evaluate_constant_u32=function(e){var t=this.maybe_get(Me,e);return t?t.scalar():this.evaluate_spec_constant_u32(this.get(Re,e))},e.prototype.get_case_list=function(e){var t,r,a=this.ir,i=0;if(t=this.maybe_get(Me,e.condition))i=this.get(Ce,t.constant_type).width;else if(r=this.maybe_get(ge,e.condition)){i=this.get(Ce,r.basetype).width}else{var o=a.load_type_width[e.condition];if(o)throw new Error("Use of undeclared variable on a switch statement.");i=o}return i>32?e.cases_64bit:e.cases_32bit},e}();function Ut(e,t,r,a){if(r.has(t))return!1;if(0===e.get_succeeding_edges(t).length)return!0;for(var i=0,o=e.get_succeeding_edges(t);i<o.length;i++){var n=o[i];if(a.has(n)){if(Ut(e,n,r,a))return!0;a.add(n)}}return!1}function Vt(e){switch(e){case ce.SPIRVCrossDecorationResourceIndexPrimary:case ce.SPIRVCrossDecorationResourceIndexSecondary:case ce.SPIRVCrossDecorationResourceIndexTertiary:case ce.SPIRVCrossDecorationResourceIndexQuaternary:case ce.SPIRVCrossDecorationInterfaceMemberIndex:return-1;default:return 0}}function zt(e){switch(e){case 8:return ue.SByte;case 16:return ue.Short;case 32:return ue.Int;case 64:return ue.Int64;default:throw new Error("Invalid bit width.")}}var Ht,Kt=function(e,t){this.location=e,this.component=t},qt=function(){this.fixup_clipspace=!1,this.flip_vert_y=!1,this.support_nonzero_base_instance=!0};!function(e){e[e.DontCare=0]="DontCare",e[e.Lowp=1]="Lowp",e[e.Mediump=2]="Mediump",e[e.Highp=3]="Highp"}(Ht||(Ht={}));var Xt=function(){this.default_float_precision=Ht.Mediump,this.default_int_precision=Ht.Highp},Wt=function(){this.version=450,this.es=!1,this.force_temporary=!1,this.separate_shader_objects=!1,this.flatten_multidimensional_arrays=!1,this.enable_420pack_extension=!0,this.emit_push_constant_as_uniform_buffer=!1,this.emit_uniform_buffer_as_plain_uniforms=!1,this.emit_line_directives=!1,this.enable_storage_image_qualifier_deduction=!0,this.force_zero_initialized_variables=!1,this.force_flattened_io_blocks=!1,this.ovr_multiview_view_count=0,this.vertex=new qt,this.fragment=new Xt},Qt=function(){function e(){this._str=""}return e.prototype.str=function(){return this._str},e.prototype.append=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._str=(e=this._str).concat.apply(e,t)},e.prototype.reset=function(){this._str=""},e}();function jt(e){return e.basetype===ue.Half||e.basetype===ue.Float||e.basetype===ue.Double}function Zt(e){return e.basetype===ue.SByte||e.basetype===ue.UByte||e.basetype===ue.Short||e.basetype===ue.UShort||e.basetype===ue.Int||e.basetype===ue.UInt||e.basetype===ue.Int64||e.basetype===ue.UInt64}var Yt,Jt,$t=function(){this.storage_physical_type=0,this.need_transpose=!1,this.storage_is_packed=!1,this.storage_is_invariant=!1,this.flattened_struct=!1};!function(e){e[e.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT=1]="ACCESS_CHAIN_INDEX_IS_LITERAL_BIT",e[e.ACCESS_CHAIN_CHAIN_ONLY_BIT=2]="ACCESS_CHAIN_CHAIN_ONLY_BIT",e[e.ACCESS_CHAIN_PTR_CHAIN_BIT=4]="ACCESS_CHAIN_PTR_CHAIN_BIT",e[e.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT=8]="ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT",e[e.ACCESS_CHAIN_LITERAL_MSB_FORCE_ID=16]="ACCESS_CHAIN_LITERAL_MSB_FORCE_ID",e[e.ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT=32]="ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT",e[e.ACCESS_CHAIN_FORCE_COMPOSITE_BIT=64]="ACCESS_CHAIN_FORCE_COMPOSITE_BIT"}(Yt||(Yt={})),function(e){e[e.BufferPackingStd140=0]="BufferPackingStd140",e[e.BufferPackingStd430=1]="BufferPackingStd430",e[e.BufferPackingStd140EnhancedLayout=2]="BufferPackingStd140EnhancedLayout",e[e.BufferPackingStd430EnhancedLayout=3]="BufferPackingStd430EnhancedLayout",e[e._BufferPackingHLSLCbuffer=4]="_BufferPackingHLSLCbuffer",e[e._BufferPackingHLSLCbufferPackOffset=5]="_BufferPackingHLSLCbufferPackOffset",e[e.BufferPackingScalar=6]="BufferPackingScalar",e[e.BufferPackingScalarEnhancedLayout=7]="BufferPackingScalarEnhancedLayout"}(Jt||(Jt={}));var er=[[".x",".y",".z",".w"],[".xy",".yz",".zw"],[".xyz",".yzw"],[""]],tr=[];tr[se.OpSNegate]="-",tr[se.OpNot]="~",tr[se.OpIAdd]="+",tr[se.OpISub]="-",tr[se.OpIMul]="*",tr[se.OpSDiv]="/",tr[se.OpUDiv]="/",tr[se.OpUMod]="%",tr[se.OpSMod]="%",tr[se.OpShiftRightLogical]=">>",tr[se.OpShiftRightArithmetic]=">>",tr[se.OpShiftLeftLogical]=">>",tr[se.OpBitwiseOr]="|",tr[se.OpBitwiseXor]="^",tr[se.OpBitwiseAnd]="&",tr[se.OpLogicalOr]="||",tr[se.OpLogicalAnd]="&&",tr[se.OpLogicalNot]="!",tr[se.OpLogicalEqual]="==",tr[se.OpLogicalNotEqual]="!=",tr[se.OpIEqual]="==",tr[se.OpINotEqual]="!=",tr[se.OpULessThan]="<",tr[se.OpSLessThan]="<",tr[se.OpULessThanEqual]="<=",tr[se.OpSLessThanEqual]="<=",tr[se.OpUGreaterThan]=">",tr[se.OpSGreaterThan]=">",tr[se.OpSGreaterThanEqual]=">=",tr[se.OpSGreaterThanEqual]=">=";var rr=["x","y","z","w"],ar=new Set(["abs","acos","acosh","all","any","asin","asinh","atan","atanh","atomicAdd","atomicCompSwap","atomicCounter","atomicCounterDecrement","atomicCounterIncrement","atomicExchange","atomicMax","atomicMin","atomicOr","atomicXor","bitCount","bitfieldExtract","bitfieldInsert","bitfieldReverse","ceil","cos","cosh","cross","degrees","dFdx","dFdxCoarse","dFdxFine","dFdy","dFdyCoarse","dFdyFine","distance","dot","EmitStreamVertex","EmitVertex","EndPrimitive","EndStreamPrimitive","equal","exp","exp2","faceforward","findLSB","findMSB","float16BitsToInt16","float16BitsToUint16","floatBitsToInt","floatBitsToUint","floor","fma","fract","frexp","fwidth","fwidthCoarse","fwidthFine","greaterThan","greaterThanEqual","groupMemoryBarrier","imageAtomicAdd","imageAtomicAnd","imageAtomicCompSwap","imageAtomicExchange","imageAtomicMax","imageAtomicMin","imageAtomicOr","imageAtomicXor","imageLoad","imageSamples","imageSize","imageStore","imulExtended","int16BitsToFloat16","intBitsToFloat","interpolateAtOffset","interpolateAtCentroid","interpolateAtSample","inverse","inversesqrt","isinf","isnan","ldexp","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","memoryBarrier","memoryBarrierAtomicCounter","memoryBarrierBuffer","memoryBarrierImage","memoryBarrierShared","min","mix","mod","modf","noise","noise1","noise2","noise3","noise4","normalize","not","notEqual","outerProduct","packDouble2x32","packHalf2x16","packInt2x16","packInt4x16","packSnorm2x16","packSnorm4x8","packUint2x16","packUint4x16","packUnorm2x16","packUnorm4x8","pow","radians","reflect","refract","round","roundEven","sign","sin","sinh","smoothstep","sqrt","step","tan","tanh","texelFetch","texelFetchOffset","texture","textureGather","textureGatherOffset","textureGatherOffsets","textureGrad","textureGradOffset","textureLod","textureLodOffset","textureOffset","textureProj","textureProjGrad","textureProjGradOffset","textureProjLod","textureProjLodOffset","textureProjOffset","textureQueryLevels","textureQueryLod","textureSamples","textureSize","transpose","trunc","uaddCarry","uint16BitsToFloat16","uintBitsToFloat","umulExtended","unpackDouble2x32","unpackHalf2x16","unpackInt2x16","unpackInt4x16","unpackSnorm2x16","unpackSnorm4x8","unpackUint2x16","unpackUint4x16","unpackUnorm2x16","unpackUnorm4x8","usubBorrow","active","asm","atomic_uint","attribute","bool","break","buffer","bvec2","bvec3","bvec4","case","cast","centroid","class","coherent","common","const","continue","default","discard","dmat2","dmat2x2","dmat2x3","dmat2x4","dmat3","dmat3x2","dmat3x3","dmat3x4","dmat4","dmat4x2","dmat4x3","dmat4x4","do","double","dvec2","dvec3","dvec4","else","enum","extern","external","false","filter","fixed","flat","float","for","fvec2","fvec3","fvec4","goto","half","highp","hvec2","hvec3","hvec4","if","iimage1D","iimage1DArray","iimage2D","iimage2DArray","iimage2DMS","iimage2DMSArray","iimage2DRect","iimage3D","iimageBuffer","iimageCube","iimageCubeArray","image1D","image1DArray","image2D","image2DArray","image2DMS","image2DMSArray","image2DRect","image3D","imageBuffer","imageCube","imageCubeArray","in","inline","inout","input","int","interface","invariant","isampler1D","isampler1DArray","isampler2D","isampler2DArray","isampler2DMS","isampler2DMSArray","isampler2DRect","isampler3D","isamplerBuffer","isamplerCube","isamplerCubeArray","ivec2","ivec3","ivec4","layout","long","lowp","mat2","mat2x2","mat2x3","mat2x4","mat3","mat3x2","mat3x3","mat3x4","mat4","mat4x2","mat4x3","mat4x4","mediump","namespace","noinline","noperspective","out","output","packed","partition","patch","precise","precision","public","readonly","resource","restrict","return","sample","sampler1D","sampler1DArray","sampler1DArrayShadow","sampler1DShadow","sampler2D","sampler2DArray","sampler2DArrayShadow","sampler2DMS","sampler2DMSArray","sampler2DRect","sampler2DRectShadow","sampler2DShadow","sampler3D","sampler3DRect","samplerBuffer","samplerCube","samplerCubeArray","samplerCubeArrayShadow","samplerCubeShadow","shared","short","sizeof","smooth","static","struct","subroutine","superp","switch","template","this","true","typedef","uimage1D","uimage1DArray","uimage2D","uimage2DArray","uimage2DMS","uimage2DMSArray","uimage2DRect","uimage3D","uimageBuffer","uimageCube","uimageCubeArray","uint","uniform","union","unsigned","usampler1D","usampler1DArray","usampler2D","usampler2DArray","usampler2DMS","usampler2DMSArray","usampler2DRect","usampler3D","usamplerBuffer","usamplerCube","usamplerCubeArray","using","uvec2","uvec3","uvec4","varying","vec2","vec3","vec4","void","volatile","while","writeonly"]),ir=function(e){function r(t){var r=e.call(this,t)||this;return r.buffer=new Qt,r.options=new Wt,r.local_variable_names=new Set,r.resource_names=new Set,r.block_input_names=new Set,r.block_output_names=new Set,r.block_ubo_names=new Set,r.block_ssbo_names=new Set,r.block_names=new Set,r.function_overloads={},r.preserved_aliases=[],r.backend=new yt,r.indent=0,r.flushed_phi_variables=new Set,r.flattened_buffer_blocks=new Set,r.flattened_structs=[],r.expression_usage_counts=[],r.forced_extensions=[],r.header_lines=[],r.statement_count=0,r.requires_transpose_2x2=!1,r.requires_transpose_3x3=!1,r.requires_transpose_4x4=!1,r.subpass_to_framebuffer_fetch_attachment=[],r.inout_color_attachments=[],r.masked_output_locations=new Set,r.masked_output_builtins=new Set,r.init(),r}return i(r,e),r.prototype.remap_pixel_local_storage=function(e,t){this.pls_inputs=e,this.pls_outputs=t,this.remap_pls_variables()},r.prototype.remap_ext_framebuffer_fetch=function(e,t,r){this.subpass_to_framebuffer_fetch_attachment.push(new nt(e,t)),this.inout_color_attachments.push(new nt(t,r))},r.prototype.get_common_options=function(){return this.options},r.prototype.require_extension=function(e){this.has_extension(e)||this.forced_extensions.push(e)},r.prototype.flatten_buffer_block=function(e){var t=this.get(ge,e),r=this.get(Ce,t.basetype),a=this.to_name(r.self,!1),i=Mt(me,this.ir.meta,r.self).decoration.decoration_flags;if(r.array.length>0)throw new Error(a+" is an array of UBOs.");if(r.basetype!==ue.Struct)throw new Error(a+" is not a struct.");if(!i.get(N.DecorationBlock))throw new Error(a+" is not a block.");if(0===r.member_types.length)throw new Error(a+" is an empty struct.");this.flattened_buffer_blocks.add(e)},r.prototype.mask_stage_output_by_location=function(e,t){this.masked_output_locations.add(new Kt(e,t))},r.prototype.mask_stage_output_by_builtin=function(e){this.masked_output_builtins.add(e)},r.prototype.reset=function(){this.clear_force_recompile(),this.invalid_expressions.clear(),this.current_function=null,this.expression_usage_counts=[],this.forwarded_temporaries.clear(),this.suppressed_usage_tracking.clear(),this.flushed_phi_variables.clear(),this.reset_name_caches();var e=this.ir;e.for_each_typed_id(we,(function(e,t){t.active=!1,t.flush_undeclared=!0})),e.for_each_typed_id(ge,(function(e,t){return t.dependees=[]})),e.reset_all_of_type(He),e.reset_all_of_type(qe),this.statement_count=0,this.indent=0,this.current_loop_level=0},r.prototype.has_extension=function(e){return this.forced_extensions.indexOf(e)>=0},r.prototype.require_extension_internal=function(e){this.backend.supports_extensions&&!this.has_extension(e)&&(this.forced_extensions.push(e),this.force_recompile())},r.prototype.emit_header=function(){var e=this.get_entry_point(),t=this.options;100!==t.version&&this.statement("#version ",t.version,t.es&&t.version>100?" es":""),!t.es&&t.version<420&&(t.enable_420pack_extension&&(this.statement("#ifdef GL_ARB_shading_language_420pack"),this.statement("#extension GL_ARB_shading_language_420pack : require"),this.statement("#endif")),e.flags.get(S.ExecutionModeEarlyFragmentTests)&&this.require_extension_internal("GL_ARB_shader_image_load_store")),e.flags.get(S.ExecutionModePostDepthCoverage)&&this.require_extension_internal("GL_ARB_post_depth_coverage");var r=e.flags.get(S.ExecutionModePixelInterlockOrderedEXT)||e.flags.get(S.ExecutionModePixelInterlockUnorderedEXT)||e.flags.get(S.ExecutionModeSampleInterlockOrderedEXT)||e.flags.get(S.ExecutionModeSampleInterlockUnorderedEXT);if(r)if(t.es){if(t.version<310)throw new Error("At least ESSL 3.10 required for fragment shader interlock.");this.require_extension_internal("GL_NV_fragment_shader_interlock")}else t.version<420&&this.require_extension_internal("GL_ARB_shader_image_load_store"),this.require_extension_internal("GL_ARB_fragment_shader_interlock");for(var a=0,i=this.forced_extensions;a<i.length;a++){var o=i[a];"GL_EXT_shader_explicit_arithmetic_types_float16"===o?(this.statement("#if defined(GL_AMD_gpu_shader_half_float)"),this.statement("#extension GL_AMD_gpu_shader_half_float : require"),this.statement("#elif defined(GL_NV_gpu_shader5)"),this.statement("#extension GL_NV_gpu_shader5 : require"),this.statement("#else"),this.statement("#error No extension available for FP16."),this.statement("#endif")):"GL_EXT_shader_explicit_arithmetic_types_int16"===o?(this.statement("#if defined(GL_AMD_gpu_shader_int16)"),this.statement("#extension GL_AMD_gpu_shader_int16 : require"),this.statement("#elif defined(GL_NV_gpu_shader5)"),this.statement("#extension GL_NV_gpu_shader5 : require"),this.statement("#else"),this.statement("#error No extension available for Int16."),this.statement("#endif")):"GL_ARB_post_depth_coverage"===o?t.es?this.statement("#extension GL_EXT_post_depth_coverage : require"):(this.statement("#if defined(GL_ARB_post_depth_coverge)"),this.statement("#extension GL_ARB_post_depth_coverage : require"),this.statement("#else"),this.statement("#extension GL_EXT_post_depth_coverage : require"),this.statement("#endif")):/*!options.vulkan_semantics &&*/"GL_ARB_shader_draw_parameters"===o?(this.statement("#ifdef ",o),this.statement("#extension ",o," : enable"),this.statement("#endif")):"GL_EXT_control_flow_attributes"===o?(this.statement("#if defined(GL_EXT_control_flow_attributes)"),this.statement("#extension GL_EXT_control_flow_attributes : require"),this.statement("#define SPIRV_CROSS_FLATTEN [[flatten]]"),this.statement("#define SPIRV_CROSS_BRANCH [[dont_flatten]]"),this.statement("#define SPIRV_CROSS_UNROLL [[unroll]]"),this.statement("#define SPIRV_CROSS_LOOP [[dont_unroll]]"),this.statement("#else"),this.statement("#define SPIRV_CROSS_FLATTEN"),this.statement("#define SPIRV_CROSS_BRANCH"),this.statement("#define SPIRV_CROSS_UNROLL"),this.statement("#define SPIRV_CROSS_LOOP"),this.statement("#endif")):"GL_NV_fragment_shader_interlock"===o?(this.statement("#extension GL_NV_fragment_shader_interlock : require"),this.statement("#define SPIRV_Cross_beginInvocationInterlock() beginInvocationInterlockNV()"),this.statement("#define SPIRV_Cross_endInvocationInterlock() endInvocationInterlockNV()")):"GL_ARB_fragment_shader_interlock"===o?(this.statement("#ifdef GL_ARB_fragment_shader_interlock"),this.statement("#extension GL_ARB_fragment_shader_interlock : enable"),this.statement("#define SPIRV_Cross_beginInvocationInterlock() beginInvocationInterlockARB()"),this.statement("#define SPIRV_Cross_endInvocationInterlock() endInvocationInterlockARB()"),this.statement("#elif defined(GL_INTEL_fragment_shader_ordering)"),this.statement("#extension GL_INTEL_fragment_shader_ordering : enable"),this.statement("#define SPIRV_Cross_beginInvocationInterlock() beginFragmentShaderOrderingINTEL()"),this.statement("#define SPIRV_Cross_endInvocationInterlock()"),this.statement("#endif")):this.statement("#extension ",o," : require")}for(var n=0,s=this.header_lines;n<s.length;n++){var c=s[n];this.statement(c)}var l=[],p=[];switch(e.model){case g.ExecutionModelVertex:t.ovr_multiview_view_count&&l.push("num_views = "+t.ovr_multiview_view_count);break;case g.ExecutionModelFragment:if(t.es){switch(t.fragment.default_float_precision){case Ht.Lowp:this.statement("precision lowp float;");break;case Ht.Mediump:this.statement("precision mediump float;");break;case Ht.Highp:this.statement("precision highp float;")}switch(t.fragment.default_int_precision){case Ht.Lowp:this.statement("precision lowp int;");break;case Ht.Mediump:this.statement("precision mediump int;");break;case Ht.Highp:this.statement("precision highp int;")}}e.flags.get(S.ExecutionModeEarlyFragmentTests)&&l.push("early_fragment_tests"),e.flags.get(S.ExecutionModePostDepthCoverage)&&l.push("post_depth_coverage"),r&&this.statement("#if defined(GL_ARB_fragment_shader_interlock)"),e.flags.get(S.ExecutionModePixelInterlockOrderedEXT)?this.statement("layout(pixel_interlock_ordered) in;"):e.flags.get(S.ExecutionModePixelInterlockUnorderedEXT)?this.statement("layout(pixel_interlock_unordered) in;"):e.flags.get(S.ExecutionModeSampleInterlockOrderedEXT)?this.statement("layout(sample_interlock_ordered) in;"):e.flags.get(S.ExecutionModeSampleInterlockUnorderedEXT)&&this.statement("layout(sample_interlock_unordered) in;"),r&&(this.statement("#elif !defined(GL_INTEL_fragment_shader_ordering)"),this.statement("#error Fragment Shader Interlock/Ordering extension missing!"),this.statement("#endif")),!t.es&&e.flags.get(S.ExecutionModeDepthGreater)?this.statement("layout(depth_greater) out float gl_FragDepth;"):!t.es&&e.flags.get(S.ExecutionModeDepthLess)&&this.statement("layout(depth_less) out float gl_FragDepth;")}l.length>0&&this.statement("layout(",l.join(", "),") in;"),p.length>0&&this.statement("layout(",p.join(", "),") out;"),this.statement("")},r.prototype.emit_struct_member=function(e,t,r,a,i){void 0===a&&(a="");var o,n=this.get(Ce,t),s=this.ir,c=Mt(me,s.meta,e.self).members;o=r<c.length?c[r].decoration_flags:new le;var l="",p=Mt(me,s.meta,e.self).decoration.decoration_flags;(p.get(N.DecorationBlock)||p.get(N.DecorationBufferBlock))&&(l=this.to_interpolation_qualifiers(o)),this.statement(this.layout_for_member(e,r),l,a,this.flags_to_qualifiers_glsl(n,o),this.variable_decl(n,this.to_member_name(e,r)),";")},r.prototype.emit_struct_padding_target=function(e){},r.prototype.emit_buffer_block=function(e){var t=this.get(Ce,e.basetype),r=e.storage===I.StorageClassUniform&&this.has_decoration(t.self,N.DecorationBlock),a=this.options;this.flattened_buffer_blocks.has(e.self)?this.emit_buffer_block_flattened(e):this.is_legacy()||!a.es&&130===a.version||r&&a.emit_uniform_buffer_as_plain_uniforms?this.emit_buffer_block_legacy(e):this.emit_buffer_block_native(e)},r.prototype.emit_push_constant_block=function(e){var t=this.options;this.flattened_buffer_blocks.has(e.self)?this.emit_buffer_block_flattened(e):t.emit_push_constant_as_uniform_buffer?this.emit_buffer_block_native(e):this.emit_push_constant_block_glsl(e)},r.prototype.emit_buffer_block_legacy=function(e){var t=this.get(Ce,e.basetype),r=this.ir;if(e.storage===I.StorageClassStorageBuffer||r.meta[t.self].decoration.decoration_flags.get(N.DecorationBufferBlock))throw new Error("SSBOs not supported in legacy targets.");var a=r.meta[t.self].decoration.decoration_flags,i=a.get(N.DecorationBlock);a.clear(N.DecorationBlock),this.emit_struct(t),i&&a.set(N.DecorationBlock),this.emit_uniform(e),this.statement("")},r.prototype.emit_buffer_block_flattened=function(e){var t=this.get(Ce,e.basetype),r=this.to_name(t.self,!1),a=(this.get_declared_struct_size(t)+15)/16,i=this.get_common_basic_type(t);if(void 0===i)throw new Error("All basic types in a flattened block must be the same.");var o=new Ce;if(o.basetype=i,o.vecsize=4,i!==ue.Float&&i!==ue.Int&&i!==ue.UInt)throw new Error("Basic types in a flattened UBO must be float, int or uint.");var n=this.ir.get_buffer_block_flags(e);this.statement("uniform ",this.flags_to_qualifiers_glsl(o,n),this.type_to_glsl(o)," ",r,"[",a,"];")},r.prototype.emit_flattened_io_block=function(e,t){var r=this.get(Ce,e.basetype);if(r.array.length>0)throw new Error("Array of varying structs cannot be flattened to legacy-compatible varyings.");var a=r.type_alias?this.get(Ce,r.type_alias):r,i=this.ir,o=Mt(me,i.meta,a.self).decoration,n=o.decoration_flags.clone();o.decoration_flags.set(N.DecorationBlock),a.member_name_cache.clear();var s=[];s.push(0);for(var c=this.to_name(e.self),l=0,p=0,u=a.member_types;p<u.length;p++){var _=u[p];this.add_member_name(a,l);var f=this.get(Ce,_);s[s.length-1]=l,f.basetype===ue.Struct?this.emit_flattened_io_block_struct(c,a,t,s):this.emit_flattened_io_block_member(c,a,t,s),l++}o.decoration_flags=n,this.flattened_structs[e.self]=!0},r.prototype.emit_flattened_io_block_struct=function(e,t,r,a){var i=a.concat();i.push(0);for(var o=t,n=0,s=a;n<s.length;n++){var c=s[n];o=this.get(Ce,o.member_types[c])}if(console.assert(o.basetype===ue.Struct),o.array.length>0)throw new Error("Cannot flatten array of structs in I/O blocks.");for(var l=0;l<o.member_types.length;l++)i[i.length-1]=l,this.get(Ce,o.member_types[l]).basetype===ue.Struct?this.emit_flattened_io_block_struct(e,t,r,i):this.emit_flattened_io_block_member(e,t,r,i)},r.prototype.emit_flattened_io_block_member=function(e,t,r,a){for(var i=t.self,o=t,n=null,s=e,c=0,l=a;c<l.length;c++){var p=l[c];s+="_",s+=this.to_member_name(o,p),n=o,i=o.member_types[p],o=this.get(Ce,i)}console.assert(o.basetype!==ue.Struct),n.type_alias&&(n=this.get(Ce,n.type_alias)),s=Je.sanitize_underscores(s);var u=a[a.length-1];this.get_member_name(n.self,u);var _=this.to_member_name(n,u);this.set_member_name(n.self,u,s),this.emit_struct_member(n,i,u,r),this.set_member_name(n.self,u,_)},r.prototype.emit_uniform=function(e){var t=this.get(Ce,e.basetype),r=this.options;if(t.basetype===ue.Image&&2===t.image.sampled&&t.image.dim!==v.DimSubpassData)if(!r.es&&r.version<420)this.require_extension_internal("GL_ARB_shader_image_load_store");else if(r.es&&r.version<310)throw new Error("At least ESSL 3.10 required for shader image load store.");this.add_resource_name(e.self),this.statement(this.layout_for_variable(e),this.variable_decl(e),";")},r.prototype.unpack_expression_type=function(e,t,r,a,i){return e},r.prototype.builtin_translates_to_nonarray=function(e){return!1},r.prototype.statement_inner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)this.buffer.append(e[r]),this.statement_count++},r.prototype.type_to_glsl=function(e,t){if(void 0===t&&(t=0),e.pointer&&e.storage===I.StorageClassPhysicalStorageBufferEXT&&e.basetype!==ue.Struct){for(var r=this.type_to_glsl(this.get_pointee_type(e)),a=0;a<e.array.length;a++)e.array_size_literal[a]?r+=e.array[a]+"_":r+="id".concat(e.array[a],'_"');return r+="Pointer"}var i=this.backend;switch(e.basetype){case ue.Struct:return i.explicit_struct_type?"struct "+this.to_name(e.self):this.to_name(e.self);case ue.Image:case ue.SampledImage:return this.image_type_glsl(e,t);case ue.Sampler:return this.comparison_ids.has(t)?"samplerShadow":"sampler";case ue.AccelerationStructure:throw new Error("AccelerationStructure is not supported");case ue.RayQuery:throw new Error("RayQuery is not supported");case ue.Void:return"void"}if(e.basetype===ue.UInt&&this.is_legacy())throw new Error("Unsigned integers are not supported on legacy targets.");if(1===e.vecsize&&1===e.columns)switch(e.basetype){case ue.Boolean:return"bool";case ue.SByte:return i.basic_int8_type;case ue.UByte:return i.basic_uint8_type;case ue.Short:return i.basic_int16_type;case ue.UShort:return i.basic_uint16_type;case ue.Int:return i.basic_int_type;case ue.UInt:return i.basic_uint_type;case ue.AtomicCounter:return"atomic_uint";case ue.Half:return"float16_t";case ue.Float:return"float";case ue.Double:return"double";case ue.Int64:return"int64_t";case ue.UInt64:return"uint64_t";default:return"???"}else if(e.vecsize>1&&1===e.columns)switch(e.basetype){case ue.Boolean:return"bvec"+e.vecsize;case ue.SByte:return"i8vec"+e.vecsize;case ue.UByte:return"u8vec"+e.vecsize;case ue.Short:return"i16vec"+e.vecsize;case ue.UShort:return"u16vec"+e.vecsize;case ue.Int:return"ivec"+e.vecsize;case ue.UInt:return"uvec"+e.vecsize;case ue.Half:return"f16vec"+e.vecsize;case ue.Float:return"vec"+e.vecsize;case ue.Double:return"dvec"+e.vecsize;case ue.Int64:return"i64vec"+e.vecsize;case ue.UInt64:return"u64vec"+e.vecsize;default:return"???"}else if(e.vecsize===e.columns)switch(e.basetype){case ue.Boolean:return"bmat"+e.vecsize;case ue.Int:return"imat"+e.vecsize;case ue.UInt:return"umat"+e.vecsize;case ue.Half:return"f16mat"+e.vecsize;case ue.Float:return"mat"+e.vecsize;case ue.Double:return"dmat"+e.vecsize;default:return"???"}else switch(e.basetype){case ue.Boolean:return"bmat".concat(e.columns,"x").concat(e.vecsize);case ue.Int:return"imat".concat(e.columns,"x").concat(e.vecsize);case ue.UInt:return"umat".concat(e.columns,"x").concat(e.vecsize);case ue.Half:return"f16mat".concat(e.columns,"x").concat(e.vecsize);case ue.Float:return"mat".concat(e.columns,"x").concat(e.vecsize);case ue.Double:return"dmat".concat(e.columns,"x").concat(e.vecsize);default:return"???"}},r.prototype.builtin_to_glsl=function(e,t){var r=this.options;switch(e){case P.BuiltInPosition:return"gl_Position";case P.BuiltInPointSize:return"gl_PointSize";case P.BuiltInClipDistance:return"gl_ClipDistance";case P.BuiltInCullDistance:return"gl_CullDistance";case P.BuiltInVertexId:return"gl_VertexID";case P.BuiltInInstanceId:return!r.es&&r.version<140&&this.require_extension_internal("GL_ARB_draw_instanced"),"gl_InstanceID";case P.BuiltInVertexIndex:return"gl_VertexID";case P.BuiltInInstanceIndex:return!r.es&&r.version<140&&this.require_extension_internal("GL_ARB_draw_instanced"),r.vertex.support_nonzero_base_instance?(this.require_extension_internal("GL_ARB_shader_draw_parameters"),"(gl_InstanceID + SPIRV_Cross_BaseInstance)"):"gl_InstanceID";case P.BuiltInPrimitiveId:return t===I.StorageClassInput&&this.get_entry_point().model===g.ExecutionModelGeometry?"gl_PrimitiveIDIn":"gl_PrimitiveID";case P.BuiltInInvocationId:return"gl_InvocationID";case P.BuiltInLayer:return"gl_Layer";case P.BuiltInViewportIndex:return"gl_ViewportIndex";case P.BuiltInTessLevelOuter:return"gl_TessLevelOuter";case P.BuiltInTessLevelInner:return"gl_TessLevelInner";case P.BuiltInTessCoord:return"gl_TessCoord";case P.BuiltInFragCoord:return"gl_FragCoord";case P.BuiltInPointCoord:return"gl_PointCoord";case P.BuiltInFrontFacing:return"gl_FrontFacing";case P.BuiltInFragDepth:return"gl_FragDepth";case P.BuiltInNumWorkgroups:return"gl_NumWorkGroups";case P.BuiltInWorkgroupSize:return"gl_WorkGroupSize";case P.BuiltInWorkgroupId:return"gl_WorkGroupID";case P.BuiltInLocalInvocationId:return"gl_LocalInvocationID";case P.BuiltInGlobalInvocationId:return"gl_GlobalInvocationID";case P.BuiltInLocalInvocationIndex:return"gl_LocalInvocationIndex";case P.BuiltInHelperInvocation:return"gl_HelperInvocation";case P.BuiltInBaseVertex:if(r.es)throw new Error("BaseVertex not supported in ES profile.");return this.require_extension_internal("GL_ARB_shader_draw_parameters"),"SPIRV_Cross_BaseVertex";case P.BuiltInBaseInstance:if(r.es)throw new Error("BaseInstance not supported in ES profile.");return this.require_extension_internal("GL_ARB_shader_draw_parameters"),"SPIRV_Cross_BaseInstance";case P.BuiltInDrawIndex:if(r.es)throw new Error("DrawIndex not supported in ES profile.");return this.require_extension_internal("GL_ARB_shader_draw_parameters"),"gl_DrawIDARB";case P.BuiltInSampleId:if(r.es&&r.version<320&&this.require_extension_internal("GL_OES_sample_variables"),!r.es&&r.version<400)throw new Error("gl_SampleID not supported before GLSL 400.");return"gl_SampleID";case P.BuiltInSampleMask:if(r.es&&r.version<320&&this.require_extension_internal("GL_OES_sample_variables"),!r.es&&r.version<400)throw new Error("gl_SampleMask/gl_SampleMaskIn not supported before GLSL 400.");return t===I.StorageClassInput?"gl_SampleMaskIn":"gl_SampleMask";case P.BuiltInSamplePosition:if(r.es&&r.version<320&&this.require_extension_internal("GL_OES_sample_variables"),!r.es&&r.version<400)throw new Error("gl_SamplePosition not supported before GLSL 400.");return"gl_SamplePosition";case P.BuiltInViewIndex:return"gl_ViewID_OVR";case P.BuiltInNumSubgroups:case P.BuiltInSubgroupId:case P.BuiltInSubgroupSize:case P.BuiltInSubgroupLocalInvocationId:case P.BuiltInSubgroupEqMask:case P.BuiltInSubgroupGeMask:case P.BuiltInSubgroupGtMask:case P.BuiltInSubgroupLeMask:case P.BuiltInSubgroupLtMask:throw new Error("Subgroups not supported");case P.BuiltInLaunchIdKHR:case P.BuiltInLaunchSizeKHR:case P.BuiltInWorldRayOriginKHR:case P.BuiltInWorldRayDirectionKHR:case P.BuiltInObjectRayOriginKHR:case P.BuiltInObjectRayDirectionKHR:case P.BuiltInRayTminKHR:case P.BuiltInRayTmaxKHR:case P.BuiltInInstanceCustomIndexKHR:case P.BuiltInObjectToWorldKHR:case P.BuiltInWorldToObjectKHR:case P.BuiltInHitTNV:case P.BuiltInHitKindKHR:case P.BuiltInIncomingRayFlagsKHR:throw new Error("Raytracing not supported");case P.BuiltInBaryCoordNV:if(r.es&&r.version<320)throw new Error("gl_BaryCoordNV requires ESSL 320.");if(!r.es&&r.version<450)throw new Error("gl_BaryCoordNV requires GLSL 450.");return this.require_extension_internal("GL_NV_fragment_shader_barycentric"),"gl_BaryCoordNV";case P.BuiltInBaryCoordNoPerspNV:if(r.es&&r.version<320)throw new Error("gl_BaryCoordNoPerspNV requires ESSL 320.");if(!r.es&&r.version<450)throw new Error("gl_BaryCoordNoPerspNV requires GLSL 450.");return this.require_extension_internal("GL_NV_fragment_shader_barycentric"),"gl_BaryCoordNoPerspNV";case P.BuiltInFragStencilRefEXT:if(r.es)throw new Error("Stencil export not supported in GLES.");return this.require_extension_internal("GL_ARB_shader_stencil_export"),"gl_FragStencilRefARB";case P.BuiltInPrimitiveShadingRateKHR:throw new Error("Can only use PrimitiveShadingRateKHR in Vulkan GLSL.");case P.BuiltInShadingRateKHR:throw new Error("Can only use ShadingRateKHR in Vulkan GLSL.");case P.BuiltInDeviceIndex:throw new Error("Need Vulkan semantics for device group support.");case P.BuiltInFullyCoveredEXT:if(r.es)throw new Error("Need desktop GL to use GL_NV_conservative_raster_underestimation.");return this.require_extension_internal("GL_NV_conservative_raster_underestimation"),"gl_FragFullyCoveredNV";default:return"gl_BuiltIn_"+je(e)}},r.prototype.image_type_glsl=function(e,t){void 0===t&&(t=0);var r="";switch(this.get(Ce,e.image.type).basetype){case ue.Int:case ue.Short:case ue.SByte:r="i";break;case ue.UInt:case ue.UShort:case ue.UByte:r="u"}var a=this.options;if(e.basetype===ue.Image&&e.image.dim===v.DimSubpassData&&this.subpass_input_is_framebuffer_fetch(t)){var i=this.get(Ce,e.image.type);return i.vecsize=4,this.type_to_glsl(i)}switch(e.basetype===ue.Image&&e.image.dim!==v.DimSubpassData?e.image.dim===v.DimBuffer&&1===e.image.sampled?r+="sampler":r+=2===e.image.sampled?"image":"texture":r+="sampler",e.image.dim){case v.Dim1D:r+="1D";break;case v.Dim2D:r+="2D";break;case v.Dim3D:r+="3D";break;case v.DimCube:r+="Cube";break;case v.DimRect:if(a.es)throw new Error("Rectangle textures are not supported on OpenGL ES.");this.is_legacy_desktop()&&this.require_extension_internal("GL_ARB_texture_rectangle"),r+="2DRect";break;case v.DimBuffer:a.es&&a.version<320?this.require_extension_internal("GL_EXT_texture_buffer"):!a.es&&a.version<300&&this.require_extension_internal("GL_EXT_texture_buffer_object"),r+="Buffer";break;case v.DimSubpassData:r+="2D";break;default:throw new Error("Only 1D, 2D, 2DRect, 3D, Buffer, InputTarget and Cube textures supported.")}return e.image.ms&&(r+="MS"),e.image.arrayed&&(this.is_legacy_desktop()&&this.require_extension_internal("GL_EXT_texture_array"),r+="Array"),e.basetype!==ue.SampledImage&&e.basetype!==ue.Sampler||!this.is_depth_image(e,t)||(r+="Shadow"),r},r.prototype.constant_expression=function(e){var t=this.get(Ce,e.constant_type),r=this.backend;if(t.pointer)return r.null_pointer_literal;if(e.subconstants.length>0){var a=void 0,i=!1;r.use_initializer_list&&r.use_typed_initializer_list&&t.basetype===ue.Struct&&0===t.array.length?a=this.type_to_glsl_constructor(t)+"{ ":r.use_initializer_list&&r.use_typed_initializer_list&&r.array_is_value_type&&t.array.length>0?(a=this.type_to_glsl_constructor(t)+"({ ",i=!0):a=r.use_initializer_list?"{ ":this.type_to_glsl_constructor(t)+"(";for(var o=0;o<e.subconstants.length;++o){var n=e.subconstants[o],s=this.get(Me,n);s.specialization?a+=this.to_name(n):a+=this.constant_expression(s),o!==e.subconstants.length-1&&(a+=", ")}return a+=r.use_initializer_list?" }":")",i&&(a+=")"),a}if(t.basetype===ue.Struct&&0===t.member_types.length)return r.supports_empty_struct?"{ }":r.use_typed_initializer_list?this.type_to_glsl(this.get(Ce,e.constant_type))+"{ 0 }":r.use_initializer_list?"{ 0 }":this.type_to_glsl(this.get(Ce,e.constant_type))+"(0)";if(1===e.columns())return this.constant_expression_vector(e,0);a=this.type_to_glsl(this.get(Ce,e.constant_type))+"(";for(var c=0;c<e.columns();c++)0!==e.specialization_constant_id(c)?a+=this.to_name(e.specialization_constant_id(c)):a+=this.constant_expression_vector(e,c),c+1<e.columns()&&(a+=", ");return a+=")"},r.prototype.constant_op_expression=function(e){var t=this.get(Ce,e.basetype),r=!1,a=!1,i="";if(this.is_legacy()&&function(e){switch(e){case se.OpShiftRightLogical:case se.OpUGreaterThan:case se.OpUGreaterThanEqual:case se.OpULessThan:case se.OpULessThanEqual:case se.OpUConvert:case se.OpUDiv:case se.OpUMod:case se.OpUMulExtended:case se.OpConvertUToF:case se.OpConvertFToU:return!0;default:return!1}}(e.opcode))throw new Error("Unsigned integers are not supported on legacy targets.");switch(e.opcode){case se.OpSConvert:case se.OpUConvert:case se.OpFConvert:i=this.type_to_glsl_constructor(t);break;case se.OpSNegate:case se.OpNot:case se.OpLogicalNot:a=!0,i=tr[e.opcode];break;case se.OpIAdd:case se.OpISub:case se.OpIMul:case se.OpSDiv:case se.OpUDiv:case se.OpUMod:case se.OpSMod:case se.OpShiftRightLogical:case se.OpShiftRightArithmetic:case se.OpShiftLeftLogical:case se.OpBitwiseOr:case se.OpBitwiseXor:case se.OpBitwiseAnd:case se.OpLogicalOr:case se.OpLogicalAnd:case se.OpLogicalEqual:case se.OpLogicalNotEqual:case se.OpIEqual:case se.OpINotEqual:case se.OpULessThan:case se.OpSLessThan:case se.OpULessThanEqual:case se.OpSLessThanEqual:case se.OpUGreaterThan:case se.OpSGreaterThan:case se.OpUGreaterThanEqual:case se.OpSGreaterThanEqual:r=!0,i=tr[e.opcode];break;case se.OpSRem:var o=e.arguments[0],n=e.arguments[1];return this.to_enclosed_expression(o),this.to_enclosed_expression(n),this.to_enclosed_expression(o)+" / "+this.to_enclosed_expression(n)+")";case se.OpSelect:if(e.arguments.length<3)throw new Error("Not enough arguments to OpSpecConstantOp.");var s=this.to_trivial_mix_op(t,e.arguments[2],e.arguments[1],e.arguments[0]);if(!s)return this.to_ternary_expression(t,e.arguments[0],e.arguments[1],e.arguments[2]);i=s;break;case se.OpVectorShuffle:var c=this.type_to_glsl_constructor(t);c+="(";for(var l=this.expression_type(e.arguments[0]).vecsize,p=this.to_enclosed_expression(e.arguments[0]),u=this.to_enclosed_expression(e.arguments[1]),_=2;_<e.arguments.length;_++){var f=e.arguments[_];c+=f>=l?u+"."+"xyzw"[f-l]:p+"."+"xyzw"[f],_+1<e.arguments.length&&(c+=", ")}return c+=")";case se.OpCompositeExtract:return c=this.access_chain_internal(e.arguments[0],e.arguments.slice(1),e.arguments.length-1,Yt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,null);case se.OpCompositeInsert:throw new Error("OpCompositeInsert spec constant op is not supported.");default:throw new Error("Unimplemented spec constant op.")}var m,d=0;(a||r||e.opcode===se.OpSConvert||e.opcode===se.OpUConvert)&&(d=this.expression_type(e.arguments[0]).width);var h=function(e){switch(e){case se.OpIEqual:case se.OpINotEqual:case se.OpISub:case se.OpIAdd:case se.OpIMul:case se.OpShiftLeftLogical:case se.OpBitwiseOr:case se.OpBitwiseXor:case se.OpBitwiseAnd:return!0;default:return!1}}(e.opcode);switch(e.opcode){case se.OpIEqual:case se.OpINotEqual:case se.OpSLessThan:case se.OpSLessThanEqual:case se.OpSGreaterThan:case se.OpSGreaterThanEqual:case se.OpSMod:case se.OpSDiv:case se.OpShiftRightArithmetic:case se.OpSConvert:case se.OpSNegate:m=zt(d);break;case se.OpULessThan:case se.OpULessThanEqual:case se.OpUGreaterThan:case se.OpUGreaterThanEqual:case se.OpUMod:case se.OpUDiv:case se.OpShiftRightLogical:case se.OpUConvert:m=function(e){switch(e){case 8:return ue.UByte;case 16:return ue.UShort;case 32:return ue.UInt;case 64:return ue.UInt64;default:throw new Error("Invalid bit width.")}}(d);break;default:m=t.basetype}if(r){if(e.arguments.length<2)throw new Error("Not enough arguments to OpSpecConstantOp.");var g={cast_op0:"",cast_op1:"",input_type:m},y=this.binary_op_bitcast_helper(g,e.arguments[0],e.arguments[1],h);if(m=g.input_type,t.basetype!==m&&t.basetype!==ue.Boolean){y.basetype=m;c=this.bitcast_glsl_op(t,y);return c+="("+g.cast_op0+" "+i+" "+g.cast_op1+")"}return"("+g.cast_op0+" "+i+" "+g.cast_op1+")"}if(a){if(e.arguments.length<1)throw new Error("Not enough arguments to OpSpecConstantOp.");return"("+i+this.bitcast_glsl(t,e.arguments[0])+")"}if(e.opcode===se.OpSConvert||e.opcode===se.OpUConvert){if(e.arguments.length<1)throw new Error("Not enough arguments to OpSpecConstantOp.");var b=this.expression_type(e.arguments[0]);if(b.width<t.width&&m!==b.basetype){var S=b;return S.basetype=m,i+"("+this.bitcast_glsl(S,e.arguments[0])+")"}return i+"("+this.to_expression(e.arguments[0])+")"}if(e.arguments.length<1)throw new Error("Not enough arguments to OpSpecConstantOp.");return i+"("+this.to_expression(e.arguments[0])+")"},r.prototype.constant_expression_vector=function(e,t){var r=this.get(Ce,e.constant_type);r.columns=1;var a=r;a.vecsize=1;var i=this.backend,o="",n=i.use_constructor_splatting&&e.vector_size()>1,s=i.can_swizzle_scalar&&e.vector_size()>1;if(jt(r)||(s=!1),n||s)for(var c=0;c<e.vector_size();c++)if(0!==e.specialization_constant_id(t,c)){n=!1,s=!1;break}if(n||s)if(64===r.width){var l=e.scalar_u64(t,0);for(c=1;c<e.vector_size();c++)if(l!==e.scalar_u64(t,c)){n=!1,s=!1;break}}else for(l=e.scalar(t,0),c=1;c<e.vector_size();c++)l!==e.scalar(t,c)&&(n=!1,s=!1);switch(e.vector_size()>1&&!s&&(o+=this.type_to_glsl(r)+"("),r.basetype){case ue.Half:if(n||s)o+=this.convert_half_to_string(e,t,0),s&&(o=this.remap_swizzle(this.get(Ce,e.constant_type),1,o));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=this.convert_half_to_string(e,t,c),c+1<e.vector_size()&&(o+=", ");break;case ue.Float:if(n||s)o+=this.convert_float_to_string(e,t,0),s&&(o=this.remap_swizzle(this.get(Ce,e.constant_type),1,o));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=this.convert_float_to_string(e,t,c),c+1<e.vector_size()&&(o+=", ");break;case ue.Double:if(n||s)o+=this.convert_double_to_string(e,t,0),s&&(o=this.remap_swizzle(this.get(Ce,e.constant_type),1,o));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=this.convert_double_to_string(e,t,c),c+1<e.vector_size()&&(o+=", ");break;case ue.Int64:var p=r;p.vecsize=1,p.columns=1;var u=this.type_to_glsl(p);if(n)o+=je(e.scalar_i64(t,0),u,i.long_long_literal_suffix);else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=je(e.scalar_i64(t,c),u,i.long_long_literal_suffix),c+1<e.vector_size()&&(o+=", ");break;case ue.UInt64:if(n)o+=je(e.scalar_u64(t,0)),i.long_long_literal_suffix?o+="ull":o+="ul";else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):(o+=je(e.scalar_u64(t,c)),i.long_long_literal_suffix?o+="ull":o+="ul"),c+1<e.vector_size()&&(o+=", ");break;case ue.UInt:if(n)if(o+=je(e.scalar(t,0)),this.is_legacy()){if(e.scalar_i32(t,0)<0)throw new Error("Tried to convert uint literal into int, but this made the literal negative.")}else i.uint32_t_literal_suffix&&(o+="u");else for(c=0;c<e.vector_size();c++){if(e.vector_size()>1&&0!==e.specialization_constant_id(t,c))o+=this.to_expression(e.specialization_constant_id(t,c));else if(o+=je(e.scalar(t,c)),this.is_legacy()){if(e.scalar_i32(t,c)<0)throw new Error("Tried to convert uint literal into int, but this made the literal negative.")}else i.uint32_t_literal_suffix&&(o+="u");c+1<e.vector_size()&&(o+=", ")}break;case ue.Int:if(n)o+=je(e.scalar_i32(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=je(e.scalar_i32(t,c)),c+1<e.vector_size()&&(o+=", ");break;case ue.UShort:if(n)o+=je(e.scalar(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):""!==i.uint16_t_literal_suffix?(o+=je(e.scalar_u16(t,c)),o+=i.uint16_t_literal_suffix):(o+=this.type_to_glsl(a),o+="(",o+=je(e.scalar_u16(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case ue.Short:if(n)o+=je(e.scalar_i16(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):""!==i.int16_t_literal_suffix?(o+=je(e.scalar_i16(t,c)),o+=i.int16_t_literal_suffix):(o+=this.type_to_glsl(a),o+="(",o+=je(e.scalar_i16(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case ue.UByte:if(n)o+=je(e.scalar_u8(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):(o+=this.type_to_glsl(a),o+="(",o+=je(e.scalar_u8(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case ue.SByte:if(n)o+=je(e.scalar_i8(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):(o+=this.type_to_glsl(a),o+="(",o+=je(e.scalar_i8(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case ue.Boolean:if(n)o+=e.scalar(t,0)?"true":"false";else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=e.scalar(t,c)?"true":"false",c+1<e.vector_size()&&(o+=", ");break;default:throw new Error("Invalid constant expression basetype.")}return e.vector_size()>1&&!s&&(o+=")"),o},r.prototype.statement=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.is_forcing_recompilation())this.statement_count++;else if(this.redirect_statement)this.redirect_statement=(e=this.redirect_statement).concat.apply(e,t),this.statement_count++;else{for(var a=0;a<this.indent;a++)this.buffer.append("\t");this.statement_inner.apply(this,t),this.buffer.append("\n")}},r.prototype.statement_no_indent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.indent;this.indent=0,this.statement.apply(this,e),this.indent=r},r.prototype.begin_scope=function(){this.statement("{"),this.indent++},r.prototype.end_scope=function(e){if(!this.indent)throw new Error("Popping empty indent stack.");this.indent--,e?this.statement("}",e):this.statement("}")},r.prototype.end_scope_decl=function(e){if(!this.indent)throw new Error("Popping empty indent stack.");this.indent--,e?this.statement("} ",e,";"):this.statement("};")},r.prototype.add_resource_name=function(e){var t=Mt(me,this.ir.meta,e).decoration;t.alias=this.add_variable(this.resource_names,this.block_names,t.alias)},r.prototype.add_member_name=function(e,t){var r=Mt(me,this.ir.meta,e.self).members;if(t<r.length&&""!==r[t].alias){var a=r[t].alias;if(""===a)return;a=Je.sanitize_identifier(a,!0,!0),a=this.update_name_cache(e.member_name_cache,a),r[t].alias=a}},r.prototype.type_to_array_glsl=function(e){if(e.pointer&&e.storage===I.StorageClassPhysicalStorageBufferEXT&&e.basetype!==ue.Struct)return"";if(0===e.array.length)return"";var t=this.options;if(t.flatten_multidimensional_arrays){var r="";r+="[";for(var a=e.array.length;a;a--)r+=this.enclose_expression(this.to_array_size(e,a-1)),a>1&&(r+=" * ");return r+="]"}if(e.array.length>1)if(!t.es&&t.version<430)this.require_extension_internal("GL_ARB_arrays_of_arrays");else if(t.es&&t.version<310)throw new Error("Arrays of arrays not supported before ESSL version 310. Try using --flatten-multidimensional-arrays or set options.flatten_multidimensional_arrays to true.");for(r="",a=e.array.length;a;a--)r+="[",r+=this.to_array_size(e,a-1),r+="]";return r},r.prototype.to_array_size=function(e,t){console.assert(e.array.length===e.array_size_literal.length);var r=e.array[t];return e.array_size_literal[t]?r?je(r):this.backend.unsized_array_supported?"":"1":this.to_expression(r)},r.prototype.to_array_size_literal=function(e,t){return void 0===t&&(t=e.array.length-1),console.assert(e.array.length===e.array_size_literal.length),e.array_size_literal[t]?e.array[t]:this.evaluate_constant_u32(e.array[t])},r.prototype.variable_decl=function(e,r,a){if(void 0===a&&(a=0),void 0!==r){var i=e,o=this.type_to_glsl(i,a);return(o=this.remap_variable_type_name(i,r,o))+" "+r+this.type_to_array_glsl(i)}e=e;var n=this.get_variable_data_type(e);if(n.pointer_depth>1&&!this.backend.support_pointer_to_pointer)throw new Error("Cannot declare pointer-to-pointer types.");var s=this.options,c=this.ir,l=this.to_qualifiers_glsl(e.self)+this.variable_decl(n,this.to_name(e.self),e.self);if(e.loop_variable&&e.static_expression){var p=e.static_expression;c.ids[p].get_type()!==t.TypeUndef?l+=" = "+this.to_unpacked_expression(e.static_expression):s.force_zero_initialized_variables&&this.type_can_zero_initialize(n)&&(l+=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(e)))}else if(e.initializer&&!this.variable_decl_is_remapped_storage(e,I.StorageClassWorkgroup)){p=e.initializer;c.ids[p].get_type()!==t.TypeUndef?l+=" = "+this.to_initializer_expression(e):s.force_zero_initialized_variables&&this.type_can_zero_initialize(n)&&(l+=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(e)))}return l},r.prototype.variable_decl_is_remapped_storage=function(e,t){return e.storage===t},r.prototype.is_non_native_row_major_matrix=function(e){if(this.backend.native_row_major_matrix&&!this.is_legacy())return!1;var t=this.maybe_get(He,e);return t?t.need_transpose:this.has_decoration(e,N.DecorationRowMajor)},r.prototype.member_is_non_native_row_major_matrix=function(e,t){if(this.backend.native_row_major_matrix&&!this.is_legacy())return!1;if(!this.has_member_decoration(e.self,t,N.DecorationRowMajor))return!1;var r=this.get(Ce,e.member_types[t]);if(r.columns!==r.vecsize)throw new Error("Row-major matrices must be square on this platform.");return!0},r.prototype.member_is_remapped_physical_type=function(e,t){return this.has_extended_member_decoration(e.self,t,ce.SPIRVCrossDecorationPhysicalTypeID)},r.prototype.member_is_packed_physical_type=function(e,t){return this.has_extended_member_decoration(e.self,t,ce.SPIRVCrossDecorationPhysicalTypePacked)},r.prototype.convert_row_major_matrix=function(e,t,r,a){if(e=this.strip_enclosed_expression(e),this.is_matrix(t)){if(this.options.version<120){if(2===t.vecsize&&2===t.columns)this.requires_transpose_2x2||(this.requires_transpose_2x2=!0,this.force_recompile());else if(3===t.vecsize&&3===t.columns)this.requires_transpose_3x3||(this.requires_transpose_3x3=!0,this.force_recompile());else{if(4!==t.vecsize||4!==t.columns)throw new Error("Non-square matrices are not supported in legacy GLSL, cannot transpose.");this.requires_transpose_4x4||(this.requires_transpose_4x4=!0,this.force_recompile())}return"spvTranspose(".concat(e,")")}return"transpose(".concat(e,")")}var i=e.lastIndexOf("[");if(-1===i)return e;var o=e.substring(i);e=e.substring(0,i);for(var n=this.type_to_glsl_constructor(t)+"(",s=0;s<t.vecsize;s++)n+="".concat(e,"[").concat(s,"]").concat(o),s+1<t.vecsize&&(n+=", ");return n+=")"},r.prototype.preserve_alias_on_reset=function(e){this.preserved_aliases[e]=this.get_name(e)},r.prototype.reset_name_caches=function(){var e=this;this.preserved_aliases.forEach((function(t,r){return e.set_name(r,t)})),this.preserved_aliases=[],this.resource_names.clear(),this.block_input_names.clear(),this.block_output_names.clear(),this.block_ubo_names.clear(),this.block_ssbo_names.clear(),this.block_names.clear(),this.function_overloads={}},r.prototype.emit_struct=function(e){if(0===e.type_alias||this.has_extended_decoration(e.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked)){this.add_resource_name(e.self);var t=this.type_to_glsl(e),r=this.backend;this.statement(r.explicit_struct_type?"":"struct ",t),this.begin_scope(),e.member_name_cache.clear();for(var a=0,i=!1,o=0,n=e.member_types;o<n.length;o++){var s=n[o];this.add_member_name(e,a),this.emit_struct_member(e,s,a),a++,i=!0}this.type_is_empty(e)&&!r.supports_empty_struct&&(this.statement("int empty_struct_member;"),i=!0),this.has_extended_decoration(e.self,ce.SPIRVCrossDecorationPaddingTarget)&&this.emit_struct_padding_target(e),this.end_scope_decl(),i&&this.statement("")}},r.prototype.emit_resources=function(){var e=this,r=this.get_entry_point(),a=this.options,i=this.ir;if(this.replace_illegal_names(),r.model===g.ExecutionModelFragment&&this.is_legacy()&&this.replace_fragment_outputs(),(this.pls_inputs.length>0||this.pls_outputs.length>0)&&this.emit_pls(),a.separate_shader_objects&&!a.es&&r.model!==g.ExecutionModelFragment){if(r.model===g.ExecutionModelVertex)this.emit_declared_builtin_block(I.StorageClassOutput,r.model)}else if(this.should_force_emit_builtin_block(I.StorageClassOutput))this.emit_declared_builtin_block(I.StorageClassOutput,r.model);else if(r.geometry_passthrough)this.emit_declared_builtin_block(I.StorageClassInput,r.model);else{var o=r.model===g.ExecutionModelFragment?"in":"out";0!==this.clip_distance_count&&this.statement(o," float gl_ClipDistance[",this.clip_distance_count,"];"),0!==this.cull_distance_count&&this.statement(o," float gl_CullDistance[",this.cull_distance_count,"];"),0===this.clip_distance_count&&0===this.cull_distance_count||this.statement("")}this.position_invariant&&(this.statement("invariant gl_Position;"),this.statement(""));for(var n=!1,s=i.create_loop_hard_lock(),c=0,l=i.ids_for_constant_or_type;c<l.length;c++){var p=l[c],u=i.ids[p];if(u.get_type()===t.TypeConstant){var _=u.get(Me);(_.specialization||_.is_used_as_lut)&&(/*!options.vulkan_semantics &&*/_.specialization&&(_.specialization_constant_macro_name=this.constant_value_macro_name(this.get_decoration(_.self,N.DecorationSpecId))),this.emit_constant(_),n=!0)}else if(u.get_type()===t.TypeConstantOp)this.emit_specialization_constant_op(u.get(Re)),n=!0;else if(u.get_type()===t.TypeType){(d=u.get(Ce)).basetype===ue.Struct&&0===d.array.length&&d.pointer&&!this.has_decoration(d.self,N.DecorationBlock)&&!this.has_decoration(d.self,N.DecorationBufferBlock)&&(n&&this.statement(""),n=!1,this.emit_struct(d))}}if(s.dispose(),n&&this.statement(""),n=!1,i.addressing_model===y.AddressingModelPhysicalStorageBuffer64EXT){for(var f=0,m=this.physical_storage_non_block_pointer_types;f<m.length;f++){var d=m[f];this.emit_buffer_reference_block(d,!1)}i.for_each_typed_id(Ce,(function(t,r){r.basetype===ue.Struct&&r.pointer&&1===r.pointer_depth&&!e.type_is_array_of_pointers(r)&&r.storage===I.StorageClassPhysicalStorageBufferEXT&&e.emit_buffer_reference_block(t,!0)})),i.for_each_typed_id(Ce,(function(t,r){r.basetype===ue.Struct&&r.pointer&&1===r.pointer_depth&&!e.type_is_array_of_pointers(r)&&r.storage===I.StorageClassPhysicalStorageBufferEXT&&e.emit_buffer_reference_block(t,!1)}))}i.for_each_typed_id(ge,(function(t,r){var a=e.get(Ce,r.basetype),o=a.storage===I.StorageClassStorageBuffer||a.storage===I.StorageClassUniform||a.storage===I.StorageClassShaderRecordBufferKHR,n=Mt(me,i.meta,a.self).decoration.decoration_flags.get(N.DecorationBlock)||Mt(me,i.meta,a.self).decoration.decoration_flags.get(N.DecorationBufferBlock);r.storage!==I.StorageClassFunction&&a.pointer&&o&&!e.is_hidden_variable(r)&&n&&e.emit_buffer_block(r)})),i.for_each_typed_id(ge,(function(t,r){var a=e.get(Ce,r.basetype);r.storage!==I.StorageClassFunction&&a.pointer&&a.storage===I.StorageClassPushConstant&&!e.is_hidden_variable(r)&&e.emit_push_constant_block(r)})),i.for_each_typed_id(ge,(function(t,r){var a=e.get(Ce,r.basetype),i=a.basetype===ue.Image&&a.image.dim===v.DimBuffer,o=a.basetype===ue.Image&&1===a.image.sampled,s=a.basetype===ue.Sampler;(i||!o&&!s)&&(r.storage===I.StorageClassFunction||!a.pointer||a.storage!==I.StorageClassUniformConstant&&a.storage!==I.StorageClassAtomicCounter&&a.storage!==I.StorageClassRayPayloadKHR&&a.storage!==I.StorageClassIncomingRayPayloadKHR&&a.storage!==I.StorageClassCallableDataKHR&&a.storage!==I.StorageClassIncomingCallableDataKHR&&a.storage!==I.StorageClassHitAttributeKHR||e.is_hidden_variable(r)||(e.emit_uniform(r),n=!0))})),n&&this.statement(""),n=!1;var h=!1;i.for_each_typed_id(ge,(function(t,r){var i=e.get(Ce,r.basetype),o=e.is_hidden_variable(r);if(r.storage===I.StorageClassOutput&&!e.is_legacy()&&e.location_is_framebuffer_fetch(e.get_decoration(r.self,N.DecorationLocation))&&(o=!1),r.storage===I.StorageClassFunction||!i.pointer||r.storage!==I.StorageClassInput&&r.storage!==I.StorageClassOutput||!e.interface_variable_exists_in_entry_point(r.self)||o){if(e.is_builtin_variable(r)){var s=e.get_decoration(r.self,N.DecorationBuiltIn);!h&&(a.vertex.support_nonzero_base_instance&&s===P.BuiltInInstanceIndex||s===P.BuiltInBaseInstance)?(e.statement("#ifdef GL_ARB_shader_draw_parameters"),e.statement("#define SPIRV_Cross_BaseInstance gl_BaseInstanceARB"),e.statement("#else"),e.statement("uniform int SPIRV_Cross_BaseInstance;"),e.statement("#endif"),n=!0,h=!0):s===P.BuiltInBaseVertex?(e.statement("#ifdef GL_ARB_shader_draw_parameters"),e.statement("#define SPIRV_Cross_BaseVertex gl_BaseVertexARB"),e.statement("#else"),e.statement("uniform int SPIRV_Cross_BaseVertex;"),e.statement("#endif")):s===P.BuiltInDrawIndex&&(e.statement("#ifndef GL_ARB_shader_draw_parameters"),e.statement("#error GL_ARB_shader_draw_parameters is not supported."),e.statement("#endif"))}}else{if(a.es&&e.get_execution_model()===g.ExecutionModelVertex&&r.storage===I.StorageClassInput&&1===i.array.length)throw new Error("OpenGL ES doesn't support array input variables in vertex shader.");e.emit_interface_block(r),n=!0}}));for(var b=0,S=this.global_variables;b<S.length;b++){var O=S[b],C=this.get(ge,O);if(!this.is_hidden_variable(C,!0))if(C.storage!==I.StorageClassOutput){if(!this.variable_is_lut(C)){this.add_resource_name(C.self);var E="";a.force_zero_initialized_variables&&C.storage===I.StorageClassPrivate&&!C.initializer&&!C.static_expression&&this.type_can_zero_initialize(this.get_variable_data_type(C))&&(E=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(C))),this.statement(this.variable_decl(C),E,";"),n=!0}}else C.initializer&&null!==this.maybe_get(Me,C.initializer)&&this.emit_output_variable_initializer(C)}n&&this.statement(""),this.declare_undefined_values()},r.prototype.emit_buffer_block_native=function(e){var t=this.get(Ce,e.basetype),r=this.ir,a=r.get_buffer_block_flags(e),i=Mt(me,r.meta,t.self).decoration,o=e.storage===I.StorageClassStorageBuffer||e.storage===I.StorageClassShaderRecordBufferKHR||i.decoration_flags.get(N.DecorationBufferBlock),n=o&&a.get(N.DecorationRestrict),s=o&&a.get(N.DecorationNonReadable),c=o&&a.get(N.DecorationNonWritable),l=o&&a.get(N.DecorationCoherent),p=this.to_name(t.self,!1),u=o?this.block_ssbo_names:this.block_ubo_names;(""===i.alias||u.has(p)||this.resource_names.has(p))&&(p=this.get_block_fallback_name(e.self)),""===(p=this.add_variable(u,this.resource_names,p))&&(p="_"+this.get(Ce,e.basetype).self+"_"+e.self),this.block_names.add(p),u.add(p),this.declared_block_names[e.self]=p,this.statement(this.layout_for_variable(e),l?"coherent ":"",n?"restrict ":"",s?"writeonly ":"",c?"readonly ":"",o?"buffer ":"uniform ",p),this.begin_scope(),t.member_name_cache.clear();for(var _=0,f=0,m=t.member_types;f<m.length;f++){var d=m[f];this.add_member_name(t,_),this.emit_struct_member(t,d,_),_++}this.preserve_alias_on_reset(e.self),this.add_resource_name(e.self),this.end_scope_decl(this.to_name(e.self)+this.type_to_array_glsl(t)),this.statement("")},r.prototype.emit_buffer_reference_block=function(e,t){var r=this.get(Ce,e),a="",i=this.ir;if(t?(a=this.to_name(r.self,!1),(0===Mt(me,i.meta,r.self).decoration.alias.length||this.block_ssbo_names.has(a)||this.resource_names.has(a))&&(a="_"+r.self),0===(a=this.add_variable(this.block_ssbo_names,this.resource_names,a)).length&&(a="_"+r.self),this.block_names.add(a),this.block_ssbo_names.add(a),i.meta[r.self].decoration.alias=a):a=r.basetype!==ue.Struct?this.type_to_glsl(r):this.to_name(r.self,!1),t)this.statement("layout(buffer_reference) buffer ",a,";");else{var o=this.physical_storage_type_to_alignment[e],n=0;if(o&&(n=o.alignment),r.basetype===ue.Struct){var s=["buffer_reference"];n&&s.push("buffer_reference_align = "+n),s.push(this.buffer_to_packing_standard(r,!0));var c=i.get_buffer_block_type_flags(r),l="";c.get(N.DecorationRestrict)&&(l+=" restrict"),c.get(N.DecorationCoherent)&&(l+=" coherent"),c.get(N.DecorationNonReadable)&&(l+=" writeonly"),c.get(N.DecorationNonWritable)&&(l+=" readonly"),this.statement("layout(",s.join(", "),")",l," buffer ",a)}else n?this.statement("layout(buffer_reference, buffer_reference_align = ",n,") buffer ",a):this.statement("layout(buffer_reference) buffer ",a);if(this.begin_scope(),r.basetype===ue.Struct){r.member_name_cache.clear();for(var p=0,u=0,_=r.member_types;u<_.length;u++){var f=_[u];this.add_member_name(r,p),this.emit_struct_member(r,f,p),p++}}else{var m=this.get_pointee_type(r);this.statement(this.type_to_glsl(m)," value",this.type_to_array_glsl(m),";")}this.end_scope_decl(),this.statement("")}},r.prototype.emit_declared_builtin_block=function(e,t){var r=this,a=new le,i=new le,o=!1,n=!1,s=0,c=0,l=!1,p=!1,u=!1,_=0,f=0,m=0,d=[],h=this.ir,y=this.options;if(h.for_each_typed_id(ge,(function(t,g){var y=r.get(Ce,g.basetype),b=r.has_decoration(y.self,N.DecorationBlock),S=new le;if(g.storage===e&&b&&r.is_builtin_variable(g)){for(var v=0,O=0,C=Mt(me,h.meta,y.self).members;O<C.length;O++){if((L=C[O]).builtin&&(S.set(L.builtin_type),L.builtin_type===P.BuiltInCullDistance?s=r.to_array_size_literal(r.get(Ce,y.member_types[v])):L.builtin_type===P.BuiltInClipDistance&&(c=r.to_array_size_literal(r.get(Ce,y.member_types[v]))),nr(L.builtin_type)&&L.decoration_flags.get(N.DecorationOffset)&&(u=!0,d[L.builtin_type]=L.offset),nr(L.builtin_type)&&L.decoration_flags.get(N.DecorationStream))){var E=L.stream;if(p&&m!==E)throw new Error("IO block member Stream mismatch.");p=!0,m=E}v++}if(e===I.StorageClassOutput&&r.has_decoration(g.self,N.DecorationXfbBuffer)&&r.has_decoration(g.self,N.DecorationXfbStride)){var x=r.get_decoration(g.self,N.DecorationXfbBuffer),k=r.get_decoration(g.self,N.DecorationXfbStride);if(l&&x!==f)throw new Error("IO block member XfbBuffer mismatch.");if(l&&k!==_)throw new Error("IO block member XfbBuffer mismatch.");l=!0,f=x,_=k}if(e===I.StorageClassOutput&&r.has_decoration(g.self,N.DecorationStream)){E=r.get_decoration(g.self,N.DecorationStream);if(p&&m!==E)throw new Error("IO block member Stream mismatch.");p=!0,m=E}}else if(g.storage===e&&!b&&r.is_builtin_variable(g)){var L;if((L=Mt(me,h.meta,g.self).decoration).builtin){if(i.set(L.builtin_type),L.builtin_type===P.BuiltInCullDistance?s=r.to_array_size_literal(y):L.builtin_type===P.BuiltInClipDistance&&(c=r.to_array_size_literal(y)),nr(L.builtin_type)&&L.decoration_flags.get(N.DecorationXfbStride)&&L.decoration_flags.get(N.DecorationXfbBuffer)&&L.decoration_flags.get(N.DecorationOffset)){u=!0,d[L.builtin_type]=L.offset;x=L.xfb_buffer,k=L.xfb_stride;if(l&&x!==f)throw new Error("IO block member XfbBuffer mismatch.");if(l&&k!==_)throw new Error("IO block member XfbBuffer mismatch.");l=!0,f=x,_=k}if(nr(L.builtin_type)&&L.decoration_flags.get(N.DecorationStream)){E=r.get_decoration(g.self,N.DecorationStream);if(p&&m!==E)throw new Error("IO block member Stream mismatch.");p=!0,m=E}}}if(!S.empty()){if(o)throw new Error("Cannot use more than one builtin I/O block.");a=S,o=!0,n=y.array.length>0}})),(i=new le(i.get_lower())).set(P.BuiltInPosition),i.set(P.BuiltInPointSize),i.set(P.BuiltInClipDistance),i.set(P.BuiltInCullDistance),o||(a=i),!a.empty()){if(e===I.StorageClassOutput){var b=[];if(l&&u){if(y.es){if(y.es)throw new Error("Need GL_ARB_enhanced_layouts for xfb_stride or xfb_buffer.")}else{if(y.version<440&&y.version>=140)this.require_extension_internal("GL_ARB_enhanced_layouts");else if(y.version<140)throw new Error("Component decoration is not supported in targets below GLSL 1.40.");!y.es&&y.version<440&&this.require_extension_internal("GL_ARB_enhanced_layouts")}b.push("xfb_buffer = ".concat(f,", xfb_stride = ").concat(_))}if(p){if(this.get_execution_model()!==g.ExecutionModelGeometry)throw new Error("Geometry streams can only be used in geometry shaders.");if(y.es)throw new Error("Multiple geometry streams not supported in ESSL.");y.version<400&&this.require_extension_internal("GL_ARB_transform_feedback3"),b.push("stream = "+m)}b.length>0?this.statement("layout(",b.join(", "),") out gl_PerVertex"):this.statement("out gl_PerVertex")}else this.get_entry_point().geometry_passthrough?this.statement("layout(passthrough) in gl_PerVertex"):this.statement("in gl_PerVertex");var S;if(this.begin_scope(),a.get(P.BuiltInPosition))(S=d[P.BuiltInPosition])?this.statement("layout(xfb_offset = ",S,") vec4 gl_Position;"):this.statement("vec4 gl_Position;");if(a.get(P.BuiltInPointSize))(S=d.find[P.BuiltInPointSize])?this.statement("layout(xfb_offset = ",S,") float gl_PointSize;"):this.statement("float gl_PointSize;");if(a.get(P.BuiltInClipDistance))(S=d[P.BuiltInClipDistance])?this.statement("layout(xfb_offset = ",S,") float gl_ClipDistance[",c,"];"):this.statement("float gl_ClipDistance[",c,"];");if(a.get(P.BuiltInCullDistance))(S=d[P.BuiltInCullDistance])?this.statement("layout(xfb_offset = ",S,") float gl_CullDistance[",s,"];"):this.statement("float gl_CullDistance[",s,"];");n||this.end_scope_decl(),this.statement("")}},r.prototype.should_force_emit_builtin_block=function(e){var t=this;if(e!==I.StorageClassOutput)return!1;var r=!1;return this.ir.for_each_typed_id(ge,(function(a,i){if(!r){var o=t.get(Ce,i.basetype),n=t.has_decoration(o.self,N.DecorationBlock);if(i.storage===e&&n&&t.is_builtin_variable(i))for(var s=o.member_types.length,c=0;c<s;c++)t.has_member_decoration(o.self,c,N.DecorationBuiltIn)&&nr(t.get_member_decoration(o.self,c,N.DecorationBuiltIn))&&t.has_member_decoration(o.self,c,N.DecorationOffset)&&(r=!0);else i.storage===e&&!n&&t.is_builtin_variable(i)&&nr(t.get_decoration(o.self,N.DecorationBuiltIn))&&t.has_decoration(i.self,N.DecorationOffset)&&(r=!0)}})),r},r.prototype.emit_push_constant_block_glsl=function(e){var t=this.ir,r=this.get(Ce,e.basetype),a=Mt(me,t.meta,e.self).decoration.decoration_flags;a.clear(N.DecorationBinding),a.clear(N.DecorationDescriptorSet);var i=Mt(me,t.meta,r.self).decoration.decoration_flags,o=i.get(N.DecorationBlock);i.clear(N.DecorationBlock),this.emit_struct(r),o&&i.set(N.DecorationBlock),this.emit_uniform(e),this.statement("")},r.prototype.emit_interface_block=function(e){var t=this.get(Ce,e.basetype),r=this.ir,a=this.options;e.storage===I.StorageClassInput&&t.basetype===ue.Double&&!a.es&&a.version<410&&this.require_extension_internal("GL_ARB_vertex_attrib_64bit");var i=Mt(me,r.meta,t.self).decoration.decoration_flags.get(N.DecorationBlock),o=this.to_storage_qualifiers_glsl(e);if(i)if(a.force_flattened_io_blocks||a.es&&a.version<310||!a.es&&a.version<150)this.emit_flattened_io_block(e,o);else{a.es&&a.version<320&&(this.has_extension("GL_EXT_geometry_shader")||this.has_extension("GL_EXT_tessellation_shader")||this.require_extension_internal("GL_EXT_shader_io_blocks")),this.fixup_io_block_patch_qualifiers(e);var n=this.to_name(t.self,!1),s=t.storage===I.StorageClassInput?this.block_input_names:this.block_output_names;0===n.length||s.has(n)?n=this.get_fallback_name(t.self):s.add(n),0===n.length&&(n="_"+this.get(Ce,e.basetype).self+"_"+e.self),this.resource_names.add(n);var c=this.has_decoration(e.self,N.DecorationPatch);this.statement(this.layout_for_variable(e),c?"patch ":"",o,n),this.begin_scope(),t.member_name_cache.clear();for(var l=0,p=0,u=t.member_types;p<u.length;p++){var _=u[p];this.add_member_name(t,l),this.emit_struct_member(t,_,l),l++}this.add_resource_name(e.self),this.end_scope_decl(this.to_name(e.self)+this.type_to_array_glsl(t)),this.statement("")}else t.basetype===ue.Struct&&(a.force_flattened_io_blocks||a.es&&a.version<310||!a.es&&a.version<150)?this.emit_flattened_io_block(e,o):(this.add_resource_name(e.self),this.statement(this.layout_for_variable(e),this.to_qualifiers_glsl(e.self),this.variable_decl(t,this.to_name(e.self),e.self),";"))},r.prototype.constant_value_macro_name=function(e){return"SPIRV_CROSS_CONSTANT_ID_"+e},r.prototype.get_constant_mapping_to_workgroup_component=function(e){var t=this.get_entry_point(),r=-1;return 0===t.workgroup_size.constant&&t.flags.get(S.ExecutionModeLocalSizeId)&&(e.self===t.workgroup_size.id_x?r=0:e.self===t.workgroup_size.id_y?r=1:e.self===t.workgroup_size.id_z&&(r=2)),r},r.prototype.emit_constant=function(e){var t=this.get(Ce,e.constant_type),r=this.to_name(e.self);if(this.has_decoration(e.self,N.DecorationSpecId)){var a=e.specialization_constant_macro_name;this.statement("#ifndef ",a),this.statement("#define ",a," ",this.constant_expression(e)),this.statement("#endif"),this.statement("const ",this.variable_decl(t,r)," = ",a,";")}else this.statement("const ",this.variable_decl(t,r)," = ",this.constant_expression(e),";")},r.prototype.emit_specialization_constant_op=function(e){var t=this.get(Ce,e.basetype),r=this.to_name(e.self);this.statement("const ",this.variable_decl(t,r)," = ",this.constant_op_expression(e),";")},r.prototype.should_dereference=function(e){if(!this.expression_type(e).pointer)return!1;if(!this.expression_is_lvalue(e))return!1;var t=this.maybe_get(ge,e);if(t)return t.phi_variable;var r=this.maybe_get(He,e);return!r||!r.access_chain},r.prototype.to_trivial_mix_op=function(e,t,r,a){var i=this.backend,o=this.maybe_get(Me,t),n=this.maybe_get(Me,r),s=this.expression_type(a);if(o&&n&&!o.specialization&&!n.specialization){var c=this.get(Ce,o.constant_type);if(s.basetype===ue.Boolean&&c.basetype!==ue.Struct&&!this.is_array(c)&&(i.use_constructor_splatting||c.vecsize===s.vecsize)&&!(c.columns>1)){for(var l=!0,p=0;l&&p<c.vecsize;p++)switch(e.basetype){case ue.Short:case ue.UShort:l=0===o.scalar_u16(0,p)&&1===n.scalar_u16(0,p);break;case ue.Int:case ue.UInt:l=0===o.scalar(0,p)&&1===n.scalar(0,p);break;case ue.Half:l=0===o.scalar_f16(0,p)&&1===n.scalar_f16(0,p);break;case ue.Float:l=0===o.scalar_f32(0,p)&&1===n.scalar_f32(0,p);break;case ue.Double:l=0===o.scalar_f64(0,p)&&1===n.scalar_f64(0,p);break;case ue.Int64:case ue.UInt64:l=o.scalar_u64(0,p)===BigInt(0)&&n.scalar_u64(0,p)===BigInt(1);break;default:l=!1}return l?this.type_to_glsl_constructor(e):void 0}}},r.prototype.binary_op_bitcast_helper=function(e,t,r,a){var i=this.expression_type(t),o=this.expression_type(r),n=i.basetype!==o.basetype||!a&&i.basetype!==e.input_type,s=new Ce;return s.basetype=e.input_type,s.vecsize=i.vecsize,s.columns=i.columns,s.width=i.width,n?(e.cast_op0=this.bitcast_glsl(s,t),e.cast_op1=this.bitcast_glsl(s,r)):(e.cast_op0=this.to_enclosed_unpacked_expression(t),e.cast_op1=this.to_enclosed_unpacked_expression(r),e.input_type=i.basetype),s},r.prototype.to_ternary_expression=function(e,t,r,a){var i,o=this;if(1===this.expression_type(t).vecsize)i=this.to_enclosed_expression(t)+" ? "+this.to_enclosed_pointer_expression(r)+" : "+this.to_enclosed_pointer_expression(a);else{var n=function(e,t){return o.to_extract_component_expression(e,t)};i=this.type_to_glsl_constructor(e),i+="(";for(var s=0;s<e.vecsize;s++)i+=n(t,s),i+=" ? ",i+=n(r,s),i+=" : ",i+=n(a,s),s+1<e.vecsize&&(i+=", ");i+=")"}return i},r.prototype.expression_is_forwarded=function(e){return this.forwarded_temporaries.has(e)},r.prototype.expression_suppresses_usage_tracking=function(e){return this.suppressed_usage_tracking.has(e)},r.prototype.expression_read_implies_multiple_reads=function(e){var t=this.maybe_get(He,e);return!!t&&this.current_loop_level>t.emitted_loop_level},r.prototype.access_chain_internal_append_index=function(e,t,r,a,i,o){var n=0!=(a&Yt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT),s=0==(a&Yt.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT);return e+="[",e+=n?je(o):this.to_unpacked_expression(o,s),e+="]"},r.prototype.access_chain_internal=function(e,r,a,i,o){var n=this,s="",c=this,l=c.backend,p=c.options,u=c.ir,_=0!=(i&Yt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT),f=0!=(i&Yt.ACCESS_CHAIN_LITERAL_MSB_FORCE_ID),m=0!=(i&Yt.ACCESS_CHAIN_CHAIN_ONLY_BIT),d=0!=(i&Yt.ACCESS_CHAIN_PTR_CHAIN_BIT),h=0==(i&Yt.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT),g=0!=(i&Yt.ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT);if(!m){var y=this.maybe_get(He,e),b=y&&y.need_transpose;y&&(y.need_transpose=!1),s=this.to_enclosed_expression(e,h),y&&(y.need_transpose=b)}var S=this.expression_type_id(e);if(!l.native_pointers){if(d)throw new Error("Backend does not support native pointers and does not support OpPtrAccessChain.");if(this.should_dereference(e)){var v=this.get(Ce,S);s=this.dereference_expression(v,s)}}for(var O=this.get_pointee_type(S),C=s.indexOf("[")>=0,E=this.is_non_native_row_major_matrix(e),x=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked),k=this.get_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),L=this.has_decoration(e,N.DecorationInvariant),M=!1,R=!1,T=function(t,r){var a=i;r||(a&=~Yt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT),s=n.access_chain_internal_append_index(s,e,O,a,C,t)},D=0;D<a;D++){var A=r[D],B=_;if(B&&f&&A>>31!=0&&(B=!1,A&=2147483647),d&&0===D){if(p.flatten_multidimensional_arrays&&(M=R=O.array.length>=1)&&(s+="["),p.flatten_multidimensional_arrays&&R){s+=B?je(A):this.to_enclosed_expression(A,h);for(var w=O.array.length;w;w--)s+=" * ",s+=this.enclose_expression(this.to_array_size(O,w-1));0===O.array.length?M=!1:s+=" + ",M||(s+="]")}else T(A,B);O.basetype===ue.ControlPointArray&&(S=O.parent_type,O=this.get(Ce,S)),C=!0}else if(O.array.length>0){p.flatten_multidimensional_arrays&&!M&&(M=R=O.array.length>1)&&(s+="["),console.assert(O.parent_type);var G=this.maybe_get(ge,e);if(l.force_gl_in_out_block&&0===D&&G&&this.is_builtin_variable(G)&&!this.has_decoration(O.self,N.DecorationBlock))switch(U=Mt(me,u.meta,e).decoration.builtin_type){case P.BuiltInPosition:case P.BuiltInPointSize:G.storage===I.StorageClassInput?s="gl_in["+this.to_expression(A,h):G.storage===I.StorageClassOutput?s="gl_out["+this.to_expression(A,h):T(A,B);break;default:T(A,B)}else if(p.flatten_multidimensional_arrays&&R){var F=this.get(Ce,O.parent_type);s+=B?je(A):this.to_enclosed_expression(A,h);for(w=F.array.length;w;w--)s+=" * ",s+=this.enclose_expression(this.to_array_size(F,w-1));0===F.array.length?M=!1:s+=" + ",M||(s+="]")}else this.builtin_translates_to_nonarray(this.get_decoration(e,N.DecorationBuiltIn))||T(A,B);S=O.parent_type,O=this.get(Ce,S),C=!0}else if(O.basetype===ue.Struct){if(B||(A=this.evaluate_constant_u32(A)),A<O.member_type_index_redirection.length&&(A=O.member_type_index_redirection[A]),A>=O.member_types.length)throw new Error("Member index is out of bounds!");var U;if(void 0!==(U=this.is_member_builtin(O,A))&&this.access_chain_needs_stage_io_builtin_translation(e))C?(s+=".",s+=this.builtin_to_glsl(U,O.storage)):s=this.builtin_to_glsl(U,O.storage);else{var V=this.get_member_qualified_name(S,A);""!==V?s=V:s+=g?"_"+this.to_member_name(O,A):this.to_member_reference(e,O,A,d)}this.has_member_decoration(O.self,A,N.DecorationInvariant)&&(L=!0),x=this.member_is_packed_physical_type(O,A),k=this.member_is_remapped_physical_type(O,A)?this.get_extended_member_decoration(O.self,A,ce.SPIRVCrossDecorationPhysicalTypeID):0,E=this.member_is_non_native_row_major_matrix(O,A),O=this.get(Ce,O.member_types[A])}else if(O.columns>1)s+="[",s+=B?je(A):this.to_unpacked_expression(A,h),s+="]",S=O.parent_type,O=this.get(Ce,S);else if(O.vecsize>1){var z="";if(E){var H=s.lastIndexOf("[");H>=0&&(z=s.substring(H),s=s.substring(0,H))}var K=I.StorageClassGeneric,q=!1;if(0==(i&Yt.ACCESS_CHAIN_FORCE_COMPOSITE_BIT)?this.expression_type(e).pointer&&(K=this.get_expression_effective_storage_class(e)):q=!0,E||q||(s=this.prepare_access_chain_for_scalar_access(s,this.get(Ce,O.parent_type),K,x)),B){var X=A>=O.vecsize;x||E?s+="["+(X?0:A)+"]":(s+=".",s+=this.index_to_swizzle(X?0:A))}else if(u.ids[A].get_type()!==t.TypeConstant||x||E)s+="["+this.to_unpacked_expression(A,h)+"]";else{var W=this.get(Me,A);X=W.scalar()>=O.vecsize;W.specialization?s+="["+(X?"0":this.to_expression(A))+"]":s+="."+this.index_to_swizzle(X?0:W.scalar())}E&&!q&&(s=this.prepare_access_chain_for_scalar_access(s,this.get(Ce,O.parent_type),K,x)),s+=z,E=!1,x=!1,k=0,S=O.parent_type,O=this.get(Ce,S)}else if(!l.allow_truncated_access_chain)throw new Error("Cannot subdivide a scalar value!")}if(M)throw new Error("Flattening of multidimensional arrays were enabled, but the access chain was terminated in the middle of a multidimensional array. This is not supported.");return o&&(o.need_transpose=E,o.storage_is_packed=x,o.storage_is_invariant=L,o.storage_physical_type=k),s},r.prototype.get_expression_effective_storage_class=function(e){var r=this.maybe_get_backing_variable(e),a=this.ir.ids[e].get_type()===t.TypeExpression&&!this.get(He,e).access_chain&&(this.forced_temporaries.has(e)||!this.forwarded_temporaries.has(e));return r&&!a?this.variable_decl_is_remapped_storage(r,I.StorageClassWorkgroup)?I.StorageClassWorkgroup:this.variable_decl_is_remapped_storage(r,I.StorageClassStorageBuffer)||r.storage===I.StorageClassUniform&&this.has_decoration(this.get(Ce,r.basetype).self,N.DecorationBufferBlock)?I.StorageClassStorageBuffer:r.storage:this.expression_type(e).storage},r.prototype.access_chain_needs_stage_io_builtin_translation=function(e){return!0},r.prototype.prepare_access_chain_for_scalar_access=function(e,t,r,a){return e},r.prototype.index_to_swizzle=function(e){switch(e){case 0:default:return"x";case 1:return"y";case 2:return"z";case 3:return"w"}},r.prototype.remap_swizzle=function(e,t,r){if(e.vecsize===t)return r;if(1!==t||this.backend.can_swizzle_scalar){for(var a=this.enclose_expression(r)+".",i=0;i<e.vecsize;i++)a+=this.index_to_swizzle(Math.min(i,t-1));return this.backend.swizzle_is_function&&e.vecsize>1&&(a+="()"),a=this.remove_duplicate_swizzle(a)}return this.type_to_glsl(e)+"("+r+")"},r.prototype.to_expression=function(e,r){void 0===r&&(r=!0),this.invalid_expressions.hasOwnProperty(e)&&this.handle_invalid_expression(e);var a=this.ir;if(a.ids[e].get_type()===t.TypeExpression)for(var i=0,o=this.get(He,e).expression_dependencies;i<o.length;i++){var n=o[i];this.invalid_expressions.hasOwnProperty(n)&&this.handle_invalid_expression(n)}switch(r&&this.track_expression_read(e),a.ids[e].get_type()){case t.TypeExpression:var s=this.get(He,e);if(s.base_expression)return this.to_enclosed_expression(s.base_expression)+s.expression;if(s.need_transpose){var c=this.get_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),l=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked);return this.convert_row_major_matrix(s.expression,this.get(Ce,s.expression_type),c,l)}return this.flattened_structs.hasOwnProperty(e)?this.load_flattened_struct(s.expression,this.get(Ce,s.expression_type)):this.is_forcing_recompilation()?"_":s.expression;case t.TypeConstant:var p=this.get(Me,e),u=this.get(Ce,p.constant_type);if(this.has_decoration(p.self,N.DecorationBuiltIn))return this.builtin_to_glsl(this.get_decoration(p.self,N.DecorationBuiltIn),I.StorageClassGeneric);if(p.specialization){if(this.backend.workgroup_size_is_hidden){var _=this.get_constant_mapping_to_workgroup_component(p);if(_>=0){var f=this.builtin_to_glsl(P.BuiltInWorkgroupSize,I.StorageClassInput)+this.vector_swizzle(1,_);return u.basetype!==ue.UInt&&(f=this.bitcast_expression(u,ue.UInt,f)),f}}return this.to_name(e)}return p.is_used_as_lut?this.to_name(e):u.basetype!==ue.Struct||this.backend.can_declare_struct_inline?u.array.length>0&&!this.backend.can_declare_arrays_inline?this.to_name(e):this.constant_expression(p):this.to_name(e);case t.TypeConstantOp:return this.to_name(e);case t.TypeVariable:var m=this.get(ge,e);if(m.statically_assigned||m.loop_variable&&!m.loop_variable_enable)return this.to_expression(m.static_expression);if(m.deferred_declaration)return m.deferred_declaration=!1,this.variable_decl(m);if(this.flattened_structs.hasOwnProperty(e))return this.load_flattened_struct(this.to_name(e),this.get(Ce,m.basetype));var d=Mt(me,a.meta,m.self).decoration;return d.builtin?this.builtin_to_glsl(d.builtin_type,m.storage):this.to_name(e);case t.TypeCombinedImageSampler:throw new Error("Combined image samplers have no default expression representation.");case t.TypeAccessChain:throw new Error("Access chains have no default expression representation.");default:return this.to_name(e)}},r.prototype.to_enclosed_expression=function(e,t){return void 0===t&&(t=!0),this.enclose_expression(this.to_expression(e,t))},r.prototype.to_unpacked_expression=function(e,t){void 0===t&&(t=!0);var r=this.maybe_get(He,e),a=r&&r.need_transpose,i=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),o=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked);return a||!i&&!o?this.to_expression(e,t):this.unpack_expression_type(this.to_expression(e,t),this.get_pointee_type(this.expression_type_id(e)),this.get_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked),!1)},r.prototype.to_enclosed_unpacked_expression=function(e,t){return void 0===t&&(t=!0),this.enclose_expression(this.to_unpacked_expression(e,t))},r.prototype.to_enclosed_pointer_expression=function(e,t){return void 0===t&&(t=!0),this.expression_type(e).pointer&&this.expression_is_lvalue(e)&&!this.should_dereference(e)?this.address_of_expression(this.to_enclosed_expression(e,t)):this.to_enclosed_unpacked_expression(e,t)},r.prototype.to_extract_component_expression=function(e,t){var r=this.to_enclosed_expression(e);return this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked)?r+"["+t+"]":r+"."+this.index_to_swizzle(t)},r.prototype.enclose_expression=function(e){var t=!1,r=e.length;r>0&&("-"!==(o=e.charAt(0))&&"+"!==o&&"!"!==o&&"~"!==o&&"&"!==o&&"*"!==o||(t=!0));if(!t){for(var a=0,i=0;i<r;++i){var o;if("("===(o=e.charAt(i))||"["===o)a++;else if(")"===o||"]"===o)console.assert(a),a--;else if(" "===o&&0===a){t=!0;break}}console.assert(0===a)}return t?"("+e+")":e},r.prototype.dereference_expression=function(e,t){return"&"===t.charAt(0)?t.substring(1):this.backend.native_pointers?"*"+t:e.storage===I.StorageClassPhysicalStorageBufferEXT&&e.basetype!==ue.Struct&&1===e.pointer_depth?this.enclose_expression(t)+".value":t},r.prototype.address_of_expression=function(e){return e.length>3&&"("===e.charAt(0)&&"*"===e.charAt(1)&&")"===e.charAt(e.length-1)?this.enclose_expression(e.substring(2,e.length-1)):"*"===e.charAt(0)?e.substr(1):"&"+this.enclose_expression(e)},r.prototype.strip_enclosed_expression=function(e){var t=e.length,r=e.charAt(t-1);if(t<2||"("!==e.charAt(0)||")"!==r)return e;for(var a=0,i=0;i<t;++i){var o=e.charAt(i);if("("===o)a++;else if(")"===o&&0===--a&&o!==r)return e}return e.substring(1,t-1)},r.prototype.to_member_name=function(e,t){if(0!==e.type_alias&&!this.has_extended_decoration(e.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked))return this.to_member_name(this.get(Ce,e.type_alias),t);var r=Mt(me,this.ir.meta,e.self).members;return t<r.length&&""!==r[t].alias?r[t].alias:"_m"+t},r.prototype.to_member_reference=function(e,t,r,a){return"."+this.to_member_name(t,r)},r.prototype.type_to_glsl_constructor=function(e){var t=this.options,r=this.backend;if(r.use_array_constructor&&e.array.length>1){if(t.flatten_multidimensional_arrays)throw new Error("Cannot flatten constructors of multidimensional array constructors, e.g. float[][]().");if(!t.es&&t.version<430)this.require_extension_internal("GL_ARB_arrays_of_arrays");else if(t.es&&t.version<310)throw new Error("Arrays of arrays not supported before ESSL version 310.")}var a=this.type_to_glsl(e);if(r.use_array_constructor)for(var i=0;i<e.array.length;i++)a+="[]";return a},r.prototype.to_qualifiers_glsl=function(e){var t=this.ir,r=this.backend,a=Mt(me,t.meta,e).decoration.decoration_flags,i="",o=this.maybe_get(ge,e);o&&o.storage===I.StorageClassWorkgroup&&!r.shared_is_implied&&(i+="shared "),i+=this.to_interpolation_qualifiers(a),o&&(i+=this.to_storage_qualifiers_glsl(o));var n=this.expression_type(e);if(n.image.dim!==v.DimSubpassData&&2===n.image.sampled){a.get(N.DecorationCoherent)&&(i+="coherent "),a.get(N.DecorationRestrict)&&(i+="restrict "),a.get(N.DecorationNonWritable)&&(i+="readonly ");var s=n.image.format===E.ImageFormatUnknown;if(a.get(N.DecorationNonReadable)&&(i+="writeonly ",s=!1),s){if(this.options.es)throw new Error("Cannot use GL_EXT_shader_image_load_formatted in ESSL.");this.require_extension_internal("GL_EXT_shader_image_load_formatted")}}return i+=this.to_precision_qualifiers_glsl(e)},r.prototype.fixup_io_block_patch_qualifiers=function(e){var t=this.get(Ce,e.basetype);if(this.has_decoration(t.self,N.DecorationBlock)){for(var r=t.member_types.length,a=0;a<r;a++)if(this.has_member_decoration(t.self,a,N.DecorationPatch)){this.set_decoration(e.self,N.DecorationPatch);break}if(this.has_decoration(e.self,N.DecorationPatch))for(a=0;a<r;a++)this.unset_member_decoration(t.self,a,N.DecorationPatch)}},r.prototype.emit_output_variable_initializer=function(e){var t=this,r=this.ir,a=this.get(we,r.default_entry_point),i=this.get(Ce,e.basetype),o=this.has_decoration(e.self,N.DecorationPatch),n=this.has_decoration(i.self,N.DecorationBlock),s=this.get_execution_model()===g.ExecutionModelTessellationControl&&!o;if(n){var c=i.member_types.length,l=1===i.array.length,p=1;l&&(p=this.to_array_size_literal(i));for(var u=s?1:p,_=function(n){if(f.has_member_decoration(i.self,n,N.DecorationBuiltIn)){if(f.get_member_decoration(i.self,n,N.DecorationBuiltIn)===P.BuiltInCullDistance&&!f.cull_distance_count)return"continue";if(f.get_member_decoration(i.self,n,N.DecorationBuiltIn)===P.BuiltInClipDistance&&!f.clip_distance_count)return"continue"}var c;if(l){c="_".concat(e.self,"_").concat(n,"_init");var _=f.get(Ce,e.basetype).member_types[n],m=f.get(Ce,_);m.parent_type=_,m.array.push(p),m.array_size_literal.push(!0);for(var d=[],h=f.get(Me,e.initializer),g=0;g<p;g++)d.push(f.to_expression(f.get(Me,h.subconstants[g]).subconstants[n]));f.statement("const ",f.type_to_glsl(m)," ",c,f.type_to_array_glsl(m)," = ",f.type_to_glsl_constructor(m),"(",d.join(", "),");")}var y=function(i){a.fixup_hooks_in.push((function(){var a=new $t,p=t.get(Me,e.initializer),u=0,_=0;if(s){var f=r.increase_bound_by(3),m=new Ce;m.basetype=ue.UInt,m.width=32,t.set(Ce,f,m),t.set(He,f+1,t.builtin_to_glsl(P.BuiltInInvocationId,I.StorageClassInput),f,!0),t.set(Me,f+2,f,n,!1),u=f+1,_=f+2}if(o&&(t.statement("if (gl_InvocationID === 0)"),t.begin_scope()),l&&!s){var d=[i,n],h=t.access_chain_internal(e.self,d,2,Yt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,a);t.statement(h," = ",c,"[",i,"];")}else if(s){d=[u,_],h=t.access_chain_internal(e.self,d,2,0,a);t.statement(h," = ",c,"[",t.builtin_to_glsl(P.BuiltInInvocationId,I.StorageClassInput),"];")}else{h=t.access_chain_internal(e.self,[n],1,Yt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,a);t.statement(h," = ",t.to_expression(p.subconstants[n]),";")}o&&t.end_scope()}))};for(g=0;g<u;g++)y(g)},f=this,m=0;m<c;m++)_(m)}else if(s){var d="_".concat(e.self,"_init");this.statement("const ",this.type_to_glsl(i)," ",d,this.type_to_array_glsl(i)," = ",this.to_expression(e.initializer),";"),a.fixup_hooks_in.push((function(){t.statement(t.to_expression(e.self),"[gl_InvocationID] = ",d,"[gl_InvocationID];")}))}else if(this.has_decoration(e.self,N.DecorationBuiltIn)&&this.get_decoration(e.self,N.DecorationBuiltIn)===P.BuiltInSampleMask)a.fixup_hooks_in.push((function(){for(var r=t.get(Me,e.initializer),a=r.subconstants.length,i=0;i<a;i++)t.statement(t.to_expression(e.self),"[",i,"] = ",je(t.get(Me,r.subconstants[i]).scalar_i32()),";")}));else{var h="".concat(e.self,"_init");this.statement("const ",this.type_to_glsl(i)," ",h,this.type_to_array_glsl(i)," = ",this.to_expression(e.initializer),";"),a.fixup_hooks_in.push((function(){o&&(t.statement("if (gl_InvocationID === 0)"),t.begin_scope()),t.statement(t.to_expression(e.self)," = ",h,";"),o&&t.end_scope()}))}},r.prototype.to_precision_qualifiers_glsl=function(e){var t=this.expression_type(e);if(this.backend.allow_precision_qualifiers&&(t.basetype===ue.Image||t.basetype===ue.SampledImage)&&this.get(Ce,t.image.type).width<32)return"mediump ";return this.flags_to_qualifiers_glsl(t,Mt(me,this.ir.meta,e).decoration.decoration_flags)},r.prototype.to_storage_qualifiers_glsl=function(e){var t=this.get_entry_point();if(this.subpass_input_is_framebuffer_fetch(e.self))return"";if(e.storage===I.StorageClassInput||e.storage===I.StorageClassOutput){if(this.is_legacy()&&t.model===g.ExecutionModelVertex)return e.storage===I.StorageClassInput?"attribute ":"varying ";if(this.is_legacy()&&t.model===g.ExecutionModelFragment)return"varying ";if(t.model===g.ExecutionModelFragment&&e.storage===I.StorageClassOutput){var r=this.get_decoration(e.self,N.DecorationLocation);return this.location_is_framebuffer_fetch(r)?"inout ":"out "}return e.storage===I.StorageClassInput?"in ":"out "}if(e.storage===I.StorageClassUniformConstant||e.storage===I.StorageClassUniform||e.storage===I.StorageClassPushConstant)return"uniform ";if(e.storage===I.StorageClassRayPayloadKHR)throw new Error("Raytracing not supported");if(e.storage===I.StorageClassIncomingRayPayloadKHR)throw new Error("Raytracing not supported");if(e.storage===I.StorageClassHitAttributeKHR)throw new Error("Raytracing not supported");if(e.storage===I.StorageClassCallableDataKHR)throw new Error("Raytracing not supported");if(e.storage===I.StorageClassIncomingCallableDataKHR)throw new Error("Raytracing not supported");return""},r.prototype.flags_to_qualifiers_glsl=function(e,t){if(t.get(N.DecorationRestrictPointerEXT))return"restrict ";var r=this.backend,a=this.options,i="";if(jt(e)&&t.get(N.DecorationNoContraction)&&r.support_precise_qualifier&&(i="precise "),!(e.basetype===ue.Float||e.basetype===ue.Int||e.basetype===ue.UInt||e.basetype===ue.Image||e.basetype===ue.SampledImage||e.basetype===ue.Sampler))return i;if(a.es){var o=this.get_entry_point();if(t.get(N.DecorationRelaxedPrecision)){var n=e.basetype===ue.Float&&a.fragment.default_float_precision===Ht.Mediump&&o.model===g.ExecutionModelFragment,s=(e.basetype===ue.Int||e.basetype===ue.UInt)&&a.fragment.default_int_precision===Ht.Mediump&&o.model===g.ExecutionModelFragment;i+=n||s?"":"mediump "}else{var c=e.basetype===ue.Float&&(a.fragment.default_float_precision===Ht.Highp&&o.model===g.ExecutionModelFragment||o.model!==g.ExecutionModelFragment),l=(e.basetype===ue.Int||e.basetype===ue.UInt)&&(a.fragment.default_int_precision===Ht.Highp&&o.model===g.ExecutionModelFragment||o.model!==g.ExecutionModelFragment);i+=c||l?"":"highp "}}else r.allow_precision_qualifiers&&t.get(N.DecorationRelaxedPrecision)&&(i+="mediump ");return i},r.prototype.format_to_glsl=function(e){if(this.options.es&&this.is_desktop_only_format(e))throw new Error("Attempting to use image format not supported in ES profile.");switch(e){case E.ImageFormatRgba32f:return"rgba32f";case E.ImageFormatRgba16f:return"rgba16f";case E.ImageFormatR32f:return"r32f";case E.ImageFormatRgba8:return"rgba8";case E.ImageFormatRgba8Snorm:return"rgba8_snorm";case E.ImageFormatRg32f:return"rg32f";case E.ImageFormatRg16f:return"rg16f";case E.ImageFormatRgba32i:return"rgba32i";case E.ImageFormatRgba16i:return"rgba16i";case E.ImageFormatR32i:return"r32i";case E.ImageFormatRgba8i:return"rgba8i";case E.ImageFormatRg32i:return"rg32i";case E.ImageFormatRg16i:return"rg16i";case E.ImageFormatRgba32ui:return"rgba32ui";case E.ImageFormatRgba16ui:return"rgba16ui";case E.ImageFormatR32ui:return"r32ui";case E.ImageFormatRgba8ui:return"rgba8ui";case E.ImageFormatRg32ui:return"rg32ui";case E.ImageFormatRg16ui:return"rg16ui";case E.ImageFormatR11fG11fB10f:return"r11f_g11f_b10f";case E.ImageFormatR16f:return"r16f";case E.ImageFormatRgb10A2:return"rgb10_a2";case E.ImageFormatR8:return"r8";case E.ImageFormatRg8:return"rg8";case E.ImageFormatR16:return"r16";case E.ImageFormatRg16:return"rg16";case E.ImageFormatRgba16:return"rgba16";case E.ImageFormatR16Snorm:return"r16_snorm";case E.ImageFormatRg16Snorm:return"rg16_snorm";case E.ImageFormatRgba16Snorm:return"rgba16_snorm";case E.ImageFormatR8Snorm:return"r8_snorm";case E.ImageFormatRg8Snorm:return"rg8_snorm";case E.ImageFormatR8ui:return"r8ui";case E.ImageFormatRg8ui:return"rg8ui";case E.ImageFormatR16ui:return"r16ui";case E.ImageFormatRgb10a2ui:return"rgb10_a2ui";case E.ImageFormatR8i:return"r8i";case E.ImageFormatRg8i:return"rg8i";case E.ImageFormatR16i:return"r16i";default:return null}},r.prototype.layout_for_member=function(e,t){if(this.is_legacy())return"";if(!(this.has_decoration(e.self,N.DecorationBlock)||this.has_decoration(e.self,N.DecorationBufferBlock)))return"";var r=this.ir,a=this.options,i=Mt(me,r.meta,e.self).members;if(t>=i.length)return"";var o=i[t],n=[];if(this.has_member_decoration(e.self,t,N.DecorationPassthroughNV)&&n.push("passthrough"),this.combined_decoration_for_member(e,t).get(N.DecorationRowMajor)&&n.push("row_major"),o.decoration_flags.get(N.DecorationLocation)&&this.can_use_io_location(e.storage,!0)&&n.push("location = "+o.location),o.decoration_flags.get(N.DecorationComponent)&&this.can_use_io_location(e.storage,!0)){if(a.es)throw new Error("Component decoration is not supported in ES targets.");if(a.version<440&&a.version>=140)this.require_extension_internal("GL_ARB_enhanced_layouts");else if(a.version<140)throw new Error("Component decoration is not supported in targets below GLSL 1.40.");n.push("component = "+o.component)}if(this.has_extended_decoration(e.self,ce.SPIRVCrossDecorationExplicitOffset)&&o.decoration_flags.get(N.DecorationOffset)?n.push("offset = "+o.offset):e.storage===I.StorageClassOutput&&o.decoration_flags.get(N.DecorationOffset)&&n.push("xfb_offset = "+o.offset),0===n.length)return"";var s="layout(";return s+=n.join(", "),s+=") "},r.prototype.to_interpolation_qualifiers=function(e){var t="";if(e.get(N.DecorationFlat)&&(t+="flat "),e.get(N.DecorationNoPerspective)&&(t+="noperspective "),e.get(N.DecorationCentroid)&&(t+="centroid "),e.get(N.DecorationPatch)&&(t+="patch "),e.get(N.DecorationSample)&&(t+="sample "),e.get(N.DecorationInvariant)&&(t+="invariant "),e.get(N.DecorationExplicitInterpAMD)&&(this.require_extension_internal("GL_AMD_shader_explicit_vertex_parameter"),t+="__explicitInterpAMD "),e.get(N.DecorationPerVertexNV)){var r=this.options;if(r.es&&r.version<320)throw new Error("pervertexNV requires ESSL 320.");if(!r.es&&r.version<450)throw new Error("pervertexNV requires GLSL 450.");this.require_extension_internal("GL_NV_fragment_shader_barycentric"),t+="pervertexNV "}return t},r.prototype.layout_for_variable=function(e){if(this.is_legacy())return"";if(this.subpass_input_is_framebuffer_fetch(e.self))return"";var t=this.options,r=this.ir,a=[],i=this.get(Ce,e.basetype),o=this.get_decoration_bitset(e.self),n=this.get_decoration_bitset(i.self);o.get(N.DecorationPassthroughNV)&&a.push("passthrough"),o.get(N.DecorationRowMajor)&&a.push("row_major"),o.get(N.DecorationColMajor)&&a.push("column_major");var s=this.has_decoration(i.self,N.DecorationBlock);if(o.get(N.DecorationLocation)&&this.can_use_io_location(e.storage,s)){for(var c=new le,l=Mt(me,r.meta,i.self).members,p=0;p<l.length;p++)c.merge_or(this.combined_decoration_for_member(i,p));c.get(N.DecorationLocation)||a.push("location = "+this.get_decoration(e.self,N.DecorationLocation))}this.get_execution_model()===g.ExecutionModelFragment&&e.storage===I.StorageClassOutput&&this.location_is_non_coherent_framebuffer_fetch(this.get_decoration(e.self,N.DecorationLocation))&&a.push("noncoherent");var u=!1;if(s&&e.storage===I.StorageClassOutput){var _=i.member_types.length,f=!1,m=!1,d=!1,h=0,y=0,b=0;o.get(N.DecorationXfbBuffer)&&o.get(N.DecorationXfbStride)&&(f=!0,y=this.get_decoration(e.self,N.DecorationXfbBuffer),h=this.get_decoration(e.self,N.DecorationXfbStride)),o.get(N.DecorationStream)&&(d=!0,b=this.get_decoration(e.self,N.DecorationStream));for(p=0;p<_;p++){if(this.has_member_decoration(i.self,p,N.DecorationStream)){var S=this.get_member_decoration(i.self,p,N.DecorationStream);if(d&&S!==b)throw new Error("IO block member Stream mismatch.");d=!0,b=S}if(this.has_member_decoration(i.self,p,N.DecorationOffset)){if(m=!0,this.has_member_decoration(i.self,p,N.DecorationXfbBuffer)){var v=this.get_member_decoration(i.self,p,N.DecorationXfbBuffer);if(f&&v!==y)throw new Error("IO block member XfbBuffer mismatch.");f=!0,y=v}if(this.has_member_decoration(i.self,p,N.DecorationXfbStride)){var O=this.get_member_decoration(i.self,p,N.DecorationXfbStride);if(f&&O!==h)throw new Error("IO block member XfbStride mismatch.");f=!0,h=O}}}if(f&&m&&(a.push("xfb_buffer = "+y),a.push("xfb_stride = "+h),u=!0),d){if(this.get_execution_model()!==g.ExecutionModelGeometry)throw new Error("Geometry streams can only be used in geometry shaders.");if(t.es)throw new Error("Multiple geometry streams not supported in ESSL.");t.version<400&&this.require_extension_internal("GL_ARB_transform_feedback3"),a.push("stream = "+this.get_decoration(e.self,N.DecorationStream))}}else if(e.storage===I.StorageClassOutput&&(o.get(N.DecorationXfbBuffer)&&o.get(N.DecorationXfbStride)&&o.get(N.DecorationOffset)&&(a.push("xfb_buffer = "+this.get_decoration(e.self,N.DecorationXfbBuffer)),a.push("xfb_stride = "+this.get_decoration(e.self,N.DecorationXfbStride)),a.push("xfb_offset = "+this.get_decoration(e.self,N.DecorationOffset)),u=!0),o.get(N.DecorationStream))){if(this.get_execution_model()!==g.ExecutionModelGeometry)throw new Error("Geometry streams can only be used in geometry shaders.");if(t.es)throw new Error("Multiple geometry streams not supported in ESSL.");t.version<400&&this.require_extension_internal("GL_ARB_transform_feedback3"),a.push("stream = "+this.get_decoration(e.self,N.DecorationStream))}if(o.get(N.DecorationComponent)&&this.can_use_io_location(e.storage,s)&&(u=!0,a.push("component = "+this.get_decoration(e.self,N.DecorationComponent))),u)if(t.es){if(t.es)throw new Error("GL_ARB_enhanced_layouts is not supported in ESSL.")}else{if(t.version<440&&t.version>=140)this.require_extension_internal("GL_ARB_enhanced_layouts");else if(t.version<140)throw new Error("GL_ARB_enhanced_layouts is not supported in targets below GLSL 1.40.");!t.es&&t.version<440&&this.require_extension_internal("GL_ARB_enhanced_layouts")}o.get(N.DecorationIndex)&&a.push("index = "+this.get_decoration(e.self,N.DecorationIndex));var C,E=e.storage===I.StorageClassStorageBuffer||e.storage===I.StorageClassShaderRecordBufferKHR||e.storage===I.StorageClassUniform&&n.get(N.DecorationBufferBlock),x=e.storage===I.StorageClassPushConstant&&t.emit_push_constant_as_uniform_buffer,k=e.storage===I.StorageClassUniform&&n.get(N.DecorationBlock),L=t.es&&t.version>=300||!t.es&&t.version>=140;if(k&&t.emit_uniform_buffer_as_plain_uniforms&&(L=!1),C=t.es?t.version>=310:t.enable_420pack_extension||t.version>=420,L||e.storage!==I.StorageClassUniform||(C=!1),e.storage===I.StorageClassShaderRecordBufferKHR&&(C=!1),C&&o.get(N.DecorationBinding)&&a.push("binding = "+this.get_decoration(e.self,N.DecorationBinding)),e.storage!==I.StorageClassOutput&&o.get(N.DecorationOffset)&&a.push("offset = "+this.get_decoration(e.self,N.DecorationOffset)),L&&(k||x)?a.push(this.buffer_to_packing_standard(i,!1)):L&&E&&a.push(this.buffer_to_packing_standard(i,!0)),i.basetype===ue.Image&&2===i.image.sampled){var M=this.format_to_glsl(i.image.format);M&&a.push(M)}return 0===a.length?"":"layout("+a.join(", ")+") "},r.prototype.to_initializer_expression=function(e){return this.to_unpacked_expression(e.initializer)},r.prototype.to_zero_initialized_expression=function(e){var t=this.ir,r=t.increase_bound_by(1);return t.make_constant_null(r,e,!1),this.constant_expression(this.get(Me,r))},r.prototype.type_can_zero_initialize=function(e){if(e.pointer)return!1;if(e.array.length>0&&this.options.flatten_multidimensional_arrays)return!1;for(var t=0,r=e.array_size_literal;t<r.length;t++){if(!r[t])return!1}for(var a=0,i=e.member_types;a<i.length;a++){var o=i[a];if(!this.type_can_zero_initialize(this.get(Ce,o)))return!1}return!0},r.prototype.buffer_is_packing_standard=function(e,t,r,a,i){void 0===r&&(r=null),void 0===a&&(a=0),void 0===i&&(i=-1);for(var o=0,n=1,s=this.has_decoration(e.self,N.DecorationBlock)||this.has_decoration(e.self,N.DecorationBufferBlock),c=this.ir,l=0;l<e.member_types.length;l++){var p=this.get(Ce,e.member_types[l]),u=Mt(me,c.meta,e.self).members[l].decoration_flags,_=this.type_to_packed_alignment(p,u,t),f=0;s&&l+1===e.member_types.length&&p.array.length>0||(f=this.type_to_packed_size(p,u,t));var m=this.type_struct_member_offset(e,l);if(m>=i)break;var d=Math.max(_,n);if(o=o+d-1&~(d-1),n=p.basetype!==ue.Struct||p.pointer?1:_,m>=a){if(sr(t)){if(0!=(m&d-1))return r&&(r[0]=l),!1}else if(m!==o)return r&&(r[0]=l),!1;if(0===p.array.length&&this.type_to_packed_array_stride(p,u,t)!=this.type_struct_member_array_stride(e,l))return r&&(r[0]=l),!1;var h=cr(t);if(!p.pointer&&p.member_types.length>0&&!this.buffer_is_packing_standard(p,h))return r&&(r[0]=l),!1}o=m+f}return!0},r.prototype.buffer_to_packing_standard=function(e,t){var r=this.options;if(t&&this.buffer_is_packing_standard(e,Jt.BufferPackingStd430))return"std430";if(this.buffer_is_packing_standard(e,Jt.BufferPackingStd140))return"std140";if(t&&this.buffer_is_packing_standard(e,Jt.BufferPackingStd430EnhancedLayout)){if(r.es)throw new Error("Push constant block cannot be expressed as neither std430 nor std140. ES-targets do not support GL_ARB_enhanced_layouts.");return this.set_extended_decoration(e.self,ce.SPIRVCrossDecorationExplicitOffset),"std430"}if(this.buffer_is_packing_standard(e,Jt.BufferPackingStd140EnhancedLayout)){if(r.es)throw new Error("Push constant block cannot be expressed as neither std430 nor std140. ES-targets do not support GL_ARB_enhanced_layouts.");return!r.es&&/*!options.vulkan_semantics &&*/r.version<440&&this.require_extension_internal("GL_ARB_enhanced_layouts"),this.set_extended_decoration(e.self,ce.SPIRVCrossDecorationExplicitOffset),"std140"}throw new Error("Buffer block cannot be expressed as any of std430, std140, scalar, even with enhanced layouts. You can try flattening this block to support a more flexible layout.")},r.prototype.type_to_packed_base_size=function(e,t){switch(e.basetype){case ue.Double:case ue.Int64:case ue.UInt64:return 8;case ue.Float:case ue.Int:case ue.UInt:return 4;case ue.Half:case ue.Short:case ue.UShort:return 2;case ue.SByte:case ue.UByte:return 1;default:throw new Error("Unrecognized type in type_to_packed_base_size.")}},r.prototype.type_to_packed_alignment=function(e,t,r){var a=this.ir;if(e.storage===I.StorageClassPhysicalStorageBufferEXT){if(!e.pointer)throw new Error("Types in PhysicalStorageBufferEXT must be pointers.");if(a.addressing_model===y.AddressingModelPhysicalStorageBuffer64EXT)return lr(r)&&this.type_is_array_of_pointers(e)?16:8;throw new Error("AddressingModelPhysicalStorageBuffer64EXT must be used for PhysicalStorageBufferEXT.")}if(e.array.length){var i=1;lr(r)&&(i=16);for(var o=this.get(Ce,e.parent_type);!o.array.length;)o=this.get(Ce,o.parent_type);return Math.max(i,this.type_to_packed_alignment(o,t,r))}if(e.basetype===ue.Struct){for(var n=1,s=0;s<e.member_types.length;s++){var c=Mt(me,a.meta,e.self).members[s].decoration_flags;n=Math.max(n,this.type_to_packed_alignment(this.get(Ce,e.member_types[s]),c,r))}return lr(r)&&(n=Math.max(n,16)),n}var l=this.type_to_packed_base_size(e,r);if(pr(r))return l;if(1===e.vecsize&&1===e.columns)return l;if((2===e.vecsize||4===e.vecsize)&&1===e.columns)return e.vecsize*l;if(3===e.vecsize&&1===e.columns)return 4*l;if(t.get(N.DecorationColMajor)&&e.columns>1)return lr(r)||3===e.vecsize?4*l:e.vecsize*l;if(t.get(N.DecorationRowMajor)&&e.vecsize>1)return lr(r)||3===e.columns?4*l:e.columns*l;throw new Error("Did not find suitable rule for type. Bogus decorations?")},r.prototype.type_to_packed_array_stride=function(e,t,r){var a=e.parent_type;console.assert(a);var i=this.get(Ce,a),o=this.type_to_packed_size(i,t,r),n=this.type_to_packed_alignment(e,t,r);return o+n-1&~(n-1)},r.prototype.type_to_packed_size=function(e,t,r){if(e.array.length)return this.to_array_size_literal(e)*this.type_to_packed_array_stride(e,t,r);var a=this.ir;if(e.storage===I.StorageClassPhysicalStorageBufferEXT){if(!e.pointer)throw new Error("Types in PhysicalStorageBufferEXT must be pointers.");if(a.addressing_model===y.AddressingModelPhysicalStorageBuffer64EXT)return 8;throw new Error("AddressingModelPhysicalStorageBuffer64EXT must be used for PhysicalStorageBufferEXT.")}var i=0;if(e.basetype===ue.Struct)for(var o=1,n=0;n<e.member_types.length;n++){var s=Mt(me,a.meta,e.self).members[n].decoration_flags,c=this.get(Ce,e.member_types[n]),l=this.type_to_packed_alignment(c,s,r),p=Math.max(l,o);o=c.basetype===ue.Struct?l:1,i=i+p-1&~(p-1),i+=this.type_to_packed_size(c,s,r)}else{var u=this.type_to_packed_base_size(e,r);pr(r)?i=e.vecsize*e.columns*u:(1===e.columns&&(i=e.vecsize*u),t.get(N.DecorationColMajor)&&e.columns>1&&(i=lr(r)||3===e.vecsize?4*e.columns*u:e.columns*e.vecsize*u),t.get(N.DecorationRowMajor)&&e.vecsize>1&&(i=lr(r)||3===e.columns?4*e.vecsize*u:e.vecsize*e.columns*u))}return i},r.prototype.bitcast_glsl_op=function(e,t){if(e.pointer||t.pointer)return 2!==e.vecsize&&2!==t.vecsize||this.require_extension_internal("GL_EXT_buffer_reference_uvec2"),this.type_to_glsl(e);if(e.basetype===t.basetype)return"";var r=this.options;console.assert(e.basetype!==ue.Boolean),console.assert(t.basetype!==ue.Boolean);var a=Zt(e)&&Zt(t),i=e.width===t.width;if(a&&i)return this.type_to_glsl(e);if(8===e.width&&t.width>=16&&a&&1===t.vecsize)return"unpack8";if(8===t.width&&16===e.width&&a&&1===e.vecsize)return"pack16";if(8===t.width&&32===e.width&&a&&1===e.vecsize)return"pack32";if(e.basetype===ue.UInt&&t.basetype===ue.Float){if(this.is_legacy_es())throw new Error("Float -> Uint bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"floatBitsToUint"}if(e.basetype===ue.Int&&t.basetype===ue.Float){if(this.is_legacy_es())throw new Error("Float -> Int bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"floatBitsToInt"}if(e.basetype===ue.Float&&t.basetype===ue.UInt){if(this.is_legacy_es())throw new Error("Uint -> Float bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"uintBitsToFloat"}if(e.basetype===ue.Float&&t.basetype===ue.Int){if(this.is_legacy_es())throw new Error("Int -> Float bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"intBitsToFloat"}return e.basetype===ue.Int64&&t.basetype===ue.Double?"doubleBitsToInt64":e.basetype===ue.UInt64&&t.basetype===ue.Double?"doubleBitsToUint64":e.basetype===ue.Double&&t.basetype===ue.Int64?"int64BitsToDouble":e.basetype===ue.Double&&t.basetype===ue.UInt64?"uint64BitsToDouble":e.basetype===ue.Short&&t.basetype===ue.Half?"float16BitsToInt16":e.basetype===ue.UShort&&t.basetype===ue.Half?"float16BitsToUint16":e.basetype===ue.Half&&t.basetype===ue.Short?"int16BitsToFloat16":e.basetype===ue.Half&&t.basetype===ue.UShort?"uint16BitsToFloat16":e.basetype===ue.UInt64&&t.basetype===ue.UInt&&2===t.vecsize?"packUint2x32":e.basetype===ue.UInt&&t.basetype===ue.UInt64&&2===e.vecsize?"unpackUint2x32":e.basetype===ue.Half&&t.basetype===ue.UInt&&1===t.vecsize?"unpackFloat2x16":e.basetype===ue.UInt&&t.basetype===ue.Half&&2===t.vecsize?"packFloat2x16":e.basetype===ue.Int&&t.basetype===ue.Short&&2===t.vecsize?"packInt2x16":e.basetype===ue.Short&&t.basetype===ue.Int&&1===t.vecsize?"unpackInt2x16":e.basetype===ue.UInt&&t.basetype===ue.UShort&&2===t.vecsize?"packUint2x16":e.basetype===ue.UShort&&t.basetype===ue.UInt&&1===t.vecsize?"unpackUint2x16":e.basetype===ue.Int64&&t.basetype===ue.Short&&4===t.vecsize?"packInt4x16":e.basetype===ue.Short&&t.basetype===ue.Int64&&1===t.vecsize?"unpackInt4x16":e.basetype===ue.UInt64&&t.basetype===ue.UShort&&4===t.vecsize?"packUint4x16":e.basetype===ue.UShort&&t.basetype===ue.UInt64&&1===t.vecsize?"unpackUint4x16":""},r.prototype.bitcast_glsl=function(e,t){var r=this.bitcast_glsl_op(e,this.expression_type(t));return""===r?this.to_enclosed_unpacked_expression(t):r+"("+this.to_unpacked_expression(t)+")"},r.prototype.bitcast_expression=function(e,t,r){if(void 0===r){if(e=e,r=this.to_expression(t),(i=this.expression_type(t)).basetype!==e){var a=i;a.basetype=e,r=this.bitcast_glsl_op(a,i)+"("+r+")"}return r}var i,o=t;return(e=e).basetype===o?r:((i=e).basetype=o,this.bitcast_glsl_op(e,i)+"("+r+")")},r.prototype.remove_duplicate_swizzle=function(e){var t=e.lastIndexOf(".");if(t<=0)return e;var r=e.substring(t+1);if(this.backend.swizzle_is_function){if(r.length<2)return e;if("()"!==r.substring(r.length-2))return e;r.substring(0,r.length-2)}for(var a=0;a<r.length;a++)if(a>=4||r[a]!==rr[a])return e;var i=e.lastIndexOf(".",t-1);if(i<0)return e;for(a=++i;a<t;a++)if(e[a]<"w"||e[a]>"z"){if(this.backend.swizzle_is_function&&a+2===t&&"("===e[a]&&")"===e[a+1])break;return e}return t-i>=r.length&&(e=e.substring(0,i+r.length),this.backend.swizzle_is_function&&(e+="()")),e},r.prototype.replace_illegal_names=function(e){var t=this;void 0===e&&(e=ar);var r=this.ir;r.for_each_typed_id(ge,(function(a,i){if(!t.is_hidden_variable(i)){var o=r.find_meta(i.self);if(o){var n=o.decoration;e.has(n.alias)&&(n.alias="_"+n.alias)}}})),r.for_each_typed_id(we,(function(t,a){var i=r.find_meta(a.self);if(i){var o=i.decoration;e.has(o.alias)&&(o.alias="_"+o.alias)}})),r.for_each_typed_id(Ce,(function(t,a){var i=r.find_meta(a.self);if(i){var o=i.decoration;e.has(o.alias)&&(o.alias="_"+o.alias);for(var n=0,s=i.members;n<s.length;n++){var c=s[n];e.has(c.alias)&&(c.alias="_"+c.alias)}}}))},r.prototype.replace_fragment_output=function(e){var t=this.ir,r=Mt(me,t.meta,e.self).decoration,a=0;r.decoration_flags.get(N.DecorationLocation)&&(a=r.location);var i=this.get(Ce,e.basetype);if(0===i.array.length)r.alias="gl_FragData[".concat(a,"]"),this.is_legacy_es()&&0!==a&&this.require_extension_internal("GL_EXT_draw_buffers");else{if(1!==i.array.length)throw new Error("Array-of-array output variable used. This cannot be implemented in legacy GLSL.");if(r.alias="gl_FragData",0!==a)throw new Error("Arrayed output variable used, but location is not 0. This is unimplemented in SPIRV-Cross.");this.is_legacy_es()&&this.require_extension_internal("GL_EXT_draw_buffers")}e.compat_builtin=!0},r.prototype.replace_fragment_outputs=function(){var e=this;this.ir.for_each_typed_id(ge,(function(t,r){var a=e.get(Ce,r.basetype);e.is_builtin_variable(r)||r.remapped_variable||!a.pointer||r.storage!==I.StorageClassOutput||e.replace_fragment_output(r)}))},r.prototype.load_flattened_struct=function(e,t){var r=this.type_to_glsl_constructor(t);r+="(";for(var a=0;a<t.member_types.length;a++){a&&(r+=", ");var i=this.get(Ce,t.member_types[a]);i.basetype===ue.Struct?r+=this.load_flattened_struct(this.to_flattened_struct_member(e,t,a),i):r+=this.to_flattened_struct_member(e,t,a)}return r+=")"},r.prototype.to_flattened_struct_member=function(e,t,r){var a=e+"_"+this.to_member_name(t,r);return Je.sanitize_underscores(a),a},r.prototype.track_expression_read=function(e){switch(this.ir.ids[e].get_type()){case t.TypeExpression:for(var r=0,a=this.get(He,e).implied_read_expressions;r<a.length;r++){var i=a[r];this.track_expression_read(i)}break;case t.TypeAccessChain:for(var o=0,n=this.get(qe,e).implied_read_expressions;o<n.length;o++){i=n[o];this.track_expression_read(i)}}if(this.expression_is_forwarded(e)&&!this.expression_suppresses_usage_tracking(e)){var s=Mt(0,this.expression_usage_counts,e);s++,this.expression_read_implies_multiple_reads(e)&&s++,s>=2&&(this.forced_temporaries.add(e),this.force_recompile())}},r.prototype.is_legacy=function(){var e=this.options;return e.es&&e.version<300||!e.es&&e.version<130},r.prototype.is_legacy_es=function(){var e=this.options;return e.es&&e.version<300},r.prototype.is_legacy_desktop=function(){var e=this.options;return!e.es&&e.version<130},r.prototype.pls_decl=function(e){var t=this.get(ge,e.id),r=new Ce;return r.vecsize=function(e){switch(e){default:case mt.PlsR32F:case mt.PlsR32UI:return 1;case mt.PlsRG16F:case mt.PlsRG16:case mt.PlsRG16UI:case mt.PlsRG16I:return 2;case mt.PlsR11FG11FB10F:return 3;case mt.PlsRGB10A2:case mt.PlsRGBA8:case mt.PlsRGBA8I:case mt.PlsRGB10A2UI:case mt.PlsRGBA8UI:return 4}}(e.format),r.basetype=function(e){switch(e){case mt.PlsRGBA8I:case mt.PlsRG16I:return ue.Int;case mt.PlsRGB10A2UI:case mt.PlsRGBA8UI:case mt.PlsRG16UI:case mt.PlsR32UI:return ue.UInt;default:return ue.Float}}(e.format),function(e){switch(e){case mt.PlsR11FG11FB10F:return"layout(r11f_g11f_b10f) ";case mt.PlsR32F:return"layout(r32f) ";case mt.PlsRG16F:return"layout(rg16f) ";case mt.PlsRGB10A2:return"layout(rgb10_a2) ";case mt.PlsRGBA8:return"layout(rgba8) ";case mt.PlsRG16:return"layout(rg16) ";case mt.PlsRGBA8I:return"layout(rgba8i)";case mt.PlsRG16I:return"layout(rg16i) ";case mt.PlsRGB10A2UI:return"layout(rgb10_a2ui) ";case mt.PlsRGBA8UI:return"layout(rgba8ui) ";case mt.PlsRG16UI:return"layout(rg16ui) ";case mt.PlsR32UI:return"layout(r32ui) ";default:return""}}(e.format)+this.to_pls_qualifiers_glsl(t)+this.type_to_glsl(r)+" "+this.to_name(t.self)},r.prototype.to_pls_qualifiers_glsl=function(e){return Mt(me,this.ir.meta,e.self).decoration.decoration_flags.get(N.DecorationRelaxedPrecision)?"mediump ":"highp "},r.prototype.emit_pls=function(){var e=this.get_entry_point(),t=this.options;if(e.model!==g.ExecutionModelFragment)throw new Error("Pixel local storage only supported in fragment shaders.");if(!t.es)throw new Error("Pixel local storage only supported in OpenGL ES.");if(t.version<300)throw new Error("Pixel local storage only supported in ESSL 3.0 and above.");if(this.pls_inputs.length>0){this.statement("__pixel_local_inEXT _PLSIn"),this.begin_scope();for(var r=0,a=this.pls_inputs;r<a.length;r++){var i=a[r];this.statement(this.pls_decl(i),";")}this.end_scope_decl(),this.statement("")}if(this.pls_outputs.length>0){this.statement("__pixel_local_outEXT _PLSOut"),this.begin_scope();for(var o=0,n=this.pls_outputs;o<n.length;o++){var s=n[o];this.statement(this.pls_decl(s),";")}this.end_scope_decl(),this.statement("")}},r.prototype.remap_pls_variables=function(){for(var e=0,t=this.pls_inputs;e<t.length;e++){var r=t[e],a=!1;if((n=this.get(ge,r.id)).storage===I.StorageClassUniformConstant)a=this.get(Ce,n.basetype).image.dim===v.DimSubpassData;if(n.storage!==I.StorageClassInput&&!a)throw new Error("Can only use in and target variables for PLS inputs.");n.remapped_variable=!0}for(var i=0,o=this.pls_outputs;i<o.length;i++){var n,s=o[i];if((n=this.get(ge,s.id)).storage!==I.StorageClassOutput)throw new Error("Can only use out variables for PLS outputs.");n.remapped_variable=!0}},r.prototype.location_is_framebuffer_fetch=function(e){return!!this.inout_color_attachments.find((function(t){return t.first===e}))},r.prototype.location_is_non_coherent_framebuffer_fetch=function(e){return!!this.inout_color_attachments.find((function(t){return t.first===e&&!t.second}))},r.prototype.subpass_input_is_framebuffer_fetch=function(e){if(!this.has_decoration(e,N.DecorationInputAttachmentIndex))return!1;for(var t=this.get_decoration(e,N.DecorationInputAttachmentIndex),r=0,a=this.subpass_to_framebuffer_fetch_attachment;r<a.length;r++){if(a[r].first===t)return!0}return!1},r.prototype.emit_inout_fragment_outputs_copy_to_subpass_inputs=function(){for(var e=this,t=function(t){var a=r.find_subpass_input_by_attachment_index(t.first),i=r.find_color_output_by_location(t.second);if(!a)return"continue";if(!i)throw new Error("Need to declare the corresponding fragment output variable to be able to read from it.");if(r.is_array(r.get(Ce,i.basetype)))throw new Error("Cannot use GL_EXT_shader_framebuffer_fetch with arrays of color outputs.");r.get(we,r.get_entry_point().self).fixup_hooks_in.push((function(){if(e.is_legacy())e.statement(e.to_expression(a.self)," = ","gl_LastFragData[",e.get_decoration(i.self,N.DecorationLocation),"];");else{var t=e.get(Ce,i.basetype).vecsize;e.statement(e.to_expression(a.self),e.vector_swizzle(t,0)," = ",e.to_expression(i.self),";")}}))},r=this,a=0,i=this.subpass_to_framebuffer_fetch_attachment;a<i.length;a++){t(i[a])}},r.prototype.find_subpass_input_by_attachment_index=function(e){var t=this,r=null;return this.ir.for_each_typed_id(ge,(function(a,i){t.has_decoration(i.self,N.DecorationInputAttachmentIndex)&&t.get_decoration(i.self,N.DecorationInputAttachmentIndex)===e&&(r=i)})),r},r.prototype.find_color_output_by_location=function(e){var t=this,r=null;return this.ir.for_each_typed_id(ge,(function(a,i){i.storage===I.StorageClassOutput&&t.get_decoration(i.self,N.DecorationLocation)===e&&(r=i)})),r},r.prototype.add_variable=function(e,t,r){if(""!==r){if(r=Je.sanitize_underscores(r),!Je.is_globally_reserved_identifier(r,!0))return r=this.update_name_cache(e,t,r);r=""}},r.prototype.handle_invalid_expression=function(e){this.forced_temporaries.add(e),this.force_recompile()},r.prototype.init=function(){var e=this.ir,t=this.options;e.source.known&&(t.es=e.source.es,t.version=e.source.version)},r.prototype.compile=function(){var e=this.ir,t=this.options,r=this.backend;e.fixup_reserved_names(),r.nonuniform_qualifier="",r.needs_row_major_load_workaround=!0,r.allow_precision_qualifiers=t.es,r.force_gl_in_out_block=!0,r.supports_extensions=!0,r.use_array_constructor=!0,r.workgroup_size_is_hidden=!0,r.support_precise_qualifier=!t.es&&t.version>=400||t.es&&t.version>=320,this.is_legacy_es()&&(r.support_case_fallthrough=!1),this.fixup_type_alias(),this.reorder_type_alias(),this.build_function_control_flow_graphs_and_analyze(),this.find_static_extensions(),this.fixup_image_load_store_access(),this.update_active_builtins(),this.analyze_image_and_sampler_usage(),this.analyze_interlocked_resource_usage(),this.inout_color_attachments.length>0&&this.emit_inout_fragment_outputs_copy_to_subpass_inputs(),e.addressing_model===y.AddressingModelPhysicalStorageBuffer64EXT&&this.analyze_non_block_pointer_types();var a=0;do{if(a>=3)throw new Error("Over 3 compilation loops detected. Must be a bug!");this.reset(),this.buffer.reset(),this.emit_header(),this.emit_resources(),a++}while(this.is_forcing_recompilation());return this.get_entry_point().name="main",this.buffer.str()},r.prototype.find_static_extensions=function(){var e=this,t=this.ir,r=this.options;t.for_each_typed_id(Ce,(function(t,a){if(a.basetype===ue.Double){if(r.es)throw new Error("FP64 not supported in ES profile.");!r.es&&r.version<400&&e.require_extension_internal("GL_ARB_gpu_shader_fp64")}else if(a.basetype===ue.Int64||a.basetype===ue.UInt64){if(r.es)throw new Error("64-bit integers not supported in ES profile.");r.es||e.require_extension_internal("GL_ARB_gpu_shader_int64")}else a.basetype===ue.Half?e.require_extension_internal("GL_EXT_shader_explicit_arithmetic_types_float16"):a.basetype===ue.SByte||a.basetype===ue.UByte?e.require_extension_internal("GL_EXT_shader_explicit_arithmetic_types_int8"):a.basetype!==ue.Short&&a.basetype!==ue.UShort||e.require_extension_internal("GL_EXT_shader_explicit_arithmetic_types_int16")}));var a=this.get_entry_point();switch(a.model){case g.ExecutionModelGLCompute:throw new Error("Compute shaders are not supported!");case g.ExecutionModelGeometry:throw new Error("Geometry shaders are not supported!");case g.ExecutionModelTessellationEvaluation:case g.ExecutionModelTessellationControl:throw new Error("Tessellation shaders are not supported!");case g.ExecutionModelRayGenerationKHR:case g.ExecutionModelIntersectionKHR:case g.ExecutionModelAnyHitKHR:case g.ExecutionModelClosestHitKHR:case g.ExecutionModelMissKHR:case g.ExecutionModelCallableKHR:}if(0!==this.pls_inputs.length||0!==this.pls_outputs.length){if(a.model!==g.ExecutionModelFragment)throw new Error("Can only use GL_EXT_shader_pixel_local_storage in fragment shaders.");this.require_extension_internal("GL_EXT_shader_pixel_local_storage")}if(0!==this.inout_color_attachments.length){if(a.model!==g.ExecutionModelFragment)throw new Error("Can only use GL_EXT_shader_framebuffer_fetch in fragment shaders.");for(var i=!1,o=!1,n=0,s=this.inout_color_attachments;n<s.length;n++){s[n].second?i=!0:o=!0}i&&this.require_extension_internal("GL_EXT_shader_framebuffer_fetch"),o&&this.require_extension_internal("GL_EXT_shader_framebuffer_fetch_non_coherent")}if(r.separate_shader_objects&&!r.es&&r.version<410&&this.require_extension_internal("GL_ARB_separate_shader_objects"),t.addressing_model===y.AddressingModelPhysicalStorageBuffer64EXT)throw new Error("GL_EXT_buffer_reference is only supported in Vulkan GLSL.");if(t.addressing_model!==y.AddressingModelLogical)throw new Error("Only Logical and PhysicalStorageBuffer64EXT addressing models are supported.");for(var c=0,l=t.declared_capabilities;c<l.length;c++){switch(l[c]){case $.CapabilityShaderNonUniformEXT:throw new Error("CapabilityShaderNonUniformEXT not supported");case $.CapabilityRuntimeDescriptorArrayEXT:throw new Error("CapabilityRuntimeDescriptorArrayEXT not supported");case $.CapabilityGeometryShaderPassthroughNV:throw new Error("GeometryShaderPassthroughNV capability not supported");case $.CapabilityVariablePointers:case $.CapabilityVariablePointersStorageBuffer:throw new Error("VariablePointers capability is not supported in GLSL.");case $.CapabilityMultiView:throw new Error("MultiView capability is not supported in GLSL.");case $.CapabilityRayQueryKHR:throw new Error("RayQuery capability is not supported.");case $.CapabilityRayTraversalPrimitiveCullingKHR:throw new Error("RayTraversalPrimitiveCulling capability is not supported.")}}if(r.ovr_multiview_view_count)throw new Error("OVR_multiview2 is not supported")},r.prototype.fixup_image_load_store_access=function(){var e=this;this.options.enable_storage_image_qualifier_deduction&&this.ir.for_each_typed_id(ge,(function(t,r){var a=e.expression_type(t);if(a.basetype===ue.Image&&2===a.image.sampled){var i=Mt(me,e.ir.meta,t).decoration.decoration_flags;i.get(N.DecorationNonWritable)||i.get(N.DecorationNonReadable)||(i.set(N.DecorationNonWritable),i.set(N.DecorationNonReadable))}}))},r.prototype.type_is_empty=function(e){return e.basetype===ue.Struct&&0===e.member_types.length},r.prototype.declare_undefined_values=function(){var e=this,t=!1;this.ir.for_each_typed_id(Xe,(function(r,a){var i=e.get(Ce,a.basetype);if(i.basetype!==ue.Void){var o="";e.options.force_zero_initialized_variables&&e.type_can_zero_initialize(i)&&(o=" = "+e.to_zero_initialized_expression(a.basetype)),e.statement(e.variable_decl(i,e.to_name(a.self),a.self),o,";"),t=!0}})),t&&this.statement("")},r.prototype.can_use_io_location=function(e,t){var r=this.options;if(this.get_execution_model()!==g.ExecutionModelVertex&&e===I.StorageClassInput||this.get_execution_model()!==g.ExecutionModelFragment&&e===I.StorageClassOutput){var a=t?440:410;if(!r.es&&r.version<a&&!r.separate_shader_objects)return!1;if(r.es&&r.version<310)return!1}if(this.get_execution_model()===g.ExecutionModelVertex&&e===I.StorageClassInput||this.get_execution_model()===g.ExecutionModelFragment&&e===I.StorageClassOutput){if(r.es&&r.version<300)return!1;if(!r.es&&r.version<330)return!1}if(e===I.StorageClassUniform||e===I.StorageClassUniformConstant||e===I.StorageClassPushConstant){if(r.es&&r.version<310)return!1;if(!r.es&&r.version<430)return!1}return!0},r.prototype.convert_half_to_string=function(e,t,r){var a,i,o=e.scalar_f16(t,r);if(isNaN(o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)if((i=new Ce).basetype=ue.Half,i.vecsize=1,i.columns=1,o===Number.POSITIVE_INFINITY)a=this.type_to_glsl(i)+"(1.0 / 0.0)";else if(o===Number.NEGATIVE_INFINITY)a=this.type_to_glsl(i)+"(-1.0 / 0.0)";else{if(!isNaN(o))throw new Error("Cannot represent non-finite floating point constant.");a=this.type_to_glsl(i)+"(0.0 / 0.0)"}else(i=new Ce).basetype=ue.Half,i.vecsize=1,i.columns=1,a=this.type_to_glsl(i)+"("+je(o)+")";return a},r.prototype.convert_float_to_string=function(e,t,r){var a,i=e.scalar_f32(t,r),o=this.backend;if(isNaN(i)||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)if(this.is_legacy())if(i===Number.POSITIVE_INFINITY)a=o.float_literal_suffix?"(1.0f / 0.0f)":"(1.0 / 0.0)";else if(i===Number.NEGATIVE_INFINITY)a=o.float_literal_suffix?"(-1.0f / 0.0f)":"(-1.0 / 0.0)";else{if(!isNaN(i))throw new Error("Cannot represent non-finite floating point constant.");a=o.float_literal_suffix?"(0.0f / 0.0f)":"(0.0 / 0.0)"}else{var n=new Ce,s=new Ce;n.basetype=ue.Float,s.basetype=ue.UInt,n.vecsize=1,s.vecsize=1,n.width=32,s.width=32;var c="0x"+e.scalar(t,r)+"u",l="inf";i===Number.NEGATIVE_INFINITY?l="-inf":isNaN(i)&&(l="nan"),a=this.bitcast_glsl_op(n,s)+"(".concat(c," /* ").concat(l," */)")}else a=je(i),o.float_literal_suffix&&(a+="f");return a},r.prototype.convert_double_to_string=function(e,t,r){var a,i=e.scalar_f64(t,r),o=this.options,n=this.backend;if(isNaN(i)||isNaN(i))if(this.is_legacy()){if(o.es)throw new Error("FP64 not supported in ES profile.");if(o.version<400&&this.require_extension_internal("GL_ARB_gpu_shader_fp64"),i===Number.POSITIVE_INFINITY)a=n.double_literal_suffix?"(1.0lf / 0.0lf)":"(1.0 / 0.0)";else if(i===Number.NEGATIVE_INFINITY)a=n.double_literal_suffix?"(-1.0lf / 0.0lf)":"(-1.0 / 0.0)";else{if(!isNaN(i))throw new Error("Cannot represent non-finite floating point constant.");a=n.double_literal_suffix?"(0.0lf / 0.0lf)":"(0.0 / 0.0)"}}else{var s=new Ce,c=new Ce;s.basetype=ue.Double,c.basetype=ue.UInt64,s.vecsize=1,c.vecsize=1,s.width=64,c.width=64;var l=e.scalar_u64(t,r);if(o.es)throw new Error("64-bit integers/float not supported in ES profile.");this.require_extension_internal("GL_ARB_gpu_shader_int64");var p="0x"+l.toString()+n.long_long_literal_suffix?"ull":"ul",u="inf";i===Number.POSITIVE_INFINITY?u="-inf":isNaN(i)&&(u="nan"),a=this.bitcast_glsl_op(s,c)+"(".concat(p," /* ").concat(u," */)")}else a=je(i),n.double_literal_suffix&&(a+="lf");return a},r.prototype.variable_is_lut=function(e){if(e.statically_assigned&&0!==e.static_expression&&e.remapped_variable){var t=this.maybe_get(Me,e.static_expression);if(t&&t.is_used_as_lut)return!0}return!1},r.prototype.fixup_type_alias=function(){var e=this,t=this.ir;t.for_each_typed_id(Ce,(function(r,a){a.type_alias&&(e.has_decoration(a.self,N.DecorationBlock)||e.has_decoration(a.self,N.DecorationBufferBlock)?a.type_alias=0:e.type_is_block_like(a)&&a.self===r&&(t.for_each_typed_id(Ce,(function(e,t){e!==r&&t.type_alias===a.type_alias&&(t.type_alias=r)})),e.get(Ce,a.type_alias).type_alias=r,a.type_alias=0))}))},r.prototype.reorder_type_alias=function(){for(var e=this.ir,r=e.create_loop_hard_lock(),a=e.ids_for_type[t.TypeType],i=0,o=a;i<o.length;i++){var n=o[i],s=this.get(Ce,n);if(0!==s.type_alias&&!this.has_extended_decoration(s.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked)){var c=a.indexOf(s.type_alias);if(console.assert(c>=0),n<c){var l=e.ids_for_constant_or_type,p=l.indexOf(n),u=l.indexOf(c);console.assert(p>=0),console.assert(u>=0),or(l,n,c),or(l,p,u)}}}r.dispose()},r.prototype.vector_swizzle=function(e,t){return console.assert(e>=1&&e<=4),console.assert(t>=0&&t<4),console.assert(er[e-1][t]),er[e-1][t]},r}(Ft);function or(e,t,r){var a=t[t];e[t]=e[r],e[r]=a}function nr(e){return e===P.BuiltInPosition||e===P.BuiltInPointSize||e===P.BuiltInClipDistance||e===P.BuiltInCullDistance}function sr(e){switch(e){case Jt.BufferPackingStd140:case Jt.BufferPackingStd430:case Jt.BufferPackingScalar:return!1;default:return!0}}function cr(e){switch(e){case Jt.BufferPackingStd140EnhancedLayout:return Jt.BufferPackingStd140;case Jt.BufferPackingStd430EnhancedLayout:return Jt.BufferPackingStd430;case Jt.BufferPackingScalarEnhancedLayout:return Jt.BufferPackingScalar;default:return e}}function lr(e){switch(e){case Jt.BufferPackingStd140:case Jt.BufferPackingStd140EnhancedLayout:return!0;default:return!1}}function pr(e){switch(e){case Jt.BufferPackingScalar:case Jt.BufferPackingScalarEnhancedLayout:return!0;default:return!1}}function ur(e,t,r,a){for(var i=0,o=t;i<o.length;i++){var n=o[i];if(e.has_decoration(n.id,N.DecorationLocation))if(e.get_decoration(n.id,N.DecorationLocation)==r){var s=e.get_type(n.base_type_id);if(s.basetype==ue.Struct){e.set_name(n.base_type_id,"SPIRV_Cross_Interface_Location"+r);for(var c=0;c<s.member_types.length;c++)e.set_member_name(n.base_type_id,c,"InterfaceMember"+c)}e.set_name(n.id,a)}}}var _r,fr=function(e,t){this.id=e,this.format=t};function mr(e,t){var r=new lt(t);r.parse();var a=new ir(r.get_parsed_ir());if(0!==e.variable_type_remaps.length){a.set_variable_type_remap_callback((function(t,r){for(var a=0,i=e.variable_type_remaps;a<i.length;a++){var o=i[a];if(r===o.variable_name)return o.new_variable_type}return r}))}for(var i=0,o=e.masked_stage_outputs;i<o.length;i++){var n=o[i];a.mask_stage_output_by_location(n.first,n.second)}for(var s=0,c=e.masked_stage_builtins;s<c.length;s++){n=c[s];a.mask_stage_output_by_builtin(n)}for(var l=0,p=e.entry_point_rename;l<p.length;l++){var u=p[l];a.rename_entry_point(u.old_name,u.new_name,u.execution_model)}var _=a.get_entry_points_and_stages(),f=e.entry,m=g.ExecutionModelMax;if(e.entry_stage&&e.entry_stage.length>0)if(m=function(e){if("vert"===e)return g.ExecutionModelVertex;if("frag"===e)return g.ExecutionModelFragment;if("comp"===e)return g.ExecutionModelGLCompute;if("tesc"===e)return g.ExecutionModelTessellationControl;if("tese"===e)return g.ExecutionModelTessellationEvaluation;if("geom"===e)return g.ExecutionModelGeometry;throw new Error("Invalid stage!")}(e.entry_stage),f&&""!==f){for(var d=!1,h=0,y=_;h<y.length;h++){if((E=y[h]).execution_model===m&&E.name===f){d=!0;break}}if(!d)throw new Error("Could not find an entry point %s with stage: ".concat(e.entry_stage))}else{for(var b=0,S=_;b<S.length;b++){if((E=S[b]).execution_model===m){f=E.name;break}}if(!f)throw new Error("Could not find an entry point with stage: ".concat(e.entry_stage))}else if(f&&""!==f){for(var v=0,O=0,C=_;O<C.length;O++){var E;(E=C[O]).name===f&&(v++,m=E.execution_model)}if(0===v)throw new Error("There is no entry point with name: ".concat(f));if(v>1)throw new Error("There is more than one entry point with name: ".concat(f,". Use --stage."))}if(f&&""!==f&&a.set_entry_point(f,m),!e.set_version&&!a.get_common_options().version)throw new Error("Didn't specify GLSL version and SPIR-V did not specify language.");var x,k=a.get_common_options();e.set_version&&(k.version=e.version),e.set_es&&(k.es=e.es),k.force_temporary=e.force_temporary,k.separate_shader_objects=e.sso,k.flatten_multidimensional_arrays=e.flatten_multidimensional_arrays,k.enable_420pack_extension=e.use_420pack_extension,k.vertex.fixup_clipspace=e.fixup,k.vertex.flip_vert_y=e.yflip,k.vertex.support_nonzero_base_instance=e.support_nonzero_baseinstance,k.emit_push_constant_as_uniform_buffer=e.glsl_emit_push_constant_as_ubo,k.emit_uniform_buffer_as_plain_uniforms=e.glsl_emit_ubo_as_plain_uniforms,k.force_flattened_io_blocks=e.glsl_force_flattened_io_blocks,k.ovr_multiview_view_count=e.glsl_ovr_multiview_view_count,k.emit_line_directives=e.emit_line_directives,k.enable_storage_image_qualifier_deduction=e.enable_storage_image_qualifier_deduction,k.force_zero_initialized_variables=e.force_zero_initialized_variables;for(var L=0,M=e.glsl_ext_framebuffer_fetch;L<M.length;L++){var R=M[L];a.remap_ext_framebuffer_fetch(R.first,R.second,!e.glsl_ext_framebuffer_fetch_noncoherent)}if(e.remove_unused){var T=a.get_active_interface_variables();x=a.get_shader_resources(T),a.set_enabled_interface_variables(T)}else x=a.get_shader_resources();if(e.flatten_ubo){for(var D=0,A=x.uniform_buffers;D<A.length;D++){var B=A[D];a.flatten_buffer_block(B.id)}for(var w=0,P=x.push_constant_buffers;w<P.length;w++){B=P[w];a.flatten_buffer_block(B.id)}}var G=hr(e.pls_in,x.stage_inputs,x.subpass_inputs),F=hr(e.pls_out,x.stage_outputs,null);a.remap_pixel_local_storage(G,F);for(var U=0,V=e.extensions;U<V.length;U++){var z=V[U];a.require_extension(z)}for(var H=0,K=e.remaps;H<K.length;H++){var q=K[H];dr(a,x.stage_inputs,q)||(dr(a,x.stage_outputs,q)||dr(a,x.subpass_inputs,q))}for(var X=0,W=e.interface_variable_renames;X<W.length;X++){if((u=W[X]).storageClass===I.StorageClassInput)ur(a,x.stage_inputs,u.location,u.variable_name);else{if(u.storageClass!=I.StorageClassOutput)throw new Error("error at --rename-interface-variable <in|out> ...");ur(a,x.stage_outputs,u.location,u.variable_name)}}a.build_combined_image_samplers(),e.combined_samplers_inherit_bindings&&function(e){for(var t=0,r=e.get_combined_image_samplers();t<r.length;t++){var a=r[t];if(e.has_decoration(a.image_id,N.DecorationDescriptorSet)){var i=e.get_decoration(a.image_id,N.DecorationDescriptorSet);e.set_decoration(a.combined_id,N.DecorationDescriptorSet,i)}if(e.has_decoration(a.image_id,N.DecorationBinding)){var o=e.get_decoration(a.image_id,N.DecorationBinding);e.set_decoration(a.combined_id,N.DecorationBinding,o)}}}(a);for(var Q=0,j=a.get_combined_image_samplers();Q<j.length;Q++){q=j[Q];a.set_name(q.combined_id,"SPIRV_Cross_Combined"+a.get_name(q.image_id)+a.get_name(q.sampler_id))}return a.compile()}function dr(e,t,r){var a=t.find((function(e){return e.name===r.src_name}));return!!a&&(e.set_remapped_variable_state(a.id,!0),e.set_name(a.id,r.dst_name),e.set_subpass_input_remapped_components(a.id,r.components),!0)}function hr(e,t,r){for(var a=[],i=0,o=e;i<o.length;i++){for(var n=o[i],s=!1,c=0,l=t;c<l.length;c++){if((_=l[c]).name===n.name){a.push(new fr(_.id,n.format)),s=!0;break}}if(!s&&r)for(var p=0,u=r;p<u.length;p++){var _;if((_=u[p]).name===n.name){a.push(new fr(_.id,n.format)),s=!0;break}}if(!s)throw new Error("Did not find stage input/output/target with name ".concat(n.name))}return a}return e.Version=void 0,(_r=e.Version||(e.Version={}))[_r.WebGL1=100]="WebGL1",_r[_r.WebGL2=300]="WebGL2",e.compile=function(e,t){var a=new r;a.version=t,a.set_version=!0,a.es=!0,a.set_es=!0;var i=new Uint32Array(e);if(a.reflect&&""!==a.reflect)throw new Error("Reflection not yet supported!");return mr(a,i)},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
