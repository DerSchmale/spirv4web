var SPIRV=function(e){"use strict";var t,r=function(){this.version=0,this.shader_model=0,this.es=!1,this.set_version=!1,this.set_shader_model=!1,this.set_es=!1,this.dump_resources=!1,this.force_temporary=!1,this.flatten_ubo=!1,this.fixup=!1,this.yflip=!1,this.sso=!1,this.support_nonzero_baseinstance=!0,this.glsl_emit_push_constant_as_ubo=!1,this.glsl_emit_ubo_as_plain_uniforms=!1,this.glsl_force_flattened_io_blocks=!1,this.glsl_ovr_multiview_view_count=0,this.glsl_ext_framebuffer_fetch=[],this.glsl_ext_framebuffer_fetch_noncoherent=!1,this.emit_line_directives=!1,this.enable_storage_image_qualifier_deduction=!0,this.force_zero_initialized_variables=!1,this.pls_in=[],this.pls_out=[],this.remaps=[],this.extensions=[],this.variable_type_remaps=[],this.interface_variable_renames=[],this.masked_stage_outputs=[],this.masked_stage_builtins=[],this.entry_point_rename=[],this.cpp=!1,this.flatten_multidimensional_arrays=!1,this.use_420pack_extension=!0,this.remove_unused=!0,this.combined_samplers_inherit_bindings=!1},i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e,t,r){if(r||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}function n(e,t){for(var r=new Array(e),i=0;i<e;++i)r[i]=t(i);return r}function s(e,t){var r=e.length;if(e.length!==t.length)return!1;for(var i=0;i<r;++i)if(e[i]!==t[i])return!1;return!0}function c(e){return e.reduce((function(e){return e+1}),0)}!function(e){e[e.TypeNone=0]="TypeNone",e[e.TypeType=1]="TypeType",e[e.TypeVariable=2]="TypeVariable",e[e.TypeConstant=3]="TypeConstant",e[e.TypeFunction=4]="TypeFunction",e[e.TypeFunctionPrototype=5]="TypeFunctionPrototype",e[e.TypeBlock=6]="TypeBlock",e[e.TypeExtension=7]="TypeExtension",e[e.TypeExpression=8]="TypeExpression",e[e.TypeConstantOp=9]="TypeConstantOp",e[e.TypeCombinedImageSampler=10]="TypeCombinedImageSampler",e[e.TypeAccessChain=11]="TypeAccessChain",e[e.TypeUndef=12]="TypeUndef",e[e.TypeString=13]="TypeString",e[e.TypeCount=14]="TypeCount"}(t||(t={}));var l=function(){function e(e){this.holder=null,this.type=t.TypeNone,this.allow_type_rewrite=!1,this.group=e,this.createdIn=(new Error).stack}return e.prototype.set=function(e,r){if(this.holder&&this.group.pools[this.type].deallocate_opaque(this.holder),this.holder=null,!this.allow_type_rewrite&&this.type!==t.TypeNone&&this.type!==r)throw e&&this.group.pools[r].deallocate_opaque(e),new Error("Overwriting a variant with new type.");this.holder=e,this.type=r,this.allow_type_rewrite=!1},e.prototype.allocate_and_set=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.group.pools[e],a=i.allocate.apply(i,t);return this.set(a,e),a},e.prototype.get=function(e){if(!this.holder)throw new Error("nullptr");if(e.type!==this.type)throw new Error("Bad cast");return this.holder},e.prototype.get_type=function(){return this.type},e.prototype.get_id=function(){return this.holder?this.holder.self:0},e.prototype.empty=function(){return!this.holder},e.prototype.reset=function(){this.holder&&this.group.pools[this.type].deallocate_opaque(this.holder),this.holder=null,this.type=t.TypeNone},e.prototype.set_allow_type_rewrite=function(){this.allow_type_rewrite=!0},e}();function p(e,t){return t.get(e)}function _(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.allocate_and_set.apply(t,o([e.type],r,!1))}var u=function(){this.pools=new Array(t.TypeCount)};function h(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=f(e[r]))}function d(e,t){var r=new e;return h(t,r),r}function f(e){if(Array.isArray(e))return e.map((function(e){return f(e)}));var t=typeof e;if("object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Set){var r=new Set;return e.forEach((function(e){return r.add(e)})),r}if(e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof BigInt64Array||e instanceof BigUint64Array||e instanceof Float32Array||e instanceof Float64Array)return e.slice();throw new Error("The object ".concat(e," does not have a clone function."))}return"function"!==t?e:void 0}var m,g,b,y,S,v,I,O,x,k,C,E,L,M,T,R,w,D,A,B,N,P,G,F,z,U,V,H,K,q,X,W,j,Q,Z,Y,J,$,ee,te,re,ie,ae,oe,ne,se,ce,le=function(){function e(e){void 0===e&&(e=0),this.higher=new Set,this.lower=e}return e.prototype.get=function(e){return e<32?0!=(this.lower&1<<e):this.higher.has(e)},e.prototype.set=function(e){e<32?this.lower|=1<<e:this.higher.add(e)},e.prototype.clear=function(e){e<32?this.lower&=~(1<<e):this.higher.delete(e)},e.prototype.get_lower=function(){return this.lower},e.prototype.reset=function(){this.lower=0,this.higher.clear()},e.prototype.merge_and=function(e){this.lower&=e.lower;var t=new Set;this.higher.forEach((function(r){e.higher.has(r)&&t.add(r)})),this.higher=t},e.prototype.merge_or=function(e){var t=this;this.lower|=e.lower,e.higher.forEach((function(e){return t.higher.add(e)}))},e.prototype.equals=function(e){return this.lower===e.lower&&function(e,t){if(e.size!==t.size)return!1;for(var r=e.values(),i=null;i=r.next().value;)if(!t.has(i))return!1;return!0}(this.higher,e.higher)},e.prototype.for_each_bit=function(e){for(var t=0;t<32;t++)this.lower&1<<t&&e(t);if(0!==this.higher.size){var r=Array.from(this.higher);r.sort(),r.forEach(e)}},e.prototype.empty=function(){return 0===this.lower&&0===this.higher.size},e.prototype.clone=function(){return d(e,this)},e}(),pe=119734787;!function(e){e[e.SourceLanguageUnknown=0]="SourceLanguageUnknown",e[e.SourceLanguageESSL=1]="SourceLanguageESSL",e[e.SourceLanguageGLSL=2]="SourceLanguageGLSL",e[e.SourceLanguageOpenCL_C=3]="SourceLanguageOpenCL_C",e[e.SourceLanguageOpenCL_CPP=4]="SourceLanguageOpenCL_CPP",e[e.SourceLanguageHLSL=5]="SourceLanguageHLSL",e[e.SourceLanguageMax=2147483647]="SourceLanguageMax"}(m||(m={})),function(e){e[e.ExecutionModelVertex=0]="ExecutionModelVertex",e[e.ExecutionModelTessellationControl=1]="ExecutionModelTessellationControl",e[e.ExecutionModelTessellationEvaluation=2]="ExecutionModelTessellationEvaluation",e[e.ExecutionModelGeometry=3]="ExecutionModelGeometry",e[e.ExecutionModelFragment=4]="ExecutionModelFragment",e[e.ExecutionModelGLCompute=5]="ExecutionModelGLCompute",e[e.ExecutionModelKernel=6]="ExecutionModelKernel",e[e.ExecutionModelTaskNV=5267]="ExecutionModelTaskNV",e[e.ExecutionModelMeshNV=5268]="ExecutionModelMeshNV",e[e.ExecutionModelRayGenerationKHR=5313]="ExecutionModelRayGenerationKHR",e[e.ExecutionModelRayGenerationNV=5313]="ExecutionModelRayGenerationNV",e[e.ExecutionModelIntersectionKHR=5314]="ExecutionModelIntersectionKHR",e[e.ExecutionModelIntersectionNV=5314]="ExecutionModelIntersectionNV",e[e.ExecutionModelAnyHitKHR=5315]="ExecutionModelAnyHitKHR",e[e.ExecutionModelAnyHitNV=5315]="ExecutionModelAnyHitNV",e[e.ExecutionModelClosestHitKHR=5316]="ExecutionModelClosestHitKHR",e[e.ExecutionModelClosestHitNV=5316]="ExecutionModelClosestHitNV",e[e.ExecutionModelMissKHR=5317]="ExecutionModelMissKHR",e[e.ExecutionModelMissNV=5317]="ExecutionModelMissNV",e[e.ExecutionModelCallableKHR=5318]="ExecutionModelCallableKHR",e[e.ExecutionModelCallableNV=5318]="ExecutionModelCallableNV",e[e.ExecutionModelMax=2147483647]="ExecutionModelMax"}(g||(g={})),function(e){e[e.AddressingModelLogical=0]="AddressingModelLogical",e[e.AddressingModelPhysical32=1]="AddressingModelPhysical32",e[e.AddressingModelPhysical64=2]="AddressingModelPhysical64",e[e.AddressingModelPhysicalStorageBuffer64=5348]="AddressingModelPhysicalStorageBuffer64",e[e.AddressingModelPhysicalStorageBuffer64EXT=5348]="AddressingModelPhysicalStorageBuffer64EXT",e[e.AddressingModelMax=2147483647]="AddressingModelMax"}(b||(b={})),function(e){e[e.MemoryModelSimple=0]="MemoryModelSimple",e[e.MemoryModelGLSL450=1]="MemoryModelGLSL450",e[e.MemoryModelOpenCL=2]="MemoryModelOpenCL",e[e.MemoryModelVulkan=3]="MemoryModelVulkan",e[e.MemoryModelVulkanKHR=3]="MemoryModelVulkanKHR",e[e.MemoryModelMax=2147483647]="MemoryModelMax"}(y||(y={})),function(e){e[e.ExecutionModeInvocations=0]="ExecutionModeInvocations",e[e.ExecutionModeSpacingEqual=1]="ExecutionModeSpacingEqual",e[e.ExecutionModeSpacingFractionalEven=2]="ExecutionModeSpacingFractionalEven",e[e.ExecutionModeSpacingFractionalOdd=3]="ExecutionModeSpacingFractionalOdd",e[e.ExecutionModeVertexOrderCw=4]="ExecutionModeVertexOrderCw",e[e.ExecutionModeVertexOrderCcw=5]="ExecutionModeVertexOrderCcw",e[e.ExecutionModePixelCenterInteger=6]="ExecutionModePixelCenterInteger",e[e.ExecutionModeOriginUpperLeft=7]="ExecutionModeOriginUpperLeft",e[e.ExecutionModeOriginLowerLeft=8]="ExecutionModeOriginLowerLeft",e[e.ExecutionModeEarlyFragmentTests=9]="ExecutionModeEarlyFragmentTests",e[e.ExecutionModePointMode=10]="ExecutionModePointMode",e[e.ExecutionModeXfb=11]="ExecutionModeXfb",e[e.ExecutionModeDepthReplacing=12]="ExecutionModeDepthReplacing",e[e.ExecutionModeDepthGreater=14]="ExecutionModeDepthGreater",e[e.ExecutionModeDepthLess=15]="ExecutionModeDepthLess",e[e.ExecutionModeDepthUnchanged=16]="ExecutionModeDepthUnchanged",e[e.ExecutionModeLocalSize=17]="ExecutionModeLocalSize",e[e.ExecutionModeLocalSizeHint=18]="ExecutionModeLocalSizeHint",e[e.ExecutionModeInputPoints=19]="ExecutionModeInputPoints",e[e.ExecutionModeInputLines=20]="ExecutionModeInputLines",e[e.ExecutionModeInputLinesAdjacency=21]="ExecutionModeInputLinesAdjacency",e[e.ExecutionModeTriangles=22]="ExecutionModeTriangles",e[e.ExecutionModeInputTrianglesAdjacency=23]="ExecutionModeInputTrianglesAdjacency",e[e.ExecutionModeQuads=24]="ExecutionModeQuads",e[e.ExecutionModeIsolines=25]="ExecutionModeIsolines",e[e.ExecutionModeOutputVertices=26]="ExecutionModeOutputVertices",e[e.ExecutionModeOutputPoints=27]="ExecutionModeOutputPoints",e[e.ExecutionModeOutputLineStrip=28]="ExecutionModeOutputLineStrip",e[e.ExecutionModeOutputTriangleStrip=29]="ExecutionModeOutputTriangleStrip",e[e.ExecutionModeVecTypeHint=30]="ExecutionModeVecTypeHint",e[e.ExecutionModeContractionOff=31]="ExecutionModeContractionOff",e[e.ExecutionModeInitializer=33]="ExecutionModeInitializer",e[e.ExecutionModeFinalizer=34]="ExecutionModeFinalizer",e[e.ExecutionModeSubgroupSize=35]="ExecutionModeSubgroupSize",e[e.ExecutionModeSubgroupsPerWorkgroup=36]="ExecutionModeSubgroupsPerWorkgroup",e[e.ExecutionModeSubgroupsPerWorkgroupId=37]="ExecutionModeSubgroupsPerWorkgroupId",e[e.ExecutionModeLocalSizeId=38]="ExecutionModeLocalSizeId",e[e.ExecutionModeLocalSizeHintId=39]="ExecutionModeLocalSizeHintId",e[e.ExecutionModePostDepthCoverage=4446]="ExecutionModePostDepthCoverage",e[e.ExecutionModeDenormPreserve=4459]="ExecutionModeDenormPreserve",e[e.ExecutionModeDenormFlushToZero=4460]="ExecutionModeDenormFlushToZero",e[e.ExecutionModeSignedZeroInfNanPreserve=4461]="ExecutionModeSignedZeroInfNanPreserve",e[e.ExecutionModeRoundingModeRTE=4462]="ExecutionModeRoundingModeRTE",e[e.ExecutionModeRoundingModeRTZ=4463]="ExecutionModeRoundingModeRTZ",e[e.ExecutionModeStencilRefReplacingEXT=5027]="ExecutionModeStencilRefReplacingEXT",e[e.ExecutionModeOutputLinesNV=5269]="ExecutionModeOutputLinesNV",e[e.ExecutionModeOutputPrimitivesNV=5270]="ExecutionModeOutputPrimitivesNV",e[e.ExecutionModeDerivativeGroupQuadsNV=5289]="ExecutionModeDerivativeGroupQuadsNV",e[e.ExecutionModeDerivativeGroupLinearNV=5290]="ExecutionModeDerivativeGroupLinearNV",e[e.ExecutionModeOutputTrianglesNV=5298]="ExecutionModeOutputTrianglesNV",e[e.ExecutionModePixelInterlockOrderedEXT=5366]="ExecutionModePixelInterlockOrderedEXT",e[e.ExecutionModePixelInterlockUnorderedEXT=5367]="ExecutionModePixelInterlockUnorderedEXT",e[e.ExecutionModeSampleInterlockOrderedEXT=5368]="ExecutionModeSampleInterlockOrderedEXT",e[e.ExecutionModeSampleInterlockUnorderedEXT=5369]="ExecutionModeSampleInterlockUnorderedEXT",e[e.ExecutionModeShadingRateInterlockOrderedEXT=5370]="ExecutionModeShadingRateInterlockOrderedEXT",e[e.ExecutionModeShadingRateInterlockUnorderedEXT=5371]="ExecutionModeShadingRateInterlockUnorderedEXT",e[e.ExecutionModeMaxWorkgroupSizeINTEL=5893]="ExecutionModeMaxWorkgroupSizeINTEL",e[e.ExecutionModeMaxWorkDimINTEL=5894]="ExecutionModeMaxWorkDimINTEL",e[e.ExecutionModeNoGlobalOffsetINTEL=5895]="ExecutionModeNoGlobalOffsetINTEL",e[e.ExecutionModeNumSIMDWorkitemsINTEL=5896]="ExecutionModeNumSIMDWorkitemsINTEL",e[e.ExecutionModeMax=2147483647]="ExecutionModeMax"}(S||(S={})),function(e){e[e.StorageClassUniformConstant=0]="StorageClassUniformConstant",e[e.StorageClassInput=1]="StorageClassInput",e[e.StorageClassUniform=2]="StorageClassUniform",e[e.StorageClassOutput=3]="StorageClassOutput",e[e.StorageClassWorkgroup=4]="StorageClassWorkgroup",e[e.StorageClassCrossWorkgroup=5]="StorageClassCrossWorkgroup",e[e.StorageClassPrivate=6]="StorageClassPrivate",e[e.StorageClassFunction=7]="StorageClassFunction",e[e.StorageClassGeneric=8]="StorageClassGeneric",e[e.StorageClassPushConstant=9]="StorageClassPushConstant",e[e.StorageClassAtomicCounter=10]="StorageClassAtomicCounter",e[e.StorageClassImage=11]="StorageClassImage",e[e.StorageClassStorageBuffer=12]="StorageClassStorageBuffer",e[e.StorageClassCallableDataKHR=5328]="StorageClassCallableDataKHR",e[e.StorageClassCallableDataNV=5328]="StorageClassCallableDataNV",e[e.StorageClassIncomingCallableDataKHR=5329]="StorageClassIncomingCallableDataKHR",e[e.StorageClassIncomingCallableDataNV=5329]="StorageClassIncomingCallableDataNV",e[e.StorageClassRayPayloadKHR=5338]="StorageClassRayPayloadKHR",e[e.StorageClassRayPayloadNV=5338]="StorageClassRayPayloadNV",e[e.StorageClassHitAttributeKHR=5339]="StorageClassHitAttributeKHR",e[e.StorageClassHitAttributeNV=5339]="StorageClassHitAttributeNV",e[e.StorageClassIncomingRayPayloadKHR=5342]="StorageClassIncomingRayPayloadKHR",e[e.StorageClassIncomingRayPayloadNV=5342]="StorageClassIncomingRayPayloadNV",e[e.StorageClassShaderRecordBufferKHR=5343]="StorageClassShaderRecordBufferKHR",e[e.StorageClassShaderRecordBufferNV=5343]="StorageClassShaderRecordBufferNV",e[e.StorageClassPhysicalStorageBuffer=5349]="StorageClassPhysicalStorageBuffer",e[e.StorageClassPhysicalStorageBufferEXT=5349]="StorageClassPhysicalStorageBufferEXT",e[e.StorageClassCodeSectionINTEL=5605]="StorageClassCodeSectionINTEL",e[e.StorageClassMax=2147483647]="StorageClassMax"}(v||(v={})),function(e){e[e.Dim1D=0]="Dim1D",e[e.Dim2D=1]="Dim2D",e[e.Dim3D=2]="Dim3D",e[e.DimCube=3]="DimCube",e[e.DimRect=4]="DimRect",e[e.DimBuffer=5]="DimBuffer",e[e.DimSubpassData=6]="DimSubpassData",e[e.DimMax=2147483647]="DimMax"}(I||(I={})),function(e){e[e.SamplerAddressingModeNone=0]="SamplerAddressingModeNone",e[e.SamplerAddressingModeClampToEdge=1]="SamplerAddressingModeClampToEdge",e[e.SamplerAddressingModeClamp=2]="SamplerAddressingModeClamp",e[e.SamplerAddressingModeRepeat=3]="SamplerAddressingModeRepeat",e[e.SamplerAddressingModeRepeatMirrored=4]="SamplerAddressingModeRepeatMirrored",e[e.SamplerAddressingModeMax=2147483647]="SamplerAddressingModeMax"}(O||(O={})),function(e){e[e.SamplerFilterModeNearest=0]="SamplerFilterModeNearest",e[e.SamplerFilterModeLinear=1]="SamplerFilterModeLinear",e[e.SamplerFilterModeMax=2147483647]="SamplerFilterModeMax"}(x||(x={})),function(e){e[e.ImageFormatUnknown=0]="ImageFormatUnknown",e[e.ImageFormatRgba32f=1]="ImageFormatRgba32f",e[e.ImageFormatRgba16f=2]="ImageFormatRgba16f",e[e.ImageFormatR32f=3]="ImageFormatR32f",e[e.ImageFormatRgba8=4]="ImageFormatRgba8",e[e.ImageFormatRgba8Snorm=5]="ImageFormatRgba8Snorm",e[e.ImageFormatRg32f=6]="ImageFormatRg32f",e[e.ImageFormatRg16f=7]="ImageFormatRg16f",e[e.ImageFormatR11fG11fB10f=8]="ImageFormatR11fG11fB10f",e[e.ImageFormatR16f=9]="ImageFormatR16f",e[e.ImageFormatRgba16=10]="ImageFormatRgba16",e[e.ImageFormatRgb10A2=11]="ImageFormatRgb10A2",e[e.ImageFormatRg16=12]="ImageFormatRg16",e[e.ImageFormatRg8=13]="ImageFormatRg8",e[e.ImageFormatR16=14]="ImageFormatR16",e[e.ImageFormatR8=15]="ImageFormatR8",e[e.ImageFormatRgba16Snorm=16]="ImageFormatRgba16Snorm",e[e.ImageFormatRg16Snorm=17]="ImageFormatRg16Snorm",e[e.ImageFormatRg8Snorm=18]="ImageFormatRg8Snorm",e[e.ImageFormatR16Snorm=19]="ImageFormatR16Snorm",e[e.ImageFormatR8Snorm=20]="ImageFormatR8Snorm",e[e.ImageFormatRgba32i=21]="ImageFormatRgba32i",e[e.ImageFormatRgba16i=22]="ImageFormatRgba16i",e[e.ImageFormatRgba8i=23]="ImageFormatRgba8i",e[e.ImageFormatR32i=24]="ImageFormatR32i",e[e.ImageFormatRg32i=25]="ImageFormatRg32i",e[e.ImageFormatRg16i=26]="ImageFormatRg16i",e[e.ImageFormatRg8i=27]="ImageFormatRg8i",e[e.ImageFormatR16i=28]="ImageFormatR16i",e[e.ImageFormatR8i=29]="ImageFormatR8i",e[e.ImageFormatRgba32ui=30]="ImageFormatRgba32ui",e[e.ImageFormatRgba16ui=31]="ImageFormatRgba16ui",e[e.ImageFormatRgba8ui=32]="ImageFormatRgba8ui",e[e.ImageFormatR32ui=33]="ImageFormatR32ui",e[e.ImageFormatRgb10a2ui=34]="ImageFormatRgb10a2ui",e[e.ImageFormatRg32ui=35]="ImageFormatRg32ui",e[e.ImageFormatRg16ui=36]="ImageFormatRg16ui",e[e.ImageFormatRg8ui=37]="ImageFormatRg8ui",e[e.ImageFormatR16ui=38]="ImageFormatR16ui",e[e.ImageFormatR8ui=39]="ImageFormatR8ui",e[e.ImageFormatR64ui=40]="ImageFormatR64ui",e[e.ImageFormatR64i=41]="ImageFormatR64i",e[e.ImageFormatMax=2147483647]="ImageFormatMax"}(k||(k={})),function(e){e[e.ImageChannelOrderR=0]="ImageChannelOrderR",e[e.ImageChannelOrderA=1]="ImageChannelOrderA",e[e.ImageChannelOrderRG=2]="ImageChannelOrderRG",e[e.ImageChannelOrderRA=3]="ImageChannelOrderRA",e[e.ImageChannelOrderRGB=4]="ImageChannelOrderRGB",e[e.ImageChannelOrderRGBA=5]="ImageChannelOrderRGBA",e[e.ImageChannelOrderBGRA=6]="ImageChannelOrderBGRA",e[e.ImageChannelOrderARGB=7]="ImageChannelOrderARGB",e[e.ImageChannelOrderIntensity=8]="ImageChannelOrderIntensity",e[e.ImageChannelOrderLuminance=9]="ImageChannelOrderLuminance",e[e.ImageChannelOrderRx=10]="ImageChannelOrderRx",e[e.ImageChannelOrderRGx=11]="ImageChannelOrderRGx",e[e.ImageChannelOrderRGBx=12]="ImageChannelOrderRGBx",e[e.ImageChannelOrderDepth=13]="ImageChannelOrderDepth",e[e.ImageChannelOrderDepthStencil=14]="ImageChannelOrderDepthStencil",e[e.ImageChannelOrdersRGB=15]="ImageChannelOrdersRGB",e[e.ImageChannelOrdersRGBx=16]="ImageChannelOrdersRGBx",e[e.ImageChannelOrdersRGBA=17]="ImageChannelOrdersRGBA",e[e.ImageChannelOrdersBGRA=18]="ImageChannelOrdersBGRA",e[e.ImageChannelOrderABGR=19]="ImageChannelOrderABGR",e[e.ImageChannelOrderMax=2147483647]="ImageChannelOrderMax"}(C||(C={})),function(e){e[e.ImageChannelDataTypeSnormInt8=0]="ImageChannelDataTypeSnormInt8",e[e.ImageChannelDataTypeSnormInt16=1]="ImageChannelDataTypeSnormInt16",e[e.ImageChannelDataTypeUnormInt8=2]="ImageChannelDataTypeUnormInt8",e[e.ImageChannelDataTypeUnormInt16=3]="ImageChannelDataTypeUnormInt16",e[e.ImageChannelDataTypeUnormShort565=4]="ImageChannelDataTypeUnormShort565",e[e.ImageChannelDataTypeUnormShort555=5]="ImageChannelDataTypeUnormShort555",e[e.ImageChannelDataTypeUnormInt101010=6]="ImageChannelDataTypeUnormInt101010",e[e.ImageChannelDataTypeSignedInt8=7]="ImageChannelDataTypeSignedInt8",e[e.ImageChannelDataTypeSignedInt16=8]="ImageChannelDataTypeSignedInt16",e[e.ImageChannelDataTypeSignedInt32=9]="ImageChannelDataTypeSignedInt32",e[e.ImageChannelDataTypeUnsignedInt8=10]="ImageChannelDataTypeUnsignedInt8",e[e.ImageChannelDataTypeUnsignedInt16=11]="ImageChannelDataTypeUnsignedInt16",e[e.ImageChannelDataTypeUnsignedInt32=12]="ImageChannelDataTypeUnsignedInt32",e[e.ImageChannelDataTypeHalfFloat=13]="ImageChannelDataTypeHalfFloat",e[e.ImageChannelDataTypeFloat=14]="ImageChannelDataTypeFloat",e[e.ImageChannelDataTypeUnormInt24=15]="ImageChannelDataTypeUnormInt24",e[e.ImageChannelDataTypeUnormInt101010_2=16]="ImageChannelDataTypeUnormInt101010_2",e[e.ImageChannelDataTypeMax=2147483647]="ImageChannelDataTypeMax"}(E||(E={})),function(e){e[e.ImageOperandsBiasShift=0]="ImageOperandsBiasShift",e[e.ImageOperandsLodShift=1]="ImageOperandsLodShift",e[e.ImageOperandsGradShift=2]="ImageOperandsGradShift",e[e.ImageOperandsConstOffsetShift=3]="ImageOperandsConstOffsetShift",e[e.ImageOperandsOffsetShift=4]="ImageOperandsOffsetShift",e[e.ImageOperandsConstOffsetsShift=5]="ImageOperandsConstOffsetsShift",e[e.ImageOperandsSampleShift=6]="ImageOperandsSampleShift",e[e.ImageOperandsMinLodShift=7]="ImageOperandsMinLodShift",e[e.ImageOperandsMakeTexelAvailableShift=8]="ImageOperandsMakeTexelAvailableShift",e[e.ImageOperandsMakeTexelAvailableKHRShift=8]="ImageOperandsMakeTexelAvailableKHRShift",e[e.ImageOperandsMakeTexelVisibleShift=9]="ImageOperandsMakeTexelVisibleShift",e[e.ImageOperandsMakeTexelVisibleKHRShift=9]="ImageOperandsMakeTexelVisibleKHRShift",e[e.ImageOperandsNonPrivateTexelShift=10]="ImageOperandsNonPrivateTexelShift",e[e.ImageOperandsNonPrivateTexelKHRShift=10]="ImageOperandsNonPrivateTexelKHRShift",e[e.ImageOperandsVolatileTexelShift=11]="ImageOperandsVolatileTexelShift",e[e.ImageOperandsVolatileTexelKHRShift=11]="ImageOperandsVolatileTexelKHRShift",e[e.ImageOperandsSignExtendShift=12]="ImageOperandsSignExtendShift",e[e.ImageOperandsZeroExtendShift=13]="ImageOperandsZeroExtendShift",e[e.ImageOperandsMax=2147483647]="ImageOperandsMax"}(L||(L={})),function(e){e[e.ImageOperandsMaskNone=0]="ImageOperandsMaskNone",e[e.ImageOperandsBiasMask=1]="ImageOperandsBiasMask",e[e.ImageOperandsLodMask=2]="ImageOperandsLodMask",e[e.ImageOperandsGradMask=4]="ImageOperandsGradMask",e[e.ImageOperandsConstOffsetMask=8]="ImageOperandsConstOffsetMask",e[e.ImageOperandsOffsetMask=16]="ImageOperandsOffsetMask",e[e.ImageOperandsConstOffsetsMask=32]="ImageOperandsConstOffsetsMask",e[e.ImageOperandsSampleMask=64]="ImageOperandsSampleMask",e[e.ImageOperandsMinLodMask=128]="ImageOperandsMinLodMask",e[e.ImageOperandsMakeTexelAvailableMask=256]="ImageOperandsMakeTexelAvailableMask",e[e.ImageOperandsMakeTexelAvailableKHRMask=256]="ImageOperandsMakeTexelAvailableKHRMask",e[e.ImageOperandsMakeTexelVisibleMask=512]="ImageOperandsMakeTexelVisibleMask",e[e.ImageOperandsMakeTexelVisibleKHRMask=512]="ImageOperandsMakeTexelVisibleKHRMask",e[e.ImageOperandsNonPrivateTexelMask=1024]="ImageOperandsNonPrivateTexelMask",e[e.ImageOperandsNonPrivateTexelKHRMask=1024]="ImageOperandsNonPrivateTexelKHRMask",e[e.ImageOperandsVolatileTexelMask=2048]="ImageOperandsVolatileTexelMask",e[e.ImageOperandsVolatileTexelKHRMask=2048]="ImageOperandsVolatileTexelKHRMask",e[e.ImageOperandsSignExtendMask=4096]="ImageOperandsSignExtendMask",e[e.ImageOperandsZeroExtendMask=8192]="ImageOperandsZeroExtendMask"}(M||(M={})),function(e){e[e.FPFastMathModeNotNaNShift=0]="FPFastMathModeNotNaNShift",e[e.FPFastMathModeNotInfShift=1]="FPFastMathModeNotInfShift",e[e.FPFastMathModeNSZShift=2]="FPFastMathModeNSZShift",e[e.FPFastMathModeAllowRecipShift=3]="FPFastMathModeAllowRecipShift",e[e.FPFastMathModeFastShift=4]="FPFastMathModeFastShift",e[e.FPFastMathModeMax=2147483647]="FPFastMathModeMax"}(T||(T={})),function(e){e[e.FPFastMathModeMaskNone=0]="FPFastMathModeMaskNone",e[e.FPFastMathModeNotNaNMask=1]="FPFastMathModeNotNaNMask",e[e.FPFastMathModeNotInfMask=2]="FPFastMathModeNotInfMask",e[e.FPFastMathModeNSZMask=4]="FPFastMathModeNSZMask",e[e.FPFastMathModeAllowRecipMask=8]="FPFastMathModeAllowRecipMask",e[e.FPFastMathModeFastMask=16]="FPFastMathModeFastMask"}(R||(R={})),function(e){e[e.FPRoundingModeRTE=0]="FPRoundingModeRTE",e[e.FPRoundingModeRTZ=1]="FPRoundingModeRTZ",e[e.FPRoundingModeRTP=2]="FPRoundingModeRTP",e[e.FPRoundingModeRTN=3]="FPRoundingModeRTN",e[e.FPRoundingModeMax=2147483647]="FPRoundingModeMax"}(w||(w={})),function(e){e[e.LinkageTypeExport=0]="LinkageTypeExport",e[e.LinkageTypeImport=1]="LinkageTypeImport",e[e.LinkageTypeMax=2147483647]="LinkageTypeMax"}(D||(D={})),function(e){e[e.AccessQualifierReadOnly=0]="AccessQualifierReadOnly",e[e.AccessQualifierWriteOnly=1]="AccessQualifierWriteOnly",e[e.AccessQualifierReadWrite=2]="AccessQualifierReadWrite",e[e.AccessQualifierMax=2147483647]="AccessQualifierMax"}(A||(A={})),function(e){e[e.FunctionParameterAttributeZext=0]="FunctionParameterAttributeZext",e[e.FunctionParameterAttributeSext=1]="FunctionParameterAttributeSext",e[e.FunctionParameterAttributeByVal=2]="FunctionParameterAttributeByVal",e[e.FunctionParameterAttributeSret=3]="FunctionParameterAttributeSret",e[e.FunctionParameterAttributeNoAlias=4]="FunctionParameterAttributeNoAlias",e[e.FunctionParameterAttributeNoCapture=5]="FunctionParameterAttributeNoCapture",e[e.FunctionParameterAttributeNoWrite=6]="FunctionParameterAttributeNoWrite",e[e.FunctionParameterAttributeNoReadWrite=7]="FunctionParameterAttributeNoReadWrite",e[e.FunctionParameterAttributeMax=2147483647]="FunctionParameterAttributeMax"}(B||(B={})),function(e){e[e.DecorationRelaxedPrecision=0]="DecorationRelaxedPrecision",e[e.DecorationSpecId=1]="DecorationSpecId",e[e.DecorationBlock=2]="DecorationBlock",e[e.DecorationBufferBlock=3]="DecorationBufferBlock",e[e.DecorationRowMajor=4]="DecorationRowMajor",e[e.DecorationColMajor=5]="DecorationColMajor",e[e.DecorationArrayStride=6]="DecorationArrayStride",e[e.DecorationMatrixStride=7]="DecorationMatrixStride",e[e.DecorationGLSLShared=8]="DecorationGLSLShared",e[e.DecorationGLSLPacked=9]="DecorationGLSLPacked",e[e.DecorationCPacked=10]="DecorationCPacked",e[e.DecorationBuiltIn=11]="DecorationBuiltIn",e[e.DecorationNoPerspective=13]="DecorationNoPerspective",e[e.DecorationFlat=14]="DecorationFlat",e[e.DecorationPatch=15]="DecorationPatch",e[e.DecorationCentroid=16]="DecorationCentroid",e[e.DecorationSample=17]="DecorationSample",e[e.DecorationInvariant=18]="DecorationInvariant",e[e.DecorationRestrict=19]="DecorationRestrict",e[e.DecorationAliased=20]="DecorationAliased",e[e.DecorationVolatile=21]="DecorationVolatile",e[e.DecorationConstant=22]="DecorationConstant",e[e.DecorationCoherent=23]="DecorationCoherent",e[e.DecorationNonWritable=24]="DecorationNonWritable",e[e.DecorationNonReadable=25]="DecorationNonReadable",e[e.DecorationUniform=26]="DecorationUniform",e[e.DecorationUniformId=27]="DecorationUniformId",e[e.DecorationSaturatedConversion=28]="DecorationSaturatedConversion",e[e.DecorationStream=29]="DecorationStream",e[e.DecorationLocation=30]="DecorationLocation",e[e.DecorationComponent=31]="DecorationComponent",e[e.DecorationIndex=32]="DecorationIndex",e[e.DecorationBinding=33]="DecorationBinding",e[e.DecorationDescriptorSet=34]="DecorationDescriptorSet",e[e.DecorationOffset=35]="DecorationOffset",e[e.DecorationXfbBuffer=36]="DecorationXfbBuffer",e[e.DecorationXfbStride=37]="DecorationXfbStride",e[e.DecorationFuncParamAttr=38]="DecorationFuncParamAttr",e[e.DecorationFPRoundingMode=39]="DecorationFPRoundingMode",e[e.DecorationFPFastMathMode=40]="DecorationFPFastMathMode",e[e.DecorationLinkageAttributes=41]="DecorationLinkageAttributes",e[e.DecorationNoContraction=42]="DecorationNoContraction",e[e.DecorationInputAttachmentIndex=43]="DecorationInputAttachmentIndex",e[e.DecorationAlignment=44]="DecorationAlignment",e[e.DecorationMaxByteOffset=45]="DecorationMaxByteOffset",e[e.DecorationAlignmentId=46]="DecorationAlignmentId",e[e.DecorationMaxByteOffsetId=47]="DecorationMaxByteOffsetId",e[e.DecorationNoSignedWrap=4469]="DecorationNoSignedWrap",e[e.DecorationNoUnsignedWrap=4470]="DecorationNoUnsignedWrap",e[e.DecorationExplicitInterpAMD=4999]="DecorationExplicitInterpAMD",e[e.DecorationOverrideCoverageNV=5248]="DecorationOverrideCoverageNV",e[e.DecorationPassthroughNV=5250]="DecorationPassthroughNV",e[e.DecorationViewportRelativeNV=5252]="DecorationViewportRelativeNV",e[e.DecorationSecondaryViewportRelativeNV=5256]="DecorationSecondaryViewportRelativeNV",e[e.DecorationPerPrimitiveNV=5271]="DecorationPerPrimitiveNV",e[e.DecorationPerViewNV=5272]="DecorationPerViewNV",e[e.DecorationPerTaskNV=5273]="DecorationPerTaskNV",e[e.DecorationPerVertexNV=5285]="DecorationPerVertexNV",e[e.DecorationNonUniform=5300]="DecorationNonUniform",e[e.DecorationNonUniformEXT=5300]="DecorationNonUniformEXT",e[e.DecorationRestrictPointer=5355]="DecorationRestrictPointer",e[e.DecorationRestrictPointerEXT=5355]="DecorationRestrictPointerEXT",e[e.DecorationAliasedPointer=5356]="DecorationAliasedPointer",e[e.DecorationAliasedPointerEXT=5356]="DecorationAliasedPointerEXT",e[e.DecorationReferencedIndirectlyINTEL=5602]="DecorationReferencedIndirectlyINTEL",e[e.DecorationCounterBuffer=5634]="DecorationCounterBuffer",e[e.DecorationHlslCounterBufferGOOGLE=5634]="DecorationHlslCounterBufferGOOGLE",e[e.DecorationHlslSemanticGOOGLE=5635]="DecorationHlslSemanticGOOGLE",e[e.DecorationUserSemantic=5635]="DecorationUserSemantic",e[e.DecorationUserTypeGOOGLE=5636]="DecorationUserTypeGOOGLE",e[e.DecorationRegisterINTEL=5825]="DecorationRegisterINTEL",e[e.DecorationMemoryINTEL=5826]="DecorationMemoryINTEL",e[e.DecorationNumbanksINTEL=5827]="DecorationNumbanksINTEL",e[e.DecorationBankwidthINTEL=5828]="DecorationBankwidthINTEL",e[e.DecorationMaxPrivateCopiesINTEL=5829]="DecorationMaxPrivateCopiesINTEL",e[e.DecorationSinglepumpINTEL=5830]="DecorationSinglepumpINTEL",e[e.DecorationDoublepumpINTEL=5831]="DecorationDoublepumpINTEL",e[e.DecorationMaxReplicatesINTEL=5832]="DecorationMaxReplicatesINTEL",e[e.DecorationSimpleDualPortINTEL=5833]="DecorationSimpleDualPortINTEL",e[e.DecorationMergeINTEL=5834]="DecorationMergeINTEL",e[e.DecorationBankBitsINTEL=5835]="DecorationBankBitsINTEL",e[e.DecorationForcePow2DepthINTEL=5836]="DecorationForcePow2DepthINTEL",e[e.DecorationMax=2147483647]="DecorationMax"}(N||(N={})),function(e){e[e.BuiltInPosition=0]="BuiltInPosition",e[e.BuiltInPointSize=1]="BuiltInPointSize",e[e.BuiltInClipDistance=3]="BuiltInClipDistance",e[e.BuiltInCullDistance=4]="BuiltInCullDistance",e[e.BuiltInVertexId=5]="BuiltInVertexId",e[e.BuiltInInstanceId=6]="BuiltInInstanceId",e[e.BuiltInPrimitiveId=7]="BuiltInPrimitiveId",e[e.BuiltInInvocationId=8]="BuiltInInvocationId",e[e.BuiltInLayer=9]="BuiltInLayer",e[e.BuiltInViewportIndex=10]="BuiltInViewportIndex",e[e.BuiltInTessLevelOuter=11]="BuiltInTessLevelOuter",e[e.BuiltInTessLevelInner=12]="BuiltInTessLevelInner",e[e.BuiltInTessCoord=13]="BuiltInTessCoord",e[e.BuiltInPatchVertices=14]="BuiltInPatchVertices",e[e.BuiltInFragCoord=15]="BuiltInFragCoord",e[e.BuiltInPointCoord=16]="BuiltInPointCoord",e[e.BuiltInFrontFacing=17]="BuiltInFrontFacing",e[e.BuiltInSampleId=18]="BuiltInSampleId",e[e.BuiltInSamplePosition=19]="BuiltInSamplePosition",e[e.BuiltInSampleMask=20]="BuiltInSampleMask",e[e.BuiltInFragDepth=22]="BuiltInFragDepth",e[e.BuiltInHelperInvocation=23]="BuiltInHelperInvocation",e[e.BuiltInNumWorkgroups=24]="BuiltInNumWorkgroups",e[e.BuiltInWorkgroupSize=25]="BuiltInWorkgroupSize",e[e.BuiltInWorkgroupId=26]="BuiltInWorkgroupId",e[e.BuiltInLocalInvocationId=27]="BuiltInLocalInvocationId",e[e.BuiltInGlobalInvocationId=28]="BuiltInGlobalInvocationId",e[e.BuiltInLocalInvocationIndex=29]="BuiltInLocalInvocationIndex",e[e.BuiltInWorkDim=30]="BuiltInWorkDim",e[e.BuiltInGlobalSize=31]="BuiltInGlobalSize",e[e.BuiltInEnqueuedWorkgroupSize=32]="BuiltInEnqueuedWorkgroupSize",e[e.BuiltInGlobalOffset=33]="BuiltInGlobalOffset",e[e.BuiltInGlobalLinearId=34]="BuiltInGlobalLinearId",e[e.BuiltInSubgroupSize=36]="BuiltInSubgroupSize",e[e.BuiltInSubgroupMaxSize=37]="BuiltInSubgroupMaxSize",e[e.BuiltInNumSubgroups=38]="BuiltInNumSubgroups",e[e.BuiltInNumEnqueuedSubgroups=39]="BuiltInNumEnqueuedSubgroups",e[e.BuiltInSubgroupId=40]="BuiltInSubgroupId",e[e.BuiltInSubgroupLocalInvocationId=41]="BuiltInSubgroupLocalInvocationId",e[e.BuiltInVertexIndex=42]="BuiltInVertexIndex",e[e.BuiltInInstanceIndex=43]="BuiltInInstanceIndex",e[e.BuiltInSubgroupEqMask=4416]="BuiltInSubgroupEqMask",e[e.BuiltInSubgroupEqMaskKHR=4416]="BuiltInSubgroupEqMaskKHR",e[e.BuiltInSubgroupGeMask=4417]="BuiltInSubgroupGeMask",e[e.BuiltInSubgroupGeMaskKHR=4417]="BuiltInSubgroupGeMaskKHR",e[e.BuiltInSubgroupGtMask=4418]="BuiltInSubgroupGtMask",e[e.BuiltInSubgroupGtMaskKHR=4418]="BuiltInSubgroupGtMaskKHR",e[e.BuiltInSubgroupLeMask=4419]="BuiltInSubgroupLeMask",e[e.BuiltInSubgroupLeMaskKHR=4419]="BuiltInSubgroupLeMaskKHR",e[e.BuiltInSubgroupLtMask=4420]="BuiltInSubgroupLtMask",e[e.BuiltInSubgroupLtMaskKHR=4420]="BuiltInSubgroupLtMaskKHR",e[e.BuiltInBaseVertex=4424]="BuiltInBaseVertex",e[e.BuiltInBaseInstance=4425]="BuiltInBaseInstance",e[e.BuiltInDrawIndex=4426]="BuiltInDrawIndex",e[e.BuiltInPrimitiveShadingRateKHR=4432]="BuiltInPrimitiveShadingRateKHR",e[e.BuiltInDeviceIndex=4438]="BuiltInDeviceIndex",e[e.BuiltInViewIndex=4440]="BuiltInViewIndex",e[e.BuiltInShadingRateKHR=4444]="BuiltInShadingRateKHR",e[e.BuiltInBaryCoordNoPerspAMD=4992]="BuiltInBaryCoordNoPerspAMD",e[e.BuiltInBaryCoordNoPerspCentroidAMD=4993]="BuiltInBaryCoordNoPerspCentroidAMD",e[e.BuiltInBaryCoordNoPerspSampleAMD=4994]="BuiltInBaryCoordNoPerspSampleAMD",e[e.BuiltInBaryCoordSmoothAMD=4995]="BuiltInBaryCoordSmoothAMD",e[e.BuiltInBaryCoordSmoothCentroidAMD=4996]="BuiltInBaryCoordSmoothCentroidAMD",e[e.BuiltInBaryCoordSmoothSampleAMD=4997]="BuiltInBaryCoordSmoothSampleAMD",e[e.BuiltInBaryCoordPullModelAMD=4998]="BuiltInBaryCoordPullModelAMD",e[e.BuiltInFragStencilRefEXT=5014]="BuiltInFragStencilRefEXT",e[e.BuiltInViewportMaskNV=5253]="BuiltInViewportMaskNV",e[e.BuiltInSecondaryPositionNV=5257]="BuiltInSecondaryPositionNV",e[e.BuiltInSecondaryViewportMaskNV=5258]="BuiltInSecondaryViewportMaskNV",e[e.BuiltInPositionPerViewNV=5261]="BuiltInPositionPerViewNV",e[e.BuiltInViewportMaskPerViewNV=5262]="BuiltInViewportMaskPerViewNV",e[e.BuiltInFullyCoveredEXT=5264]="BuiltInFullyCoveredEXT",e[e.BuiltInTaskCountNV=5274]="BuiltInTaskCountNV",e[e.BuiltInPrimitiveCountNV=5275]="BuiltInPrimitiveCountNV",e[e.BuiltInPrimitiveIndicesNV=5276]="BuiltInPrimitiveIndicesNV",e[e.BuiltInClipDistancePerViewNV=5277]="BuiltInClipDistancePerViewNV",e[e.BuiltInCullDistancePerViewNV=5278]="BuiltInCullDistancePerViewNV",e[e.BuiltInLayerPerViewNV=5279]="BuiltInLayerPerViewNV",e[e.BuiltInMeshViewCountNV=5280]="BuiltInMeshViewCountNV",e[e.BuiltInMeshViewIndicesNV=5281]="BuiltInMeshViewIndicesNV",e[e.BuiltInBaryCoordNV=5286]="BuiltInBaryCoordNV",e[e.BuiltInBaryCoordNoPerspNV=5287]="BuiltInBaryCoordNoPerspNV",e[e.BuiltInFragSizeEXT=5292]="BuiltInFragSizeEXT",e[e.BuiltInFragmentSizeNV=5292]="BuiltInFragmentSizeNV",e[e.BuiltInFragInvocationCountEXT=5293]="BuiltInFragInvocationCountEXT",e[e.BuiltInInvocationsPerPixelNV=5293]="BuiltInInvocationsPerPixelNV",e[e.BuiltInLaunchIdKHR=5319]="BuiltInLaunchIdKHR",e[e.BuiltInLaunchIdNV=5319]="BuiltInLaunchIdNV",e[e.BuiltInLaunchSizeKHR=5320]="BuiltInLaunchSizeKHR",e[e.BuiltInLaunchSizeNV=5320]="BuiltInLaunchSizeNV",e[e.BuiltInWorldRayOriginKHR=5321]="BuiltInWorldRayOriginKHR",e[e.BuiltInWorldRayOriginNV=5321]="BuiltInWorldRayOriginNV",e[e.BuiltInWorldRayDirectionKHR=5322]="BuiltInWorldRayDirectionKHR",e[e.BuiltInWorldRayDirectionNV=5322]="BuiltInWorldRayDirectionNV",e[e.BuiltInObjectRayOriginKHR=5323]="BuiltInObjectRayOriginKHR",e[e.BuiltInObjectRayOriginNV=5323]="BuiltInObjectRayOriginNV",e[e.BuiltInObjectRayDirectionKHR=5324]="BuiltInObjectRayDirectionKHR",e[e.BuiltInObjectRayDirectionNV=5324]="BuiltInObjectRayDirectionNV",e[e.BuiltInRayTminKHR=5325]="BuiltInRayTminKHR",e[e.BuiltInRayTminNV=5325]="BuiltInRayTminNV",e[e.BuiltInRayTmaxKHR=5326]="BuiltInRayTmaxKHR",e[e.BuiltInRayTmaxNV=5326]="BuiltInRayTmaxNV",e[e.BuiltInInstanceCustomIndexKHR=5327]="BuiltInInstanceCustomIndexKHR",e[e.BuiltInInstanceCustomIndexNV=5327]="BuiltInInstanceCustomIndexNV",e[e.BuiltInObjectToWorldKHR=5330]="BuiltInObjectToWorldKHR",e[e.BuiltInObjectToWorldNV=5330]="BuiltInObjectToWorldNV",e[e.BuiltInWorldToObjectKHR=5331]="BuiltInWorldToObjectKHR",e[e.BuiltInWorldToObjectNV=5331]="BuiltInWorldToObjectNV",e[e.BuiltInHitTNV=5332]="BuiltInHitTNV",e[e.BuiltInHitKindKHR=5333]="BuiltInHitKindKHR",e[e.BuiltInHitKindNV=5333]="BuiltInHitKindNV",e[e.BuiltInIncomingRayFlagsKHR=5351]="BuiltInIncomingRayFlagsKHR",e[e.BuiltInIncomingRayFlagsNV=5351]="BuiltInIncomingRayFlagsNV",e[e.BuiltInRayGeometryIndexKHR=5352]="BuiltInRayGeometryIndexKHR",e[e.BuiltInWarpsPerSMNV=5374]="BuiltInWarpsPerSMNV",e[e.BuiltInSMCountNV=5375]="BuiltInSMCountNV",e[e.BuiltInWarpIDNV=5376]="BuiltInWarpIDNV",e[e.BuiltInSMIDNV=5377]="BuiltInSMIDNV",e[e.BuiltInMax=2147483647]="BuiltInMax"}(P||(P={})),function(e){e[e.SelectionControlFlattenShift=0]="SelectionControlFlattenShift",e[e.SelectionControlDontFlattenShift=1]="SelectionControlDontFlattenShift",e[e.SelectionControlMax=2147483647]="SelectionControlMax"}(G||(G={})),function(e){e[e.SelectionControlMaskNone=0]="SelectionControlMaskNone",e[e.SelectionControlFlattenMask=1]="SelectionControlFlattenMask",e[e.SelectionControlDontFlattenMask=2]="SelectionControlDontFlattenMask"}(F||(F={})),function(e){e[e.LoopControlUnrollShift=0]="LoopControlUnrollShift",e[e.LoopControlDontUnrollShift=1]="LoopControlDontUnrollShift",e[e.LoopControlDependencyInfiniteShift=2]="LoopControlDependencyInfiniteShift",e[e.LoopControlDependencyLengthShift=3]="LoopControlDependencyLengthShift",e[e.LoopControlMinIterationsShift=4]="LoopControlMinIterationsShift",e[e.LoopControlMaxIterationsShift=5]="LoopControlMaxIterationsShift",e[e.LoopControlIterationMultipleShift=6]="LoopControlIterationMultipleShift",e[e.LoopControlPeelCountShift=7]="LoopControlPeelCountShift",e[e.LoopControlPartialCountShift=8]="LoopControlPartialCountShift",e[e.LoopControlInitiationIntervalINTELShift=16]="LoopControlInitiationIntervalINTELShift",e[e.LoopControlMaxConcurrencyINTELShift=17]="LoopControlMaxConcurrencyINTELShift",e[e.LoopControlDependencyArrayINTELShift=18]="LoopControlDependencyArrayINTELShift",e[e.LoopControlPipelineEnableINTELShift=19]="LoopControlPipelineEnableINTELShift",e[e.LoopControlLoopCoalesceINTELShift=20]="LoopControlLoopCoalesceINTELShift",e[e.LoopControlMaxInterleavingINTELShift=21]="LoopControlMaxInterleavingINTELShift",e[e.LoopControlSpeculatedIterationsINTELShift=22]="LoopControlSpeculatedIterationsINTELShift",e[e.LoopControlMax=2147483647]="LoopControlMax"}(z||(z={})),function(e){e[e.LoopControlMaskNone=0]="LoopControlMaskNone",e[e.LoopControlUnrollMask=1]="LoopControlUnrollMask",e[e.LoopControlDontUnrollMask=2]="LoopControlDontUnrollMask",e[e.LoopControlDependencyInfiniteMask=4]="LoopControlDependencyInfiniteMask",e[e.LoopControlDependencyLengthMask=8]="LoopControlDependencyLengthMask",e[e.LoopControlMinIterationsMask=16]="LoopControlMinIterationsMask",e[e.LoopControlMaxIterationsMask=32]="LoopControlMaxIterationsMask",e[e.LoopControlIterationMultipleMask=64]="LoopControlIterationMultipleMask",e[e.LoopControlPeelCountMask=128]="LoopControlPeelCountMask",e[e.LoopControlPartialCountMask=256]="LoopControlPartialCountMask",e[e.LoopControlInitiationIntervalINTELMask=65536]="LoopControlInitiationIntervalINTELMask",e[e.LoopControlMaxConcurrencyINTELMask=131072]="LoopControlMaxConcurrencyINTELMask",e[e.LoopControlDependencyArrayINTELMask=262144]="LoopControlDependencyArrayINTELMask",e[e.LoopControlPipelineEnableINTELMask=524288]="LoopControlPipelineEnableINTELMask",e[e.LoopControlLoopCoalesceINTELMask=1048576]="LoopControlLoopCoalesceINTELMask",e[e.LoopControlMaxInterleavingINTELMask=2097152]="LoopControlMaxInterleavingINTELMask",e[e.LoopControlSpeculatedIterationsINTELMask=4194304]="LoopControlSpeculatedIterationsINTELMask"}(U||(U={})),function(e){e[e.FunctionControlInlineShift=0]="FunctionControlInlineShift",e[e.FunctionControlDontInlineShift=1]="FunctionControlDontInlineShift",e[e.FunctionControlPureShift=2]="FunctionControlPureShift",e[e.FunctionControlConstShift=3]="FunctionControlConstShift",e[e.FunctionControlMax=2147483647]="FunctionControlMax"}(V||(V={})),function(e){e[e.FunctionControlMaskNone=0]="FunctionControlMaskNone",e[e.FunctionControlInlineMask=1]="FunctionControlInlineMask",e[e.FunctionControlDontInlineMask=2]="FunctionControlDontInlineMask",e[e.FunctionControlPureMask=4]="FunctionControlPureMask",e[e.FunctionControlConstMask=8]="FunctionControlConstMask"}(H||(H={})),function(e){e[e.MemorySemanticsAcquireShift=1]="MemorySemanticsAcquireShift",e[e.MemorySemanticsReleaseShift=2]="MemorySemanticsReleaseShift",e[e.MemorySemanticsAcquireReleaseShift=3]="MemorySemanticsAcquireReleaseShift",e[e.MemorySemanticsSequentiallyConsistentShift=4]="MemorySemanticsSequentiallyConsistentShift",e[e.MemorySemanticsUniformMemoryShift=6]="MemorySemanticsUniformMemoryShift",e[e.MemorySemanticsSubgroupMemoryShift=7]="MemorySemanticsSubgroupMemoryShift",e[e.MemorySemanticsWorkgroupMemoryShift=8]="MemorySemanticsWorkgroupMemoryShift",e[e.MemorySemanticsCrossWorkgroupMemoryShift=9]="MemorySemanticsCrossWorkgroupMemoryShift",e[e.MemorySemanticsAtomicCounterMemoryShift=10]="MemorySemanticsAtomicCounterMemoryShift",e[e.MemorySemanticsImageMemoryShift=11]="MemorySemanticsImageMemoryShift",e[e.MemorySemanticsOutputMemoryShift=12]="MemorySemanticsOutputMemoryShift",e[e.MemorySemanticsOutputMemoryKHRShift=12]="MemorySemanticsOutputMemoryKHRShift",e[e.MemorySemanticsMakeAvailableShift=13]="MemorySemanticsMakeAvailableShift",e[e.MemorySemanticsMakeAvailableKHRShift=13]="MemorySemanticsMakeAvailableKHRShift",e[e.MemorySemanticsMakeVisibleShift=14]="MemorySemanticsMakeVisibleShift",e[e.MemorySemanticsMakeVisibleKHRShift=14]="MemorySemanticsMakeVisibleKHRShift",e[e.MemorySemanticsVolatileShift=15]="MemorySemanticsVolatileShift",e[e.MemorySemanticsMax=2147483647]="MemorySemanticsMax"}(K||(K={})),function(e){e[e.MemorySemanticsMaskNone=0]="MemorySemanticsMaskNone",e[e.MemorySemanticsAcquireMask=2]="MemorySemanticsAcquireMask",e[e.MemorySemanticsReleaseMask=4]="MemorySemanticsReleaseMask",e[e.MemorySemanticsAcquireReleaseMask=8]="MemorySemanticsAcquireReleaseMask",e[e.MemorySemanticsSequentiallyConsistentMask=16]="MemorySemanticsSequentiallyConsistentMask",e[e.MemorySemanticsUniformMemoryMask=64]="MemorySemanticsUniformMemoryMask",e[e.MemorySemanticsSubgroupMemoryMask=128]="MemorySemanticsSubgroupMemoryMask",e[e.MemorySemanticsWorkgroupMemoryMask=256]="MemorySemanticsWorkgroupMemoryMask",e[e.MemorySemanticsCrossWorkgroupMemoryMask=512]="MemorySemanticsCrossWorkgroupMemoryMask",e[e.MemorySemanticsAtomicCounterMemoryMask=1024]="MemorySemanticsAtomicCounterMemoryMask",e[e.MemorySemanticsImageMemoryMask=2048]="MemorySemanticsImageMemoryMask",e[e.MemorySemanticsOutputMemoryMask=4096]="MemorySemanticsOutputMemoryMask",e[e.MemorySemanticsOutputMemoryKHRMask=4096]="MemorySemanticsOutputMemoryKHRMask",e[e.MemorySemanticsMakeAvailableMask=8192]="MemorySemanticsMakeAvailableMask",e[e.MemorySemanticsMakeAvailableKHRMask=8192]="MemorySemanticsMakeAvailableKHRMask",e[e.MemorySemanticsMakeVisibleMask=16384]="MemorySemanticsMakeVisibleMask",e[e.MemorySemanticsMakeVisibleKHRMask=16384]="MemorySemanticsMakeVisibleKHRMask",e[e.MemorySemanticsVolatileMask=32768]="MemorySemanticsVolatileMask"}(q||(q={})),function(e){e[e.MemoryAccessVolatileShift=0]="MemoryAccessVolatileShift",e[e.MemoryAccessAlignedShift=1]="MemoryAccessAlignedShift",e[e.MemoryAccessNontemporalShift=2]="MemoryAccessNontemporalShift",e[e.MemoryAccessMakePointerAvailableShift=3]="MemoryAccessMakePointerAvailableShift",e[e.MemoryAccessMakePointerAvailableKHRShift=3]="MemoryAccessMakePointerAvailableKHRShift",e[e.MemoryAccessMakePointerVisibleShift=4]="MemoryAccessMakePointerVisibleShift",e[e.MemoryAccessMakePointerVisibleKHRShift=4]="MemoryAccessMakePointerVisibleKHRShift",e[e.MemoryAccessNonPrivatePointerShift=5]="MemoryAccessNonPrivatePointerShift",e[e.MemoryAccessNonPrivatePointerKHRShift=5]="MemoryAccessNonPrivatePointerKHRShift",e[e.MemoryAccessMax=2147483647]="MemoryAccessMax"}(X||(X={})),function(e){e[e.MemoryAccessMaskNone=0]="MemoryAccessMaskNone",e[e.MemoryAccessVolatileMask=1]="MemoryAccessVolatileMask",e[e.MemoryAccessAlignedMask=2]="MemoryAccessAlignedMask",e[e.MemoryAccessNontemporalMask=4]="MemoryAccessNontemporalMask",e[e.MemoryAccessMakePointerAvailableMask=8]="MemoryAccessMakePointerAvailableMask",e[e.MemoryAccessMakePointerAvailableKHRMask=8]="MemoryAccessMakePointerAvailableKHRMask",e[e.MemoryAccessMakePointerVisibleMask=16]="MemoryAccessMakePointerVisibleMask",e[e.MemoryAccessMakePointerVisibleKHRMask=16]="MemoryAccessMakePointerVisibleKHRMask",e[e.MemoryAccessNonPrivatePointerMask=32]="MemoryAccessNonPrivatePointerMask",e[e.MemoryAccessNonPrivatePointerKHRMask=32]="MemoryAccessNonPrivatePointerKHRMask"}(W||(W={})),function(e){e[e.ScopeCrossDevice=0]="ScopeCrossDevice",e[e.ScopeDevice=1]="ScopeDevice",e[e.ScopeWorkgroup=2]="ScopeWorkgroup",e[e.ScopeSubgroup=3]="ScopeSubgroup",e[e.ScopeInvocation=4]="ScopeInvocation",e[e.ScopeQueueFamily=5]="ScopeQueueFamily",e[e.ScopeQueueFamilyKHR=5]="ScopeQueueFamilyKHR",e[e.ScopeShaderCallKHR=6]="ScopeShaderCallKHR",e[e.ScopeMax=2147483647]="ScopeMax"}(j||(j={})),function(e){e[e.GroupOperationReduce=0]="GroupOperationReduce",e[e.GroupOperationInclusiveScan=1]="GroupOperationInclusiveScan",e[e.GroupOperationExclusiveScan=2]="GroupOperationExclusiveScan",e[e.GroupOperationClusteredReduce=3]="GroupOperationClusteredReduce",e[e.GroupOperationPartitionedReduceNV=6]="GroupOperationPartitionedReduceNV",e[e.GroupOperationPartitionedInclusiveScanNV=7]="GroupOperationPartitionedInclusiveScanNV",e[e.GroupOperationPartitionedExclusiveScanNV=8]="GroupOperationPartitionedExclusiveScanNV",e[e.GroupOperationMax=2147483647]="GroupOperationMax"}(Q||(Q={})),function(e){e[e.KernelEnqueueFlagsNoWait=0]="KernelEnqueueFlagsNoWait",e[e.KernelEnqueueFlagsWaitKernel=1]="KernelEnqueueFlagsWaitKernel",e[e.KernelEnqueueFlagsWaitWorkGroup=2]="KernelEnqueueFlagsWaitWorkGroup",e[e.KernelEnqueueFlagsMax=2147483647]="KernelEnqueueFlagsMax"}(Z||(Z={})),function(e){e[e.KernelProfilingInfoCmdExecTimeShift=0]="KernelProfilingInfoCmdExecTimeShift",e[e.KernelProfilingInfoMax=2147483647]="KernelProfilingInfoMax"}(Y||(Y={})),function(e){e[e.KernelProfilingInfoMaskNone=0]="KernelProfilingInfoMaskNone",e[e.KernelProfilingInfoCmdExecTimeMask=1]="KernelProfilingInfoCmdExecTimeMask"}(J||(J={})),function(e){e[e.CapabilityMatrix=0]="CapabilityMatrix",e[e.CapabilityShader=1]="CapabilityShader",e[e.CapabilityGeometry=2]="CapabilityGeometry",e[e.CapabilityTessellation=3]="CapabilityTessellation",e[e.CapabilityAddresses=4]="CapabilityAddresses",e[e.CapabilityLinkage=5]="CapabilityLinkage",e[e.CapabilityKernel=6]="CapabilityKernel",e[e.CapabilityVector16=7]="CapabilityVector16",e[e.CapabilityFloat16Buffer=8]="CapabilityFloat16Buffer",e[e.CapabilityFloat16=9]="CapabilityFloat16",e[e.CapabilityFloat64=10]="CapabilityFloat64",e[e.CapabilityInt64=11]="CapabilityInt64",e[e.CapabilityInt64Atomics=12]="CapabilityInt64Atomics",e[e.CapabilityImageBasic=13]="CapabilityImageBasic",e[e.CapabilityImageReadWrite=14]="CapabilityImageReadWrite",e[e.CapabilityImageMipmap=15]="CapabilityImageMipmap",e[e.CapabilityPipes=17]="CapabilityPipes",e[e.CapabilityGroups=18]="CapabilityGroups",e[e.CapabilityDeviceEnqueue=19]="CapabilityDeviceEnqueue",e[e.CapabilityLiteralSampler=20]="CapabilityLiteralSampler",e[e.CapabilityAtomicStorage=21]="CapabilityAtomicStorage",e[e.CapabilityInt16=22]="CapabilityInt16",e[e.CapabilityTessellationPointSize=23]="CapabilityTessellationPointSize",e[e.CapabilityGeometryPointSize=24]="CapabilityGeometryPointSize",e[e.CapabilityImageGatherExtended=25]="CapabilityImageGatherExtended",e[e.CapabilityStorageImageMultisample=27]="CapabilityStorageImageMultisample",e[e.CapabilityUniformBufferArrayDynamicIndexing=28]="CapabilityUniformBufferArrayDynamicIndexing",e[e.CapabilitySampledImageArrayDynamicIndexing=29]="CapabilitySampledImageArrayDynamicIndexing",e[e.CapabilityStorageBufferArrayDynamicIndexing=30]="CapabilityStorageBufferArrayDynamicIndexing",e[e.CapabilityStorageImageArrayDynamicIndexing=31]="CapabilityStorageImageArrayDynamicIndexing",e[e.CapabilityClipDistance=32]="CapabilityClipDistance",e[e.CapabilityCullDistance=33]="CapabilityCullDistance",e[e.CapabilityImageCubeArray=34]="CapabilityImageCubeArray",e[e.CapabilitySampleRateShading=35]="CapabilitySampleRateShading",e[e.CapabilityImageRect=36]="CapabilityImageRect",e[e.CapabilitySampledRect=37]="CapabilitySampledRect",e[e.CapabilityGenericPointer=38]="CapabilityGenericPointer",e[e.CapabilityInt8=39]="CapabilityInt8",e[e.CapabilityInputAttachment=40]="CapabilityInputAttachment",e[e.CapabilitySparseResidency=41]="CapabilitySparseResidency",e[e.CapabilityMinLod=42]="CapabilityMinLod",e[e.CapabilitySampled1D=43]="CapabilitySampled1D",e[e.CapabilityImage1D=44]="CapabilityImage1D",e[e.CapabilitySampledCubeArray=45]="CapabilitySampledCubeArray",e[e.CapabilitySampledBuffer=46]="CapabilitySampledBuffer",e[e.CapabilityImageBuffer=47]="CapabilityImageBuffer",e[e.CapabilityImageMSArray=48]="CapabilityImageMSArray",e[e.CapabilityStorageImageExtendedFormats=49]="CapabilityStorageImageExtendedFormats",e[e.CapabilityImageQuery=50]="CapabilityImageQuery",e[e.CapabilityDerivativeControl=51]="CapabilityDerivativeControl",e[e.CapabilityInterpolationFunction=52]="CapabilityInterpolationFunction",e[e.CapabilityTransformFeedback=53]="CapabilityTransformFeedback",e[e.CapabilityGeometryStreams=54]="CapabilityGeometryStreams",e[e.CapabilityStorageImageReadWithoutFormat=55]="CapabilityStorageImageReadWithoutFormat",e[e.CapabilityStorageImageWriteWithoutFormat=56]="CapabilityStorageImageWriteWithoutFormat",e[e.CapabilityMultiViewport=57]="CapabilityMultiViewport",e[e.CapabilitySubgroupDispatch=58]="CapabilitySubgroupDispatch",e[e.CapabilityNamedBarrier=59]="CapabilityNamedBarrier",e[e.CapabilityPipeStorage=60]="CapabilityPipeStorage",e[e.CapabilityGroupNonUniform=61]="CapabilityGroupNonUniform",e[e.CapabilityGroupNonUniformVote=62]="CapabilityGroupNonUniformVote",e[e.CapabilityGroupNonUniformArithmetic=63]="CapabilityGroupNonUniformArithmetic",e[e.CapabilityGroupNonUniformBallot=64]="CapabilityGroupNonUniformBallot",e[e.CapabilityGroupNonUniformShuffle=65]="CapabilityGroupNonUniformShuffle",e[e.CapabilityGroupNonUniformShuffleRelative=66]="CapabilityGroupNonUniformShuffleRelative",e[e.CapabilityGroupNonUniformClustered=67]="CapabilityGroupNonUniformClustered",e[e.CapabilityGroupNonUniformQuad=68]="CapabilityGroupNonUniformQuad",e[e.CapabilityShaderLayer=69]="CapabilityShaderLayer",e[e.CapabilityShaderViewportIndex=70]="CapabilityShaderViewportIndex",e[e.CapabilityFragmentShadingRateKHR=4422]="CapabilityFragmentShadingRateKHR",e[e.CapabilitySubgroupBallotKHR=4423]="CapabilitySubgroupBallotKHR",e[e.CapabilityDrawParameters=4427]="CapabilityDrawParameters",e[e.CapabilitySubgroupVoteKHR=4431]="CapabilitySubgroupVoteKHR",e[e.CapabilityStorageBuffer16BitAccess=4433]="CapabilityStorageBuffer16BitAccess",e[e.CapabilityStorageUniformBufferBlock16=4433]="CapabilityStorageUniformBufferBlock16",e[e.CapabilityStorageUniform16=4434]="CapabilityStorageUniform16",e[e.CapabilityUniformAndStorageBuffer16BitAccess=4434]="CapabilityUniformAndStorageBuffer16BitAccess",e[e.CapabilityStoragePushConstant16=4435]="CapabilityStoragePushConstant16",e[e.CapabilityStorageInputOutput16=4436]="CapabilityStorageInputOutput16",e[e.CapabilityDeviceGroup=4437]="CapabilityDeviceGroup",e[e.CapabilityMultiView=4439]="CapabilityMultiView",e[e.CapabilityVariablePointersStorageBuffer=4441]="CapabilityVariablePointersStorageBuffer",e[e.CapabilityVariablePointers=4442]="CapabilityVariablePointers",e[e.CapabilityAtomicStorageOps=4445]="CapabilityAtomicStorageOps",e[e.CapabilitySampleMaskPostDepthCoverage=4447]="CapabilitySampleMaskPostDepthCoverage",e[e.CapabilityStorageBuffer8BitAccess=4448]="CapabilityStorageBuffer8BitAccess",e[e.CapabilityUniformAndStorageBuffer8BitAccess=4449]="CapabilityUniformAndStorageBuffer8BitAccess",e[e.CapabilityStoragePushConstant8=4450]="CapabilityStoragePushConstant8",e[e.CapabilityDenormPreserve=4464]="CapabilityDenormPreserve",e[e.CapabilityDenormFlushToZero=4465]="CapabilityDenormFlushToZero",e[e.CapabilitySignedZeroInfNanPreserve=4466]="CapabilitySignedZeroInfNanPreserve",e[e.CapabilityRoundingModeRTE=4467]="CapabilityRoundingModeRTE",e[e.CapabilityRoundingModeRTZ=4468]="CapabilityRoundingModeRTZ",e[e.CapabilityRayQueryProvisionalKHR=4471]="CapabilityRayQueryProvisionalKHR",e[e.CapabilityRayQueryKHR=4472]="CapabilityRayQueryKHR",e[e.CapabilityRayTraversalPrimitiveCullingKHR=4478]="CapabilityRayTraversalPrimitiveCullingKHR",e[e.CapabilityRayTracingKHR=4479]="CapabilityRayTracingKHR",e[e.CapabilityFloat16ImageAMD=5008]="CapabilityFloat16ImageAMD",e[e.CapabilityImageGatherBiasLodAMD=5009]="CapabilityImageGatherBiasLodAMD",e[e.CapabilityFragmentMaskAMD=5010]="CapabilityFragmentMaskAMD",e[e.CapabilityStencilExportEXT=5013]="CapabilityStencilExportEXT",e[e.CapabilityImageReadWriteLodAMD=5015]="CapabilityImageReadWriteLodAMD",e[e.CapabilityInt64ImageEXT=5016]="CapabilityInt64ImageEXT",e[e.CapabilityShaderClockKHR=5055]="CapabilityShaderClockKHR",e[e.CapabilitySampleMaskOverrideCoverageNV=5249]="CapabilitySampleMaskOverrideCoverageNV",e[e.CapabilityGeometryShaderPassthroughNV=5251]="CapabilityGeometryShaderPassthroughNV",e[e.CapabilityShaderViewportIndexLayerEXT=5254]="CapabilityShaderViewportIndexLayerEXT",e[e.CapabilityShaderViewportIndexLayerNV=5254]="CapabilityShaderViewportIndexLayerNV",e[e.CapabilityShaderViewportMaskNV=5255]="CapabilityShaderViewportMaskNV",e[e.CapabilityShaderStereoViewNV=5259]="CapabilityShaderStereoViewNV",e[e.CapabilityPerViewAttributesNV=5260]="CapabilityPerViewAttributesNV",e[e.CapabilityFragmentFullyCoveredEXT=5265]="CapabilityFragmentFullyCoveredEXT",e[e.CapabilityMeshShadingNV=5266]="CapabilityMeshShadingNV",e[e.CapabilityImageFootprintNV=5282]="CapabilityImageFootprintNV",e[e.CapabilityFragmentBarycentricNV=5284]="CapabilityFragmentBarycentricNV",e[e.CapabilityComputeDerivativeGroupQuadsNV=5288]="CapabilityComputeDerivativeGroupQuadsNV",e[e.CapabilityFragmentDensityEXT=5291]="CapabilityFragmentDensityEXT",e[e.CapabilityShadingRateNV=5291]="CapabilityShadingRateNV",e[e.CapabilityGroupNonUniformPartitionedNV=5297]="CapabilityGroupNonUniformPartitionedNV",e[e.CapabilityShaderNonUniform=5301]="CapabilityShaderNonUniform",e[e.CapabilityShaderNonUniformEXT=5301]="CapabilityShaderNonUniformEXT",e[e.CapabilityRuntimeDescriptorArray=5302]="CapabilityRuntimeDescriptorArray",e[e.CapabilityRuntimeDescriptorArrayEXT=5302]="CapabilityRuntimeDescriptorArrayEXT",e[e.CapabilityInputAttachmentArrayDynamicIndexing=5303]="CapabilityInputAttachmentArrayDynamicIndexing",e[e.CapabilityInputAttachmentArrayDynamicIndexingEXT=5303]="CapabilityInputAttachmentArrayDynamicIndexingEXT",e[e.CapabilityUniformTexelBufferArrayDynamicIndexing=5304]="CapabilityUniformTexelBufferArrayDynamicIndexing",e[e.CapabilityUniformTexelBufferArrayDynamicIndexingEXT=5304]="CapabilityUniformTexelBufferArrayDynamicIndexingEXT",e[e.CapabilityStorageTexelBufferArrayDynamicIndexing=5305]="CapabilityStorageTexelBufferArrayDynamicIndexing",e[e.CapabilityStorageTexelBufferArrayDynamicIndexingEXT=5305]="CapabilityStorageTexelBufferArrayDynamicIndexingEXT",e[e.CapabilityUniformBufferArrayNonUniformIndexing=5306]="CapabilityUniformBufferArrayNonUniformIndexing",e[e.CapabilityUniformBufferArrayNonUniformIndexingEXT=5306]="CapabilityUniformBufferArrayNonUniformIndexingEXT",e[e.CapabilitySampledImageArrayNonUniformIndexing=5307]="CapabilitySampledImageArrayNonUniformIndexing",e[e.CapabilitySampledImageArrayNonUniformIndexingEXT=5307]="CapabilitySampledImageArrayNonUniformIndexingEXT",e[e.CapabilityStorageBufferArrayNonUniformIndexing=5308]="CapabilityStorageBufferArrayNonUniformIndexing",e[e.CapabilityStorageBufferArrayNonUniformIndexingEXT=5308]="CapabilityStorageBufferArrayNonUniformIndexingEXT",e[e.CapabilityStorageImageArrayNonUniformIndexing=5309]="CapabilityStorageImageArrayNonUniformIndexing",e[e.CapabilityStorageImageArrayNonUniformIndexingEXT=5309]="CapabilityStorageImageArrayNonUniformIndexingEXT",e[e.CapabilityInputAttachmentArrayNonUniformIndexing=5310]="CapabilityInputAttachmentArrayNonUniformIndexing",e[e.CapabilityInputAttachmentArrayNonUniformIndexingEXT=5310]="CapabilityInputAttachmentArrayNonUniformIndexingEXT",e[e.CapabilityUniformTexelBufferArrayNonUniformIndexing=5311]="CapabilityUniformTexelBufferArrayNonUniformIndexing",e[e.CapabilityUniformTexelBufferArrayNonUniformIndexingEXT=5311]="CapabilityUniformTexelBufferArrayNonUniformIndexingEXT",e[e.CapabilityStorageTexelBufferArrayNonUniformIndexing=5312]="CapabilityStorageTexelBufferArrayNonUniformIndexing",e[e.CapabilityStorageTexelBufferArrayNonUniformIndexingEXT=5312]="CapabilityStorageTexelBufferArrayNonUniformIndexingEXT",e[e.CapabilityRayTracingNV=5340]="CapabilityRayTracingNV",e[e.CapabilityVulkanMemoryModel=5345]="CapabilityVulkanMemoryModel",e[e.CapabilityVulkanMemoryModelKHR=5345]="CapabilityVulkanMemoryModelKHR",e[e.CapabilityVulkanMemoryModelDeviceScope=5346]="CapabilityVulkanMemoryModelDeviceScope",e[e.CapabilityVulkanMemoryModelDeviceScopeKHR=5346]="CapabilityVulkanMemoryModelDeviceScopeKHR",e[e.CapabilityPhysicalStorageBufferAddresses=5347]="CapabilityPhysicalStorageBufferAddresses",e[e.CapabilityPhysicalStorageBufferAddressesEXT=5347]="CapabilityPhysicalStorageBufferAddressesEXT",e[e.CapabilityComputeDerivativeGroupLinearNV=5350]="CapabilityComputeDerivativeGroupLinearNV",e[e.CapabilityRayTracingProvisionalKHR=5353]="CapabilityRayTracingProvisionalKHR",e[e.CapabilityCooperativeMatrixNV=5357]="CapabilityCooperativeMatrixNV",e[e.CapabilityFragmentShaderSampleInterlockEXT=5363]="CapabilityFragmentShaderSampleInterlockEXT",e[e.CapabilityFragmentShaderShadingRateInterlockEXT=5372]="CapabilityFragmentShaderShadingRateInterlockEXT",e[e.CapabilityShaderSMBuiltinsNV=5373]="CapabilityShaderSMBuiltinsNV",e[e.CapabilityFragmentShaderPixelInterlockEXT=5378]="CapabilityFragmentShaderPixelInterlockEXT",e[e.CapabilityDemoteToHelperInvocationEXT=5379]="CapabilityDemoteToHelperInvocationEXT",e[e.CapabilitySubgroupShuffleINTEL=5568]="CapabilitySubgroupShuffleINTEL",e[e.CapabilitySubgroupBufferBlockIOINTEL=5569]="CapabilitySubgroupBufferBlockIOINTEL",e[e.CapabilitySubgroupImageBlockIOINTEL=5570]="CapabilitySubgroupImageBlockIOINTEL",e[e.CapabilitySubgroupImageMediaBlockIOINTEL=5579]="CapabilitySubgroupImageMediaBlockIOINTEL",e[e.CapabilityIntegerFunctions2INTEL=5584]="CapabilityIntegerFunctions2INTEL",e[e.CapabilityFunctionPointersINTEL=5603]="CapabilityFunctionPointersINTEL",e[e.CapabilityIndirectReferencesINTEL=5604]="CapabilityIndirectReferencesINTEL",e[e.CapabilitySubgroupAvcMotionEstimationINTEL=5696]="CapabilitySubgroupAvcMotionEstimationINTEL",e[e.CapabilitySubgroupAvcMotionEstimationIntraINTEL=5697]="CapabilitySubgroupAvcMotionEstimationIntraINTEL",e[e.CapabilitySubgroupAvcMotionEstimationChromaINTEL=5698]="CapabilitySubgroupAvcMotionEstimationChromaINTEL",e[e.CapabilityFPGAMemoryAttributesINTEL=5824]="CapabilityFPGAMemoryAttributesINTEL",e[e.CapabilityUnstructuredLoopControlsINTEL=5886]="CapabilityUnstructuredLoopControlsINTEL",e[e.CapabilityFPGALoopControlsINTEL=5888]="CapabilityFPGALoopControlsINTEL",e[e.CapabilityKernelAttributesINTEL=5892]="CapabilityKernelAttributesINTEL",e[e.CapabilityFPGAKernelAttributesINTEL=5897]="CapabilityFPGAKernelAttributesINTEL",e[e.CapabilityBlockingPipesINTEL=5945]="CapabilityBlockingPipesINTEL",e[e.CapabilityFPGARegINTEL=5948]="CapabilityFPGARegINTEL",e[e.CapabilityAtomicFloat32AddEXT=6033]="CapabilityAtomicFloat32AddEXT",e[e.CapabilityAtomicFloat64AddEXT=6034]="CapabilityAtomicFloat64AddEXT",e[e.CapabilityMax=2147483647]="CapabilityMax"}($||($={})),function(e){e[e.RayFlagsOpaqueKHRShift=0]="RayFlagsOpaqueKHRShift",e[e.RayFlagsNoOpaqueKHRShift=1]="RayFlagsNoOpaqueKHRShift",e[e.RayFlagsTerminateOnFirstHitKHRShift=2]="RayFlagsTerminateOnFirstHitKHRShift",e[e.RayFlagsSkipClosestHitShaderKHRShift=3]="RayFlagsSkipClosestHitShaderKHRShift",e[e.RayFlagsCullBackFacingTrianglesKHRShift=4]="RayFlagsCullBackFacingTrianglesKHRShift",e[e.RayFlagsCullFrontFacingTrianglesKHRShift=5]="RayFlagsCullFrontFacingTrianglesKHRShift",e[e.RayFlagsCullOpaqueKHRShift=6]="RayFlagsCullOpaqueKHRShift",e[e.RayFlagsCullNoOpaqueKHRShift=7]="RayFlagsCullNoOpaqueKHRShift",e[e.RayFlagsSkipTrianglesKHRShift=8]="RayFlagsSkipTrianglesKHRShift",e[e.RayFlagsSkipAABBsKHRShift=9]="RayFlagsSkipAABBsKHRShift",e[e.RayFlagsMax=2147483647]="RayFlagsMax"}(ee||(ee={})),function(e){e[e.RayFlagsMaskNone=0]="RayFlagsMaskNone",e[e.RayFlagsOpaqueKHRMask=1]="RayFlagsOpaqueKHRMask",e[e.RayFlagsNoOpaqueKHRMask=2]="RayFlagsNoOpaqueKHRMask",e[e.RayFlagsTerminateOnFirstHitKHRMask=4]="RayFlagsTerminateOnFirstHitKHRMask",e[e.RayFlagsSkipClosestHitShaderKHRMask=8]="RayFlagsSkipClosestHitShaderKHRMask",e[e.RayFlagsCullBackFacingTrianglesKHRMask=16]="RayFlagsCullBackFacingTrianglesKHRMask",e[e.RayFlagsCullFrontFacingTrianglesKHRMask=32]="RayFlagsCullFrontFacingTrianglesKHRMask",e[e.RayFlagsCullOpaqueKHRMask=64]="RayFlagsCullOpaqueKHRMask",e[e.RayFlagsCullNoOpaqueKHRMask=128]="RayFlagsCullNoOpaqueKHRMask",e[e.RayFlagsSkipTrianglesKHRMask=256]="RayFlagsSkipTrianglesKHRMask",e[e.RayFlagsSkipAABBsKHRMask=512]="RayFlagsSkipAABBsKHRMask"}(te||(te={})),function(e){e[e.RayQueryIntersectionRayQueryCandidateIntersectionKHR=0]="RayQueryIntersectionRayQueryCandidateIntersectionKHR",e[e.RayQueryIntersectionRayQueryCommittedIntersectionKHR=1]="RayQueryIntersectionRayQueryCommittedIntersectionKHR",e[e.RayQueryIntersectionMax=2147483647]="RayQueryIntersectionMax"}(re||(re={})),function(e){e[e.RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionNoneKHR=0]="RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionNoneKHR",e[e.RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionTriangleKHR=1]="RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionTriangleKHR",e[e.RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionGeneratedKHR=2]="RayQueryCommittedIntersectionTypeRayQueryCommittedIntersectionGeneratedKHR",e[e.RayQueryCommittedIntersectionTypeMax=2147483647]="RayQueryCommittedIntersectionTypeMax"}(ie||(ie={})),function(e){e[e.RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionTriangleKHR=0]="RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionTriangleKHR",e[e.RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionAABBKHR=1]="RayQueryCandidateIntersectionTypeRayQueryCandidateIntersectionAABBKHR",e[e.RayQueryCandidateIntersectionTypeMax=2147483647]="RayQueryCandidateIntersectionTypeMax"}(ae||(ae={})),function(e){e[e.FragmentShadingRateVertical2PixelsShift=0]="FragmentShadingRateVertical2PixelsShift",e[e.FragmentShadingRateVertical4PixelsShift=1]="FragmentShadingRateVertical4PixelsShift",e[e.FragmentShadingRateHorizontal2PixelsShift=2]="FragmentShadingRateHorizontal2PixelsShift",e[e.FragmentShadingRateHorizontal4PixelsShift=3]="FragmentShadingRateHorizontal4PixelsShift",e[e.FragmentShadingRateMax=2147483647]="FragmentShadingRateMax"}(oe||(oe={})),function(e){e[e.FragmentShadingRateMaskNone=0]="FragmentShadingRateMaskNone",e[e.FragmentShadingRateVertical2PixelsMask=1]="FragmentShadingRateVertical2PixelsMask",e[e.FragmentShadingRateVertical4PixelsMask=2]="FragmentShadingRateVertical4PixelsMask",e[e.FragmentShadingRateHorizontal2PixelsMask=4]="FragmentShadingRateHorizontal2PixelsMask",e[e.FragmentShadingRateHorizontal4PixelsMask=8]="FragmentShadingRateHorizontal4PixelsMask"}(ne||(ne={})),function(e){e[e.OpNop=0]="OpNop",e[e.OpUndef=1]="OpUndef",e[e.OpSourceContinued=2]="OpSourceContinued",e[e.OpSource=3]="OpSource",e[e.OpSourceExtension=4]="OpSourceExtension",e[e.OpName=5]="OpName",e[e.OpMemberName=6]="OpMemberName",e[e.OpString=7]="OpString",e[e.OpLine=8]="OpLine",e[e.OpExtension=10]="OpExtension",e[e.OpExtInstImport=11]="OpExtInstImport",e[e.OpExtInst=12]="OpExtInst",e[e.OpMemoryModel=14]="OpMemoryModel",e[e.OpEntryPoint=15]="OpEntryPoint",e[e.OpExecutionMode=16]="OpExecutionMode",e[e.OpCapability=17]="OpCapability",e[e.OpTypeVoid=19]="OpTypeVoid",e[e.OpTypeBool=20]="OpTypeBool",e[e.OpTypeInt=21]="OpTypeInt",e[e.OpTypeFloat=22]="OpTypeFloat",e[e.OpTypeVector=23]="OpTypeVector",e[e.OpTypeMatrix=24]="OpTypeMatrix",e[e.OpTypeImage=25]="OpTypeImage",e[e.OpTypeSampler=26]="OpTypeSampler",e[e.OpTypeSampledImage=27]="OpTypeSampledImage",e[e.OpTypeArray=28]="OpTypeArray",e[e.OpTypeRuntimeArray=29]="OpTypeRuntimeArray",e[e.OpTypeStruct=30]="OpTypeStruct",e[e.OpTypeOpaque=31]="OpTypeOpaque",e[e.OpTypePointer=32]="OpTypePointer",e[e.OpTypeFunction=33]="OpTypeFunction",e[e.OpTypeEvent=34]="OpTypeEvent",e[e.OpTypeDeviceEvent=35]="OpTypeDeviceEvent",e[e.OpTypeReserveId=36]="OpTypeReserveId",e[e.OpTypeQueue=37]="OpTypeQueue",e[e.OpTypePipe=38]="OpTypePipe",e[e.OpTypeForwardPointer=39]="OpTypeForwardPointer",e[e.OpConstantTrue=41]="OpConstantTrue",e[e.OpConstantFalse=42]="OpConstantFalse",e[e.OpConstant=43]="OpConstant",e[e.OpConstantComposite=44]="OpConstantComposite",e[e.OpConstantSampler=45]="OpConstantSampler",e[e.OpConstantNull=46]="OpConstantNull",e[e.OpSpecConstantTrue=48]="OpSpecConstantTrue",e[e.OpSpecConstantFalse=49]="OpSpecConstantFalse",e[e.OpSpecConstant=50]="OpSpecConstant",e[e.OpSpecConstantComposite=51]="OpSpecConstantComposite",e[e.OpSpecConstantOp=52]="OpSpecConstantOp",e[e.OpFunction=54]="OpFunction",e[e.OpFunctionParameter=55]="OpFunctionParameter",e[e.OpFunctionEnd=56]="OpFunctionEnd",e[e.OpFunctionCall=57]="OpFunctionCall",e[e.OpVariable=59]="OpVariable",e[e.OpImageTexelPointer=60]="OpImageTexelPointer",e[e.OpLoad=61]="OpLoad",e[e.OpStore=62]="OpStore",e[e.OpCopyMemory=63]="OpCopyMemory",e[e.OpCopyMemorySized=64]="OpCopyMemorySized",e[e.OpAccessChain=65]="OpAccessChain",e[e.OpInBoundsAccessChain=66]="OpInBoundsAccessChain",e[e.OpPtrAccessChain=67]="OpPtrAccessChain",e[e.OpArrayLength=68]="OpArrayLength",e[e.OpGenericPtrMemSemantics=69]="OpGenericPtrMemSemantics",e[e.OpInBoundsPtrAccessChain=70]="OpInBoundsPtrAccessChain",e[e.OpDecorate=71]="OpDecorate",e[e.OpMemberDecorate=72]="OpMemberDecorate",e[e.OpDecorationGroup=73]="OpDecorationGroup",e[e.OpGroupDecorate=74]="OpGroupDecorate",e[e.OpGroupMemberDecorate=75]="OpGroupMemberDecorate",e[e.OpVectorExtractDynamic=77]="OpVectorExtractDynamic",e[e.OpVectorInsertDynamic=78]="OpVectorInsertDynamic",e[e.OpVectorShuffle=79]="OpVectorShuffle",e[e.OpCompositeConstruct=80]="OpCompositeConstruct",e[e.OpCompositeExtract=81]="OpCompositeExtract",e[e.OpCompositeInsert=82]="OpCompositeInsert",e[e.OpCopyObject=83]="OpCopyObject",e[e.OpTranspose=84]="OpTranspose",e[e.OpSampledImage=86]="OpSampledImage",e[e.OpImageSampleImplicitLod=87]="OpImageSampleImplicitLod",e[e.OpImageSampleExplicitLod=88]="OpImageSampleExplicitLod",e[e.OpImageSampleDrefImplicitLod=89]="OpImageSampleDrefImplicitLod",e[e.OpImageSampleDrefExplicitLod=90]="OpImageSampleDrefExplicitLod",e[e.OpImageSampleProjImplicitLod=91]="OpImageSampleProjImplicitLod",e[e.OpImageSampleProjExplicitLod=92]="OpImageSampleProjExplicitLod",e[e.OpImageSampleProjDrefImplicitLod=93]="OpImageSampleProjDrefImplicitLod",e[e.OpImageSampleProjDrefExplicitLod=94]="OpImageSampleProjDrefExplicitLod",e[e.OpImageFetch=95]="OpImageFetch",e[e.OpImageGather=96]="OpImageGather",e[e.OpImageDrefGather=97]="OpImageDrefGather",e[e.OpImageRead=98]="OpImageRead",e[e.OpImageWrite=99]="OpImageWrite",e[e.OpImage=100]="OpImage",e[e.OpImageQueryFormat=101]="OpImageQueryFormat",e[e.OpImageQueryOrder=102]="OpImageQueryOrder",e[e.OpImageQuerySizeLod=103]="OpImageQuerySizeLod",e[e.OpImageQuerySize=104]="OpImageQuerySize",e[e.OpImageQueryLod=105]="OpImageQueryLod",e[e.OpImageQueryLevels=106]="OpImageQueryLevels",e[e.OpImageQuerySamples=107]="OpImageQuerySamples",e[e.OpConvertFToU=109]="OpConvertFToU",e[e.OpConvertFToS=110]="OpConvertFToS",e[e.OpConvertSToF=111]="OpConvertSToF",e[e.OpConvertUToF=112]="OpConvertUToF",e[e.OpUConvert=113]="OpUConvert",e[e.OpSConvert=114]="OpSConvert",e[e.OpFConvert=115]="OpFConvert",e[e.OpQuantizeToF16=116]="OpQuantizeToF16",e[e.OpConvertPtrToU=117]="OpConvertPtrToU",e[e.OpSatConvertSToU=118]="OpSatConvertSToU",e[e.OpSatConvertUToS=119]="OpSatConvertUToS",e[e.OpConvertUToPtr=120]="OpConvertUToPtr",e[e.OpPtrCastToGeneric=121]="OpPtrCastToGeneric",e[e.OpGenericCastToPtr=122]="OpGenericCastToPtr",e[e.OpGenericCastToPtrExplicit=123]="OpGenericCastToPtrExplicit",e[e.OpBitcast=124]="OpBitcast",e[e.OpSNegate=126]="OpSNegate",e[e.OpFNegate=127]="OpFNegate",e[e.OpIAdd=128]="OpIAdd",e[e.OpFAdd=129]="OpFAdd",e[e.OpISub=130]="OpISub",e[e.OpFSub=131]="OpFSub",e[e.OpIMul=132]="OpIMul",e[e.OpFMul=133]="OpFMul",e[e.OpUDiv=134]="OpUDiv",e[e.OpSDiv=135]="OpSDiv",e[e.OpFDiv=136]="OpFDiv",e[e.OpUMod=137]="OpUMod",e[e.OpSRem=138]="OpSRem",e[e.OpSMod=139]="OpSMod",e[e.OpFRem=140]="OpFRem",e[e.OpFMod=141]="OpFMod",e[e.OpVectorTimesScalar=142]="OpVectorTimesScalar",e[e.OpMatrixTimesScalar=143]="OpMatrixTimesScalar",e[e.OpVectorTimesMatrix=144]="OpVectorTimesMatrix",e[e.OpMatrixTimesVector=145]="OpMatrixTimesVector",e[e.OpMatrixTimesMatrix=146]="OpMatrixTimesMatrix",e[e.OpOuterProduct=147]="OpOuterProduct",e[e.OpDot=148]="OpDot",e[e.OpIAddCarry=149]="OpIAddCarry",e[e.OpISubBorrow=150]="OpISubBorrow",e[e.OpUMulExtended=151]="OpUMulExtended",e[e.OpSMulExtended=152]="OpSMulExtended",e[e.OpAny=154]="OpAny",e[e.OpAll=155]="OpAll",e[e.OpIsNan=156]="OpIsNan",e[e.OpIsInf=157]="OpIsInf",e[e.OpIsFinite=158]="OpIsFinite",e[e.OpIsNormal=159]="OpIsNormal",e[e.OpSignBitSet=160]="OpSignBitSet",e[e.OpLessOrGreater=161]="OpLessOrGreater",e[e.OpOrdered=162]="OpOrdered",e[e.OpUnordered=163]="OpUnordered",e[e.OpLogicalEqual=164]="OpLogicalEqual",e[e.OpLogicalNotEqual=165]="OpLogicalNotEqual",e[e.OpLogicalOr=166]="OpLogicalOr",e[e.OpLogicalAnd=167]="OpLogicalAnd",e[e.OpLogicalNot=168]="OpLogicalNot",e[e.OpSelect=169]="OpSelect",e[e.OpIEqual=170]="OpIEqual",e[e.OpINotEqual=171]="OpINotEqual",e[e.OpUGreaterThan=172]="OpUGreaterThan",e[e.OpSGreaterThan=173]="OpSGreaterThan",e[e.OpUGreaterThanEqual=174]="OpUGreaterThanEqual",e[e.OpSGreaterThanEqual=175]="OpSGreaterThanEqual",e[e.OpULessThan=176]="OpULessThan",e[e.OpSLessThan=177]="OpSLessThan",e[e.OpULessThanEqual=178]="OpULessThanEqual",e[e.OpSLessThanEqual=179]="OpSLessThanEqual",e[e.OpFOrdEqual=180]="OpFOrdEqual",e[e.OpFUnordEqual=181]="OpFUnordEqual",e[e.OpFOrdNotEqual=182]="OpFOrdNotEqual",e[e.OpFUnordNotEqual=183]="OpFUnordNotEqual",e[e.OpFOrdLessThan=184]="OpFOrdLessThan",e[e.OpFUnordLessThan=185]="OpFUnordLessThan",e[e.OpFOrdGreaterThan=186]="OpFOrdGreaterThan",e[e.OpFUnordGreaterThan=187]="OpFUnordGreaterThan",e[e.OpFOrdLessThanEqual=188]="OpFOrdLessThanEqual",e[e.OpFUnordLessThanEqual=189]="OpFUnordLessThanEqual",e[e.OpFOrdGreaterThanEqual=190]="OpFOrdGreaterThanEqual",e[e.OpFUnordGreaterThanEqual=191]="OpFUnordGreaterThanEqual",e[e.OpShiftRightLogical=194]="OpShiftRightLogical",e[e.OpShiftRightArithmetic=195]="OpShiftRightArithmetic",e[e.OpShiftLeftLogical=196]="OpShiftLeftLogical",e[e.OpBitwiseOr=197]="OpBitwiseOr",e[e.OpBitwiseXor=198]="OpBitwiseXor",e[e.OpBitwiseAnd=199]="OpBitwiseAnd",e[e.OpNot=200]="OpNot",e[e.OpBitFieldInsert=201]="OpBitFieldInsert",e[e.OpBitFieldSExtract=202]="OpBitFieldSExtract",e[e.OpBitFieldUExtract=203]="OpBitFieldUExtract",e[e.OpBitReverse=204]="OpBitReverse",e[e.OpBitCount=205]="OpBitCount",e[e.OpDPdx=207]="OpDPdx",e[e.OpDPdy=208]="OpDPdy",e[e.OpFwidth=209]="OpFwidth",e[e.OpDPdxFine=210]="OpDPdxFine",e[e.OpDPdyFine=211]="OpDPdyFine",e[e.OpFwidthFine=212]="OpFwidthFine",e[e.OpDPdxCoarse=213]="OpDPdxCoarse",e[e.OpDPdyCoarse=214]="OpDPdyCoarse",e[e.OpFwidthCoarse=215]="OpFwidthCoarse",e[e.OpEmitVertex=218]="OpEmitVertex",e[e.OpEndPrimitive=219]="OpEndPrimitive",e[e.OpEmitStreamVertex=220]="OpEmitStreamVertex",e[e.OpEndStreamPrimitive=221]="OpEndStreamPrimitive",e[e.OpControlBarrier=224]="OpControlBarrier",e[e.OpMemoryBarrier=225]="OpMemoryBarrier",e[e.OpAtomicLoad=227]="OpAtomicLoad",e[e.OpAtomicStore=228]="OpAtomicStore",e[e.OpAtomicExchange=229]="OpAtomicExchange",e[e.OpAtomicCompareExchange=230]="OpAtomicCompareExchange",e[e.OpAtomicCompareExchangeWeak=231]="OpAtomicCompareExchangeWeak",e[e.OpAtomicIIncrement=232]="OpAtomicIIncrement",e[e.OpAtomicIDecrement=233]="OpAtomicIDecrement",e[e.OpAtomicIAdd=234]="OpAtomicIAdd",e[e.OpAtomicISub=235]="OpAtomicISub",e[e.OpAtomicSMin=236]="OpAtomicSMin",e[e.OpAtomicUMin=237]="OpAtomicUMin",e[e.OpAtomicSMax=238]="OpAtomicSMax",e[e.OpAtomicUMax=239]="OpAtomicUMax",e[e.OpAtomicAnd=240]="OpAtomicAnd",e[e.OpAtomicOr=241]="OpAtomicOr",e[e.OpAtomicXor=242]="OpAtomicXor",e[e.OpPhi=245]="OpPhi",e[e.OpLoopMerge=246]="OpLoopMerge",e[e.OpSelectionMerge=247]="OpSelectionMerge",e[e.OpLabel=248]="OpLabel",e[e.OpBranch=249]="OpBranch",e[e.OpBranchConditional=250]="OpBranchConditional",e[e.OpSwitch=251]="OpSwitch",e[e.OpKill=252]="OpKill",e[e.OpReturn=253]="OpReturn",e[e.OpReturnValue=254]="OpReturnValue",e[e.OpUnreachable=255]="OpUnreachable",e[e.OpLifetimeStart=256]="OpLifetimeStart",e[e.OpLifetimeStop=257]="OpLifetimeStop",e[e.OpGroupAsyncCopy=259]="OpGroupAsyncCopy",e[e.OpGroupWaitEvents=260]="OpGroupWaitEvents",e[e.OpGroupAll=261]="OpGroupAll",e[e.OpGroupAny=262]="OpGroupAny",e[e.OpGroupBroadcast=263]="OpGroupBroadcast",e[e.OpGroupIAdd=264]="OpGroupIAdd",e[e.OpGroupFAdd=265]="OpGroupFAdd",e[e.OpGroupFMin=266]="OpGroupFMin",e[e.OpGroupUMin=267]="OpGroupUMin",e[e.OpGroupSMin=268]="OpGroupSMin",e[e.OpGroupFMax=269]="OpGroupFMax",e[e.OpGroupUMax=270]="OpGroupUMax",e[e.OpGroupSMax=271]="OpGroupSMax",e[e.OpReadPipe=274]="OpReadPipe",e[e.OpWritePipe=275]="OpWritePipe",e[e.OpReservedReadPipe=276]="OpReservedReadPipe",e[e.OpReservedWritePipe=277]="OpReservedWritePipe",e[e.OpReserveReadPipePackets=278]="OpReserveReadPipePackets",e[e.OpReserveWritePipePackets=279]="OpReserveWritePipePackets",e[e.OpCommitReadPipe=280]="OpCommitReadPipe",e[e.OpCommitWritePipe=281]="OpCommitWritePipe",e[e.OpIsValidReserveId=282]="OpIsValidReserveId",e[e.OpGetNumPipePackets=283]="OpGetNumPipePackets",e[e.OpGetMaxPipePackets=284]="OpGetMaxPipePackets",e[e.OpGroupReserveReadPipePackets=285]="OpGroupReserveReadPipePackets",e[e.OpGroupReserveWritePipePackets=286]="OpGroupReserveWritePipePackets",e[e.OpGroupCommitReadPipe=287]="OpGroupCommitReadPipe",e[e.OpGroupCommitWritePipe=288]="OpGroupCommitWritePipe",e[e.OpEnqueueMarker=291]="OpEnqueueMarker",e[e.OpEnqueueKernel=292]="OpEnqueueKernel",e[e.OpGetKernelNDrangeSubGroupCount=293]="OpGetKernelNDrangeSubGroupCount",e[e.OpGetKernelNDrangeMaxSubGroupSize=294]="OpGetKernelNDrangeMaxSubGroupSize",e[e.OpGetKernelWorkGroupSize=295]="OpGetKernelWorkGroupSize",e[e.OpGetKernelPreferredWorkGroupSizeMultiple=296]="OpGetKernelPreferredWorkGroupSizeMultiple",e[e.OpRetainEvent=297]="OpRetainEvent",e[e.OpReleaseEvent=298]="OpReleaseEvent",e[e.OpCreateUserEvent=299]="OpCreateUserEvent",e[e.OpIsValidEvent=300]="OpIsValidEvent",e[e.OpSetUserEventStatus=301]="OpSetUserEventStatus",e[e.OpCaptureEventProfilingInfo=302]="OpCaptureEventProfilingInfo",e[e.OpGetDefaultQueue=303]="OpGetDefaultQueue",e[e.OpBuildNDRange=304]="OpBuildNDRange",e[e.OpImageSparseSampleImplicitLod=305]="OpImageSparseSampleImplicitLod",e[e.OpImageSparseSampleExplicitLod=306]="OpImageSparseSampleExplicitLod",e[e.OpImageSparseSampleDrefImplicitLod=307]="OpImageSparseSampleDrefImplicitLod",e[e.OpImageSparseSampleDrefExplicitLod=308]="OpImageSparseSampleDrefExplicitLod",e[e.OpImageSparseSampleProjImplicitLod=309]="OpImageSparseSampleProjImplicitLod",e[e.OpImageSparseSampleProjExplicitLod=310]="OpImageSparseSampleProjExplicitLod",e[e.OpImageSparseSampleProjDrefImplicitLod=311]="OpImageSparseSampleProjDrefImplicitLod",e[e.OpImageSparseSampleProjDrefExplicitLod=312]="OpImageSparseSampleProjDrefExplicitLod",e[e.OpImageSparseFetch=313]="OpImageSparseFetch",e[e.OpImageSparseGather=314]="OpImageSparseGather",e[e.OpImageSparseDrefGather=315]="OpImageSparseDrefGather",e[e.OpImageSparseTexelsResident=316]="OpImageSparseTexelsResident",e[e.OpNoLine=317]="OpNoLine",e[e.OpAtomicFlagTestAndSet=318]="OpAtomicFlagTestAndSet",e[e.OpAtomicFlagClear=319]="OpAtomicFlagClear",e[e.OpImageSparseRead=320]="OpImageSparseRead",e[e.OpSizeOf=321]="OpSizeOf",e[e.OpTypePipeStorage=322]="OpTypePipeStorage",e[e.OpConstantPipeStorage=323]="OpConstantPipeStorage",e[e.OpCreatePipeFromPipeStorage=324]="OpCreatePipeFromPipeStorage",e[e.OpGetKernelLocalSizeForSubgroupCount=325]="OpGetKernelLocalSizeForSubgroupCount",e[e.OpGetKernelMaxNumSubgroups=326]="OpGetKernelMaxNumSubgroups",e[e.OpTypeNamedBarrier=327]="OpTypeNamedBarrier",e[e.OpNamedBarrierInitialize=328]="OpNamedBarrierInitialize",e[e.OpMemoryNamedBarrier=329]="OpMemoryNamedBarrier",e[e.OpModuleProcessed=330]="OpModuleProcessed",e[e.OpExecutionModeId=331]="OpExecutionModeId",e[e.OpDecorateId=332]="OpDecorateId",e[e.OpGroupNonUniformElect=333]="OpGroupNonUniformElect",e[e.OpGroupNonUniformAll=334]="OpGroupNonUniformAll",e[e.OpGroupNonUniformAny=335]="OpGroupNonUniformAny",e[e.OpGroupNonUniformAllEqual=336]="OpGroupNonUniformAllEqual",e[e.OpGroupNonUniformBroadcast=337]="OpGroupNonUniformBroadcast",e[e.OpGroupNonUniformBroadcastFirst=338]="OpGroupNonUniformBroadcastFirst",e[e.OpGroupNonUniformBallot=339]="OpGroupNonUniformBallot",e[e.OpGroupNonUniformInverseBallot=340]="OpGroupNonUniformInverseBallot",e[e.OpGroupNonUniformBallotBitExtract=341]="OpGroupNonUniformBallotBitExtract",e[e.OpGroupNonUniformBallotBitCount=342]="OpGroupNonUniformBallotBitCount",e[e.OpGroupNonUniformBallotFindLSB=343]="OpGroupNonUniformBallotFindLSB",e[e.OpGroupNonUniformBallotFindMSB=344]="OpGroupNonUniformBallotFindMSB",e[e.OpGroupNonUniformShuffle=345]="OpGroupNonUniformShuffle",e[e.OpGroupNonUniformShuffleXor=346]="OpGroupNonUniformShuffleXor",e[e.OpGroupNonUniformShuffleUp=347]="OpGroupNonUniformShuffleUp",e[e.OpGroupNonUniformShuffleDown=348]="OpGroupNonUniformShuffleDown",e[e.OpGroupNonUniformIAdd=349]="OpGroupNonUniformIAdd",e[e.OpGroupNonUniformFAdd=350]="OpGroupNonUniformFAdd",e[e.OpGroupNonUniformIMul=351]="OpGroupNonUniformIMul",e[e.OpGroupNonUniformFMul=352]="OpGroupNonUniformFMul",e[e.OpGroupNonUniformSMin=353]="OpGroupNonUniformSMin",e[e.OpGroupNonUniformUMin=354]="OpGroupNonUniformUMin",e[e.OpGroupNonUniformFMin=355]="OpGroupNonUniformFMin",e[e.OpGroupNonUniformSMax=356]="OpGroupNonUniformSMax",e[e.OpGroupNonUniformUMax=357]="OpGroupNonUniformUMax",e[e.OpGroupNonUniformFMax=358]="OpGroupNonUniformFMax",e[e.OpGroupNonUniformBitwiseAnd=359]="OpGroupNonUniformBitwiseAnd",e[e.OpGroupNonUniformBitwiseOr=360]="OpGroupNonUniformBitwiseOr",e[e.OpGroupNonUniformBitwiseXor=361]="OpGroupNonUniformBitwiseXor",e[e.OpGroupNonUniformLogicalAnd=362]="OpGroupNonUniformLogicalAnd",e[e.OpGroupNonUniformLogicalOr=363]="OpGroupNonUniformLogicalOr",e[e.OpGroupNonUniformLogicalXor=364]="OpGroupNonUniformLogicalXor",e[e.OpGroupNonUniformQuadBroadcast=365]="OpGroupNonUniformQuadBroadcast",e[e.OpGroupNonUniformQuadSwap=366]="OpGroupNonUniformQuadSwap",e[e.OpCopyLogical=400]="OpCopyLogical",e[e.OpPtrEqual=401]="OpPtrEqual",e[e.OpPtrNotEqual=402]="OpPtrNotEqual",e[e.OpPtrDiff=403]="OpPtrDiff",e[e.OpTerminateInvocation=4416]="OpTerminateInvocation",e[e.OpSubgroupBallotKHR=4421]="OpSubgroupBallotKHR",e[e.OpSubgroupFirstInvocationKHR=4422]="OpSubgroupFirstInvocationKHR",e[e.OpSubgroupAllKHR=4428]="OpSubgroupAllKHR",e[e.OpSubgroupAnyKHR=4429]="OpSubgroupAnyKHR",e[e.OpSubgroupAllEqualKHR=4430]="OpSubgroupAllEqualKHR",e[e.OpSubgroupReadInvocationKHR=4432]="OpSubgroupReadInvocationKHR",e[e.OpTraceRayKHR=4445]="OpTraceRayKHR",e[e.OpExecuteCallableKHR=4446]="OpExecuteCallableKHR",e[e.OpConvertUToAccelerationStructureKHR=4447]="OpConvertUToAccelerationStructureKHR",e[e.OpIgnoreIntersectionKHR=4448]="OpIgnoreIntersectionKHR",e[e.OpTerminateRayKHR=4449]="OpTerminateRayKHR",e[e.OpTypeRayQueryKHR=4472]="OpTypeRayQueryKHR",e[e.OpRayQueryInitializeKHR=4473]="OpRayQueryInitializeKHR",e[e.OpRayQueryTerminateKHR=4474]="OpRayQueryTerminateKHR",e[e.OpRayQueryGenerateIntersectionKHR=4475]="OpRayQueryGenerateIntersectionKHR",e[e.OpRayQueryConfirmIntersectionKHR=4476]="OpRayQueryConfirmIntersectionKHR",e[e.OpRayQueryProceedKHR=4477]="OpRayQueryProceedKHR",e[e.OpRayQueryGetIntersectionTypeKHR=4479]="OpRayQueryGetIntersectionTypeKHR",e[e.OpGroupIAddNonUniformAMD=5e3]="OpGroupIAddNonUniformAMD",e[e.OpGroupFAddNonUniformAMD=5001]="OpGroupFAddNonUniformAMD",e[e.OpGroupFMinNonUniformAMD=5002]="OpGroupFMinNonUniformAMD",e[e.OpGroupUMinNonUniformAMD=5003]="OpGroupUMinNonUniformAMD",e[e.OpGroupSMinNonUniformAMD=5004]="OpGroupSMinNonUniformAMD",e[e.OpGroupFMaxNonUniformAMD=5005]="OpGroupFMaxNonUniformAMD",e[e.OpGroupUMaxNonUniformAMD=5006]="OpGroupUMaxNonUniformAMD",e[e.OpGroupSMaxNonUniformAMD=5007]="OpGroupSMaxNonUniformAMD",e[e.OpFragmentMaskFetchAMD=5011]="OpFragmentMaskFetchAMD",e[e.OpFragmentFetchAMD=5012]="OpFragmentFetchAMD",e[e.OpReadClockKHR=5056]="OpReadClockKHR",e[e.OpImageSampleFootprintNV=5283]="OpImageSampleFootprintNV",e[e.OpGroupNonUniformPartitionNV=5296]="OpGroupNonUniformPartitionNV",e[e.OpWritePackedPrimitiveIndices4x8NV=5299]="OpWritePackedPrimitiveIndices4x8NV",e[e.OpReportIntersectionKHR=5334]="OpReportIntersectionKHR",e[e.OpReportIntersectionNV=5334]="OpReportIntersectionNV",e[e.OpIgnoreIntersectionNV=5335]="OpIgnoreIntersectionNV",e[e.OpTerminateRayNV=5336]="OpTerminateRayNV",e[e.OpTraceNV=5337]="OpTraceNV",e[e.OpTypeAccelerationStructureKHR=5341]="OpTypeAccelerationStructureKHR",e[e.OpTypeAccelerationStructureNV=5341]="OpTypeAccelerationStructureNV",e[e.OpExecuteCallableNV=5344]="OpExecuteCallableNV",e[e.OpTypeCooperativeMatrixNV=5358]="OpTypeCooperativeMatrixNV",e[e.OpCooperativeMatrixLoadNV=5359]="OpCooperativeMatrixLoadNV",e[e.OpCooperativeMatrixStoreNV=5360]="OpCooperativeMatrixStoreNV",e[e.OpCooperativeMatrixMulAddNV=5361]="OpCooperativeMatrixMulAddNV",e[e.OpCooperativeMatrixLengthNV=5362]="OpCooperativeMatrixLengthNV",e[e.OpBeginInvocationInterlockEXT=5364]="OpBeginInvocationInterlockEXT",e[e.OpEndInvocationInterlockEXT=5365]="OpEndInvocationInterlockEXT",e[e.OpDemoteToHelperInvocationEXT=5380]="OpDemoteToHelperInvocationEXT",e[e.OpIsHelperInvocationEXT=5381]="OpIsHelperInvocationEXT",e[e.OpSubgroupShuffleINTEL=5571]="OpSubgroupShuffleINTEL",e[e.OpSubgroupShuffleDownINTEL=5572]="OpSubgroupShuffleDownINTEL",e[e.OpSubgroupShuffleUpINTEL=5573]="OpSubgroupShuffleUpINTEL",e[e.OpSubgroupShuffleXorINTEL=5574]="OpSubgroupShuffleXorINTEL",e[e.OpSubgroupBlockReadINTEL=5575]="OpSubgroupBlockReadINTEL",e[e.OpSubgroupBlockWriteINTEL=5576]="OpSubgroupBlockWriteINTEL",e[e.OpSubgroupImageBlockReadINTEL=5577]="OpSubgroupImageBlockReadINTEL",e[e.OpSubgroupImageBlockWriteINTEL=5578]="OpSubgroupImageBlockWriteINTEL",e[e.OpSubgroupImageMediaBlockReadINTEL=5580]="OpSubgroupImageMediaBlockReadINTEL",e[e.OpSubgroupImageMediaBlockWriteINTEL=5581]="OpSubgroupImageMediaBlockWriteINTEL",e[e.OpUCountLeadingZerosINTEL=5585]="OpUCountLeadingZerosINTEL",e[e.OpUCountTrailingZerosINTEL=5586]="OpUCountTrailingZerosINTEL",e[e.OpAbsISubINTEL=5587]="OpAbsISubINTEL",e[e.OpAbsUSubINTEL=5588]="OpAbsUSubINTEL",e[e.OpIAddSatINTEL=5589]="OpIAddSatINTEL",e[e.OpUAddSatINTEL=5590]="OpUAddSatINTEL",e[e.OpIAverageINTEL=5591]="OpIAverageINTEL",e[e.OpUAverageINTEL=5592]="OpUAverageINTEL",e[e.OpIAverageRoundedINTEL=5593]="OpIAverageRoundedINTEL",e[e.OpUAverageRoundedINTEL=5594]="OpUAverageRoundedINTEL",e[e.OpISubSatINTEL=5595]="OpISubSatINTEL",e[e.OpUSubSatINTEL=5596]="OpUSubSatINTEL",e[e.OpIMul32x16INTEL=5597]="OpIMul32x16INTEL",e[e.OpUMul32x16INTEL=5598]="OpUMul32x16INTEL",e[e.OpFunctionPointerINTEL=5600]="OpFunctionPointerINTEL",e[e.OpFunctionPointerCallINTEL=5601]="OpFunctionPointerCallINTEL",e[e.OpDecorateString=5632]="OpDecorateString",e[e.OpDecorateStringGOOGLE=5632]="OpDecorateStringGOOGLE",e[e.OpMemberDecorateString=5633]="OpMemberDecorateString",e[e.OpMemberDecorateStringGOOGLE=5633]="OpMemberDecorateStringGOOGLE",e[e.OpVmeImageINTEL=5699]="OpVmeImageINTEL",e[e.OpTypeVmeImageINTEL=5700]="OpTypeVmeImageINTEL",e[e.OpTypeAvcImePayloadINTEL=5701]="OpTypeAvcImePayloadINTEL",e[e.OpTypeAvcRefPayloadINTEL=5702]="OpTypeAvcRefPayloadINTEL",e[e.OpTypeAvcSicPayloadINTEL=5703]="OpTypeAvcSicPayloadINTEL",e[e.OpTypeAvcMcePayloadINTEL=5704]="OpTypeAvcMcePayloadINTEL",e[e.OpTypeAvcMceResultINTEL=5705]="OpTypeAvcMceResultINTEL",e[e.OpTypeAvcImeResultINTEL=5706]="OpTypeAvcImeResultINTEL",e[e.OpTypeAvcImeResultSingleReferenceStreamoutINTEL=5707]="OpTypeAvcImeResultSingleReferenceStreamoutINTEL",e[e.OpTypeAvcImeResultDualReferenceStreamoutINTEL=5708]="OpTypeAvcImeResultDualReferenceStreamoutINTEL",e[e.OpTypeAvcImeSingleReferenceStreaminINTEL=5709]="OpTypeAvcImeSingleReferenceStreaminINTEL",e[e.OpTypeAvcImeDualReferenceStreaminINTEL=5710]="OpTypeAvcImeDualReferenceStreaminINTEL",e[e.OpTypeAvcRefResultINTEL=5711]="OpTypeAvcRefResultINTEL",e[e.OpTypeAvcSicResultINTEL=5712]="OpTypeAvcSicResultINTEL",e[e.OpSubgroupAvcMceGetDefaultInterBaseMultiReferencePenaltyINTEL=5713]="OpSubgroupAvcMceGetDefaultInterBaseMultiReferencePenaltyINTEL",e[e.OpSubgroupAvcMceSetInterBaseMultiReferencePenaltyINTEL=5714]="OpSubgroupAvcMceSetInterBaseMultiReferencePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultInterShapePenaltyINTEL=5715]="OpSubgroupAvcMceGetDefaultInterShapePenaltyINTEL",e[e.OpSubgroupAvcMceSetInterShapePenaltyINTEL=5716]="OpSubgroupAvcMceSetInterShapePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultInterDirectionPenaltyINTEL=5717]="OpSubgroupAvcMceGetDefaultInterDirectionPenaltyINTEL",e[e.OpSubgroupAvcMceSetInterDirectionPenaltyINTEL=5718]="OpSubgroupAvcMceSetInterDirectionPenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultIntraLumaShapePenaltyINTEL=5719]="OpSubgroupAvcMceGetDefaultIntraLumaShapePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultInterMotionVectorCostTableINTEL=5720]="OpSubgroupAvcMceGetDefaultInterMotionVectorCostTableINTEL",e[e.OpSubgroupAvcMceGetDefaultHighPenaltyCostTableINTEL=5721]="OpSubgroupAvcMceGetDefaultHighPenaltyCostTableINTEL",e[e.OpSubgroupAvcMceGetDefaultMediumPenaltyCostTableINTEL=5722]="OpSubgroupAvcMceGetDefaultMediumPenaltyCostTableINTEL",e[e.OpSubgroupAvcMceGetDefaultLowPenaltyCostTableINTEL=5723]="OpSubgroupAvcMceGetDefaultLowPenaltyCostTableINTEL",e[e.OpSubgroupAvcMceSetMotionVectorCostFunctionINTEL=5724]="OpSubgroupAvcMceSetMotionVectorCostFunctionINTEL",e[e.OpSubgroupAvcMceGetDefaultIntraLumaModePenaltyINTEL=5725]="OpSubgroupAvcMceGetDefaultIntraLumaModePenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultNonDcLumaIntraPenaltyINTEL=5726]="OpSubgroupAvcMceGetDefaultNonDcLumaIntraPenaltyINTEL",e[e.OpSubgroupAvcMceGetDefaultIntraChromaModeBasePenaltyINTEL=5727]="OpSubgroupAvcMceGetDefaultIntraChromaModeBasePenaltyINTEL",e[e.OpSubgroupAvcMceSetAcOnlyHaarINTEL=5728]="OpSubgroupAvcMceSetAcOnlyHaarINTEL",e[e.OpSubgroupAvcMceSetSourceInterlacedFieldPolarityINTEL=5729]="OpSubgroupAvcMceSetSourceInterlacedFieldPolarityINTEL",e[e.OpSubgroupAvcMceSetSingleReferenceInterlacedFieldPolarityINTEL=5730]="OpSubgroupAvcMceSetSingleReferenceInterlacedFieldPolarityINTEL",e[e.OpSubgroupAvcMceSetDualReferenceInterlacedFieldPolaritiesINTEL=5731]="OpSubgroupAvcMceSetDualReferenceInterlacedFieldPolaritiesINTEL",e[e.OpSubgroupAvcMceConvertToImePayloadINTEL=5732]="OpSubgroupAvcMceConvertToImePayloadINTEL",e[e.OpSubgroupAvcMceConvertToImeResultINTEL=5733]="OpSubgroupAvcMceConvertToImeResultINTEL",e[e.OpSubgroupAvcMceConvertToRefPayloadINTEL=5734]="OpSubgroupAvcMceConvertToRefPayloadINTEL",e[e.OpSubgroupAvcMceConvertToRefResultINTEL=5735]="OpSubgroupAvcMceConvertToRefResultINTEL",e[e.OpSubgroupAvcMceConvertToSicPayloadINTEL=5736]="OpSubgroupAvcMceConvertToSicPayloadINTEL",e[e.OpSubgroupAvcMceConvertToSicResultINTEL=5737]="OpSubgroupAvcMceConvertToSicResultINTEL",e[e.OpSubgroupAvcMceGetMotionVectorsINTEL=5738]="OpSubgroupAvcMceGetMotionVectorsINTEL",e[e.OpSubgroupAvcMceGetInterDistortionsINTEL=5739]="OpSubgroupAvcMceGetInterDistortionsINTEL",e[e.OpSubgroupAvcMceGetBestInterDistortionsINTEL=5740]="OpSubgroupAvcMceGetBestInterDistortionsINTEL",e[e.OpSubgroupAvcMceGetInterMajorShapeINTEL=5741]="OpSubgroupAvcMceGetInterMajorShapeINTEL",e[e.OpSubgroupAvcMceGetInterMinorShapeINTEL=5742]="OpSubgroupAvcMceGetInterMinorShapeINTEL",e[e.OpSubgroupAvcMceGetInterDirectionsINTEL=5743]="OpSubgroupAvcMceGetInterDirectionsINTEL",e[e.OpSubgroupAvcMceGetInterMotionVectorCountINTEL=5744]="OpSubgroupAvcMceGetInterMotionVectorCountINTEL",e[e.OpSubgroupAvcMceGetInterReferenceIdsINTEL=5745]="OpSubgroupAvcMceGetInterReferenceIdsINTEL",e[e.OpSubgroupAvcMceGetInterReferenceInterlacedFieldPolaritiesINTEL=5746]="OpSubgroupAvcMceGetInterReferenceInterlacedFieldPolaritiesINTEL",e[e.OpSubgroupAvcImeInitializeINTEL=5747]="OpSubgroupAvcImeInitializeINTEL",e[e.OpSubgroupAvcImeSetSingleReferenceINTEL=5748]="OpSubgroupAvcImeSetSingleReferenceINTEL",e[e.OpSubgroupAvcImeSetDualReferenceINTEL=5749]="OpSubgroupAvcImeSetDualReferenceINTEL",e[e.OpSubgroupAvcImeRefWindowSizeINTEL=5750]="OpSubgroupAvcImeRefWindowSizeINTEL",e[e.OpSubgroupAvcImeAdjustRefOffsetINTEL=5751]="OpSubgroupAvcImeAdjustRefOffsetINTEL",e[e.OpSubgroupAvcImeConvertToMcePayloadINTEL=5752]="OpSubgroupAvcImeConvertToMcePayloadINTEL",e[e.OpSubgroupAvcImeSetMaxMotionVectorCountINTEL=5753]="OpSubgroupAvcImeSetMaxMotionVectorCountINTEL",e[e.OpSubgroupAvcImeSetUnidirectionalMixDisableINTEL=5754]="OpSubgroupAvcImeSetUnidirectionalMixDisableINTEL",e[e.OpSubgroupAvcImeSetEarlySearchTerminationThresholdINTEL=5755]="OpSubgroupAvcImeSetEarlySearchTerminationThresholdINTEL",e[e.OpSubgroupAvcImeSetWeightedSadINTEL=5756]="OpSubgroupAvcImeSetWeightedSadINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceINTEL=5757]="OpSubgroupAvcImeEvaluateWithSingleReferenceINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceINTEL=5758]="OpSubgroupAvcImeEvaluateWithDualReferenceINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminINTEL=5759]="OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceStreaminINTEL=5760]="OpSubgroupAvcImeEvaluateWithDualReferenceStreaminINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceStreamoutINTEL=5761]="OpSubgroupAvcImeEvaluateWithSingleReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceStreamoutINTEL=5762]="OpSubgroupAvcImeEvaluateWithDualReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminoutINTEL=5763]="OpSubgroupAvcImeEvaluateWithSingleReferenceStreaminoutINTEL",e[e.OpSubgroupAvcImeEvaluateWithDualReferenceStreaminoutINTEL=5764]="OpSubgroupAvcImeEvaluateWithDualReferenceStreaminoutINTEL",e[e.OpSubgroupAvcImeConvertToMceResultINTEL=5765]="OpSubgroupAvcImeConvertToMceResultINTEL",e[e.OpSubgroupAvcImeGetSingleReferenceStreaminINTEL=5766]="OpSubgroupAvcImeGetSingleReferenceStreaminINTEL",e[e.OpSubgroupAvcImeGetDualReferenceStreaminINTEL=5767]="OpSubgroupAvcImeGetDualReferenceStreaminINTEL",e[e.OpSubgroupAvcImeStripSingleReferenceStreamoutINTEL=5768]="OpSubgroupAvcImeStripSingleReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeStripDualReferenceStreamoutINTEL=5769]="OpSubgroupAvcImeStripDualReferenceStreamoutINTEL",e[e.OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeMotionVectorsINTEL=5770]="OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeMotionVectorsINTEL",e[e.OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeDistortionsINTEL=5771]="OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeDistortionsINTEL",e[e.OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeReferenceIdsINTEL=5772]="OpSubgroupAvcImeGetStreamoutSingleReferenceMajorShapeReferenceIdsINTEL",e[e.OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeMotionVectorsINTEL=5773]="OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeMotionVectorsINTEL",e[e.OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeDistortionsINTEL=5774]="OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeDistortionsINTEL",e[e.OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeReferenceIdsINTEL=5775]="OpSubgroupAvcImeGetStreamoutDualReferenceMajorShapeReferenceIdsINTEL",e[e.OpSubgroupAvcImeGetBorderReachedINTEL=5776]="OpSubgroupAvcImeGetBorderReachedINTEL",e[e.OpSubgroupAvcImeGetTruncatedSearchIndicationINTEL=5777]="OpSubgroupAvcImeGetTruncatedSearchIndicationINTEL",e[e.OpSubgroupAvcImeGetUnidirectionalEarlySearchTerminationINTEL=5778]="OpSubgroupAvcImeGetUnidirectionalEarlySearchTerminationINTEL",e[e.OpSubgroupAvcImeGetWeightingPatternMinimumMotionVectorINTEL=5779]="OpSubgroupAvcImeGetWeightingPatternMinimumMotionVectorINTEL",e[e.OpSubgroupAvcImeGetWeightingPatternMinimumDistortionINTEL=5780]="OpSubgroupAvcImeGetWeightingPatternMinimumDistortionINTEL",e[e.OpSubgroupAvcFmeInitializeINTEL=5781]="OpSubgroupAvcFmeInitializeINTEL",e[e.OpSubgroupAvcBmeInitializeINTEL=5782]="OpSubgroupAvcBmeInitializeINTEL",e[e.OpSubgroupAvcRefConvertToMcePayloadINTEL=5783]="OpSubgroupAvcRefConvertToMcePayloadINTEL",e[e.OpSubgroupAvcRefSetBidirectionalMixDisableINTEL=5784]="OpSubgroupAvcRefSetBidirectionalMixDisableINTEL",e[e.OpSubgroupAvcRefSetBilinearFilterEnableINTEL=5785]="OpSubgroupAvcRefSetBilinearFilterEnableINTEL",e[e.OpSubgroupAvcRefEvaluateWithSingleReferenceINTEL=5786]="OpSubgroupAvcRefEvaluateWithSingleReferenceINTEL",e[e.OpSubgroupAvcRefEvaluateWithDualReferenceINTEL=5787]="OpSubgroupAvcRefEvaluateWithDualReferenceINTEL",e[e.OpSubgroupAvcRefEvaluateWithMultiReferenceINTEL=5788]="OpSubgroupAvcRefEvaluateWithMultiReferenceINTEL",e[e.OpSubgroupAvcRefEvaluateWithMultiReferenceInterlacedINTEL=5789]="OpSubgroupAvcRefEvaluateWithMultiReferenceInterlacedINTEL",e[e.OpSubgroupAvcRefConvertToMceResultINTEL=5790]="OpSubgroupAvcRefConvertToMceResultINTEL",e[e.OpSubgroupAvcSicInitializeINTEL=5791]="OpSubgroupAvcSicInitializeINTEL",e[e.OpSubgroupAvcSicConfigureSkcINTEL=5792]="OpSubgroupAvcSicConfigureSkcINTEL",e[e.OpSubgroupAvcSicConfigureIpeLumaINTEL=5793]="OpSubgroupAvcSicConfigureIpeLumaINTEL",e[e.OpSubgroupAvcSicConfigureIpeLumaChromaINTEL=5794]="OpSubgroupAvcSicConfigureIpeLumaChromaINTEL",e[e.OpSubgroupAvcSicGetMotionVectorMaskINTEL=5795]="OpSubgroupAvcSicGetMotionVectorMaskINTEL",e[e.OpSubgroupAvcSicConvertToMcePayloadINTEL=5796]="OpSubgroupAvcSicConvertToMcePayloadINTEL",e[e.OpSubgroupAvcSicSetIntraLumaShapePenaltyINTEL=5797]="OpSubgroupAvcSicSetIntraLumaShapePenaltyINTEL",e[e.OpSubgroupAvcSicSetIntraLumaModeCostFunctionINTEL=5798]="OpSubgroupAvcSicSetIntraLumaModeCostFunctionINTEL",e[e.OpSubgroupAvcSicSetIntraChromaModeCostFunctionINTEL=5799]="OpSubgroupAvcSicSetIntraChromaModeCostFunctionINTEL",e[e.OpSubgroupAvcSicSetBilinearFilterEnableINTEL=5800]="OpSubgroupAvcSicSetBilinearFilterEnableINTEL",e[e.OpSubgroupAvcSicSetSkcForwardTransformEnableINTEL=5801]="OpSubgroupAvcSicSetSkcForwardTransformEnableINTEL",e[e.OpSubgroupAvcSicSetBlockBasedRawSkipSadINTEL=5802]="OpSubgroupAvcSicSetBlockBasedRawSkipSadINTEL",e[e.OpSubgroupAvcSicEvaluateIpeINTEL=5803]="OpSubgroupAvcSicEvaluateIpeINTEL",e[e.OpSubgroupAvcSicEvaluateWithSingleReferenceINTEL=5804]="OpSubgroupAvcSicEvaluateWithSingleReferenceINTEL",e[e.OpSubgroupAvcSicEvaluateWithDualReferenceINTEL=5805]="OpSubgroupAvcSicEvaluateWithDualReferenceINTEL",e[e.OpSubgroupAvcSicEvaluateWithMultiReferenceINTEL=5806]="OpSubgroupAvcSicEvaluateWithMultiReferenceINTEL",e[e.OpSubgroupAvcSicEvaluateWithMultiReferenceInterlacedINTEL=5807]="OpSubgroupAvcSicEvaluateWithMultiReferenceInterlacedINTEL",e[e.OpSubgroupAvcSicConvertToMceResultINTEL=5808]="OpSubgroupAvcSicConvertToMceResultINTEL",e[e.OpSubgroupAvcSicGetIpeLumaShapeINTEL=5809]="OpSubgroupAvcSicGetIpeLumaShapeINTEL",e[e.OpSubgroupAvcSicGetBestIpeLumaDistortionINTEL=5810]="OpSubgroupAvcSicGetBestIpeLumaDistortionINTEL",e[e.OpSubgroupAvcSicGetBestIpeChromaDistortionINTEL=5811]="OpSubgroupAvcSicGetBestIpeChromaDistortionINTEL",e[e.OpSubgroupAvcSicGetPackedIpeLumaModesINTEL=5812]="OpSubgroupAvcSicGetPackedIpeLumaModesINTEL",e[e.OpSubgroupAvcSicGetIpeChromaModeINTEL=5813]="OpSubgroupAvcSicGetIpeChromaModeINTEL",e[e.OpSubgroupAvcSicGetPackedSkcLumaCountThresholdINTEL=5814]="OpSubgroupAvcSicGetPackedSkcLumaCountThresholdINTEL",e[e.OpSubgroupAvcSicGetPackedSkcLumaSumThresholdINTEL=5815]="OpSubgroupAvcSicGetPackedSkcLumaSumThresholdINTEL",e[e.OpSubgroupAvcSicGetInterRawSadsINTEL=5816]="OpSubgroupAvcSicGetInterRawSadsINTEL",e[e.OpLoopControlINTEL=5887]="OpLoopControlINTEL",e[e.OpReadPipeBlockingINTEL=5946]="OpReadPipeBlockingINTEL",e[e.OpWritePipeBlockingINTEL=5947]="OpWritePipeBlockingINTEL",e[e.OpFPGARegINTEL=5949]="OpFPGARegINTEL",e[e.OpRayQueryGetRayTMinKHR=6016]="OpRayQueryGetRayTMinKHR",e[e.OpRayQueryGetRayFlagsKHR=6017]="OpRayQueryGetRayFlagsKHR",e[e.OpRayQueryGetIntersectionTKHR=6018]="OpRayQueryGetIntersectionTKHR",e[e.OpRayQueryGetIntersectionInstanceCustomIndexKHR=6019]="OpRayQueryGetIntersectionInstanceCustomIndexKHR",e[e.OpRayQueryGetIntersectionInstanceIdKHR=6020]="OpRayQueryGetIntersectionInstanceIdKHR",e[e.OpRayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR=6021]="OpRayQueryGetIntersectionInstanceShaderBindingTableRecordOffsetKHR",e[e.OpRayQueryGetIntersectionGeometryIndexKHR=6022]="OpRayQueryGetIntersectionGeometryIndexKHR",e[e.OpRayQueryGetIntersectionPrimitiveIndexKHR=6023]="OpRayQueryGetIntersectionPrimitiveIndexKHR",e[e.OpRayQueryGetIntersectionBarycentricsKHR=6024]="OpRayQueryGetIntersectionBarycentricsKHR",e[e.OpRayQueryGetIntersectionFrontFaceKHR=6025]="OpRayQueryGetIntersectionFrontFaceKHR",e[e.OpRayQueryGetIntersectionCandidateAABBOpaqueKHR=6026]="OpRayQueryGetIntersectionCandidateAABBOpaqueKHR",e[e.OpRayQueryGetIntersectionObjectRayDirectionKHR=6027]="OpRayQueryGetIntersectionObjectRayDirectionKHR",e[e.OpRayQueryGetIntersectionObjectRayOriginKHR=6028]="OpRayQueryGetIntersectionObjectRayOriginKHR",e[e.OpRayQueryGetWorldRayDirectionKHR=6029]="OpRayQueryGetWorldRayDirectionKHR",e[e.OpRayQueryGetWorldRayOriginKHR=6030]="OpRayQueryGetWorldRayOriginKHR",e[e.OpRayQueryGetIntersectionObjectToWorldKHR=6031]="OpRayQueryGetIntersectionObjectToWorldKHR",e[e.OpRayQueryGetIntersectionWorldToObjectKHR=6032]="OpRayQueryGetIntersectionWorldToObjectKHR",e[e.OpAtomicFAddEXT=6035]="OpAtomicFAddEXT",e[e.OpMax=2147483647]="OpMax"}(se||(se={})),function(e){e[e.SPIRVCrossDecorationBufferBlockRepacked=0]="SPIRVCrossDecorationBufferBlockRepacked",e[e.SPIRVCrossDecorationPhysicalTypeID=1]="SPIRVCrossDecorationPhysicalTypeID",e[e.SPIRVCrossDecorationPhysicalTypePacked=2]="SPIRVCrossDecorationPhysicalTypePacked",e[e.SPIRVCrossDecorationPaddingTarget=3]="SPIRVCrossDecorationPaddingTarget",e[e.SPIRVCrossDecorationInterfaceMemberIndex=4]="SPIRVCrossDecorationInterfaceMemberIndex",e[e.SPIRVCrossDecorationInterfaceOrigID=5]="SPIRVCrossDecorationInterfaceOrigID",e[e.SPIRVCrossDecorationResourceIndexPrimary=6]="SPIRVCrossDecorationResourceIndexPrimary",e[e.SPIRVCrossDecorationResourceIndexSecondary=7]="SPIRVCrossDecorationResourceIndexSecondary",e[e.SPIRVCrossDecorationResourceIndexTertiary=8]="SPIRVCrossDecorationResourceIndexTertiary",e[e.SPIRVCrossDecorationResourceIndexQuaternary=9]="SPIRVCrossDecorationResourceIndexQuaternary",e[e.SPIRVCrossDecorationExplicitOffset=10]="SPIRVCrossDecorationExplicitOffset",e[e.SPIRVCrossDecorationBuiltInDispatchBase=11]="SPIRVCrossDecorationBuiltInDispatchBase",e[e.SPIRVCrossDecorationDynamicImageSampler=12]="SPIRVCrossDecorationDynamicImageSampler",e[e.SPIRVCrossDecorationBuiltInStageInputSize=13]="SPIRVCrossDecorationBuiltInStageInputSize",e[e.SPIRVCrossDecorationTessIOOriginalInputTypeID=14]="SPIRVCrossDecorationTessIOOriginalInputTypeID",e[e.SPIRVCrossDecorationInterpolantComponentExpr=15]="SPIRVCrossDecorationInterpolantComponentExpr",e[e.SPIRVCrossDecorationCount=16]="SPIRVCrossDecorationCount"}(ce||(ce={}));var _e,ue=function(){this.flags=new le,this.values=new Uint32Array(ce.SPIRVCrossDecorationCount)},he=function(){this.decoration_flags=new le,this.builtin_type=P.BuiltInMax,this.location=0,this.component=0,this.set=0,this.binding=0,this.offset=0,this.xfb_buffer=0,this.xfb_stride=0,this.stream=0,this.array_stride=0,this.matrix_stride=0,this.input_attachment=0,this.spec_id=0,this.index=0,this.fp_rounding_mode=w.FPRoundingModeMax,this.builtin=!1,this.extended=new ue},de=function(){this.decoration=new he,this.members=[],this.decoration_word_offset=[],this.hlsl_is_magic_counter_buffer=!1,this.hlsl_magic_counter_buffer=0},fe=function(){function e(e,t){this.owner=e,this.propName=t}return e.prototype.get=function(){return this.owner[this.propName]},e.prototype.set=function(e){this.owner[this.propName]=e},e}(),me=function(){function e(){this.self=0}return e.prototype.clone=function(e){var t=e.allocate(this);return h(this,t),t},e}(),ge=function(e){function r(t,i,a,o){void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0);var n=e.call(this)||this;return n.basetype=0,n.storage=v.StorageClassGeneric,n.decoration=0,n.initializer=0,n.basevariable=0,n.compat_builtin=!1,n.statically_assigned=!1,n.static_expression=0,n.dependees=[],n.forwardable=!0,n.deferred_declaration=!1,n.phi_variable=!1,n.allocate_temporary_copy=!1,n.remapped_variable=!1,n.remapped_components=0,n.dominator=0,n.loop_variable=!1,n.loop_variable_enable=!1,n.parameter=null,t instanceof r?h(t,n):(n.basetype=t,n.storage=i,n.initializer=a,n.basevariable=o),n}return a(r,e),r.type=t.TypeVariable,r}(me);!function(e){e[e.Unknown=0]="Unknown",e[e.Void=1]="Void",e[e.Boolean=2]="Boolean",e[e.SByte=3]="SByte",e[e.UByte=4]="UByte",e[e.Short=5]="Short",e[e.UShort=6]="UShort",e[e.Int=7]="Int",e[e.UInt=8]="UInt",e[e.Int64=9]="Int64",e[e.UInt64=10]="UInt64",e[e.AtomicCounter=11]="AtomicCounter",e[e.Half=12]="Half",e[e.Float=13]="Float",e[e.Double=14]="Double",e[e.Struct=15]="Struct",e[e.Image=16]="Image",e[e.SampledImage=17]="SampledImage",e[e.Sampler=18]="Sampler",e[e.AccelerationStructure=19]="AccelerationStructure",e[e.RayQuery=20]="RayQuery",e[e.ControlPointArray=21]="ControlPointArray",e[e.Interpolant=22]="Interpolant",e[e.Char=23]="Char"}(_e||(_e={}));var be,ye,Se,ve,Ie,Oe=function(){function e(){}return e.prototype.clone=function(){return d(e,this)},e.prototype.equals=function(e){return this.type===e.type&&this.dim===e.dim&&this.depth===e.depth&&this.arrayed===e.arrayed&&this.ms===e.ms&&this.sampled===e.sampled&&this.format===e.format&&this.access===e.access},e}(),xe=function(e){function r(t){var r=e.call(this)||this;return r.basetype=_e.Unknown,r.width=0,r.vecsize=1,r.columns=1,r.array=[],r.array_size_literal=[],r.pointer_depth=0,r.pointer=!1,r.forward_pointer=!1,r.storage=v.StorageClassGeneric,r.member_types=[],r.member_type_index_redirection=[],r.image=new Oe,r.type_alias=0,r.parent_type=0,r.member_name_cache=new Set,t&&h(t,r),r}return a(r,e),r.type=t.TypeType,r}(me),ke=new DataView(new ArrayBuffer(4)),Ce=function(){function e(){this.value=new ArrayBuffer(16),this._dataView=new DataView(this.value)}return Object.defineProperty(e.prototype,"u32",{get:function(){return this._dataView.getUint32(0)},set:function(e){this._dataView.setUint32(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i32",{get:function(){return this._dataView.getInt32(0)},set:function(e){this._dataView.setInt32(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f32",{get:function(){return this._dataView.getFloat32(0)},set:function(e){this._dataView.setFloat32(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"u64",{get:function(){return this._dataView.getBigUint64(0)},set:function(e){this._dataView.setBigUint64(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"i64",{get:function(){return this._dataView.getBigInt64(0)},set:function(e){this._dataView.setBigInt64(0,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this._dataView.getFloat64(0)},set:function(e){this._dataView.setFloat64(0,e)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return d(e,this)},e}(),Ee=function(){function e(){this.vecsize=1,this.r=n(4,(function(){return new Ce})),this.id=n(4,(function(){return 0}))}return e.prototype.clone=function(){return d(e,this)},e}(),Le=function(){function e(){this.columns=1,this.c=n(4,(function(){return new Ee})),this.id=n(4,(function(){return 0}))}return e.prototype.clone=function(){return d(e,this)},e}(),Me=function(e){function r(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var a=e.call(this)||this;return a.constant_type=0,a.m=new Le,a.specialization=!1,a.is_used_as_array_length=!1,a.is_used_as_lut=!1,a.subconstants=new Uint32Array,a.specialization_constant_macro_name="",0===t.length||(1===t.length?t[0]instanceof r?h(t[0],a):a._construct(t[0]):"bigint"==typeof t[1]?a._constructScalar64(t[0],t[1],t[2]):"number"==typeof t[1]?a._constructScalar32(t[0],t[1],t[2]):"number"==typeof t[1][0]?a._constructArray(t[0],t[1],t[2],t[3]):a._constructVecMat(t[0],t[1],t[2],t[3])),a}return a(r,e),r.prototype.f16_to_f32=function(e){var t=e>>15&1,r=e>>10&31,i=e>>0&1023;if(0===r){if(0===i)return ke.setUint32(0,t<<31),ke.getFloat32(0);for(;0==(1024&i);)i<<=1,r--;r++,i&=-1025}else if(31===r)return 0===i?(ke.setUint32(0,t<<31|2139095040),ke.getFloat32(0)):(ke.setUint32(0,t<<31|2139095040|i<<13),ke.getFloat32(0));return r+=112,i<<=13,ke.setUint32(0,t<<31|r<<23|i),ke.getFloat32(0)},r.prototype.specialization_constant_id=function(e,t){return void 0===t?this.m.id[e]:this.m.c[e].id[t]},r.prototype.scalar=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].u32},r.prototype.scalar_i16=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),65535&this.m.c[e].r[t].u32},r.prototype.scalar_u16=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),65535&this.m.c[e].r[t].u32},r.prototype.scalar_i8=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),255&this.m.c[e].r[t].u32},r.prototype.scalar_u8=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),255&this.m.c[e].r[t].u32},r.prototype.scalar_f16=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.f16_to_f32(this.scalar_u16(e,t))},r.prototype.scalar_f32=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].f32},r.prototype.scalar_i32=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].i32},r.prototype.scalar_f64=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].f64},r.prototype.scalar_i64=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].i64},r.prototype.scalar_u64=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),this.m.c[e].r[t].u64},r.prototype.vector=function(){return this.m.c[0]},r.prototype.vector_size=function(){return this.m.c[0].vecsize},r.prototype.columns=function(){return this.m.columns},r.prototype.make_null=function(e){this.m=new Le,this.m.columns=e.columns;for(var t=0,r=this.m.c;t<r.length;t++){r[t].vecsize=e.vecsize}},r.prototype.constant_is_null=function(){if(this.specialization)return!1;if(0!==this.subconstants.length)return!1;for(var e=0;e<this.columns();e++)for(var t=0;t<this.vector_size();t++)if(this.scalar_u64(e,t)!==BigInt(0))return!1;return!0},r.prototype._construct=function(e){this.constant_type=e},r.prototype._constructArray=function(e,t,r,i){this.constant_type=e,this.specialization=i,this.subconstants=t},r.prototype._constructScalar32=function(e,t,r){this.constant_type=e,this.specialization=r,this.m.c[0].r[0].u32=t,this.m.c[0].vecsize=1,this.m.columns=1},r.prototype._constructScalar64=function(e,t,r){this.constant_type=e,this.specialization=r,this.m.c[0].r[0].u64=t,this.m.c[0].vecsize=1,this.m.columns=1},r.prototype._constructVecMat=function(e,t,r,i){if(this.constant_type=e,this.specialization=i,t[0].m.c[0].vecsize>1){this.m.columns=r;for(var a=0;a<r;a++)this.m.c[a]=t[a].m.c[0],t[a].specialization&&(this.m.id[a]=t[a].self)}else{this.m.c[0].vecsize=r,this.m.columns=1;for(a=0;a<r;a++)this.m.c[0].r[a]=t[a].m.c[0].r[0],t[a].specialization&&(this.m.c[0].id[a]=t[a].self)}},r.type=t.TypeConstant,r}(me),Te=function(e){function r(t,i,a){var o=e.call(this)||this;return o.arguments=[],t instanceof r?h(t,o):(o.basetype=t,o.opcode=i,o.arguments=a.slice()),o}return a(r,e),r.type=t.TypeConstantOp,r}(me),Re=function(e){function t(t){var r=e.call(this)||this;return r.classRef=t,r}return a(t,e),t.prototype.allocate=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=this.classRef).bind.apply(e,o([void 0],t,!1)))},t.prototype.deallocate=function(e){},t.prototype.deallocate_opaque=function(e){this.deallocate(e)},t.prototype.clear=function(){},t}((function(){})),we=function(){function e(e,t,r,i,a){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=!1),this.type=e,this.id=t,this.read_count=r,this.write_count=i,this.alias_global_variable=a}return e.prototype.clone=function(){return d(e,this)},e}(),De=function(){function e(e,t,r,i,a,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===o&&(o=!1),this.id=e,this.image_id=t,this.sampler_id=r,this.global_image=i,this.global_sampler=a,this.depth=o}return e.prototype.clone=function(){return d(e,this)},e}(),Ae=function(){function e(){this.file_id=0,this.line_literal=0}return e.prototype.clone=function(){return d(e,this)},e}(),Be=function(e){function r(t,i){var a=e.call(this)||this;return a.arguments=[],a.shadow_arguments=[],a.local_variables=[],a.entry_block=0,a.blocks=[],a.combined_parameters=[],a.entry_line=new Ae,a.fixup_hooks_out=[],a.fixup_hooks_in=[],a.constant_arrays_needed_on_stack=[],a.active=!1,a.flush_undeclared=!0,a.do_combined_parameters=!0,t instanceof r?h(t,a):(a.return_type=t,a.function_type=i),a}return a(r,e),r.prototype.add_local_variable=function(e){this.local_variables.push(e)},r.prototype.add_parameter=function(e,t,r){void 0===r&&(r=!1),this.arguments.push(new we(e,t,0,0,r))},r.type=t.TypeFunction,r}(me),Ne=function(e){function r(t){var i=e.call(this)||this;return i.parameter_types=[],t instanceof r?h(t,i):i.return_type=t,i}return a(r,e),r.type=t.TypeFunctionPrototype,r}(me);!function(e){e[e.Unknown=0]="Unknown",e[e.Direct=1]="Direct",e[e.Select=2]="Select",e[e.MultiSelect=3]="MultiSelect",e[e.Return=4]="Return",e[e.Unreachable=5]="Unreachable",e[e.Kill=6]="Kill",e[e.IgnoreIntersection=7]="IgnoreIntersection",e[e.TerminateRay=8]="TerminateRay"}(be||(be={})),function(e){e[e.MergeNone=0]="MergeNone",e[e.MergeLoop=1]="MergeLoop",e[e.MergeSelection=2]="MergeSelection"}(ye||(ye={})),function(e){e[e.HintNone=0]="HintNone",e[e.HintUnroll=1]="HintUnroll",e[e.HintDontUnroll=2]="HintDontUnroll",e[e.HintFlatten=3]="HintFlatten",e[e.HintDontFlatten=4]="HintDontFlatten"}(Se||(Se={})),function(e){e[e.MergeToSelectForLoop=0]="MergeToSelectForLoop",e[e.MergeToDirectForLoop=1]="MergeToDirectForLoop",e[e.MergeToSelectContinueForLoop=2]="MergeToSelectContinueForLoop"}(ve||(ve={})),function(e){e[e.ContinueNone=0]="ContinueNone",e[e.ForLoop=1]="ForLoop",e[e.WhileLoop=2]="WhileLoop",e[e.DoWhileLoop=3]="DoWhileLoop",e[e.ComplexLoop=4]="ComplexLoop"}(Ie||(Ie={}));var Pe,Ge=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.local_variable=e,this.parent=t,this.function_variable=r}return e.prototype.clone=function(){return d(e,this)},e}(),Fe=function(){function e(e,t){void 0===e&&(e=BigInt(0)),void 0===t&&(t=0),this.value=e,this.block=t}return e.prototype.clone=function(){return d(e,this)},e}(),ze=function(e){function r(t){var r=e.call(this)||this;return r.terminator=be.Unknown,r.merge=ye.MergeNone,r.hint=Se.HintNone,r.next_block=0,r.merge_block=0,r.continue_block=0,r.return_value=0,r.condition=0,r.true_block=0,r.false_block=0,r.default_block=0,r.ops=[],r.phi_variables=[],r.declare_temporary=[],r.potential_declare_temporary=[],r.cases_32bit=[],r.cases_64bit=[],r.disable_block_optimization=!1,r.complex_continue=!1,r.need_ladder_break=!1,r.ignore_phi_from_block=0,r.loop_dominator=0,r.dominated_variables=[],r.loop_variables=[],r.invalidate_expressions=[],t&&h(t,r),r}return a(r,e),r.type=t.TypeBlock,r.NoDominator=4294967295,r}(me);!function(e){e[e.Unsupported=0]="Unsupported",e[e.GLSL=1]="GLSL",e[e.SPV_debug_info=2]="SPV_debug_info",e[e.SPV_AMD_shader_ballot=3]="SPV_AMD_shader_ballot",e[e.SPV_AMD_shader_explicit_vertex_parameter=4]="SPV_AMD_shader_explicit_vertex_parameter",e[e.SPV_AMD_shader_trinary_minmax=5]="SPV_AMD_shader_trinary_minmax",e[e.SPV_AMD_gcn_shader=6]="SPV_AMD_gcn_shader"}(Pe||(Pe={}));var Ue,Ve=function(e){function r(t){var i=e.call(this)||this;return t instanceof r?h(t,i):i.ext=t,i}return a(r,e),r.type=t.TypeExtension,r}(me),He=function(e){function r(t,i,a){void 0===t&&(t="");var o=e.call(this)||this;return o.base_expression=0,o.expression="",o.expression_type=0,o.loaded_from=0,o.immutable=!1,o.need_transpose=!1,o.access_chain=!1,o.expression_dependencies=[],o.implied_read_expressions=[],o.emitted_loop_level=0,t instanceof r?h(t,o):(o.expression=t,o.expression_type=i,o.immutable=a),o}return a(r,e),r.type=t.TypeExpression,r}(me),Ke=function(e){function r(t,i,a){var o=e.call(this)||this;return t instanceof r?h(t,o):(o.combined_type=t,o.image=i,o.sampler=a),o}return a(r,e),r.type=t.TypeCombinedImageSampler,r}(me),qe=function(e){function r(t,i,a,o,n){void 0===t&&(t=0);var s=e.call(this)||this;return s.loaded_from=0,s.matrix_stride=0,s.array_stride=0,s.row_major_matrix=!1,s.immutable=!1,s.implied_read_expressions=[],t instanceof r?h(t,s):(s.basetype=t,s.base=a,s.dynamic_index=o,s.static_index=n),s}return a(r,e),r.type=t.TypeAccessChain,r}(me),Xe=function(e){function r(t){var i=e.call(this)||this;return t instanceof r?h(t,i):i.basetype=t,i}return a(r,e),r.type=t.TypeUndef,r}(me),We=function(e){function r(t){var i=e.call(this)||this;return t instanceof r?h(t,i):i.str=t,i}return a(r,e),r.type=t.TypeString,r}(me);function je(e,t,r){return e.substring(0,t)+r+e.substring(t+1)}function Qe(e,t,r){return void 0===t?e.toString():e.toString()+(r?"ll":"l")}!function(e){e[e.BLOCK_META_LOOP_HEADER_BIT=1]="BLOCK_META_LOOP_HEADER_BIT",e[e.BLOCK_META_CONTINUE_BIT=2]="BLOCK_META_CONTINUE_BIT",e[e.BLOCK_META_LOOP_MERGE_BIT=4]="BLOCK_META_LOOP_MERGE_BIT",e[e.BLOCK_META_SELECTION_MERGE_BIT=8]="BLOCK_META_SELECTION_MERGE_BIT",e[e.BLOCK_META_MULTISELECT_MERGE_BIT=16]="BLOCK_META_MULTISELECT_MERGE_BIT"}(Ue||(Ue={}));var Ze=function(){this.version=0,this.es=!1,this.known=!1,this.hlsl=!1},Ye=function(){function e(e){this.lock=e,this.lock.set(this.lock.get()+1)}return e.prototype.dispose=function(){this.lock.set(this.lock.get()-1)},e}(),Je=function(){function e(){this.ids=[],this.meta=[],this.ids_for_type=new Array(t.TypeCount),this.ids_for_constant_or_type=[],this.ids_for_constant_or_variable=[],this.load_type_width=[],this.declared_capabilities=[],this.declared_extensions=[],this.block_meta=[],this.continue_block_to_loop_header=[],this.entry_points=[],this.default_entry_point=0,this.source=new Ze,this.addressing_model=b.AddressingModelMax,this.memory_model=y.MemoryModelMax,this.loop_iteration_depth_hard=0,this.loop_iteration_depth_soft=0,this.empty_string="",this.cleared_bitset=new le,this.meta_needing_name_fixup=new Set;for(var e=0;e<this.ids_for_type.length;++e)this.ids_for_type[e]=[];this.pool_group=new u,this.pool_group.pools[t.TypeType]=new Re(xe),this.pool_group.pools[t.TypeVariable]=new Re(ge),this.pool_group.pools[t.TypeConstant]=new Re(Me),this.pool_group.pools[t.TypeFunction]=new Re(Be),this.pool_group.pools[t.TypeFunctionPrototype]=new Re(Ne),this.pool_group.pools[t.TypeBlock]=new Re(ze),this.pool_group.pools[t.TypeExtension]=new Re(Ve),this.pool_group.pools[t.TypeExpression]=new Re(He),this.pool_group.pools[t.TypeConstantOp]=new Re(Te),this.pool_group.pools[t.TypeCombinedImageSampler]=new Re(Ke),this.pool_group.pools[t.TypeAccessChain]=new Re(qe),this.pool_group.pools[t.TypeUndef]=new Re(Xe),this.pool_group.pools[t.TypeString]=new Re(We)}return e.prototype.set_id_bounds=function(e){var t=this;this.ids=n(e,(function(){return new l(t.pool_group)})),this.block_meta=n(e,(function(){return 0}))},e.prototype.set_name=function(e,t){this.get_meta(e).decoration.alias=t,tt(t)&&!it(t,!1,!1)||this.meta_needing_name_fixup.add(e)},e.prototype.get_name=function(e){var t=this.find_meta(e);return t?t.decoration.alias:this.empty_string},e.prototype.set_decoration=function(e,t,r){void 0===r&&(r=0);var i=this.get_meta(e).decoration;switch(i.decoration_flags.set(t),t){case N.DecorationBuiltIn:i.builtin=!0,i.builtin_type=r;break;case N.DecorationLocation:i.location=r;break;case N.DecorationComponent:i.component=r;break;case N.DecorationOffset:i.offset=r;break;case N.DecorationXfbBuffer:i.xfb_buffer=r;break;case N.DecorationXfbStride:i.xfb_stride=r;break;case N.DecorationStream:i.stream=r;break;case N.DecorationArrayStride:i.array_stride=r;break;case N.DecorationMatrixStride:i.matrix_stride=r;break;case N.DecorationBinding:i.binding=r;break;case N.DecorationDescriptorSet:i.set=r;break;case N.DecorationInputAttachmentIndex:i.input_attachment=r;break;case N.DecorationSpecId:i.spec_id=r;break;case N.DecorationIndex:i.index=r;break;case N.DecorationHlslCounterBufferGOOGLE:this.get_meta(e).hlsl_magic_counter_buffer=r,this.meta[r].hlsl_is_magic_counter_buffer=!0;break;case N.DecorationFPRoundingMode:i.fp_rounding_mode=r}},e.prototype.set_decoration_string=function(e,t,r){var i=this.get_meta(e).decoration;if(i.decoration_flags.set(t),t===N.DecorationHlslSemanticGOOGLE)i.hlsl_semantic=r},e.prototype.has_decoration=function(e,t){return this.get_decoration_bitset(e).get(t)},e.prototype.get_decoration=function(e,t){var r=this.find_meta(e);if(!r)return 0;var i=r.decoration;if(!i.decoration_flags.get(t))return 0;switch(t){case N.DecorationBuiltIn:return i.builtin_type;case N.DecorationLocation:return i.location;case N.DecorationComponent:return i.component;case N.DecorationOffset:return i.offset;case N.DecorationXfbBuffer:return i.xfb_buffer;case N.DecorationXfbStride:return i.xfb_stride;case N.DecorationStream:return i.stream;case N.DecorationBinding:return i.binding;case N.DecorationDescriptorSet:return i.set;case N.DecorationInputAttachmentIndex:return i.input_attachment;case N.DecorationSpecId:return i.spec_id;case N.DecorationArrayStride:return i.array_stride;case N.DecorationMatrixStride:return i.matrix_stride;case N.DecorationIndex:return i.index;case N.DecorationFPRoundingMode:return i.fp_rounding_mode;default:return 1}},e.prototype.get_decoration_string=function(e,t){var r=this.find_meta(e);if(!r)return this.empty_string;var i=r.decoration;return i.decoration_flags.get(t)&&t===N.DecorationHlslSemanticGOOGLE?i.hlsl_semantic:this.empty_string},e.prototype.get_decoration_bitset=function(e){var t=this.find_meta(e);return t?t.decoration.decoration_flags:this.cleared_bitset},e.prototype.unset_decoration=function(e,t){var r=this.get_meta(e).decoration;switch(r.decoration_flags.clear(t),t){case N.DecorationBuiltIn:r.builtin=!1;break;case N.DecorationLocation:r.location=0;break;case N.DecorationComponent:r.component=0;break;case N.DecorationOffset:r.offset=0;break;case N.DecorationXfbBuffer:r.xfb_buffer=0;break;case N.DecorationXfbStride:r.xfb_stride=0;break;case N.DecorationStream:r.stream=0;break;case N.DecorationBinding:r.binding=0;break;case N.DecorationDescriptorSet:r.set=0;break;case N.DecorationInputAttachmentIndex:r.input_attachment=0;break;case N.DecorationSpecId:r.spec_id=0;break;case N.DecorationHlslSemanticGOOGLE:r.hlsl_semantic="";break;case N.DecorationFPRoundingMode:r.fp_rounding_mode=w.FPRoundingModeMax;break;case N.DecorationHlslCounterBufferGOOGLE:var i=this.get_meta(e),a=i.hlsl_magic_counter_buffer;a&&(this.meta[a].hlsl_is_magic_counter_buffer=!1,i.hlsl_magic_counter_buffer=0)}},e.prototype.resize_members=function(e,t){var r=e.length;e.length=t;for(var i=r;i<t;++i)e[i]=new he},e.prototype.set_member_name=function(e,t,r){var i=this.get_meta(e);this.resize_members(i.members,Math.max(i.members.length,t+1)),i.members[t].alias=r,tt(r)&&!it(r,!0,!1)||this.meta_needing_name_fixup.add(e)},e.prototype.get_member_name=function(e,t){var r=this.find_meta(e);return r?t>=r.members.length?this.empty_string:r.members[t].alias:this.empty_string},e.prototype.set_member_decoration=function(e,t,r,i){void 0===i&&(i=0);var a=this.get_meta(e);this.resize_members(a.members,Math.max(a.members.length,t+1));var o=a.members[t];switch(o.decoration_flags.set(r),r){case N.DecorationBuiltIn:o.builtin=!0,o.builtin_type=i;break;case N.DecorationLocation:o.location=i;break;case N.DecorationComponent:o.component=i;break;case N.DecorationBinding:o.binding=i;break;case N.DecorationOffset:o.offset=i;break;case N.DecorationXfbBuffer:o.xfb_buffer=i;break;case N.DecorationXfbStride:o.xfb_stride=i;break;case N.DecorationStream:o.stream=i;break;case N.DecorationSpecId:o.spec_id=i;break;case N.DecorationMatrixStride:o.matrix_stride=i;break;case N.DecorationIndex:o.index=i}},e.prototype.set_member_decoration_string=function(e,t,r,i){var a=this.get_meta(e);this.resize_members(a.members,Math.max(a.members.length,t+1));var o=a.members[t];if(o.decoration_flags.set(r),r===N.DecorationHlslSemanticGOOGLE)o.hlsl_semantic=i},e.prototype.get_member_decoration=function(e,t,r){var i=this.find_meta(e);if(!i)return 0;if(t>=i.members.length)return 0;var a=i.members[t];if(!a.decoration_flags.get(r))return 0;switch(r){case N.DecorationBuiltIn:return a.builtin_type;case N.DecorationLocation:return a.location;case N.DecorationComponent:return a.component;case N.DecorationBinding:return a.binding;case N.DecorationOffset:return a.offset;case N.DecorationXfbBuffer:return a.xfb_buffer;case N.DecorationXfbStride:return a.xfb_stride;case N.DecorationStream:return a.stream;case N.DecorationSpecId:return a.spec_id;case N.DecorationIndex:return a.index;default:return 1}},e.prototype.get_member_decoration_string=function(e,t,r){var i=this.find_meta(e);if(i){if(!this.has_member_decoration(e,t,r))return this.empty_string;var a=i.members[t];return r===N.DecorationHlslSemanticGOOGLE?a.hlsl_semantic:this.empty_string}return this.empty_string},e.prototype.has_member_decoration=function(e,t,r){return this.get_member_decoration_bitset(e,t).get(r)},e.prototype.get_member_decoration_bitset=function(e,t){var r=this.find_meta(e);return r?t>=r.members.length?this.cleared_bitset.clone():r.members[t].decoration_flags:this.cleared_bitset.clone()},e.prototype.unset_member_decoration=function(e,t,r){var i=this.get_meta(e);if(!(t>=i.members.length)){var a=i.members[t];switch(a.decoration_flags.clear(r),r){case N.DecorationBuiltIn:a.builtin=!1;break;case N.DecorationLocation:a.location=0;break;case N.DecorationComponent:a.component=0;break;case N.DecorationOffset:a.offset=0;break;case N.DecorationXfbBuffer:a.xfb_buffer=0;break;case N.DecorationXfbStride:a.xfb_stride=0;break;case N.DecorationStream:a.stream=0;break;case N.DecorationSpecId:a.spec_id=0;break;case N.DecorationHlslSemanticGOOGLE:a.hlsl_semantic=""}}},e.prototype.mark_used_as_array_length=function(e){switch(this.ids[e].get_type()){case t.TypeConstant:this.get(Me,e).is_used_as_array_length=!0;break;case t.TypeConstantOp:var r=this.get(Te,e);if(r.opcode===se.OpCompositeExtract)this.mark_used_as_array_length(r.arguments[0]);else if(r.opcode===se.OpCompositeInsert)this.mark_used_as_array_length(r.arguments[0]),this.mark_used_as_array_length(r.arguments[1]);else for(var i=0,a=r.arguments;i<a.length;i++){var o=a[i];this.mark_used_as_array_length(o)}break;case t.TypeUndef:break;default:throw new Error("Shouldn't reach this branch")}},e.prototype.get_buffer_block_flags=function(e){var t,r=this.get(xe,e.basetype);if(r.basetype!==_e.Struct)throw new Error("Assertion failure");var i=this.find_meta(e.self);if(t=i?i.decoration.decoration_flags.clone():new le,0===r.member_types.length)return(null==t?void 0:t.clone())||new le;var a=this.get_buffer_block_type_flags(r);return t.merge_or(a),t},e.prototype.get_buffer_block_type_flags=function(e){if(0===e.member_types.length)return new le;for(var t=this.get_member_decoration_bitset(e.self,0).clone(),r=1;r<e.member_types.length;r++)t.merge_and(this.get_member_decoration_bitset(e.self,r));return t},e.prototype.add_typed_id=function(e,r){if(0!==this.loop_iteration_depth_hard)throw new Error("Cannot add typed ID while looping over it.");var i=this.ids[r];if(0!==this.loop_iteration_depth_soft&&!i.empty())throw new Error("Cannot override IDs when loop is soft locked.");if(i.empty()||i.get_type()!==e)switch(e){case t.TypeConstant:this.ids_for_constant_or_variable.push(r),this.ids_for_constant_or_type.push(r);break;case t.TypeVariable:this.ids_for_constant_or_variable.push(r);break;case t.TypeType:case t.TypeConstantOp:this.ids_for_constant_or_type.push(r)}i.empty()?this.ids_for_type[e].push(r):i.get_type()!==e&&(this.remove_typed_id(i.get_type(),r),this.ids_for_type[e].push(r))},e.prototype.remove_typed_id=function(e,t){!function(e,t){for(var r=e.indexOf(t);r>=0;r=e.indexOf(t))e.splice(r,1)}(this.ids_for_type[e],t)},e.prototype.create_loop_hard_lock=function(){return new Ye(new fe(this,"loop_iteration_depth_hard"))},e.prototype.create_loop_soft_lock=function(){return new Ye(new fe(this,"loop_iteration_depth_soft"))},e.prototype.for_each_typed_id=function(e,t){for(var r=this.create_loop_hard_lock(),i=0,a=this.ids_for_type[e.type];i<a.length;i++){var o=a[i];this.ids[o].get_type()===e.type&&t(o,this.get(e,o))}r.dispose()},e.prototype.reset_all_of_type=function(e){if("number"==typeof e){for(var t=0,r=this.ids_for_type[e];t<r.length;t++){var i=r[t];this.ids[i].get_type()===e&&this.ids[i].reset()}this.ids_for_type[e]=[]}else this.reset_all_of_type(e.type)},e.prototype.get_meta=function(e){return this.meta[e]||(this.meta[e]=new de),this.meta[e]},e.prototype.find_meta=function(e){return this.meta[e]},e.prototype.get_empty_string=function(){return this.empty_string},e.prototype.make_constant_null=function(e,r,i){var a=this.get(xe,r);if(a.pointer)i&&this.add_typed_id(t.TypeConstant,e),(l=_(Me,this.ids[e],r)).self=e,l.make_null(a);else if(0!==a.array.length){console.assert(a.parent_type);var o=this.increase_bound_by(1);this.make_constant_null(o,a.parent_type,i);for(var n=[],s=0;s<a.array.length;s++)n[s]=o;i&&this.add_typed_id(t.TypeConstant,e),_(Me,this.ids[e],r,n,n.length,!1).self=e}else if(0!==a.member_types.length){var c=this.increase_bound_by(a.member_types.length);for(n=[],s=0;s<a.member_types.length;s++)this.make_constant_null(c+s,a.member_types[s],i),n[s]=c+s;i&&this.add_typed_id(t.TypeConstant,e),_(Me,this.ids[e],r,n,n.length,!1).self=e}else{var l;i&&this.add_typed_id(t.TypeConstant,e),(l=_(Me,this.ids[e],r)).self=e,l.make_null(a)}},e.prototype.fixup_reserved_names=function(){for(var t=this.meta_needing_name_fixup.values(),r=null;r=t.next().value;){var i=this.get_meta(r);i.decoration.alias=e.sanitize_identifier(i.decoration.alias,!1,!1);for(var a=0,o=i.members;a<o.length;a++){var n=o[a];n.alias=e.sanitize_identifier(n.alias,!0,!1)}}this.meta_needing_name_fixup.clear()},e.sanitize_identifier=function(e,t,r){return tt(e)||(e=at(e)),it(e,t,r)&&(e=function(e){return rt(e)?"_RESERVED_IDENTIFIER_FIXUP_"+e:"_RESERVED_IDENTIFIER_FIXUP"+e}(e)),e},e.sanitize_underscores=function(e){return e.replace(/_+/g,"_")},e.is_globally_reserved_identifier=function(e,t){return it(e,!1,t)},e.prototype.increase_bound_by=function(e){var t=this.ids.length,r=t+e;this.ids.length+=e;for(var i=0;i<e;i++)this.ids[i]=new l(this.pool_group);return this.block_meta.length=r,t},e.prototype.get_spirv_version=function(){return this.spirv[1]},e.prototype.get=function(e,t){return p(e,this.ids[t])},e}();function $e(e){return e>="0"&&e<="9"}function et(e){return function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}(e)||$e(e)}function tt(e){if(""===e)return!0;if($e(e[0]))return!1;for(var t=0;t<e.length;++t){if(!et(i=e.charAt(t))&&"_"!==i)return!1}var r=!1;for(t=0;t<e.length;++t){var i,a="_"===(i=e.charAt(t));if(a&&r)return!1;r=a}return!0}function rt(e){var t=e.substring(0,3);return"gl_"===t||"spv"===t}function it(e,t,r){if(!r&&rt(e))return!0;if(t){if(e.length<3)return!1;if("_m"===e.substring(0,2))return!1;for(var i=2;i<e.length&&$e(e[i]);)i++;return i===e.length}if(e.length<2)return!1;if("_"!==e.charAt(0)||!$e(e.charAt(1)))return!1;for(i=2;i<e.length&&$e(e[i]);)i++;return i===e.length||i<e.length&&"_"===e[i]}function at(e){var t=e.substring(0,e.indexOf("("));if(0===t.length)return t;$e(t.charAt(0))&&(t="_"+t.substring(1));for(var r=0;r<t.length;++r){var i=t.charAt(r);et(i)||"_"===i||(t=je(t,r,"_"))}return Je.sanitize_underscores(t)}var ot=function(){function e(){this.op=0,this.count=0,this.offset=0,this.length=0}return e.prototype.is_embedded=function(){return 0===this.offset},e}();!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ops=[],t}a(t,e)}(ot);var nt=function(){function e(e,t){this.first=e,this.second=t}return e.prototype.equals=function(e){return this.first===e.first&&this.second===e.second},e.prototype.clone=function(){var t=new e;return h(this,t),t},e}(),st=function(){function e(){this.x=0,this.y=0,this.z=0,this.id_x=0,this.id_y=0,this.id_z=0,this.constant=0}return e.prototype.clone=function(){return d(e,this)},e}(),ct=function(e,t,r){this.self=0,this.interface_variables=[],this.flags=new le,this.workgroup_size=new st,this.invocations=0,this.output_vertices=0,this.model=g.ExecutionModelMax,this.geometry_passthrough=!1,this.self=e,this.name=r,this.orig_name=r,this.model=t},lt=function(){function e(e){this.ir=new Je,this.global_struct_cache=[],this.forward_pointer_fixups=[],this.ir.spirv=e}return e.prototype.get_parsed_ir=function(){return this.ir},e.prototype.parse=function(){var e=this,t=this.ir.spirv,r=t.length;if(r<5)throw new Error("SPIRV file too small.");var i=t;if(i[0]===pt(pe)&&function(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=e.length);for(var a=r;a<i;++a)e[a]=t[a]}(i,(function(e){return pt(e)})),i[0]!==pe||!function(e){switch(e){case 99:case 65536:case 65792:case 66048:case 66304:case 66560:case 66816:return!0;default:return!1}}(i[1]))throw new Error("Invalid SPIRV format.");var a=i[3];if(a>4194303)throw new Error("ID bound exceeds limit of 0x3fffff.");this.ir.set_id_bounds(a);for(var o=5,n=[];o<r;){var s=new ot;if(s.op=65535&t[o],s.count=t[o]>>16&65535,0===s.count)throw new Error("SPIR-V instructions cannot consume 0 words. Invalid SPIR-V file.");if(s.offset=o+1,s.length=s.count-1,(o+=s.count)>t.length)throw new Error("SPIR-V instruction goes out of bounds.");n.push(s)}if(n.forEach((function(t){return e.parseInstruction(t)})),this.forward_pointer_fixups.forEach((function(t){var r=e.get(xe,t.first),i=e.get(xe,t.second);r.member_types=i.member_types,r.basetype=i.basetype,r.self=i.self})),this.forward_pointer_fixups=[],this.current_function)throw new Error("Function was not terminated.");if(this.current_block)throw new Error("Block was not terminated.");if(0===this.ir.default_entry_point)throw new Error("There is no entry point in the SPIR-V module.")},e.prototype.parseInstruction=function(e){var t=this.stream(e),r=e.op,i=this.ir,a=e.length;switch(r){case se.OpSourceContinued:case se.OpSourceExtension:case se.OpNop:case se.OpModuleProcessed:break;case se.OpString:this.set(We,t[0],_t(i.spirv,e.offset+1));break;case se.OpMemoryModel:i.addressing_model=t[0],i.memory_model=t[1];break;case se.OpSource:switch(t[0]){case m.SourceLanguageESSL:i.source.es=!0,i.source.version=t[1],i.source.known=!0,i.source.hlsl=!1;break;case m.SourceLanguageGLSL:i.source.es=!1,i.source.version=t[1],i.source.known=!0,i.source.hlsl=!1;break;case m.SourceLanguageHLSL:i.source.es=!1,i.source.version=450,i.source.known=!0,i.source.hlsl=!0;break;default:i.source.known=!1}break;case se.OpUndef:var o=t[0],s=t[1];this.set(Xe,s,o),this.current_block&&this.current_block.ops.push(e);break;case se.OpCapability:if(t[0]===$.CapabilityKernel)throw new Error("Kernel capability not supported.");i.declared_capabilities.push(t[0]);break;case se.OpExtension:var c=_t(i.spirv,e.offset);i.declared_extensions.push(c);break;case se.OpExtInstImport:s=t[0];"GLSL.std.450"===(c=_t(i.spirv,e.offset+1))?this.set(Ve,s,Pe.GLSL):"DebugInfo"===c?this.set(Ve,s,Pe.SPV_debug_info):"SPV_AMD_shader_ballot"===c?this.set(Ve,s,Pe.SPV_AMD_shader_ballot):"SPV_AMD_shader_explicit_vertex_parameter"===c?this.set(Ve,s,Pe.SPV_AMD_shader_explicit_vertex_parameter):"SPV_AMD_shader_trinary_minmax"===c?this.set(Ve,s,Pe.SPV_AMD_shader_trinary_minmax):"SPV_AMD_gcn_shader"===c?this.set(Ve,s,Pe.SPV_AMD_gcn_shader):this.set(Ve,s,Pe.Unsupported);break;case se.OpExtInst:this.current_block&&this.current_block.ops.push(e);break;case se.OpEntryPoint:var l=new ct(t[1],t[0],_t(i.spirv,e.offset+2));i.entry_points[t[1]]=l;for(var p=(l.name.length+1+3>>2)+2;p<e.length;p++)l.interface_variables.push(t[p]);i.set_name(t[1],l.name),i.default_entry_point||(i.default_entry_point=t[1]);break;case se.OpExecutionMode:var _=i.entry_points[t[0]],u=t[1];switch(_.flags.set(u),u){case S.ExecutionModeInvocations:_.invocations=t[2];break;case S.ExecutionModeLocalSize:_.workgroup_size.x=t[2],_.workgroup_size.y=t[3],_.workgroup_size.z=t[4];break;case S.ExecutionModeOutputVertices:_.output_vertices=t[2]}break;case se.OpName:s=t[0];i.set_name(s,_t(i.spirv,e.offset+1));break;case se.OpMemberName:s=t[0];var d=t[1];i.set_member_name(s,d,_t(i.spirv,e.offset+2));break;case se.OpDecorationGroup:break;case se.OpGroupDecorate:var f=t[0],g=i.get_meta(f).decoration.decoration_flags,b=function(e){var r=t[e];g.for_each_bit((function(e){var t=e;ut(t)?i.set_decoration_string(r,t,i.get_decoration_string(f,t)):(i.get_meta(r).decoration_word_offset[t]=i.get_meta(f).decoration_word_offset[t],i.set_decoration(r,t,i.get_decoration(f,t)))}))};for(p=1;p<a;p++)b(p);break;case se.OpGroupMemberDecorate:var y=t[0],I=(g=i.get_meta(y).decoration.decoration_flags,function(e){var r=t[e],a=t[e+1];g.for_each_bit((function(e){var t=e;ut(t)?i.set_member_decoration_string(r,a,t,i.get_decoration_string(y,t)):i.set_member_decoration(r,a,t,i.get_decoration(y,t))}))});for(p=1;p+1<a;p+=2)I(p);break;case se.OpDecorate:case se.OpDecorateId:s=t[0];var O=t[1];a>=3?(i.get_meta(s).decoration_word_offset[O]=e.offset+2,i.set_decoration(s,O,t[2])):i.set_decoration(s,O);break;case se.OpDecorateStringGOOGLE:s=t[0],O=t[1];i.set_decoration_string(s,O,_t(i.spirv,e.offset+2));break;case se.OpMemberDecorate:s=t[0],d=t[1],O=t[2];a>=4?i.set_member_decoration(s,d,O,t[3]):i.set_member_decoration(s,d,O);break;case se.OpMemberDecorateStringGOOGLE:s=t[0],d=t[1],O=t[2];i.set_member_decoration_string(s,d,O,_t(i.spirv,e.offset+3));break;case se.OpTypeVoid:s=t[0];(k=this.set(xe,s)).basetype=_e.Void;break;case se.OpTypeBool:s=t[0];(k=this.set(xe,s)).basetype=_e.Boolean,k.width=1;break;case se.OpTypeFloat:s=t[0];var x=t[1],k=this.set(xe,s);if(64===x)k.basetype=_e.Double;else if(32===x)k.basetype=_e.Float;else{if(16!==x)throw new Error("Unrecognized bit-width of floating point type.");k.basetype=_e.Half}k.width=x;break;case se.OpTypeInt:s=t[0],x=t[1];var C=0!==t[2];(k=this.set(xe,s)).basetype=C?function(e){switch(e){case 8:return _e.SByte;case 16:return _e.Short;case 32:return _e.Int;case 64:return _e.Int64;default:throw new Error("Invalid bit width.")}}(x):function(e){switch(e){case 8:return _e.UByte;case 16:return _e.UShort;case 32:return _e.UInt;case 64:return _e.UInt64;default:throw new Error("Invalid bit width.")}}(x),k.width=x;break;case se.OpTypeVector:s=t[0];var E=t[2],L=this.get(xe,t[1]),M=this.set(xe,s);h(L,M),M.vecsize=E,M.self=s,M.parent_type=t[1];break;case se.OpTypeMatrix:s=t[0];var T=t[2],R=(L=this.get(xe,t[1]),this.set(xe,s));h(L,R),R.columns=T,R.self=s,R.parent_type=t[1];break;case se.OpTypeArray:s=t[0];var w=this.set(xe,s),D=t[1];h(L=this.get(xe,D),w),w.parent_type=D;var B=t[2];i.mark_used_as_array_length(B);var N=(Y=this.maybe_get(Me,B))&&!Y.specialization;L.forward_pointer&&this.forward_pointer_fixups.push(new nt(s,D)),w.array_size_literal.push(N),w.array.push(N?Y.scalar():B);break;case se.OpTypeRuntimeArray:s=t[0],L=this.get(xe,t[1]),w=this.set(xe,s);L.forward_pointer&&this.forward_pointer_fixups.push(new nt(s,t[1])),h(L,w),w.array.push(0),w.array_size_literal.push(!0),w.parent_type=t[1];break;case se.OpTypeImage:s=t[0];(k=this.set(xe,s)).basetype=_e.Image,k.image.type=t[1],k.image.dim=t[2],k.image.depth=1===t[3],k.image.arrayed=0!==t[4],k.image.ms=0!==t[5],k.image.sampled=t[6],k.image.format=t[7],k.image.access=a>=9?t[8]:A.AccessQualifierMax;break;case se.OpTypeSampledImage:s=t[0];var P=t[1];k=this.set(xe,s);h(this.get(xe,P),k),k.basetype=_e.SampledImage,k.self=s;break;case se.OpTypeSampler:s=t[0];(k=this.set(xe,s)).basetype=_e.Sampler;break;case se.OpTypePointer:s=t[0],L=this.maybe_get(xe,t[2]);var G=this.set(xe,s);L&&h(L,G),G.pointer=!0,G.pointer_depth++,G.storage=t[1],G.storage===v.StorageClassAtomicCounter&&(G.basetype=_e.AtomicCounter),L&&L.forward_pointer&&this.forward_pointer_fixups.push(new nt(s,t[2])),G.parent_type=t[2];break;case se.OpTypeForwardPointer:s=t[0];(G=this.set(xe,s)).pointer=!0,G.pointer_depth++,G.storage=t[1],G.forward_pointer=!0,G.storage===v.StorageClassAtomicCounter&&(G.basetype=_e.AtomicCounter);break;case se.OpTypeStruct:s=t[0];(k=this.set(xe,s)).basetype=_e.Struct;for(p=1;p<a;p++)k.member_types.push(t[p]);if(0===i.get_name(k.self).length){for(var z=0,V=this.global_struct_cache;z<V.length;z++){var H=V[z];if(i.get_name(k.self)===i.get_name(H)&&this.types_are_logically_equivalent(k,this.get(xe,H))){k.type_alias=H;break}}0===k.type_alias&&this.global_struct_cache.push(s)}break;case se.OpTypeFunction:s=t[0];var K=t[1],q=this.set(Ne,s,K);for(p=2;p<a;p++)q.parameter_types.push(t[p]);break;case se.OpTypeAccelerationStructureKHR:s=t[0];(k=this.set(xe,s)).basetype=_e.AccelerationStructure;break;case se.OpTypeRayQueryKHR:s=t[0];(k=this.set(xe,s)).basetype=_e.RayQuery;break;case se.OpVariable:k=t[0],s=t[1];var X=t[2],W=4===a?t[3]:0;if(X===v.StorageClassFunction){if(!this.current_function)throw new Error("No function currently in scope");this.current_function.add_local_variable(s)}this.set(ge,s,k,X,W);break;case se.OpPhi:if(!this.current_function)throw new Error("No function currently in scope");if(!this.current_block)throw new Error("No block currently in scope");o=t[0],s=t[1];this.set(ge,s,o,v.StorageClassFunction).phi_variable=!0,this.current_function.add_local_variable(s);for(p=2;p+2<=a;p+=2)this.current_block.phi_variables.push(new Ge(t[p],t[p+1],s));break;case se.OpSpecConstant:case se.OpConstant:s=t[1];(k=this.get(xe,t[0])).width>32?this.set(Me,s,t[0],bigintFrom(t[3],t[2]),r===se.OpSpecConstant):this.set(Me,s,t[0],t[2],r===se.OpSpecConstant);break;case se.OpSpecConstantFalse:case se.OpConstantFalse:this.set(Me,t[1],t[0],0,r===se.OpSpecConstantFalse);break;case se.OpSpecConstantTrue:case se.OpConstantTrue:this.set(Me,t[1],t[0],1,r===se.OpSpecConstantTrue);break;case se.OpConstantNull:i.make_constant_null(t[1],t[0],!0);break;case se.OpSpecConstantComposite:case se.OpConstantComposite:s=t[1],k=t[0];var j=this.get(xe,k);if(j.basetype===_e.Struct||0!==j.array.length){var Q=t.slice(2);this.set(Me,s,k,Q,a-2,r===se.OpSpecConstantComposite)}else{if((Q=a-2)>4)throw new Error("OpConstantComposite only supports 1, 2, 3 and 4 elements.");var Z=n(4,(function(){return new Me})),Y=new Array(4);for(p=0;p<Q;p++){var J=this.maybe_get(Te,t[2+p]),ee=this.maybe_get(Xe,t[2+p]);if(J){if(r===se.OpConstantComposite)throw new Error("Specialization constant operation used in OpConstantComposite.");Z[p].make_null(this.get(xe,J.basetype)),Z[p].self=J.self,Z[p].constant_type=J.basetype,Z[p].specialization=!0,Y[p]=Z[p]}else ee?(Z[p].make_null(this.get(xe,ee.basetype)),Z[p].constant_type=ee.basetype,Y[p]=Z[p]):Y[p]=this.get(Me,t[2+p])}this.set(Me,s,k,Y,Q,r===se.OpSpecConstantComposite)}break;case se.OpFunction:var te=t[0];s=t[1],k=t[3];if(this.current_function)throw new Error("Must end a function before starting a new one!");this.current_function=this.set(Be,s,te,k);break;case se.OpFunctionParameter:k=t[0],s=t[1];if(!this.current_function)throw new Error("Must be in a function!");this.current_function.add_parameter(k,s),this.set(ge,s,k,v.StorageClassFunction);break;case se.OpFunctionEnd:if(this.current_block)throw new Error("Cannot end a function before ending the current block.\nLikely cause: If this SPIR-V was created from glslang HLSL, make sure the entry point is valid.");this.current_function=null;break;case se.OpLabel:if(!this.current_function)throw new Error("Blocks cannot exist outside functions!");s=t[0];if(this.current_function.blocks.push(s),this.current_function.entry_block||(this.current_function.entry_block=s),this.current_block)throw new Error("Cannot start a block before ending the current block.");this.current_block=this.set(ze,s);break;case se.OpBranch:if(!this.current_block)throw new Error("Trying to end a non-existing block.");var re=t[0];(ne=this.current_block).terminator=be.Direct,ne.next_block=re,this.current_block=null;break;case se.OpBranchConditional:if(!this.current_block)throw new Error("Trying to end a non-existing block.");if((ne=this.current_block).condition=t[0],ne.true_block=t[1],ne.false_block=t[2],ne.terminator=be.Select,ne.true_block===ne.false_block)if(ne.true_block!==ne.next_block&&ne.merge===ye.MergeSelection){var ie=i.increase_bound_by(2);(k=new xe).basetype=_e.Int,k.width=32,this.set(xe,ie,k);Y=this.set(Me,ie+1,ie);ne.condition=Y.self,ne.default_block=ne.true_block,ne.terminator=be.MultiSelect,i.block_meta[ne.next_block]=i.block_meta[ne.next_block]||0,i.block_meta[ne.next_block]&=~Ue.BLOCK_META_SELECTION_MERGE_BIT,i.block_meta[ne.next_block]|=Ue.BLOCK_META_MULTISELECT_MERGE_BIT}else i.block_meta[ne.next_block]=i.block_meta[ne.next_block]||0,i.block_meta[ne.next_block]&=~Ue.BLOCK_META_SELECTION_MERGE_BIT,ne.next_block=ne.true_block,ne.condition=0,ne.true_block=0,ne.false_block=0,ne.merge_block=0,ne.merge=ye.MergeNone,ne.terminator=be.Direct;this.current_block=null;break;case se.OpSwitch:if(!(ne=this.current_block))throw new Error("Trying to end a non-existing block.");ne.terminator=be.MultiSelect,ne.condition=t[0],ne.default_block=t[1];var ae=a-2;if(ae%2==0)for(p=2;p+2<=a;p+=2)ne.cases_32bit.push(new Fe(BigInt(t[p]),t[p+1]));if(ae%3==0)for(p=2;p+3<=a;p+=3)ne.cases_64bit.push(new Fe(bigintFrom(t[p+1],t[p]),t[p+2]));i.block_meta[ne.next_block]=i.block_meta[ne.next_block]||0,i.block_meta[ne.next_block]|=Ue.BLOCK_META_MULTISELECT_MERGE_BIT,this.current_block=null;break;case se.OpKill:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=be.Kill,this.current_block=null;break;case se.OpTerminateRayKHR:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=be.TerminateRay,this.current_block=null;break;case se.OpIgnoreIntersectionKHR:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=be.IgnoreIntersection,this.current_block=null;break;case se.OpReturn:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=be.Return,this.current_block=null;break;case se.OpReturnValue:if(!(ne=this.current_block))throw new Error("Trying to end a non-existing block.");ne.terminator=be.Return,ne.return_value=t[0],this.current_block=null;break;case se.OpUnreachable:if(!this.current_block)throw new Error("Trying to end a non-existing block.");this.current_block.terminator=be.Unreachable,this.current_block=null;break;case se.OpSelectionMerge:if(!(ne=this.current_block))throw new Error("Trying to modify a non-existing block.");ne.next_block=t[0],ne.merge=ye.MergeSelection,i.block_meta[ne.next_block]=i.block_meta[ne.next_block]||0,i.block_meta[ne.next_block]|=Ue.BLOCK_META_SELECTION_MERGE_BIT,a>=2&&(t[1]&F.SelectionControlFlattenMask?ne.hint=Se.HintFlatten:t[1]&F.SelectionControlDontFlattenMask&&(ne.hint=Se.HintDontFlatten));break;case se.OpLoopMerge:if(!(ne=this.current_block))throw new Error("Trying to modify a non-existing block.");ne.merge_block=t[0],ne.continue_block=t[1],ne.merge=ye.MergeLoop,i.block_meta[ne.self]=i.block_meta[ne.self]||0,i.block_meta[ne.self]|=Ue.BLOCK_META_LOOP_HEADER_BIT,i.block_meta[ne.merge_block]=i.block_meta[ne.merge_block]||0,i.block_meta[ne.merge_block]|=Ue.BLOCK_META_LOOP_MERGE_BIT,i.continue_block_to_loop_header[ne.continue_block]=ne.self,ne.continue_block!==ne.self&&(i.block_meta[ne.continue_block]=i.block_meta[ne.continue_block]||0,i.block_meta[ne.continue_block]|=Ue.BLOCK_META_CONTINUE_BIT),a>=3&&(t[2]&U.LoopControlUnrollMask?ne.hint=Se.HintUnroll:t[2]&U.LoopControlDontUnrollMask&&(ne.hint=Se.HintDontUnroll));break;case se.OpSpecConstantOp:if(a<3)throw new Error("OpSpecConstantOp not enough arguments.");o=t[0],s=t[1];var oe=t[2];this.set(Te,s,o,oe,t.slice(3));break;case se.OpLine:var ne;(ne=this.current_block)&&ne.ops.push(e);var ce=this.current_function;ce&&0===ce.entry_line.file_id&&(ce.entry_line.file_id=t[0],ce.entry_line.line_literal=t[1]);break;case se.OpNoLine:this.current_block&&this.current_block.ops.push(e);break;default:if(a>=2)(k=this.maybe_get(xe,t[0]))&&(i.load_type_width[t[1]]=k.width);if(!this.current_block)throw new Error("Currently no block to insert opcode.");this.current_block.ops.push(e)}},e.prototype.stream=function(e){if(0===e.length)return null;if(e.offset+e.length>this.ir.spirv.length)throw new Error("Compiler::stream() out of range.");return this.ir.spirv.slice(e.offset,e.offset+e.length)},e.prototype.set=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];this.ir.add_typed_id(e.type,t);var a=_.apply(void 0,o([e,this.ir.ids[t]],r,!1));return a.self=t,a},e.prototype.get=function(e,t){return p(e,this.ir.ids[t])},e.prototype.maybe_get=function(e,t){return this.ir.ids[t].get_type()===e.type?this.get(e,t):null},e.prototype.types_are_logically_equivalent=function(e,t){if(e.basetype!==t.basetype)return!1;if(e.width!==t.width)return!1;if(e.vecsize!==t.vecsize)return!1;if(e.columns!==t.columns)return!1;if(!s(e.array,t.array))return!1;if((e.basetype===_e.Image||e.basetype===_e.SampledImage)&&!e.image.equals(t.image))return!1;if(!s(e.member_types,t.member_types))return!1;for(var r=e.member_types.length,i=0;i<r;i++)if(!this.types_are_logically_equivalent(this.get(xe,e.member_types[i]),this.get(xe,t.member_types[i])))return!1;return!0},e}();function pt(e){return e>>24&255|e>>8&65280|e<<8&16711680|e<<24&4278190080}function _t(e,t){for(var r="",i=t;i<e.length;i++)for(var a=e[i],o=0;o<4;o++,a>>=8){var n=255&a;if(0===n)return r;r+=String.fromCharCode(n)}throw new Error("String was not terminated before EOF")}function ut(e){return e===N.DecorationHlslSemanticGOOGLE}var ht,dt,ft=function(e,t){this.name=e,this.execution_model=t},mt=function(){function e(){}return e.prototype.handle_terminator=function(e){return!0},e.prototype.follow_function_call=function(e){return!0},e.prototype.set_current_block=function(e){},e.prototype.rearm_current_block=function(e){},e.prototype.begin_function_scope=function(e,t){return!0},e.prototype.end_function_scope=function(e,t){return!0},e}(),gt=function(e){function t(t){var r=e.call(this)||this;return r.need_dummy_sampler=!1,r.compiler=t,r}return a(t,e),t.prototype.handle=function(e,t,r){if(this.need_dummy_sampler)return!1;var i=this.compiler;switch(e){case se.OpLoad:if(r<3)return!1;var a=t[0];if(!((c=i.get(xe,a)).basetype===_e.Image&&1===c.image.sampled&&c.image.dim!==I.DimBuffer))return!0;var o=t[1],n=t[2];i.set(He,o,"",a,!0),i.register_read(o,n,!0);break;case se.OpImageFetch:case se.OpImageQuerySizeLod:case se.OpImageQuerySize:case se.OpImageQueryLevels:case se.OpImageQuerySamples:var s=i.maybe_get_backing_variable(t[2]);if(s)(c=i.get(xe,s.basetype)).basetype===_e.Image&&1===c.image.sampled&&c.image.dim!==I.DimBuffer&&(this.need_dummy_sampler=!0);break;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;var c;a=t[0];if(!((c=i.get(xe,a)).basetype===_e.Image&&1===c.image.sampled&&c.image.dim!==I.DimBuffer))return!0;o=t[1],n=t[2];i.set(He,o,"",a,!0),i.register_read(o,n,!0),i.ir.ids[o].set_allow_type_rewrite()}return!0},t}(mt);!function(e){e[e.GLSLstd450Bad=0]="GLSLstd450Bad",e[e.GLSLstd450Round=1]="GLSLstd450Round",e[e.GLSLstd450RoundEven=2]="GLSLstd450RoundEven",e[e.GLSLstd450Trunc=3]="GLSLstd450Trunc",e[e.GLSLstd450FAbs=4]="GLSLstd450FAbs",e[e.GLSLstd450SAbs=5]="GLSLstd450SAbs",e[e.GLSLstd450FSign=6]="GLSLstd450FSign",e[e.GLSLstd450SSign=7]="GLSLstd450SSign",e[e.GLSLstd450Floor=8]="GLSLstd450Floor",e[e.GLSLstd450Ceil=9]="GLSLstd450Ceil",e[e.GLSLstd450Fract=10]="GLSLstd450Fract",e[e.GLSLstd450Radians=11]="GLSLstd450Radians",e[e.GLSLstd450Degrees=12]="GLSLstd450Degrees",e[e.GLSLstd450Sin=13]="GLSLstd450Sin",e[e.GLSLstd450Cos=14]="GLSLstd450Cos",e[e.GLSLstd450Tan=15]="GLSLstd450Tan",e[e.GLSLstd450Asin=16]="GLSLstd450Asin",e[e.GLSLstd450Acos=17]="GLSLstd450Acos",e[e.GLSLstd450Atan=18]="GLSLstd450Atan",e[e.GLSLstd450Sinh=19]="GLSLstd450Sinh",e[e.GLSLstd450Cosh=20]="GLSLstd450Cosh",e[e.GLSLstd450Tanh=21]="GLSLstd450Tanh",e[e.GLSLstd450Asinh=22]="GLSLstd450Asinh",e[e.GLSLstd450Acosh=23]="GLSLstd450Acosh",e[e.GLSLstd450Atanh=24]="GLSLstd450Atanh",e[e.GLSLstd450Atan2=25]="GLSLstd450Atan2",e[e.GLSLstd450Pow=26]="GLSLstd450Pow",e[e.GLSLstd450Exp=27]="GLSLstd450Exp",e[e.GLSLstd450Log=28]="GLSLstd450Log",e[e.GLSLstd450Exp2=29]="GLSLstd450Exp2",e[e.GLSLstd450Log2=30]="GLSLstd450Log2",e[e.GLSLstd450Sqrt=31]="GLSLstd450Sqrt",e[e.GLSLstd450InverseSqrt=32]="GLSLstd450InverseSqrt",e[e.GLSLstd450Determinant=33]="GLSLstd450Determinant",e[e.GLSLstd450MatrixInverse=34]="GLSLstd450MatrixInverse",e[e.GLSLstd450Modf=35]="GLSLstd450Modf",e[e.GLSLstd450ModfStruct=36]="GLSLstd450ModfStruct",e[e.GLSLstd450FMin=37]="GLSLstd450FMin",e[e.GLSLstd450UMin=38]="GLSLstd450UMin",e[e.GLSLstd450SMin=39]="GLSLstd450SMin",e[e.GLSLstd450FMax=40]="GLSLstd450FMax",e[e.GLSLstd450UMax=41]="GLSLstd450UMax",e[e.GLSLstd450SMax=42]="GLSLstd450SMax",e[e.GLSLstd450FClamp=43]="GLSLstd450FClamp",e[e.GLSLstd450UClamp=44]="GLSLstd450UClamp",e[e.GLSLstd450SClamp=45]="GLSLstd450SClamp",e[e.GLSLstd450FMix=46]="GLSLstd450FMix",e[e.GLSLstd450IMix=47]="GLSLstd450IMix",e[e.GLSLstd450Step=48]="GLSLstd450Step",e[e.GLSLstd450SmoothStep=49]="GLSLstd450SmoothStep",e[e.GLSLstd450Fma=50]="GLSLstd450Fma",e[e.GLSLstd450Frexp=51]="GLSLstd450Frexp",e[e.GLSLstd450FrexpStruct=52]="GLSLstd450FrexpStruct",e[e.GLSLstd450Ldexp=53]="GLSLstd450Ldexp",e[e.GLSLstd450PackSnorm4x8=54]="GLSLstd450PackSnorm4x8",e[e.GLSLstd450PackUnorm4x8=55]="GLSLstd450PackUnorm4x8",e[e.GLSLstd450PackSnorm2x16=56]="GLSLstd450PackSnorm2x16",e[e.GLSLstd450PackUnorm2x16=57]="GLSLstd450PackUnorm2x16",e[e.GLSLstd450PackHalf2x16=58]="GLSLstd450PackHalf2x16",e[e.GLSLstd450PackDouble2x32=59]="GLSLstd450PackDouble2x32",e[e.GLSLstd450UnpackSnorm2x16=60]="GLSLstd450UnpackSnorm2x16",e[e.GLSLstd450UnpackUnorm2x16=61]="GLSLstd450UnpackUnorm2x16",e[e.GLSLstd450UnpackHalf2x16=62]="GLSLstd450UnpackHalf2x16",e[e.GLSLstd450UnpackSnorm4x8=63]="GLSLstd450UnpackSnorm4x8",e[e.GLSLstd450UnpackUnorm4x8=64]="GLSLstd450UnpackUnorm4x8",e[e.GLSLstd450UnpackDouble2x32=65]="GLSLstd450UnpackDouble2x32",e[e.GLSLstd450Length=66]="GLSLstd450Length",e[e.GLSLstd450Distance=67]="GLSLstd450Distance",e[e.GLSLstd450Cross=68]="GLSLstd450Cross",e[e.GLSLstd450Normalize=69]="GLSLstd450Normalize",e[e.GLSLstd450FaceForward=70]="GLSLstd450FaceForward",e[e.GLSLstd450Reflect=71]="GLSLstd450Reflect",e[e.GLSLstd450Refract=72]="GLSLstd450Refract",e[e.GLSLstd450FindILsb=73]="GLSLstd450FindILsb",e[e.GLSLstd450FindSMsb=74]="GLSLstd450FindSMsb",e[e.GLSLstd450FindUMsb=75]="GLSLstd450FindUMsb",e[e.GLSLstd450InterpolateAtCentroid=76]="GLSLstd450InterpolateAtCentroid",e[e.GLSLstd450InterpolateAtSample=77]="GLSLstd450InterpolateAtSample",e[e.GLSLstd450InterpolateAtOffset=78]="GLSLstd450InterpolateAtOffset",e[e.GLSLstd450NMin=79]="GLSLstd450NMin",e[e.GLSLstd450NMax=80]="GLSLstd450NMax",e[e.GLSLstd450NClamp=81]="GLSLstd450NClamp",e[e.GLSLstd450Count=82]="GLSLstd450Count"}(ht||(ht={})),function(e){e[e.PlsNone=0]="PlsNone",e[e.PlsR11FG11FB10F=1]="PlsR11FG11FB10F",e[e.PlsR32F=2]="PlsR32F",e[e.PlsRG16F=3]="PlsRG16F",e[e.PlsRGB10A2=4]="PlsRGB10A2",e[e.PlsRGBA8=5]="PlsRGBA8",e[e.PlsRG16=6]="PlsRG16",e[e.PlsRGBA8I=7]="PlsRGBA8I",e[e.PlsRG16I=8]="PlsRG16I",e[e.PlsRGB10A2UI=9]="PlsRGB10A2UI",e[e.PlsRGBA8UI=10]="PlsRGBA8UI",e[e.PlsRG16UI=11]="PlsRG16UI",e[e.PlsR32UI=12]="PlsR32UI"}(dt||(dt={}));var bt=function(){this.discard_literal="discard",this.demote_literal="demote",this.null_pointer_literal="",this.float_literal_suffix=!1,this.double_literal_suffix=!0,this.uint32_t_literal_suffix=!0,this.long_long_literal_suffix=!1,this.basic_int_type="int",this.basic_uint_type="uint",this.basic_int8_type="int8_t",this.basic_uint8_type="uint8_t",this.basic_int16_type="int16_t",this.basic_uint16_type="uint16_t",this.int16_t_literal_suffix="s",this.uint16_t_literal_suffix="us",this.nonuniform_qualifier="nonuniformEXT",this.boolean_mix_function="mix",this.swizzle_is_function=!1,this.shared_is_implied=!1,this.unsized_array_supported=!0,this.explicit_struct_type=!1,this.use_initializer_list=!1,this.use_typed_initializer_list=!1,this.can_declare_struct_inline=!0,this.can_declare_arrays_inline=!0,this.native_row_major_matrix=!0,this.use_constructor_splatting=!0,this.allow_precision_qualifiers=!1,this.can_swizzle_scalar=!1,this.force_gl_in_out_block=!1,this.can_return_array=!0,this.allow_truncated_access_chain=!1,this.supports_extensions=!1,this.supports_empty_struct=!1,this.array_is_value_type=!0,this.buffer_offset_array_is_value_type=!0,this.comparison_image_samples_scalar=!1,this.native_pointers=!1,this.support_small_type_sampling_result=!1,this.support_case_fallthrough=!0,this.use_array_constructor=!1,this.needs_row_major_load_workaround=!1,this.support_pointer_to_pointer=!1,this.support_precise_qualifier=!1,this.support_64bit_switch=!1,this.workgroup_size_is_hidden=!1},yt=function(e){function t(t,r){var i=e.call(this)||this;return i.compiler=t,i.variables=r,i}return a(t,e),t.prototype.handle=function(e,t,r){var i=this.compiler,a=this.variables,o=0,n=0;switch(e){default:break;case se.OpFunctionCall:if(r<3)return!1;var s=r-3;n+=3;for(var c=0;c<s;c++){(l=i.maybe_get(ge,t[n+c]))&&St(l.storage)&&a.add(t[n+c])}break;case se.OpSelect:if(r<5)return!1;s=r-3;n+=3;for(c=0;c<s;c++){(l=i.maybe_get(ge,t[n+c]))&&St(l.storage)&&a.add(t[n+c])}break;case se.OpPhi:if(r<2)return!1;s=r-2;n+=2;for(c=0;c<s;c+=2){(l=i.maybe_get(ge,t[n+c]))&&St(l.storage)&&a.add(t[n+c])}break;case se.OpAtomicStore:case se.OpStore:if(r<1)return!1;o=t[n];break;case se.OpCopyMemory:if(r<2)return!1;(l=i.maybe_get(ge,t[n]))&&St(l.storage)&&a.add(t[n]),(l=i.maybe_get(ge,t[n+1]))&&St(l.storage)&&a.add(t[n+1]);break;case se.OpExtInst:if(r<5)return!1;switch(i.get(Ve,t[n+2]).ext){case Pe.GLSL:switch(t[n+3]){case ht.GLSLstd450InterpolateAtCentroid:case ht.GLSLstd450InterpolateAtSample:case ht.GLSLstd450InterpolateAtOffset:(l=i.maybe_get(ge,t[n+4]))&&St(l.storage)&&a.add(t[n+4]);break;case ht.GLSLstd450Modf:case ht.GLSLstd450Fract:(l=i.maybe_get(ge,t[n+5]))&&St(l.storage)&&a.add(t[n+5])}break;case Pe.SPV_AMD_shader_explicit_vertex_parameter:var l;if(1===t[n+3])(l=i.maybe_get(ge,t[n+4]))&&St(l.storage)&&a.add(t[n+4])}break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:case se.OpLoad:case se.OpCopyObject:case se.OpImageTexelPointer:case se.OpAtomicLoad:case se.OpAtomicExchange:case se.OpAtomicCompareExchange:case se.OpAtomicCompareExchangeWeak:case se.OpAtomicIIncrement:case se.OpAtomicIDecrement:case se.OpAtomicIAdd:case se.OpAtomicISub:case se.OpAtomicSMin:case se.OpAtomicUMin:case se.OpAtomicSMax:case se.OpAtomicUMax:case se.OpAtomicAnd:case se.OpAtomicOr:case se.OpAtomicXor:case se.OpArrayLength:if(r<3)return!1;o=t[n+2]}o&&((l=i.maybe_get(ge,o))&&St(l.storage)&&a.add(o));return!0},t}(mt);function St(e){switch(e){case v.StorageClassInput:case v.StorageClassOutput:case v.StorageClassUniform:case v.StorageClassUniformConstant:case v.StorageClassAtomicCounter:case v.StorageClassPushConstant:case v.StorageClassStorageBuffer:return!0;default:return!1}}var vt=function(e,t,r,i){this.name="",this.id=e,this.type_id=t,this.base_type_id=r,this.name=i},It=function(){},Ot=function(){this.uniform_buffers=[],this.storage_buffers=[],this.stage_inputs=[],this.stage_outputs=[],this.subpass_inputs=[],this.storage_images=[],this.sampled_images=[],this.atomic_counters=[],this.acceleration_structures=[],this.push_constant_buffers=[],this.separate_images=[],this.separate_samplers=[],this.builtin_inputs=[],this.builtin_outputs=[]},xt=function(e,t,r){this.combined_id=e,this.image_id=t,this.sampler_id=r},kt=function(e){function t(t){var r=e.call(this)||this;return r.parameter_remapping=[],r.functions=[],r.compiler=t,r}return a(t,e),t.prototype.handle=function(e,t,r){var i=this.compiler,a=!1;switch(e){case se.OpLoad:if(r<3)return!1;var o=t[0],n=(E=i.get(xe,o)).basetype===_e.Image&&1===E.image.sampled,s=E.basetype===_e.Sampler;if(!n&&!s)return!0;var c=t[1],l=t[2];return i.set(He,c,"",o,!0),i.register_read(c,l,!0),!0;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;o=t[0],n=(E=i.get(xe,o)).basetype===_e.Image&&1===E.image.sampled;if(s=E.basetype===_e.Sampler)throw new Error("Attempting to use arrays or structs of separate samplers. This is not possible to statically remap to plain GLSL.");if(n){c=t[1],l=t[2];i.set(He,c,"",o,!0),i.register_read(c,l,!0)}return!0;case se.OpImageFetch:case se.OpImageQuerySizeLod:case se.OpImageQuerySize:case se.OpImageQueryLevels:case se.OpImageQuerySamples:if(!(k=i.maybe_get_backing_variable(t[2])))return!0;if((E=i.get(xe,k.basetype)).basetype===_e.Image&&1===E.image.sampled&&E.image.dim!==I.DimBuffer){if(0===i.dummy_sampler_id)throw new Error("texelFetch without sampler was found, but no dummy sampler has been created with build_dummy_sampler_for_combined_images().");a=!0;break}return!0;case se.OpSampledImage:break;default:return!0}if(0!==this.functions.length){var p=this.functions[this.functions.length-1];if(p.do_combined_parameters){var _=t[2],u=i.maybe_get_backing_variable(_);u&&(_=u.self);var d=a?i.dummy_sampler_id:t[3],f=i.maybe_get_backing_variable(d);f&&(d=f.self);var m=t[1],g=i.get(xe,t[0]);this.register_combined_image_sampler(p,m,_,d,g.image.depth)}}var b=this.remap_parameter(t[2]),y=a?i.dummy_sampler_id:this.remap_parameter(t[3]);if(!i.combined_image_samplers.find((function(e){return e.image_id==b&&e.sampler_id==y}))){var S=void 0,O=void 0;if(a){S=i.ir.increase_bound_by(1);var x=i.set(xe,S);h(i.expression_type(t[2]),x),x.self=S,x.basetype=_e.SampledImage,x.image.depth=!1,O=0}else S=t[0],O=t[1];var k,C=(c=i.ir.increase_bound_by(2))+0,E=(m=c+1,i.set(xe,C));if(h(i.get(xe,S),E),E.pointer=!0,E.storage=v.StorageClassUniformConstant,E.parent_type=C,i.set(ge,m,C,v.StorageClassUniformConstant,0),(y&&i.has_decoration(y,N.DecorationRelaxedPrecision)||b&&i.has_decoration(b,N.DecorationRelaxedPrecision)||O&&i.has_decoration(O,N.DecorationRelaxedPrecision))&&i.set_decoration(m,N.DecorationRelaxedPrecision),k=i.maybe_get_backing_variable(b)){var L=i.get(xe,k.basetype);E.array=L.array,E.array_size_literal=L.array_size_literal}i.combined_image_samplers.push(new xt(m,b,y))}return!0},t.prototype.begin_function_scope=function(e,t){if(t<3)return!1;var r=this.compiler.get(Be,e[2]);return e=e.slice(3),t-=3,this.push_remap_parameters(r,e,t),this.functions.push(r),!0},t.prototype.end_function_scope=function(e,t){if(t<3)return!1;var r=this.functions,i=this.compiler,a=i.get(Be,e[2]);e=e.slice(3),this.pop_remap_parameters(),a.do_combined_parameters=!1;var o=r.pop().combined_parameters;if(0===r.length)return!0;var n=r[r.length-1];if(n.do_combined_parameters)for(var s=0,c=o;s<c.length;s++){var l=c[s],p=l.global_image?l.image_id:e[l.image_id],_=l.global_sampler?l.sampler_id:e[l.sampler_id],u=i.maybe_get_backing_variable(p),h=i.maybe_get_backing_variable(_);u&&(p=u.self),h&&(_=h.self),this.register_combined_image_sampler(n,0,p,_,l.depth)}return!0},t.prototype.remap_parameter=function(e){var t=this.compiler.maybe_get_backing_variable(e);t&&(e=t.self);var r=this.parameter_remapping;if(0===r.length)return e;var i=r[r.length-1][e];return void 0!==i?i:e},t.prototype.push_remap_parameters=function(e,t,r){for(var i=[],a=0;a<r;a++)i[e.arguments[a].id]=this.remap_parameter(t[a]);this.parameter_remapping.push(i)},t.prototype.pop_remap_parameters=function(){this.parameter_remapping.pop()},t.prototype.register_combined_image_sampler=function(e,t,r,i,a){var o=new De(0,r,i,!0,!0,a),n=e.arguments.find((function(e){return e.id===r})),s=e.arguments.find((function(e){return e.id===i}));if(n&&(o.global_image=!1,o.image_id=e.arguments.indexOf(n)),s&&(o.global_sampler=!1,o.sampler_id=e.arguments.indexOf(s)),!o.global_image||!o.global_sampler){var c=e.combined_parameters.find((function(e){return o.image_id==e.image_id&&o.sampler_id==e.sampler_id&&o.global_image==e.global_image&&o.global_sampler==e.global_sampler})),l=this.compiler;if(!c){var p=l.ir.increase_bound_by(3),_=p,u=p+1,d=p+2,f=l.expression_type(r),m=l.set(xe,_),g=l.set(xe,u);h(f,m),m.self=_,m.basetype=_e.SampledImage,m.pointer=!1,m.storage=v.StorageClassGeneric,m.image.depth=a,h(m,g),g.pointer=!0,g.storage=v.StorageClassUniformConstant,g.parent_type=_,l.set(ge,d,u,v.StorageClassFunction,0),(l.has_decoration(i,N.DecorationRelaxedPrecision)||l.has_decoration(r,N.DecorationRelaxedPrecision)||t&&l.has_decoration(t,N.DecorationRelaxedPrecision))&&l.set_decoration(d,N.DecorationRelaxedPrecision),o.id=d,l.set_name(d,"SPIRV_Cross_Combined"+l.to_name(r)+l.to_name(i)),e.combined_parameters.push(o),e.shadow_arguments.push(new we(u,d,0,0,!0))}}},t}(mt),Ct=function(){function e(e){this.dominator=0,this.cfg=e}return e.prototype.add_block=function(e){this.cfg.get_immediate_dominator(e)&&(this.dominator?e!==this.dominator&&(this.dominator=this.cfg.find_common_dominator(e,this.dominator)):this.dominator=e)},e.prototype.get_dominator=function(){return this.dominator},e.prototype.lift_continue_block_dominator=function(){if(this.dominator){var e=this.cfg,t=e.get_compiler().get(ze,this.dominator),r=e.get_visit_order(this.dominator),i=!1;switch(t.terminator){case be.Direct:e.get_visit_order(t.next_block)>r&&(i=!0);break;case be.Select:e.get_visit_order(t.true_block)>r&&(i=!0),e.get_visit_order(t.false_block)>r&&(i=!0);break;case be.MultiSelect:for(var a=0,o=e.get_compiler().get_case_list(t);a<o.length;a++){var n=o[a];e.get_visit_order(n.block)>r&&(i=!0)}t.default_block&&e.get_visit_order(t.default_block)>r&&(i=!0)}i&&(this.dominator=e.get_function().entry_block)}},e}(),Et=function(){function e(e,t){this.preceding_edges=[],this.succeeding_edges=[],this.immediate_dominators=[],this.visit_order=[],this.post_order=[],this.empty_vector=[],this.compiler=e,this.func=t}return e.prototype.get_compiler=function(){return this.compiler},e.prototype.get_function=function(){return this.func},e.prototype.get_immediate_dominator=function(e){var t=this.immediate_dominators[e];return t||0},e.prototype.get_visit_order=function(e){var t=this.visit_order[e];console.assert(t);var r=t.get();return console.assert(r>0),r},e.prototype.find_common_dominator=function(e,t){for(;e!==t;)this.get_visit_order(e)<this.get_visit_order(t)?e=this.get_immediate_dominator(e):t=this.get_immediate_dominator(t);return e},e.prototype.get_preceding_edges=function(e){return this.preceding_edges[e]||this.empty_vector},e.prototype.get_succeeding_edges=function(e){return this.succeeding_edges[e]||this.empty_vector},e.prototype.walk_from=function(e,t,r){if(!e.has(t)&&(e.add(t),r(t)))for(var i=0,a=this.get_succeeding_edges(t);i<a.length;i++){var o=a[i];this.walk_from(e,o,r)}},e.prototype.find_loop_dominator=function(e){for(;e!==ze.NoDominator;){var t=this.preceding_edges[e];if(!t)return ze.NoDominator;if(0===t.length)return ze.NoDominator;for(var r=ze.NoDominator,i=!1,a=0,o=t;a<o.length;a++){var n=o[a],s=this.compiler.get(ze,n);if(s.merge==ye.MergeLoop&&s.merge_block==e){r=n,i=!0;break}if(s.merge==ye.MergeSelection&&s.next_block==e){r=n;break}}if(r==ze.NoDominator&&(r=t[0]),e=r,!i&&e)if(this.compiler.get(ze,e).merge==ye.MergeLoop)return e}return e},e.prototype.node_terminates_control_flow_in_sub_graph=function(e,t){var r=this.compiler,i=r.get(ze,e),a=0;for(i.merge===ye.MergeLoop&&(a=i.merge_block);t!=e;){var o=this.preceding_edges[t];if(!o)return!1;for(var n=new Ct(this),s=0,c=o;s<c.length;s++){var l=c[s];n.add_block(l)}var p=n.get_dominator();if(0===p)return!1;var _=r.get(ze,p),u=!1,h=!1;if(a&&_.terminator===be.Select){var d=r.get(ze,_.true_block),f=r.get(ze,_.false_block),m=r.get(ze,a);u=r.execution_is_branchless(d,m),h=r.execution_is_branchless(f,m)}if(!(_.merge===ye.MergeSelection&&_.next_block==t||_.merge===ye.MergeLoop&&_.merge_block==t||_.terminator==be.Direct&&_.next_block==t||_.terminator==be.Select&&_.true_block==t&&h||_.terminator==be.Select&&_.false_block==t&&u))return!1;t=p}return!0},e}(),Lt=function(e){function t(t){var r=e.call(this)||this;return r.function_cfgs=[],r.compiler=t,r}return a(t,e),t.prototype.handle=function(e,t,r){return!0},t.prototype.follow_function_call=function(e){return!this.function_cfgs[e.self]&&(this.function_cfgs[e.self]=new Et(this.compiler,e),!0)},t}(mt);function Mt(e,t,r){return t[r]||(t[r]=0===e||""===e?e:new e),t[r]}var Tt=function(e){function r(t,r){var i=e.call(this)||this;return i.accessed_variables_to_block=[],i.accessed_temporaries_to_block=[],i.result_id_to_type=[],i.complete_write_variables_to_block=[],i.partial_write_variables_to_block=[],i.access_chain_expressions=new Set,i.access_chain_children=[],i.current_block=null,i.compiler=t,i.entry=r,i}return a(r,e),r.prototype.follow_function_call=function(e){return!1},r.prototype.set_current_block=function(e){var t=this,r=this.compiler;this.current_block=e;var i=function(i){for(var a=r.get(ze,i),o=0,n=a.phi_variables;o<n.length;o++){var s=n[o];s.parent===e.self&&(Mt(Set,t.accessed_variables_to_block,s.function_variable).add(e.self),Mt(Set,t.accessed_variables_to_block,s.function_variable).add(a.self),t.notify_variable_access(s.local_variable,e.self))}};switch(e.terminator){case be.Direct:this.notify_variable_access(e.condition,e.self),i(e.next_block);break;case be.Select:this.notify_variable_access(e.condition,e.self),i(e.true_block),i(e.false_block);break;case be.MultiSelect:this.notify_variable_access(e.condition,e.self);for(var a=0,o=r.get_case_list(e);a<o.length;a++){i(o[a].block)}e.default_block&&i(e.default_block)}},r.prototype.notify_variable_access=function(e,t){var r=this;if(0!=e){var i=this.access_chain_children[e];i&&i.forEach((function(e){return r.notify_variable_access(e,t)})),this.id_is_phi_variable(e)?Mt(Set,this.accessed_variables_to_block,e).add(t):this.id_is_potential_temporary(e)&&Mt(Set,this.accessed_temporaries_to_block,e).add(t)}},r.prototype.id_is_phi_variable=function(e){if(e>=this.compiler.get_current_id_bound())return!1;var t=this.compiler.maybe_get(ge,e);return t&&t.phi_variable},r.prototype.id_is_potential_temporary=function(e){return!(e>=this.compiler.get_current_id_bound())&&(this.compiler.ir.ids[e].empty()||this.compiler.ir.ids[e].get_type()===t.TypeExpression)},r.prototype.handle=function(e,t,r){var i=this.compiler,a={result_type:0,result_id:0};switch(i.instruction_to_result_type(a,e,t,r)&&(this.result_id_to_type[a.result_id]=a.result_type),e){case se.OpStore:if(r<2)return!1;var o=t[0];(u=i.maybe_get_backing_variable(o))&&(Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),u.self==o?Mt(Set,this.complete_write_variables_to_block,u.self).add(this.current_block.self):Mt(Set,this.partial_write_variables_to_block,u.self).add(this.current_block.self)),this.notify_variable_access(t[0],this.current_block.self),this.notify_variable_access(t[1],this.current_block.self);break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;o=t[2];(u=this.compiler.maybe_get(ge,o))&&(Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),Mt(Set,this.access_chain_children,t[1]).add(u.self));for(var n=2;n<r;n++)this.notify_variable_access(t[n],this.current_block.self),Mt(Set,this.access_chain_children,t[1]).add(t[n]);this.notify_variable_access(t[1],this.current_block.self);var s=i.set(He,t[1],"",t[0],!0),c=i.maybe_get_backing_variable(o);s.loaded_from=c?c.self:0,i.ir.ids[t[1]].set_allow_type_rewrite(),this.access_chain_expressions.add(t[1]);break;case se.OpCopyMemory:if(r<2)return!1;var l=t[0],p=t[1];(u=i.maybe_get_backing_variable(l))&&(Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),u.self==l?Mt(Set,this.complete_write_variables_to_block,u.self).add(this.current_block.self):Mt(Set,this.partial_write_variables_to_block,u.self).add(this.current_block.self));for(n=0;n<2;n++)this.notify_variable_access(t[n],this.current_block.self);(u=i.maybe_get_backing_variable(p))&&Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self);break;case se.OpCopyObject:if(r<3)return!1;(u=i.maybe_get_backing_variable(t[2]))&&Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),this.notify_variable_access(t[1],this.current_block.self),this.access_chain_expressions.has(t[2])&&this.access_chain_expressions.add(t[1]),this.notify_variable_access(t[2],this.current_block.self);break;case se.OpLoad:if(r<3)return!1;o=t[2];(u=i.maybe_get_backing_variable(o))&&Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),this.notify_variable_access(t[1],this.current_block.self),this.notify_variable_access(t[2],this.current_block.self);break;case se.OpFunctionCall:if(r<3)return!1;i.get_type(t[0]).basetype!==_e.Void&&this.notify_variable_access(t[1],this.current_block.self),r-=3,t=t.slice(3);for(n=0;n<r;n++){(u=i.maybe_get_backing_variable(t[n]))&&(Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),Mt(Set,this.partial_write_variables_to_block,u.self).add(this.current_block.self)),this.notify_variable_access(t[n],this.current_block.self)}break;case se.OpSelect:for(n=1;n<r;n++){if(n>=3)(u=i.maybe_get_backing_variable(t[n]))&&(Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),Mt(Set,this.partial_write_variables_to_block,u.self).add(this.current_block.self));this.notify_variable_access(t[n],this.current_block.self)}break;case se.OpExtInst:for(n=4;n<r;n++)this.notify_variable_access(t[n],this.current_block.self);this.notify_variable_access(t[1],this.current_block.self);var _=t[2];if(i.get(Ve,_).ext===Pe.GLSL)switch(t[3]){case ht.GLSLstd450Modf:case ht.GLSLstd450Frexp:var u;o=t[5];(u=i.maybe_get_backing_variable(o))&&(Mt(Set,this.accessed_variables_to_block,u.self).add(this.current_block.self),u.self==o?Mt(Set,this.complete_write_variables_to_block,u.self).add(this.current_block.self):Mt(Set,this.partial_write_variables_to_block,u.self).add(this.current_block.self))}break;case se.OpArrayLength:this.notify_variable_access(t[1],this.current_block.self);break;case se.OpLine:case se.OpNoLine:break;case se.OpCompositeInsert:case se.OpVectorShuffle:for(n=1;n<4;n++)this.notify_variable_access(t[n],this.current_block.self);break;case se.OpCompositeExtract:for(n=1;n<3;n++)this.notify_variable_access(t[n],this.current_block.self);break;case se.OpImageWrite:for(n=0;n<r;n++)3!=n&&this.notify_variable_access(t[n],this.current_block.self);break;case se.OpImageSampleImplicitLod:case se.OpImageSampleExplicitLod:case se.OpImageSparseSampleImplicitLod:case se.OpImageSparseSampleExplicitLod:case se.OpImageSampleProjImplicitLod:case se.OpImageSampleProjExplicitLod:case se.OpImageSparseSampleProjImplicitLod:case se.OpImageSparseSampleProjExplicitLod:case se.OpImageFetch:case se.OpImageSparseFetch:case se.OpImageRead:case se.OpImageSparseRead:for(n=1;n<r;n++)4!=n&&this.notify_variable_access(t[n],this.current_block.self);break;case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleDrefExplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleDrefExplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:case se.OpImageGather:case se.OpImageSparseGather:case se.OpImageDrefGather:case se.OpImageSparseDrefGather:for(n=1;n<r;n++)5!=n&&this.notify_variable_access(t[n],this.current_block.self);break;default:for(n=0;n<r;n++)this.notify_variable_access(t[n],this.current_block.self)}return!0},r.prototype.handle_terminator=function(e){switch(e.terminator){case be.Return:e.return_value&&this.notify_variable_access(e.return_value,e.self);break;case be.Select:case be.MultiSelect:this.notify_variable_access(e.condition,e.self)}return!0},r}(mt),Rt=function(e){function t(t,r){var i=e.call(this)||this;return i.static_expression=0,i.write_count=0,i.variable_id=r,i}return a(t,e),t.prototype.follow_function_call=function(e){return!1},t.prototype.handle=function(e,t,r){switch(e){case se.OpStore:if(r<2)return!1;t[0]===this.variable_id&&(this.static_expression=t[1],this.write_count++);break;case se.OpLoad:if(r<3)return!1;if(t[2]==this.variable_id&&0===this.static_expression)return!1;break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;if(t[2]===this.variable_id)return!1}return!0},t}(mt),wt=function(e){function t(t){var r=e.call(this)||this;return r.compiler=t,r}return a(t,e),t.prototype.handle=function(e,t,r){return!1},t.prototype.handle_builtin=function(e,t,r){if(t===P.BuiltInClipDistance){if(!e.array_size_literal[0])throw new Error("Array size for ClipDistance must be a literal.");if(0===(i=e.array[0]))throw new Error("Array size for ClipDistance must not be unsized.");this.compiler.clip_distance_count=i}else if(t===P.BuiltInCullDistance){if(!e.array_size_literal[0])throw new Error("Array size for CullDistance must be a literal.");var i;if(0===(i=e.array[0]))throw new Error("Array size for CullDistance must not be unsized.");this.compiler.cull_distance_count=i}else t===P.BuiltInPosition&&r.get(N.DecorationInvariant)&&(this.compiler.position_invariant=!0)},t.prototype.add_if_builtin_or_block=function(e){this.add_if_builtin(e,!0)},t.prototype.add_if_builtin=function(e,t){void 0===t&&(t=!1);var r=this.compiler,i=r.maybe_get(ge,e),a=r.ir.find_meta(e);if(i&&a){var o=r.get(xe,i.basetype),n=a.decoration,s=o.storage==v.StorageClassInput?r.active_input_builtins:r.active_output_builtins;if(n.builtin)s.set(n.builtin_type),this.handle_builtin(o,n.builtin_type,n.decoration_flags);else if(t&&r.has_decoration(o.self,N.DecorationBlock))for(var c=o.member_types.length,l=0;l<c;l++)if(r.has_member_decoration(o.self,l,N.DecorationBuiltIn)){var p=r.get(xe,o.member_types[l]),_=r.get_member_decoration(o.self,l,N.DecorationBuiltIn);s.set(_),this.handle_builtin(p,_,r.get_member_decoration_bitset(o.self,l))}}},t}(mt),Dt=function(e){function t(t){var r=e.call(this)||this;return r.dref_combined_samplers=new Set,r.compiler=t,r}return a(t,e),t.prototype.handle=function(e,t,r){switch(e){case se.OpImageSampleDrefExplicitLod:case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:case se.OpImageSparseSampleDrefExplicitLod:case se.OpImageDrefGather:case se.OpImageSparseDrefGather:return this.dref_combined_samplers.add(t[2]),!0}return!0},t}(mt),At=function(e){function t(t,r){var i=e.call(this)||this;return i.dref_combined_samplers=new Set,i.dependency_hierarchy=[],i.comparison_ids=new Set,i.need_subpass_input=!1,i.compiler=t,i.dref_combined_samplers=r,i}return a(t,e),t.prototype.begin_function_scope=function(e,t){if(t<3)return!1;var r=this.compiler.get(Be,e[2]);t-=3;for(var i=0;i<t;i++){var a=r.arguments[i];this.add_dependency(a.id,e[3+i])}return!0},t.prototype.handle=function(e,t,r){switch(e){case se.OpImageSampleDrefExplicitLod:case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:case se.OpImageSparseSampleDrefExplicitLod:case se.OpImageDrefGather:case se.OpImageSparseDrefGather:return this.dref_combined_samplers.add(t[2]),!0}return!0},t.prototype.add_hierarchy_to_comparison_ids=function(e){var t=this;this.comparison_ids.add(e),Mt(Set,this.dependency_hierarchy,e).forEach((function(e){return t.add_hierarchy_to_comparison_ids(e)}))},t.prototype.add_dependency=function(e,t){Mt(Set,this.dependency_hierarchy,e).add(t),this.comparison_ids.has(t)&&this.comparison_ids.add(e)},t}(mt),Bt=function(e){function t(t,r){var i=e.call(this)||this;return i.interlock_function_id=0,i.current_block_id=0,i.split_function_case=!1,i.control_flow_interlock=!1,i.call_stack=[],i.compiler=t,i.call_stack.push(r),i}return a(t,e),t.prototype.rearm_current_block=function(e){this.current_block_id=e.self},t.prototype.begin_function_scope=function(e,t){return!(t<3)&&(this.call_stack.push(e[2]),!0)},t.prototype.end_function_scope=function(e,t){return this.call_stack.pop(),!0},t.prototype.handle=function(e,t,r){if(e===se.OpBeginInvocationInterlockEXT||e===se.OpEndInvocationInterlockEXT){if(0!=this.interlock_function_id&&this.interlock_function_id!==this.call_stack[this.call_stack.length-1])return this.split_function_case=!0,!1;var i=this.compiler;this.interlock_function_id=this.call_stack[this.call_stack.length-1];var a=i.get_cfg_for_function(this.interlock_function_id),o=i.get(Be,this.interlock_function_id).entry_block;a.node_terminates_control_flow_in_sub_graph(o,this.current_block_id)||(this.control_flow_interlock=!0)}return!0},t}(mt),Nt=function(e){function t(t,r){var i=e.call(this)||this;return i.in_crit_sec=!1,i.interlock_function_id=0,i.split_function_case=!1,i.control_flow_interlock=!1,i.use_critical_section=!1,i.call_stack_is_interlocked=!1,i.call_stack=[],i.compiler=t,i.call_stack.push(r),i}return a(t,e),t.prototype.handle=function(e,t,r){if(this.use_critical_section){if(e===se.OpBeginInvocationInterlockEXT)return this.in_crit_sec=!0,!0;if(e===se.OpEndInvocationInterlockEXT)return!1}var i=this.compiler;switch(e){case se.OpLoad:if(r<3)return!1;var a=t[2];if(!(h=this.compiler.maybe_get_backing_variable(a)))break;switch(h.storage){default:break;case v.StorageClassUniformConstant:var o=t[0],n=t[1];i.set(He,n,"",o,!0),i.register_read(n,a,!0);break;case v.StorageClassUniform:if(!i.has_decoration(i.get(xe,h.basetype).self,N.DecorationBufferBlock))break;case v.StorageClassStorageBuffer:this.access_potential_resource(h.self)}break;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:if(r<3)return!1;o=t[0];var s=i.get(xe,o);if(s.storage==v.StorageClassUniform||s.storage==v.StorageClassUniformConstant||s.storage==v.StorageClassStorageBuffer){n=t[1],a=t[2];i.set(He,n,"",o,!0),i.register_read(n,a,!0),i.ir.ids[n].set_allow_type_rewrite()}break;case se.OpImageTexelPointer:if(r<3)return!1;o=t[0],n=t[1],a=t[2];var c=i.set(He,n,"",o,!0);(h=i.maybe_get_backing_variable(a))&&(c.loaded_from=h.self);break;case se.OpStore:case se.OpImageWrite:case se.OpAtomicStore:if(r<1)return!1;a=t[0];!(h=i.maybe_get_backing_variable(a))||h.storage!==v.StorageClassUniform&&h.storage!==v.StorageClassUniformConstant&&h.storage!==v.StorageClassStorageBuffer||this.access_potential_resource(h.self);break;case se.OpCopyMemory:if(r<2)return!1;var l=t[0],p=t[1],_=i.maybe_get_backing_variable(l),u=i.maybe_get_backing_variable(p);if(!_||_.storage!==v.StorageClassUniform&&_.storage!==v.StorageClassStorageBuffer||this.access_potential_resource(_.self),u){if(u.storage!=v.StorageClassUniform&&u.storage!=v.StorageClassStorageBuffer)break;if(u.storage==v.StorageClassUniform&&!i.has_decoration(i.get(xe,u.basetype).self,N.DecorationBufferBlock))break;this.access_potential_resource(u.self)}break;case se.OpImageRead:case se.OpAtomicLoad:if(r<3)return!1;a=t[2];if(!(h=i.maybe_get_backing_variable(a)))break;switch(h.storage){default:break;case v.StorageClassUniform:if(!i.has_decoration(i.get(xe,h.basetype).self,N.DecorationBufferBlock))break;case v.StorageClassUniformConstant:case v.StorageClassStorageBuffer:this.access_potential_resource(h.self)}break;case se.OpAtomicExchange:case se.OpAtomicCompareExchange:case se.OpAtomicIIncrement:case se.OpAtomicIDecrement:case se.OpAtomicIAdd:case se.OpAtomicISub:case se.OpAtomicSMin:case se.OpAtomicUMin:case se.OpAtomicSMax:case se.OpAtomicUMax:case se.OpAtomicAnd:case se.OpAtomicOr:case se.OpAtomicXor:if(r<3)return!1;var h;a=t[2];!(h=i.maybe_get_backing_variable(a))||h.storage!=v.StorageClassUniform&&h.storage!=v.StorageClassUniformConstant&&h.storage!=v.StorageClassStorageBuffer||this.access_potential_resource(h.self)}return!0},t.prototype.begin_function_scope=function(e,t){return!(t<3)&&(e[2]===this.interlock_function_id&&(this.call_stack_is_interlocked=!0),this.call_stack.push(e[2]),!0)},t.prototype.end_function_scope=function(e,t){return this.call_stack[this.call_stack.length-1]===this.interlock_function_id&&(this.call_stack_is_interlocked=!1),this.call_stack.pop(),!0},t.prototype.access_potential_resource=function(e){(this.use_critical_section&&this.in_crit_sec||this.control_flow_interlock&&this.call_stack_is_interlocked||this.split_function_case)&&this.compiler.interlocked_resources.add(e)},t}(mt),Pt=function(){this.alignment=0},Gt=function(e){function t(t){var r=e.call(this)||this;return r.non_block_types=new Set,r.physical_block_type_meta=[],r.access_chain_to_physical_block=[],r.compiler=t,r}return a(t,e),t.prototype.handle=function(e,t,r){switch(e){case se.OpConvertUToPtr:case se.OpBitcast:case se.OpCompositeExtract:this.setup_meta_chain(t[0],t[1]);break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:case se.OpCopyObject:var i=this.access_chain_to_physical_block[t[2]];i&&(this.access_chain_to_physical_block[t[1]]=i);break;case se.OpLoad:this.setup_meta_chain(t[0],t[1]),r>=4&&this.mark_aligned_access(t[2],t.slice(3),r-3);break;case se.OpStore:r>=3&&this.mark_aligned_access(t[0],t.slice(3),r-2)}return!0},t.prototype.mark_aligned_access=function(e,t,r){var i=t[0],a=0;if(--r&&0!=(i&W.MemoryAccessVolatileMask)&&(a++,r--),r&&0!=(i&W.MemoryAccessAlignedMask)){var o=t[a],n=this.find_block_meta(e);n&&o>n.alignment&&(n.alignment=o)}},t.prototype.find_block_meta=function(e){return this.access_chain_to_physical_block[e]||null},t.prototype.type_is_bda_block_entry=function(e){var t=this.compiler.get(xe,e);return t.storage==v.StorageClassPhysicalStorageBufferEXT&&t.pointer&&1==t.pointer_depth&&!this.compiler.type_is_array_of_pointers(t)},t.prototype.setup_meta_chain=function(e,t){if(this.type_is_bda_block_entry(e)){var r=Mt(Pt,this.physical_block_type_meta,e);this.access_chain_to_physical_block[t]=r;var i=this.compiler.get(xe,e);i.basetype!=_e.Struct&&this.non_block_types.add(e),0==r.alignment&&(r.alignment=this.get_minimum_scalar_alignment(this.compiler.get_pointee_type(i)))}},t.prototype.get_minimum_scalar_alignment=function(e){if(e.storage==v.StorageClassPhysicalStorageBufferEXT)return 8;if(e.basetype===_e.Struct){for(var t=0,r=0,i=e.member_types;r<i.length;r++){var a=i[r],o=this.get_minimum_scalar_alignment(this.compiler.get(xe,a));o>t&&(t=o)}return t}return e.width/8},t.prototype.analyze_non_block_types_from_block=function(e){for(var t=0,r=e.member_types;t<r.length;t++){var i=r[t],a=this.compiler.get(xe,i);a.basetype!==_e.Struct&&a.pointer&&a.storage===v.StorageClassPhysicalStorageBufferEXT?this.non_block_types.add(this.get_base_non_block_type_id(i)):a.basetype!==_e.Struct||a.pointer||this.analyze_non_block_types_from_block(a)}},t.prototype.get_base_non_block_type_id=function(e){for(var t=this.compiler.get(xe,e);t.pointer&&t.storage==v.StorageClassPhysicalStorageBufferEXT&&!this.type_is_bda_block_entry(e);)e=t.parent_type,t=this.compiler.get(xe,e);return console.assert(this.type_is_bda_block_entry(e)),e},t}(mt),Ft=function(){function e(e){this.global_variables=[],this.aliased_variables=[],this.current_loop_level=0,this.active_interface_variables=new Set,this.check_active_interface_variables=!1,this.invalid_expressions=new Set,this.is_force_recompile=!1,this.combined_image_samplers=[],this.forced_temporaries=new Set,this.forwarded_temporaries=new Set,this.suppressed_usage_tracking=new Set,this.hoisted_temporaries=new Set,this.forced_invariant_temporaries=new Set,this.active_input_builtins=new le,this.active_output_builtins=new le,this.clip_distance_count=0,this.cull_distance_count=0,this.position_invariant=!1,this.comparison_ids=new Set,this.need_subpass_input=!1,this.physical_storage_non_block_pointer_types=[],this.physical_storage_type_to_alignment=[],this.interlocked_resources=new Set,this.interlocked_is_complex=!1,this.declared_block_names=[],this.set_ir(e)}return e.prototype.get_name=function(e){return this.ir.get_name(e)},e.prototype.set_decoration=function(e,t,r){void 0===r&&(r=0),this.ir.set_decoration(e,t,r)},e.prototype.set_decoration_string=function(e,t,r){this.ir.set_decoration_string(e,t,r)},e.prototype.set_name=function(e,t){this.ir.set_name(e,t)},e.prototype.get_decoration_bitset=function(e){return this.ir.get_decoration_bitset(e)},e.prototype.get_declared_struct_member_size=function(e,t){if(0===e.member_types.length)throw new Error("Declared struct in block cannot be empty.");var r=this.get_member_decoration_bitset(e.self,t),i=this.get(xe,e.member_types[t]);switch(i.basetype){case _e.Unknown:case _e.Void:case _e.Boolean:case _e.AtomicCounter:case _e.Image:case _e.SampledImage:case _e.Sampler:throw new Error("Querying size for object with opaque size.")}if(i.pointer&&i.storage===v.StorageClassPhysicalStorageBuffer&&i.pointer_depth>this.get(xe,i.parent_type).pointer_depth)return 8;if(i.array.length>0){var a=i.array_size_literal[i.array_size_literal.length-1]?i.array[i.array.length-1]:this.evaluate_constant_u32(i.array[i.array.length-1]);return this.type_struct_member_array_stride(e,t)*a}if(i.basetype===_e.Struct)return this.get_declared_struct_size(i);var o=i.vecsize,n=i.columns;if(1===n)return o*(i.width/8);var s=this.type_struct_member_matrix_stride(e,t);if(r.get(N.DecorationRowMajor))return s*o;if(r.get(N.DecorationColMajor))return s*n;throw new Error("Either row-major or column-major must be declared for matrices.")},e.prototype.get_active_interface_variables=function(){var e=this,t=this.ir,r=new Set,i=new yt(this,r);return this.traverse_all_reachable_opcodes(this.get(Be,t.default_entry_point),i),t.for_each_typed_id(ge,(function(t,i){i.storage===v.StorageClassOutput&&e.interface_variable_exists_in_entry_point(i.self)&&(0===i.initializer&&e.get_execution_model()===g.ExecutionModelFragment||r.add(i.self))})),this.dummy_sampler_id&&r.add(this.dummy_sampler_id),r},e.prototype.set_enabled_interface_variables=function(e){this.active_interface_variables=e,this.check_active_interface_variables=!0},e.prototype.get_shader_resources=function(e){var t=this,r=new Ot,i=this.ir,a=this.reflection_ssbo_instance_name_is_significant();return i.for_each_typed_id(ge,(function(o,n){var s=t.get(xe,n.basetype);if(n.storage!==v.StorageClassFunction&&s.pointer&&(!e||e.has(n.self))){var c=!0;if(i.get_spirv_version()<66560&&n.storage!==v.StorageClassInput&&n.storage!==v.StorageClassOutput||(c=t.interface_variable_exists_in_entry_point(n.self)),c)if(t.is_builtin_variable(n)){if(n.storage!==v.StorageClassInput&&n.storage!==v.StorageClassOutput)return;var l=n.storage===v.StorageClassInput?r.builtin_inputs:r.builtin_outputs,p=new It;if(t.has_decoration(s.self,N.DecorationBlock)){p.resource=new vt(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1));for(var _=0;_<s.member_types.length;_++)p.value_type_id=s.member_types[_],p.builtin=t.get_member_decoration(s.self,_,N.DecorationBuiltIn),l.push(p)}else{var u=!t.has_decoration(n.self,N.DecorationPatch)&&(t.get_execution_model()===g.ExecutionModelTessellationControl||t.get_execution_model()===g.ExecutionModelTessellationEvaluation&&n.storage===v.StorageClassInput);p.resource=new vt(n.self,n.basetype,s.self,t.get_name(n.self)),u&&s.array.length>0?p.value_type_id=t.get_variable_data_type(n).parent_type:p.value_type_id=t.get_variable_data_type_id(n),console.assert(p.value_type_id),p.builtin=t.get_decoration(n.self,N.DecorationBuiltIn),l.push(p)}}else n.storage===v.StorageClassInput?t.has_decoration(s.self,N.DecorationBlock)?r.stage_inputs.push(new vt(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1))):r.stage_inputs.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):n.storage===v.StorageClassUniformConstant&&s.image.dim===I.DimSubpassData?r.subpass_inputs.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):n.storage===v.StorageClassOutput?t.has_decoration(s.self,N.DecorationBlock)?r.stage_outputs.push(new vt(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1))):r.stage_outputs.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassUniform&&t.has_decoration(s.self,N.DecorationBlock)?r.uniform_buffers.push(new vt(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,!1))):s.storage===v.StorageClassUniform&&t.has_decoration(s.self,N.DecorationBufferBlock)||s.storage===v.StorageClassStorageBuffer?r.storage_buffers.push(new vt(n.self,n.basetype,s.self,t.get_remapped_declared_block_name(n.self,a))):s.storage===v.StorageClassPushConstant?r.push_constant_buffers.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassUniformConstant&&s.basetype===_e.Image&&2===s.image.sampled?r.storage_images.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassUniformConstant&&s.basetype===_e.Image&&1===s.image.sampled?r.separate_images.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassUniformConstant&&s.basetype===_e.Sampler?r.separate_samplers.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassUniformConstant&&s.basetype===_e.SampledImage?r.sampled_images.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassAtomicCounter?r.atomic_counters.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self))):s.storage===v.StorageClassUniformConstant&&s.basetype===_e.AccelerationStructure&&r.acceleration_structures.push(new vt(n.self,n.basetype,s.self,t.get_name(n.self)))}})),r},e.prototype.get_common_basic_type=function(e){if(e.basetype===_e.Struct){for(var t=_e.Unknown,r=0,i=e.member_types;r<i.length;r++){var a=i[r],o=this.get_common_basic_type(this.get(xe,a));if(void 0===o)return;if(t===_e.Unknown)t=o;else if(t!==o)return}return t}return e.basetype},e.prototype.set_remapped_variable_state=function(e,t){this.get(ge,e).remapped_variable=t},e.prototype.get_remapped_variable_state=function(e){return this.get(ge,e).remapped_variable},e.prototype.set_subpass_input_remapped_components=function(e,t){this.get(ge,e).remapped_components=t},e.prototype.get_subpass_input_remapped_components=function(e){return this.get(ge,e).remapped_components},e.prototype.get_entry_points_and_stages=function(){var e=[];return this.ir.entry_points.forEach((function(t){return e.push(new ft(t.orig_name,t.model))})),e},e.prototype.set_entry_point=function(e,t){var r=this.get_entry_point(e,t);this.ir.default_entry_point=r.self},e.prototype.rename_entry_point=function(e,t,r){var i=this.get_entry_point(e,r);i.orig_name=t,i.name=t},e.prototype.get_entry_point=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.ir;if(0===e.length)return r.entry_points[r.default_entry_point];var i=r.entry_points.find((function(t){return t.orig_name===e[0]&&t.model===e[1]}));if(!i)throw new Error("Entry point does not exist.");return i},e.prototype.update_active_builtins=function(){var e=this,t=this.ir;this.active_input_builtins.reset(),this.active_output_builtins.reset(),this.cull_distance_count=0,this.clip_distance_count=0;var r=new wt(this);this.traverse_all_reachable_opcodes(this.get(Be,t.default_entry_point),r),t.for_each_typed_id(ge,(function(t,i){i.storage===v.StorageClassOutput&&e.interface_variable_exists_in_entry_point(i.self)&&0!==i.initializer&&r.add_if_builtin_or_block(i.self)}))},e.prototype.has_active_builtin=function(e,t){var r;switch(t){case v.StorageClassInput:r=this.active_input_builtins;break;case v.StorageClassOutput:r=this.active_output_builtins;break;default:return!1}return r.get(e)},e.prototype.get_execution_model=function(){return this.get_entry_point().model},e.prototype.build_dummy_sampler_for_combined_images=function(){var e=new gt(this);this.traverse_all_reachable_opcodes(this.get(Be,this.ir.default_entry_point),e);var t=this.ir;if(e.need_dummy_sampler){var r=t.increase_bound_by(3),i=r,a=r+1,o=r+2,n=this.set(xe,i);n.basetype=_e.Sampler;var s=this.set(xe,a);return h(n,s),s.self=i,s.storage=v.StorageClassUniformConstant,s.pointer=!0,s.parent_type=i,this.set(ge,o,a,v.StorageClassUniformConstant,0),this.set_name(o,"SPIRV_Cross_DummySampler"),this.dummy_sampler_id=o,o}return 0},e.prototype.build_combined_image_samplers=function(){this.ir.for_each_typed_id(Be,(function(e,t){t.combined_parameters=[],t.shadow_arguments=[],t.do_combined_parameters=!0})),this.combined_image_samplers=[];var e=new kt(this);this.traverse_all_reachable_opcodes(this.get(Be,this.ir.default_entry_point),e)},e.prototype.get_combined_image_samplers=function(){return this.combined_image_samplers},e.prototype.set_variable_type_remap_callback=function(e){this.variable_remap_callback=e},e.prototype.get_current_id_bound=function(){return this.ir.ids.length},e.prototype.stream=function(e){if(!e.length)return null;if(e.is_embedded()){var t=e;return console.assert(t.ops.length===e.length),new Uint32Array(t.ops)}if(e.offset+e.length>this.ir.spirv.length)throw new Error("Compiler::stream() out of range.");return this.ir.spirv.slice(e.offset,e.offset+e.length)},e.prototype.execution_is_branchless=function(e,t){for(var r=e;;){if(r.self===t.self)return!0;if(r.terminator!==be.Direct||r.merge!==ye.MergeNone)return!1;r=this.get(ze,r.next_block)}},e.prototype.execution_is_direct_branch=function(e,t){return e.terminator===be.Direct&&e.merge===ye.MergeNone&&e.next_block===t.self},e.prototype.is_break=function(e){return this.ir.block_meta[e]=this.ir.block_meta[e]||0,0!=(this.ir.block_meta[e]&(Ue.BLOCK_META_LOOP_MERGE_BIT|Ue.BLOCK_META_MULTISELECT_MERGE_BIT))},e.prototype.is_loop_break=function(e){return this.ir.block_meta[e]=this.ir.block_meta[e]||0,0!=(this.ir.block_meta[e]&Ue.BLOCK_META_LOOP_MERGE_BIT)},e.prototype.is_conditional=function(e){return this.ir.block_meta[e]=this.ir.block_meta[e]||0,0!=(this.ir.block_meta[e]&(Ue.BLOCK_META_SELECTION_MERGE_BIT|Ue.BLOCK_META_MULTISELECT_MERGE_BIT))},e.prototype.flush_dependees=function(e){for(var t=0,r=e.dependees;t<r.length;t++){var i=r[t];this.invalid_expressions.add(i)}e.dependees=[]},e.prototype.flush_all_active_variables=function(){for(var e=0,t=this.current_function.local_variables;e<t.length;e++){var r=t[e];this.flush_dependees(this.get(ge,r))}for(var i=0,a=this.current_function.arguments;i<a.length;i++){var o=a[i];this.flush_dependees(this.get(ge,o.id))}for(var n=0,s=this.global_variables;n<s.length;n++){var c=s[n];this.flush_dependees(this.get(ge,c))}this.flush_all_aliased_variables()},e.prototype.flush_all_aliased_variables=function(){for(var e=0,t=this.aliased_variables;e<t.length;e++){var r=t[e];this.flush_dependees(this.get(ge,r))}},e.prototype.flush_control_dependent_expressions=function(e){for(var t=this.get(ze,e),r=0,i=t.invalidate_expressions;r<i.length;r++){var a=i[r];this.invalid_expressions.add(a)}t.invalidate_expressions=[]},e.prototype.register_global_read_dependencies=function(e,t){if(e instanceof Be)for(var r=0,i=e.blocks;r<i.length;r++){var a=i[r];this.register_global_read_dependencies(this.get(ze,a),t)}else for(var o=0,n=e.ops;o<n.length;o++){var s=n[o],c=this.stream(s);switch(s.op){case se.OpFunctionCall:var l=c[2];this.register_global_read_dependencies(this.get(Be,l),t);break;case se.OpLoad:case se.OpImageRead:var p=this.maybe_get_backing_variable(c[2]);if(p&&p.storage!==v.StorageClassFunction){var _=this.get(xe,p.basetype);_.basetype!=_e.Image&&_.image.dim!==I.DimSubpassData&&p.dependees.push(t)}}}},e.prototype.update_name_cache=function(e,t,r){if(!r)return r=t,t=e,this.update_name_cache(e,t,r);if(""===r)return r;var i=function(r){return!!e.has(r)||!(e===t||!t.has(r))},a=function(t){e.add(t)};if(!i(r))return a(r),r;var o=0,n=r,s=!0;"_"===n?n+="0":"_"===n.charAt(n.length-1)&&(s=!1);do{r=n+(s?"_":"")+Qe(++o)}while(i(r));return a(r),r},e.prototype.function_is_pure=function(e){for(var t=0,r=e.blocks;t<r.length;t++){var i=r[t];if(!this.block_is_pure(this.get(ze,i)))return!1}return!0},e.prototype.block_is_pure=function(e){if(e.terminator===be.Kill||e.terminator===be.TerminateRay||e.terminator===be.IgnoreIntersection)return!1;for(var t=0,r=e.ops;t<r.length;t++){var i=r[t],a=this.stream(i);switch(i.op){case se.OpFunctionCall:var o=a[2];if(!this.function_is_pure(this.get(Be,o)))return!1;break;case se.OpCopyMemory:case se.OpStore:if(this.expression_type(a[0]).storage!==v.StorageClassFunction)return!1;break;case se.OpImageWrite:case se.OpControlBarrier:case se.OpMemoryBarrier:case se.OpDemoteToHelperInvocationEXT:return!1;case se.OpExtInst:var n=a[2];if(this.get(Ve,n).ext===Pe.GLSL)switch(a[3]){case ht.GLSLstd450Modf:case ht.GLSLstd450Frexp:if(this.expression_type(a[5]).storage!==v.StorageClassFunction)return!1}}}return!0},e.prototype.execution_is_noop=function(e,t){if(!this.execution_is_branchless(e,t))return!1;for(var r=e;;){if(r.self===t.self)return!0;if(r.ops.length>0)return!1;for(var i=this.get(ze,r.next_block),a=0,o=i.phi_variables;a<o.length;a++){if(o[a].parent===r.self)return!1}r=i}},e.prototype.continue_block_type=function(e){if(e.complex_continue)return Ie.ComplexLoop;if(e.merge===ye.MergeLoop)return Ie.WhileLoop;if(e.loop_dominator===ze.NoDominator)return Ie.ComplexLoop;var t=this.get(ze,e.loop_dominator);if(this.execution_is_noop(e,t))return Ie.WhileLoop;if(this.execution_is_branchless(e,t))return Ie.ForLoop;var r=this.maybe_get(ze,e.false_block),i=this.maybe_get(ze,e.true_block),a=this.maybe_get(ze,t.merge_block),o=r&&this.flush_phi_required(e.self,e.false_block),n=i&&this.flush_phi_required(e.self,e.true_block);if(o||n)return Ie.ComplexLoop;var s=e.true_block===t.self&&(e.false_block===t.merge_block||r&&a&&this.execution_is_noop(r,a)),c=e.false_block===t.self&&(e.true_block===t.merge_block||i&&a&&this.execution_is_noop(i,a));return e.merge===ye.MergeNone&&e.terminator===be.Select&&(s||c)?Ie.DoWhileLoop:Ie.ComplexLoop},e.prototype.force_recompile=function(){this.is_force_recompile=!0},e.prototype.is_forcing_recompilation=function(){return this.is_force_recompile},e.prototype.block_is_loop_candidate=function(e,t){if(e.disable_block_optimization||e.complex_continue)return!1;if(t===ve.MergeToSelectForLoop||t===ve.MergeToSelectContinueForLoop){var r=this.maybe_get(ze,e.false_block),i=this.maybe_get(ze,e.true_block),a=this.maybe_get(ze,e.merge_block),o=e.false_block===e.merge_block||r&&a&&this.execution_is_noop(r,a),n=e.true_block===e.merge_block||i&&a&&this.execution_is_noop(i,a),s=e.true_block!==e.merge_block&&e.true_block!==e.self&&o,c=e.false_block!==e.merge_block&&e.false_block!==e.self&&n;if((h=e.terminator===be.Select&&e.merge===ye.MergeLoop&&(s||c))&&s&&t===ve.MergeToSelectContinueForLoop?h=e.true_block===e.continue_block:h&&c&&t===ve.MergeToSelectContinueForLoop&&(h=e.false_block===e.continue_block),h){for(var l=0,p=e.phi_variables;l<p.length;l++){if((I=p[l]).parent===e.self)return!1}if(y=this.maybe_get(ze,e.merge_block))for(var _=0,u=y.phi_variables;_<u.length;_++){if((I=u[_]).parent===e.self)return!1}}return h}if(t===ve.MergeToDirectForLoop){var h;if(!(h=e.terminator===be.Direct&&e.merge===ye.MergeLoop&&0===e.ops.length))return!1;var d=this.get(ze,e.next_block);r=this.maybe_get(ze,d.false_block),i=this.maybe_get(ze,d.true_block),a=this.maybe_get(ze,e.merge_block),o=d.false_block===e.merge_block||r&&a&&this.execution_is_noop(r,a),n=d.true_block===e.merge_block||i&&a&&this.execution_is_noop(i,a),s=d.true_block!==e.merge_block&&d.true_block!==e.self&&o,c=d.false_block!==e.merge_block&&d.false_block!==e.self&&n;if(h=d.terminator===be.Select&&d.merge===ye.MergeNone&&(s||c)){for(var f=0,m=e.phi_variables;f<m.length;f++){if((I=m[f]).parent===e.self||I.parent===d.self)return!1}for(var g=0,b=d.phi_variables;g<b.length;g++){if((I=b[g]).parent===e.self)return!1}var y;if(y=this.maybe_get(ze,e.merge_block))for(var S=0,v=y.phi_variables;S<v.length;S++){var I;if((I=v[S]).parent===e.self||I.parent===d.false_block)return!1}}return h}return!1},e.prototype.inherit_expression_dependencies=function(e,t){if(this.forwarded_temporaries.has(e)&&!this.forced_temporaries.has(e)){var r=this.get(He,e),i=this.maybe_get(ge,t);(null==i?void 0:i.phi_variable)&&i.dependees.push(e);var a=this.maybe_get(He,t);if(a){var o,n,s,c,l=r.expression_dependencies,p=a.expression_dependencies;l.push(t),l.push.apply(l,p),r.expression_dependencies=(o=l,void 0===n&&(n=!1),n&&(o=o.concat()),c=s?function(e,t){return!t||s(o[t],o[t-1])}:function(e,t){return!t||e!==o[t-1]},o.sort(s).filter(c))}}},e.prototype.add_implied_read_expression=function(e,t){e.implied_read_expressions.indexOf(t)<0&&e.implied_read_expressions.push(t)},e.prototype.clear_force_recompile=function(){this.is_force_recompile=!1},e.prototype.interface_variable_exists_in_entry_point=function(e){var t=this.get(ge,e),r=this.ir;if(r.get_spirv_version()<66560){if(t.storage!==v.StorageClassInput&&t.storage!==v.StorageClassOutput&&t.storage!==v.StorageClassUniformConstant)throw new Error("Only Input, Output variables and Uniform constants are part of a shader linking interface.");if(c(r.entry_points)<=1)return!0}return this.get_entry_point().interface_variables.indexOf(e)>=0},e.prototype.remap_variable_type_name=function(e,t,r){return this.variable_remap_callback?this.variable_remap_callback(e,t,r):r},e.prototype.set_ir=function(e){this.ir=e,this.parse_fixup()},e.prototype.parse_fixup=function(){for(var e=this.ir,r=0,i=e.ids_for_constant_or_variable;r<i.length;r++){var a=i[r],o=e.ids[a];if(o.get_type()===t.TypeConstant){var n=o.get(Me);if(e.get_meta(n.self).decoration.builtin&&e.get_meta(n.self).decoration.builtin_type===P.BuiltInWorkgroupSize)for(var s=0,c=e.entry_points;s<c.length;s++){var l=c[s];l.workgroup_size.constant=n.self,l.workgroup_size.x=n.scalar(0,0),l.workgroup_size.y=n.scalar(0,1),l.workgroup_size.z=n.scalar(0,2)}}else if(o.get_type()===t.TypeVariable){var p=o.get(ge);p.storage!==v.StorageClassPrivate&&p.storage!==v.StorageClassWorkgroup&&p.storage!==v.StorageClassOutput||this.global_variables.push(p.self),this.variable_storage_is_aliased(p)&&this.aliased_variables.push(p.self)}}},e.prototype.variable_storage_is_aliased=function(e){var t=this.get(xe,e.basetype),r=e.storage===v.StorageClassStorageBuffer||this.ir.get_meta(t.self).decoration.decoration_flags.get(N.DecorationBufferBlock),i=t.basetype===_e.Image,a=t.basetype===_e.AtomicCounter,o=t.storage===v.StorageClassPhysicalStorageBufferEXT;return!(r?this.ir.get_buffer_block_flags(e).get(N.DecorationRestrict):this.has_decoration(e.self,N.DecorationRestrict))&&(r||i||a||o)},e.prototype.add_loop_level=function(){this.current_loop_level++},e.prototype.set_initializers=function(e){e instanceof He&&(e.emitted_loop_level=this.current_loop_level)},e.prototype.set=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];this.ir.add_typed_id(e.type,t);var a=_.apply(void 0,o([e,this.ir.ids[t]],r,!1));return a.self=t,this.set_initializers(a),a},e.prototype.get=function(e,t){return p(e,this.ir.ids[t])},e.prototype.has_decoration=function(e,t){return this.ir.has_decoration(e,t)},e.prototype.get_decoration=function(e,t){return this.ir.get_decoration(e,t)},e.prototype.get_decoration_string=function(e,t){return this.ir.get_decoration_string(e,t)},e.prototype.unset_decoration=function(e,t){this.ir.unset_decoration(e,t)},e.prototype.get_type=function(e){return this.get(xe,e)},e.prototype.get_fallback_name=function(e){return"_"+e},e.prototype.get_block_fallback_name=function(e){var t=this.get(ge,e);return""===this.get_name(e)?"_"+this.get(xe,t.basetype).self+"_"+e:this.get_name(e)},e.prototype.get_member_name=function(e,t){return this.ir.get_member_name(e,t)},e.prototype.get_member_decoration=function(e,t,r){return this.ir.get_member_decoration(e,t,r)},e.prototype.get_member_decoration_string=function(e,t,r){return this.ir.get_member_decoration_string(e,t,r)},e.prototype.set_member_name=function(e,t,r){this.ir.set_member_name(e,t,r)},e.prototype.get_member_qualified_name=function(e,t){var r=this.ir.find_meta(e);return r&&t<r.members.length?r.members[t].qualified_alias:this.ir.get_empty_string()},e.prototype.get_member_decoration_bitset=function(e,t){return this.ir.get_member_decoration_bitset(e,t)},e.prototype.has_member_decoration=function(e,t,r){return this.ir.has_member_decoration(e,t,r)},e.prototype.set_member_decoration=function(e,t,r,i){void 0===i&&(i=0),this.ir.set_member_decoration(e,t,r,i)},e.prototype.set_member_decoration_string=function(e,t,r,i){this.ir.set_member_decoration_string(e,t,r,i)},e.prototype.unset_member_decoration=function(e,t,r){this.ir.unset_member_decoration(e,t,r)},e.prototype.get_fallback_member_name=function(e){return"_"+e},e.prototype.get_declared_struct_size=function(e){if(0===e.member_types.length)throw new Error("Declared struct in block cannot be empty.");for(var t=0,r=0,i=0;i<e.member_types.length;i++){var a=this.type_struct_member_offset(e,i);a>r&&(r=a,t=i)}return r+this.get_declared_struct_member_size(e,t)},e.prototype.maybe_get=function(e,t){var r=this.ir;return t>=r.ids.length?null:r.ids[t].get_type()===e.type?this.get(e,t):null},e.prototype.get_pointee_type_id=function(e){var t=this.get(xe,e);return t.pointer&&(console.assert(t.parent_type),e=t.parent_type),e},e.prototype.get_pointee_type=function(e){if("number"==typeof e)return this.get_pointee_type(this.get(xe,e));var t=e;return t.pointer&&(console.assert(t.parent_type),t=this.get(xe,t.parent_type)),t},e.prototype.get_variable_data_type_id=function(e){return e.phi_variable?e.basetype:this.get_pointee_type_id(e.basetype)},e.prototype.get_variable_data_type=function(e){return this.get(xe,this.get_variable_data_type_id(e))},e.prototype.is_immutable=function(e){var r=this.ir;if(r.ids[e].get_type()===t.TypeVariable){var i=this.get(ge,e);return i.storage===v.StorageClassUniformConstant||i.phi_variable||!this.expression_is_lvalue(e)}return r.ids[e].get_type()===t.TypeAccessChain?this.get(qe,e).immutable:r.ids[e].get_type()===t.TypeExpression?this.get(He,e).immutable:r.ids[e].get_type()===t.TypeConstant||r.ids[e].get_type()===t.TypeConstantOp||r.ids[e].get_type()===t.TypeUndef},e.prototype.maybe_get_backing_variable=function(e){var t=this.maybe_get(ge,e);if(!t){var r=this.maybe_get(He,e);r&&(t=this.maybe_get(ge,r.loaded_from));var i=this.maybe_get(qe,e);i&&(t=this.maybe_get(ge,i.loaded_from))}return t},e.prototype.to_name=function(e,r){void 0===r&&(r=!0);var i=this.ir;if(r&&i.ids[e].get_type()===t.TypeType){var a=this.get(xe,e);if(a.type_alias&&!this.has_extended_decoration(a.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked))return this.to_name(a.type_alias)}var o=i.get_name(e);return o&&""!==o?o:"_"+e},e.prototype.is_builtin_variable=function(e){var t=this.ir.find_meta(e.self);return!!(e.compat_builtin||t&&t.decoration.builtin)||this.is_builtin_type(this.get(xe,e.basetype))},e.prototype.is_builtin_type=function(e){var t=this.ir.find_meta(e.self);if(t)for(var r=0,i=t.members;r<i.length;r++){if(i[r].builtin)return!0}return!1},e.prototype.is_hidden_variable=function(e,t){return void 0===t&&(t=!1),!!(this.is_builtin_variable(e)&&!t||e.remapped_variable)||!this.combined_image_samplers.find((function(t){return t.combined_id===e.self}))&&(this.ir.get_spirv_version()>=66560&&e.storage!==v.StorageClassGeneric&&e.storage!==v.StorageClassFunction&&!this.interface_variable_exists_in_entry_point(e.self)||this.check_active_interface_variables&&function(e){switch(e){case v.StorageClassInput:case v.StorageClassOutput:case v.StorageClassUniform:case v.StorageClassUniformConstant:case v.StorageClassAtomicCounter:case v.StorageClassPushConstant:case v.StorageClassStorageBuffer:return!0;default:return!1}}(e.storage)&&this.active_interface_variables.has(e.self))},e.prototype.is_member_builtin=function(e,t){var r=this.ir.find_meta(e.self);if(r){var i=r.members;if(t<i.length&&i[t].builtin)return i[t].builtin_type}},e.prototype.is_scalar=function(e){return e.basetype!==_e.Struct&&1===e.vecsize&&1===e.columns},e.prototype.is_vector=function(e){return e.vecsize>1&&1===e.columns},e.prototype.is_matrix=function(e){return e.vecsize>1&&e.columns>1},e.prototype.is_array=function(e){return e.array.length>0},e.prototype.expression_type_id=function(e){switch(this.ir.ids[e].get_type()){case t.TypeVariable:return this.get(ge,e).basetype;case t.TypeExpression:return this.get(He,e).expression_type;case t.TypeConstant:return this.get(Me,e).constant_type;case t.TypeConstantOp:return this.get(Te,e).basetype;case t.TypeUndef:return this.get(Xe,e).basetype;case t.TypeCombinedImageSampler:return this.get(Ke,e).combined_type;case t.TypeAccessChain:return this.get(qe,e).basetype;default:throw new Error("Cannot resolve expression type.")}},e.prototype.expression_type=function(e){return this.get(xe,this.expression_type_id(e))},e.prototype.expression_is_lvalue=function(e){switch(this.expression_type(e).basetype){case _e.SampledImage:case _e.Image:case _e.Sampler:return!1;default:return!0}},e.prototype.register_read=function(e,t,r){var i=this.get(He,e),a=this.maybe_get_backing_variable(t);a&&(i.loaded_from=a.self,r&&!this.is_immutable(a.self)&&a.dependees.push(i.self),a&&a.parameter&&a.parameter.read_count++)},e.prototype.register_write=function(e){var t=this.maybe_get(ge,e);if(!t){var r=this.maybe_get(He,e);r&&r.loaded_from&&(t=this.maybe_get(ge,r.loaded_from));var i=this.maybe_get(qe,e);i&&i.loaded_from&&(t=this.maybe_get(ge,i.loaded_from))}var a=this.expression_type(e);if(t){var o=!0,n=this.expression_type(e);this.get_variable_data_type(t).pointer&&(this.flush_all_active_variables(),1===n.pointer_depth&&(o=!1)),n.storage===v.StorageClassPhysicalStorageBufferEXT||this.variable_storage_is_aliased(t)?this.flush_all_aliased_variables():t&&this.flush_dependees(t),o&&t.parameter&&0===t.parameter.write_count&&(t.parameter.write_count++,this.force_recompile())}else a.pointer&&this.flush_all_active_variables()},e.prototype.is_continue=function(e){return this.ir.block_meta[e]=this.ir.block_meta[e]||0,0!=(this.ir.block_meta[e]&Ue.BLOCK_META_CONTINUE_BIT)},e.prototype.is_single_block_loop=function(e){var t=this.get(ze,e);return t.merge===ye.MergeLoop&&t.continue_block===e},e.prototype.traverse_all_reachable_opcodes=function(e,t){if(e instanceof Be){for(var r=0,i=e.blocks;r<i.length;r++){var a=i[r];if(!this.traverse_all_reachable_opcodes(this.get(ze,a),t))return!1}return!0}var o=e;t.set_current_block(o),t.rearm_current_block(o);for(var n=0,s=o.ops;n<s.length;n++){var c=s[n],l=this.stream(c),p=c.op;if(!t.handle(p,l,c.length))return!1;if(p===se.OpFunctionCall){var _=this.get(Be,l[2]);if(t.follow_function_call(_)){if(!t.begin_function_scope(l,c.length))return!1;if(!this.traverse_all_reachable_opcodes(this.get(Be,l[2]),t))return!1;if(!t.end_function_scope(l,c.length))return!1;t.rearm_current_block(o)}}}return!!t.handle_terminator(o)},e.prototype.analyze_image_and_sampler_usage=function(){var e=this.ir,t=new Dt(this);this.traverse_all_reachable_opcodes(this.get(Be,e.default_entry_point),t);var r=new At(this,t.dref_combined_samplers);this.traverse_all_reachable_opcodes(this.get(Be,e.default_entry_point),r),r.dependency_hierarchy=[],this.traverse_all_reachable_opcodes(this.get(Be,e.default_entry_point),r),this.comparison_ids=r.comparison_ids,this.need_subpass_input=r.need_subpass_input;for(var i=0,a=this.combined_image_samplers;i<a.length;i++){var o=a[i];this.comparison_ids.has(o.sampler_id)&&this.comparison_ids.add(o.combined_id)}},e.prototype.build_function_control_flow_graphs_and_analyze=function(){var e=this,t=this.ir,r=new Lt(this);r.function_cfgs[t.default_entry_point]=new Et(this,this.get(Be,t.default_entry_point)),this.traverse_all_reachable_opcodes(this.get(Be,t.default_entry_point),r);var i=this.function_cfgs=r.function_cfgs,a=c(i)<=1;i.forEach((function(t,r){var i=e.get(Be,r),o=new Tt(e,i);e.analyze_variable_scope(i,o),e.find_function_local_luts(i,o,a);for(var n=0,s=i.blocks;n<s.length;n++){var c=s[n],l=e.get(ze,c);if(!(l.loop_variables.length<2)){for(var p=e.get_decoration_bitset(l.loop_variables[0]),_=e.get(ge,l.loop_variables[0]).basetype,u=!1,h=0,d=l.loop_variables;h<d.length;h++){var f=d[h];if(p!==e.get_decoration_bitset(f)||_!==e.get(ge,l.loop_variables[0]).basetype){u=!0;break}}if(u){for(var m=0,g=l.loop_variables;m<g.length;m++){f=g[m];e.get(ge,f).loop_variable=!1}l.loop_variables=[]}}}}))},e.prototype.get_cfg_for_current_function=function(){return console.assert(this.current_function),this.get_cfg_for_function(this.current_function.self)},e.prototype.get_cfg_for_function=function(e){var t=this.function_cfgs[e];return console.assert(t),t},e.prototype.analyze_parameter_preservation=function(e,t,r,i){for(var a=0,o=e.arguments;a<o.length;a++){var n=o[a],s=this.get(xe,n.type);if(s.pointer){var c=void 0;switch(s.basetype){case _e.Sampler:case _e.Image:case _e.SampledImage:case _e.AtomicCounter:c=!1;break;default:c=!0}if(c&&r.hasOwnProperty(n.id))if(i.hasOwnProperty(n.id)){var l=i[n.id],p=new Set;zt(t,e.entry_block,l,p)&&n.read_count++}else n.read_count++}}},e.prototype.analyze_non_block_pointer_types=function(){var e=this,t=this.ir,r=new Gt(this);this.traverse_all_reachable_opcodes(this.get(Be,t.default_entry_point),r),t.for_each_typed_id(xe,(function(t,i){(e.has_decoration(i.self,N.DecorationBlock)||e.has_decoration(i.self,N.DecorationBufferBlock))&&r.analyze_non_block_types_from_block(i)})),r.non_block_types.forEach((function(t){return e.physical_storage_non_block_pointer_types.push(t)})),this.physical_storage_non_block_pointer_types.sort(),this.physical_storage_type_to_alignment=r.physical_block_type_meta},e.prototype.analyze_variable_scope=function(e,t){var r=this;this.traverse_all_reachable_opcodes(e,t);var i=this.ir,a=this.function_cfgs[e.self];this.analyze_parameter_preservation(e,a,t.accessed_variables_to_block,t.complete_write_variables_to_block);for(var o=[],n=0,s=e.blocks;n<s.length;n++){var c=s[n],l=this.get(ze,c),p=i.continue_block_to_loop_header[c];if(void 0!==p&&p!==c)l.loop_dominator=p;else{var _=a.find_loop_dominator(c);l.loop_dominator=_!==c?_:ze.NoDominator}}t.accessed_variables_to_block.forEach((function(t,n){if(!(e.local_variables.indexOf(n)<0)){var s=new Ct(a),c=t,l=r.expression_type(n);c.forEach((function(e){if(r.is_continue(e)&&(s.add_block(i.continue_block_to_loop_header[e]),1===l.vecsize&&1===l.columns&&l.basetype!==_e.Struct&&0===l.array.length)){var t=Mt(0,o,n);o[n]=0===t?e:-1}s.add_block(e)})),s.lift_continue_block_dominator();var p=s.get_dominator();if(p)if(!r.get(ge,n).phi_variable){var _=r.get(ze,p);if(r.may_read_undefined_variable_in_block(_,n)){for(;_.loop_dominator!==ze.NoDominator;)_=r.get(ze,_.loop_dominator);_.self!==p&&(s.add_block(_.self),p=s.get_dominator())}}if(p)(_=r.get(ze,p)).dominated_variables.push(n),r.get(ge,n).dominator=p}})),t.accessed_temporaries_to_block.forEach((function(e,o){if(t.result_id_to_type.hasOwnProperty(o)){var n=t.result_id_to_type[o],s=r.get(xe,n);if(!r.type_is_opaque_value(s)){var c=new Ct(a),l=!1,p=!1,_=e;_.forEach((function(e){if(c.add_block(e),1!==_.size&&r.is_continue(e)){var t=r.get(ze,i.continue_block_to_loop_header[e]);console.assert(t.merge===ye.MergeLoop),c.add_block(t.self),p=!0}}));var u=c.get_dominator();if(1!==_.size&&r.is_single_block_loop(u)&&(l=!0),u)if(!_.has(u)||l)if(t.access_chain_expressions.has(o)){if(p){var h=r.get(ze,u);console.assert(h.merge===ye.MergeLoop),h.complex_continue=!0}}else r.hoisted_temporaries.add(o),r.forced_temporaries.add(o),r.get(ze,u).declare_temporary.push(new nt(t.result_id_to_type[o],o));else if(_.size>1){r.get(ze,u).potential_declare_temporary.push(new nt(t.result_id_to_type[o],o))}}}}));var u=new Set;o.forEach((function(e,o){var n=r.get(ge,o).dominator,s=e;if(-1!==s&&0!==s&&0!==n){var c=0;i.continue_block_to_loop_header.hasOwnProperty(s)?c=i.continue_block_to_loop_header[s]:r.get(ze,s).continue_block===s&&(c=s),console.assert(c);for(var l=r.get(ze,c),p=Mt(Set,t.accessed_variables_to_block,o),_=p.has(c),h=!0;n!==c;){p.has(n)&&(_=!0);var d=a.get_succeeding_edges(n);if(1!==d.length){h=!1;break}var f=a.get_preceding_edges(d[0]);if(1!==f.length||f[0]!==n){h=!1;break}n=d[0]}h&&_&&(u.clear(),a.walk_from(u,l.merge_block,(function(e){return p.has(e)&&(h=!1),!0})),h&&(l.loop_variables.push(o),l.loop_variables.sort(),r.get(ge,o).loop_variable=!0))}}))},e.prototype.find_function_local_luts=function(e,r,i){var a=this,o=this.function_cfgs[e.self],n=this.ir;r.accessed_variables_to_block.forEach((function(e,s){var c=e,l=a.get(ge,s),p=a.expression_type(s);if((l.storage===v.StorageClassFunction||i&&l.storage===v.StorageClassPrivate)&&!l.phi_variable&&0!==p.array.length){var _=0;if(l.initializer){if(n.ids[l.initializer].get_type()!==t.TypeConstant)return;if(_=l.initializer,r.complete_write_variables_to_block.hasOwnProperty(l.self)||r.partial_write_variables_to_block.hasOwnProperty(l.self))return}else{if(r.partial_write_variables_to_block.hasOwnProperty(l.self))return;var u=r.complete_write_variables_to_block[l.self];if(!u)return;var h=u;if(1!==h.size)return;var d=new Ct(o);c.forEach((function(e){return d.add_block(e)}));var f=d.get_dominator();if(h.has(f))return;var m=new Rt(a,l.self);if(a.traverse_all_reachable_opcodes(a.get(ze,f),m),1!==m.write_count||0===m.static_expression)return;if(n.ids[m.static_expression].get_type()!==t.TypeConstant)return;_=m.static_expression}a.get(Me,_).is_used_as_lut=!0,l.static_expression=_,l.statically_assigned=!0,l.remapped_variable=!0}}))},e.prototype.may_read_undefined_variable_in_block=function(e,t){for(var r=0,i=e.ops;r<i.length;r++){var a=i[r],o=this.stream(a);switch(a.op){case se.OpStore:case se.OpCopyMemory:if(o[0]===t)return!1;break;case se.OpAccessChain:case se.OpInBoundsAccessChain:case se.OpPtrAccessChain:if(o[2]===t)return!0;break;case se.OpSelect:if(o[3]===t||o[4]===t)return!0;break;case se.OpPhi:if(a.length<2)break;for(var n=a.length-2,s=0;s<n;s+=2)if(o[s+2]===t)return!0;break;case se.OpCopyObject:case se.OpLoad:if(o[2]===t)return!0;break;case se.OpFunctionCall:if(a.length<3)break;var c=a.length-3;for(s=0;s<c;s++)if(o[s+3]===t)return!0}}return!0},e.prototype.analyze_interlocked_resource_usage=function(){if(this.get_execution_model()===g.ExecutionModelFragment&&(this.get_entry_point().flags.get(S.ExecutionModePixelInterlockOrderedEXT)||this.get_entry_point().flags.get(S.ExecutionModePixelInterlockUnorderedEXT)||this.get_entry_point().flags.get(S.ExecutionModeSampleInterlockOrderedEXT)||this.get_entry_point().flags.get(S.ExecutionModeSampleInterlockUnorderedEXT))){var e=this.ir,t=new Bt(this,e.default_entry_point);this.traverse_all_reachable_opcodes(this.get(Be,e.default_entry_point),t);var r=new Nt(this,e.default_entry_point);r.interlock_function_id=t.interlock_function_id,r.split_function_case=t.split_function_case,r.control_flow_interlock=t.control_flow_interlock,r.use_critical_section=!r.split_function_case&&!r.control_flow_interlock,this.traverse_all_reachable_opcodes(this.get(Be,e.default_entry_point),r),this.interlocked_is_complex=!r.use_critical_section||r.interlock_function_id!==e.default_entry_point}},e.prototype.instruction_to_result_type=function(e,t,r,i){switch(t){case se.OpStore:case se.OpCopyMemory:case se.OpCopyMemorySized:case se.OpImageWrite:case se.OpAtomicStore:case se.OpAtomicFlagClear:case se.OpEmitStreamVertex:case se.OpEndStreamPrimitive:case se.OpControlBarrier:case se.OpMemoryBarrier:case se.OpGroupWaitEvents:case se.OpRetainEvent:case se.OpReleaseEvent:case se.OpSetUserEventStatus:case se.OpCaptureEventProfilingInfo:case se.OpCommitReadPipe:case se.OpCommitWritePipe:case se.OpGroupCommitReadPipe:case se.OpGroupCommitWritePipe:case se.OpLine:case se.OpNoLine:return!1;default:return i>1&&null!==this.maybe_get(xe,r[0])&&(e.result_type=r[0],e.result_id=r[1],!0)}},e.prototype.combined_decoration_for_member=function(e,t){var r=new le,i=this.ir.find_meta(e.self);if(i){var a=i.members;if(t>=a.length)return r;var o=a[t];r.merge_or(o.decoration_flags);for(var n=this.get(xe,e.member_types[t]),s=n.member_types,c=0;c<s.length;c++){this.get(xe,s[c]).pointer||r.merge_or(this.combined_decoration_for_member(n,c))}}return r},e.prototype.is_desktop_only_format=function(e){switch(e){case k.ImageFormatR11fG11fB10f:case k.ImageFormatR16f:case k.ImageFormatRgb10A2:case k.ImageFormatR8:case k.ImageFormatRg8:case k.ImageFormatR16:case k.ImageFormatRg16:case k.ImageFormatRgba16:case k.ImageFormatR16Snorm:case k.ImageFormatRg16Snorm:case k.ImageFormatRgba16Snorm:case k.ImageFormatR8Snorm:case k.ImageFormatRg8Snorm:case k.ImageFormatR8ui:case k.ImageFormatRg8ui:case k.ImageFormatR16ui:case k.ImageFormatRgb10a2ui:case k.ImageFormatR8i:case k.ImageFormatRg8i:case k.ImageFormatR16i:return!0}return!1},e.prototype.set_extended_decoration=function(e,t,r){void 0===r&&(r=0);var i=Mt(de,this.ir.meta,e).decoration;i.extended.flags.set(t),i.extended.values[t]=r},e.prototype.get_extended_decoration=function(e,t){var r=this.ir.find_meta(e);if(!r)return 0;var i=r.decoration;return i.extended.flags.get(t)?i.extended.values[t]:Ut(t)},e.prototype.has_extended_decoration=function(e,t){var r=this.ir.find_meta(e);return!!r&&r.decoration.extended.flags.get(t)},e.prototype.unset_extended_decoration=function(e,t){var r=Mt(de,this.ir.meta,e).decoration;r.extended.flags.clear(t),r.extended.values[t]=0},e.prototype.set_extended_member_decoration=function(e,t,r,i){void 0===i&&(i=0);var a=Mt(de,this.ir.meta,e).members;t===a.length&&a.push(new he);var o=a[t];o.extended.flags.set(r),o.extended.values[r]=i},e.prototype.get_extended_member_decoration=function(e,t,r){var i=this.ir.find_meta(e);if(!i)return 0;if(t>=i.members.length)return 0;var a=i.members[t];return a.extended.flags.get(r)?a.extended.values[r]:Ut(r)},e.prototype.has_extended_member_decoration=function(e,t,r){var i=this.ir.find_meta(e);return!!i&&(!(t>=i.members.length)&&i.members[t].extended.flags.get(r))},e.prototype.unset_extended_member_decoration=function(e,t,r){var i=Mt(de,this.ir.meta,e).members;t===i.length&&i.push(new he);var a=i[t];a.extended.flags.clear(r),a.extended.values[r]=0},e.prototype.type_is_array_of_pointers=function(e){return!!e.pointer&&e.pointer_depth===this.get(xe,e.parent_type).pointer_depth},e.prototype.type_is_opaque_value=function(e){return!e.pointer&&(e.basetype===_e.SampledImage||e.basetype===_e.Image||e.basetype===_e.Sampler)},e.prototype.is_depth_image=function(e,t){return e.image.depth&&e.image.format===k.ImageFormatUnknown||this.comparison_ids.has(t)},e.prototype.reflection_ssbo_instance_name_is_significant=function(){var e=this,t=this.ir;if(t.source.known)return t.source.hlsl;var r=new Set,i=!1;return t.for_each_typed_id(ge,(function(t,a){var o=e.get(xe,a.basetype);o.pointer&&a.storage!==v.StorageClassFunction&&((a.storage===v.StorageClassStorageBuffer||a.storage===v.StorageClassUniform&&e.has_decoration(o.self,N.DecorationBufferBlock))&&(r.has(o.self)?i=!0:r.add(o.self)))})),i},e.prototype.type_struct_member_offset=function(e,t){var r=this.ir.find_meta(e.self);if(r){var i=r.members[t];if(i.decoration_flags.get(N.DecorationOffset))return i.offset;throw new Error("Struct member does not have Offset set.")}throw new Error("Struct member does not have Offset set.")},e.prototype.type_struct_member_array_stride=function(e,t){var r=this.ir.find_meta(e.self);if(r){var i=r.decoration;if(i.decoration_flags.get(N.DecorationArrayStride))return i.array_stride;throw new Error("Struct member does not have ArrayStride set.")}throw new Error("Struct member does not have ArrayStride set.")},e.prototype.type_struct_member_matrix_stride=function(e,t){var r=this.ir.find_meta(e.self);if(r){var i=r.members[t];if(i.decoration_flags.get(N.DecorationMatrixStride))return i.matrix_stride;throw new Error("Struct member does not have MatrixStride set.")}throw new Error("Struct member does not have MatrixStride set.")},e.prototype.get_remapped_declared_block_name=function(e,t){var r=this.declared_block_names[e];if(r)return r;var i=this.get(ge,e);if(t)return this.to_name(i.self);var a=this.get(xe,i.basetype),o=this.ir.find_meta(a.self),n=o?o.decoration.alias:null;return n&&""!==n?n:this.get_block_fallback_name(e)},e.prototype.type_is_block_like=function(e){if(e.basetype!==_e.Struct)return!1;if(this.has_decoration(e.self,N.DecorationBlock)||this.has_decoration(e.self,N.DecorationBufferBlock))return!0;for(var t=0;t<e.member_types.length;t++)if(this.has_member_decoration(e.self,t,N.DecorationOffset))return!0;return!1},e.prototype.flush_phi_required=function(e,t){for(var r=0,i=this.get(ze,t).phi_variables;r<i.length;r++){if(i[r].parent===e)return!0}return!1},e.prototype.evaluate_spec_constant_u32=function(e){var t=this,r=this.get(xe,e.basetype);if(r.basetype!==_e.UInt&&r.basetype!==_e.Int&&r.basetype!==_e.Boolean)throw new Error("Only 32-bit integers and booleans are currently supported when evaluating specialization constants.");if(!this.is_scalar(r))throw new Error("Spec constant evaluation must be a scalar.\n");var i=0,a=function(e){var r=t.expression_type(e);if(r.basetype!==_e.UInt&&r.basetype!==_e.Int&&r.basetype!==_e.Boolean)throw new Error("Only 32-bit integers and booleans are currently supported when evaluating specialization constants.");if(!t.is_scalar(r))throw new Error("Spec constant evaluation must be a scalar.");var i=t.maybe_get(Me,e);return i?i.scalar():t.evaluate_spec_constant_u32(t.get(Te,e))};switch(e.opcode){case se.OpIAdd:i=a(e.arguments[0])+a(e.arguments[1]);break;case se.OpISub:i=a(e.arguments[0])-a(e.arguments[1]);break;case se.OpIMul:i=a(e.arguments[0])*a(e.arguments[1]);break;case se.OpBitwiseAnd:i=a(e.arguments[0])&a(e.arguments[1]);break;case se.OpBitwiseOr:i=a(e.arguments[0])|a(e.arguments[1]);break;case se.OpBitwiseXor:i=a(e.arguments[0])^a(e.arguments[1]);break;case se.OpLogicalAnd:i=a(e.arguments[0])&a(e.arguments[1]);break;case se.OpLogicalOr:i=a(e.arguments[0])|a(e.arguments[1]);break;case se.OpShiftLeftLogical:i=a(e.arguments[0])<<a(e.arguments[1]);break;case se.OpShiftRightLogical:case se.OpShiftRightArithmetic:i=a(e.arguments[0])>>a(e.arguments[1]);break;case se.OpLogicalEqual:case se.OpIEqual:i=a(e.arguments[0])===a(e.arguments[1])?1:0;break;case se.OpLogicalNotEqual:case se.OpINotEqual:i=a(e.arguments[0])!==a(e.arguments[1])?1:0;break;case se.OpULessThan:case se.OpSLessThan:i=a(e.arguments[0])<a(e.arguments[1])?1:0;break;case se.OpULessThanEqual:case se.OpSLessThanEqual:i=a(e.arguments[0])<=a(e.arguments[1])?1:0;break;case se.OpUGreaterThan:case se.OpSGreaterThan:i=a(e.arguments[0])>a(e.arguments[1])?1:0;break;case se.OpUGreaterThanEqual:case se.OpSGreaterThanEqual:i=a(e.arguments[0])>=a(e.arguments[1])?1:0;break;case se.OpLogicalNot:i=a(e.arguments[0])?0:1;break;case se.OpNot:i=~a(e.arguments[0]);break;case se.OpSNegate:i=-a(e.arguments[0]);break;case se.OpSelect:i=a(e.arguments[0])?a(e.arguments[1]):a(e.arguments[2]);break;case se.OpUMod:case se.OpSMod:case se.OpSRem:var o=a(e.arguments[0]);if(0===(n=a(e.arguments[1])))throw new Error("Undefined behavior in Mod, b === 0.\n");i=o%n;break;case se.OpUDiv:case se.OpSDiv:var n;o=a(e.arguments[0]);if(0===(n=a(e.arguments[1])))throw new Error("Undefined behavior in Div, b === 0.\n");i=o/n;break;default:throw new Error("Unsupported spec constant opcode for evaluation.\n")}return i},e.prototype.evaluate_constant_u32=function(e){var t=this.maybe_get(Me,e);return t?t.scalar():this.evaluate_spec_constant_u32(this.get(Te,e))},e.prototype.is_vertex_like_shader=function(){var e=this.get_execution_model();return e===g.ExecutionModelVertex||e===g.ExecutionModelGeometry||e===g.ExecutionModelTessellationControl||e===g.ExecutionModelTessellationEvaluation},e.prototype.get_case_list=function(e){var t,r,i=this.ir,a=0;if(t=this.maybe_get(Me,e.condition))a=this.get(xe,t.constant_type).width;else if(r=this.maybe_get(ge,e.condition)){a=this.get(xe,r.basetype).width}else{var o=i.load_type_width[e.condition];if(o)throw new Error("Use of undeclared variable on a switch statement.");a=o}return a>32?e.cases_64bit:e.cases_32bit},e}();function zt(e,t,r,i){if(r.has(t))return!1;if(0===e.get_succeeding_edges(t).length)return!0;for(var a=0,o=e.get_succeeding_edges(t);a<o.length;a++){var n=o[a];if(i.has(n)){if(zt(e,n,r,i))return!0;i.add(n)}}return!1}function Ut(e){switch(e){case ce.SPIRVCrossDecorationResourceIndexPrimary:case ce.SPIRVCrossDecorationResourceIndexSecondary:case ce.SPIRVCrossDecorationResourceIndexTertiary:case ce.SPIRVCrossDecorationResourceIndexQuaternary:case ce.SPIRVCrossDecorationInterfaceMemberIndex:return-1;default:return 0}}function Vt(e){return e.basetype===_e.Half||e.basetype===_e.Float||e.basetype===_e.Double}function Ht(e){return e.basetype===_e.SByte||e.basetype===_e.UByte||e.basetype===_e.Short||e.basetype===_e.UShort||e.basetype===_e.Int||e.basetype===_e.UInt||e.basetype===_e.Int64||e.basetype===_e.UInt64}function Kt(e){switch(e){case se.OpIEqual:case se.OpINotEqual:case se.OpISub:case se.OpIAdd:case se.OpIMul:case se.OpShiftLeftLogical:case se.OpBitwiseOr:case se.OpBitwiseXor:case se.OpBitwiseAnd:return!0;default:return!1}}function qt(e){switch(e){case 8:return _e.SByte;case 16:return _e.Short;case 32:return _e.Int;case 64:return _e.Int64;default:throw new Error("Invalid bit width.")}}function Xt(e){switch(e){case 8:return _e.UByte;case 16:return _e.UShort;case 32:return _e.UInt;case 64:return _e.UInt64;default:throw new Error("Invalid bit width.")}}var Wt,jt=function(e,t){this.location=e,this.component=t},Qt=function(){this.fixup_clipspace=!1,this.flip_vert_y=!1,this.support_nonzero_base_instance=!0};!function(e){e[e.DontCare=0]="DontCare",e[e.Lowp=1]="Lowp",e[e.Mediump=2]="Mediump",e[e.Highp=3]="Highp"}(Wt||(Wt={}));var Zt,Yt,Jt=function(){this.default_float_precision=Wt.Mediump,this.default_int_precision=Wt.Highp},$t=function(){this.version=450,this.es=!1,this.force_temporary=!1,this.separate_shader_objects=!1,this.flatten_multidimensional_arrays=!1,this.enable_420pack_extension=!0,this.emit_push_constant_as_uniform_buffer=!1,this.emit_uniform_buffer_as_plain_uniforms=!1,this.emit_line_directives=!1,this.enable_storage_image_qualifier_deduction=!0,this.force_zero_initialized_variables=!1,this.force_flattened_io_blocks=!1,this.ovr_multiview_view_count=0,this.vertex=new Qt,this.fragment=new Jt},er=function(){function e(){this._str=""}return e.prototype.str=function(){return this._str},e.prototype.append=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._str=(e=this._str).concat.apply(e,t)},e.prototype.reset=function(){this._str=""},e}(),tr=function(){this.storage_physical_type=0,this.need_transpose=!1,this.storage_is_packed=!1,this.storage_is_invariant=!1,this.flattened_struct=!1};!function(e){e[e.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT=1]="ACCESS_CHAIN_INDEX_IS_LITERAL_BIT",e[e.ACCESS_CHAIN_CHAIN_ONLY_BIT=2]="ACCESS_CHAIN_CHAIN_ONLY_BIT",e[e.ACCESS_CHAIN_PTR_CHAIN_BIT=4]="ACCESS_CHAIN_PTR_CHAIN_BIT",e[e.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT=8]="ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT",e[e.ACCESS_CHAIN_LITERAL_MSB_FORCE_ID=16]="ACCESS_CHAIN_LITERAL_MSB_FORCE_ID",e[e.ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT=32]="ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT",e[e.ACCESS_CHAIN_FORCE_COMPOSITE_BIT=64]="ACCESS_CHAIN_FORCE_COMPOSITE_BIT"}(Zt||(Zt={})),function(e){e[e.BufferPackingStd140=0]="BufferPackingStd140",e[e.BufferPackingStd430=1]="BufferPackingStd430",e[e.BufferPackingStd140EnhancedLayout=2]="BufferPackingStd140EnhancedLayout",e[e.BufferPackingStd430EnhancedLayout=3]="BufferPackingStd430EnhancedLayout",e[e._BufferPackingHLSLCbuffer=4]="_BufferPackingHLSLCbuffer",e[e._BufferPackingHLSLCbufferPackOffset=5]="_BufferPackingHLSLCbufferPackOffset",e[e.BufferPackingScalar=6]="BufferPackingScalar",e[e.BufferPackingScalarEnhancedLayout=7]="BufferPackingScalarEnhancedLayout"}(Yt||(Yt={}));var rr=function(){function e(){this.h=BigInt(0xcbf29ce484222000)}return e.prototype.u32=function(e){this.h=this.h*BigInt(1099511628211)^BigInt(e)},e.prototype.get=function(){return this.h},e}(),ir=function(){function e(e,t){this.saved=e[t],this.targetObject=e,this.propName=t}return Object.defineProperty(e.prototype,"current",{get:function(){return this.targetObject[this.propName]},set:function(e){this.targetObject[this.propName]=e},enumerable:!1,configurable:!0}),e.prototype.release=function(){this.targetObject[this.propName]=this.saved},e}(),ar=function(){this.img=0,this.is_fetch=!1,this.is_gather=!1,this.is_proj=!1},or=function(){this.base=new ar,this.has_array_offsets=!1,this.has_offset=!1,this.has_grad=!1,this.has_dref=!1,this.is_sparse_feedback=!1,this.has_min_lod=!1,this.lod=0},nr=function(){this.base=new ar,this.coord=0,this.coord_components=0,this.dref=0,this.grad_x=0,this.grad_y=0,this.lod=0,this.coffset=0,this.offset=0,this.bias=0,this.component=0,this.sample=0,this.sparse_texel=0,this.min_lod=0,this.nonuniform_expression=!1},sr=[[".x",".y",".z",".w"],[".xy",".yz",".zw"],[".xyz",".yzw"],[""]],cr=[];cr[se.OpSNegate]="-",cr[se.OpNot]="~",cr[se.OpIAdd]="+",cr[se.OpISub]="-",cr[se.OpIMul]="*",cr[se.OpSDiv]="/",cr[se.OpUDiv]="/",cr[se.OpUMod]="%",cr[se.OpSMod]="%",cr[se.OpShiftRightLogical]=">>",cr[se.OpShiftRightArithmetic]=">>",cr[se.OpShiftLeftLogical]=">>",cr[se.OpBitwiseOr]="|",cr[se.OpBitwiseXor]="^",cr[se.OpBitwiseAnd]="&",cr[se.OpLogicalOr]="||",cr[se.OpLogicalAnd]="&&",cr[se.OpLogicalNot]="!",cr[se.OpLogicalEqual]="==",cr[se.OpLogicalNotEqual]="!=",cr[se.OpIEqual]="==",cr[se.OpINotEqual]="!=",cr[se.OpULessThan]="<",cr[se.OpSLessThan]="<",cr[se.OpULessThanEqual]="<=",cr[se.OpSLessThanEqual]="<=",cr[se.OpUGreaterThan]=">",cr[se.OpSGreaterThan]=">",cr[se.OpSGreaterThanEqual]=">=",cr[se.OpSGreaterThanEqual]=">=";var lr=["x","y","z","w"],pr=new Set(["abs","acos","acosh","all","any","asin","asinh","atan","atanh","atomicAdd","atomicCompSwap","atomicCounter","atomicCounterDecrement","atomicCounterIncrement","atomicExchange","atomicMax","atomicMin","atomicOr","atomicXor","bitCount","bitfieldExtract","bitfieldInsert","bitfieldReverse","ceil","cos","cosh","cross","degrees","dFdx","dFdxCoarse","dFdxFine","dFdy","dFdyCoarse","dFdyFine","distance","dot","EmitStreamVertex","EmitVertex","EndPrimitive","EndStreamPrimitive","equal","exp","exp2","faceforward","findLSB","findMSB","float16BitsToInt16","float16BitsToUint16","floatBitsToInt","floatBitsToUint","floor","fma","fract","frexp","fwidth","fwidthCoarse","fwidthFine","greaterThan","greaterThanEqual","groupMemoryBarrier","imageAtomicAdd","imageAtomicAnd","imageAtomicCompSwap","imageAtomicExchange","imageAtomicMax","imageAtomicMin","imageAtomicOr","imageAtomicXor","imageLoad","imageSamples","imageSize","imageStore","imulExtended","int16BitsToFloat16","intBitsToFloat","interpolateAtOffset","interpolateAtCentroid","interpolateAtSample","inverse","inversesqrt","isinf","isnan","ldexp","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","memoryBarrier","memoryBarrierAtomicCounter","memoryBarrierBuffer","memoryBarrierImage","memoryBarrierShared","min","mix","mod","modf","noise","noise1","noise2","noise3","noise4","normalize","not","notEqual","outerProduct","packDouble2x32","packHalf2x16","packInt2x16","packInt4x16","packSnorm2x16","packSnorm4x8","packUint2x16","packUint4x16","packUnorm2x16","packUnorm4x8","pow","radians","reflect","refract","round","roundEven","sign","sin","sinh","smoothstep","sqrt","step","tan","tanh","texelFetch","texelFetchOffset","texture","textureGather","textureGatherOffset","textureGatherOffsets","textureGrad","textureGradOffset","textureLod","textureLodOffset","textureOffset","textureProj","textureProjGrad","textureProjGradOffset","textureProjLod","textureProjLodOffset","textureProjOffset","textureQueryLevels","textureQueryLod","textureSamples","textureSize","transpose","trunc","uaddCarry","uint16BitsToFloat16","uintBitsToFloat","umulExtended","unpackDouble2x32","unpackHalf2x16","unpackInt2x16","unpackInt4x16","unpackSnorm2x16","unpackSnorm4x8","unpackUint2x16","unpackUint4x16","unpackUnorm2x16","unpackUnorm4x8","usubBorrow","active","asm","atomic_uint","attribute","bool","break","buffer","bvec2","bvec3","bvec4","case","cast","centroid","class","coherent","common","const","continue","default","discard","dmat2","dmat2x2","dmat2x3","dmat2x4","dmat3","dmat3x2","dmat3x3","dmat3x4","dmat4","dmat4x2","dmat4x3","dmat4x4","do","double","dvec2","dvec3","dvec4","else","enum","extern","external","false","filter","fixed","flat","float","for","fvec2","fvec3","fvec4","goto","half","highp","hvec2","hvec3","hvec4","if","iimage1D","iimage1DArray","iimage2D","iimage2DArray","iimage2DMS","iimage2DMSArray","iimage2DRect","iimage3D","iimageBuffer","iimageCube","iimageCubeArray","image1D","image1DArray","image2D","image2DArray","image2DMS","image2DMSArray","image2DRect","image3D","imageBuffer","imageCube","imageCubeArray","in","inline","inout","input","int","interface","invariant","isampler1D","isampler1DArray","isampler2D","isampler2DArray","isampler2DMS","isampler2DMSArray","isampler2DRect","isampler3D","isamplerBuffer","isamplerCube","isamplerCubeArray","ivec2","ivec3","ivec4","layout","long","lowp","mat2","mat2x2","mat2x3","mat2x4","mat3","mat3x2","mat3x3","mat3x4","mat4","mat4x2","mat4x3","mat4x4","mediump","namespace","noinline","noperspective","out","output","packed","partition","patch","precise","precision","public","readonly","resource","restrict","return","sample","sampler1D","sampler1DArray","sampler1DArrayShadow","sampler1DShadow","sampler2D","sampler2DArray","sampler2DArrayShadow","sampler2DMS","sampler2DMSArray","sampler2DRect","sampler2DRectShadow","sampler2DShadow","sampler3D","sampler3DRect","samplerBuffer","samplerCube","samplerCubeArray","samplerCubeArrayShadow","samplerCubeShadow","shared","short","sizeof","smooth","static","struct","subroutine","superp","switch","template","this","true","typedef","uimage1D","uimage1DArray","uimage2D","uimage2DArray","uimage2DMS","uimage2DMSArray","uimage2DRect","uimage3D","uimageBuffer","uimageCube","uimageCubeArray","uint","uniform","union","unsigned","usampler1D","usampler1DArray","usampler2D","usampler2DArray","usampler2DMS","usampler2DMSArray","usampler2DRect","usampler3D","usamplerBuffer","usamplerCube","usamplerCubeArray","using","uvec2","uvec3","uvec4","varying","vec2","vec3","vec4","void","volatile","while","writeonly"]);function _r(e,t,r){var i=t[t];e[t]=e[r],e[r]=i}function ur(e){return e===P.BuiltInPosition||e===P.BuiltInPointSize||e===P.BuiltInClipDistance||e===P.BuiltInCullDistance}var hr=function(e){function r(t){var r=e.call(this,t)||this;return r.current_emitting_block=null,r.current_emitting_switch=null,r.current_emitting_switch_fallthrough=!1,r.buffer=new er,r.redirect_statement=null,r.current_continue_block=null,r.options=new $t,r.local_variable_names=new Set,r.resource_names=new Set,r.block_input_names=new Set,r.block_output_names=new Set,r.block_ubo_names=new Set,r.block_ssbo_names=new Set,r.block_names=new Set,r.function_overloads={},r.preserved_aliases=[],r.processing_entry_point=!1,r.backend=new bt,r.indent=0,r.flushed_phi_variables=new Set,r.flattened_buffer_blocks=new Set,r.flattened_structs=[],r.expression_usage_counts=[],r.forced_extensions=[],r.header_lines=[],r.extra_sub_expressions=[],r.workaround_ubo_load_overload_types=[],r.statement_count=0,r.requires_transpose_2x2=!1,r.requires_transpose_3x3=!1,r.requires_transpose_4x4=!1,r.subpass_to_framebuffer_fetch_attachment=[],r.inout_color_attachments=[],r.masked_output_locations=new Set,r.masked_output_builtins=new Set,r.init(),r}return a(r,e),r.prototype.remap_pixel_local_storage=function(e,t){this.pls_inputs=e,this.pls_outputs=t,this.remap_pls_variables()},r.prototype.remap_ext_framebuffer_fetch=function(e,t,r){this.subpass_to_framebuffer_fetch_attachment.push(new nt(e,t)),this.inout_color_attachments.push(new nt(t,r))},r.prototype.get_common_options=function(){return this.options},r.prototype.require_extension=function(e){this.has_extension(e)||this.forced_extensions.push(e)},r.prototype.flatten_buffer_block=function(e){var t=this.get(ge,e),r=this.get(xe,t.basetype),i=this.to_name(r.self,!1),a=Mt(de,this.ir.meta,r.self).decoration.decoration_flags;if(r.array.length>0)throw new Error(i+" is an array of UBOs.");if(r.basetype!==_e.Struct)throw new Error(i+" is not a struct.");if(!a.get(N.DecorationBlock))throw new Error(i+" is not a block.");if(0===r.member_types.length)throw new Error(i+" is an empty struct.");this.flattened_buffer_blocks.add(e)},r.prototype.mask_stage_output_by_location=function(e,t){for(var r=this.masked_output_locations,i=r.values(),a=null;a=i.next().value;)if(a.location===e&&a.component===t)return;r.add(new jt(e,t))},r.prototype.mask_stage_output_by_builtin=function(e){this.masked_output_builtins.add(e)},r.prototype.reset=function(){this.clear_force_recompile(),this.invalid_expressions.clear(),this.current_function=null,this.expression_usage_counts=[],this.forwarded_temporaries.clear(),this.suppressed_usage_tracking.clear(),this.flushed_phi_variables.clear(),this.reset_name_caches();var e=this.ir;e.for_each_typed_id(Be,(function(e,t){t.active=!1,t.flush_undeclared=!0})),e.for_each_typed_id(ge,(function(e,t){return t.dependees=[]})),e.reset_all_of_type(He),e.reset_all_of_type(qe),this.statement_count=0,this.indent=0,this.current_loop_level=0},r.prototype.emit_function_prototype=function(e,t){var r=this.ir;e.self!==r.default_entry_point&&this.add_function_overload(e),this.local_variable_names=this.resource_names;var i="",a=this.get(xe,e.return_type);i+=this.flags_to_qualifiers_glsl(a,t),i+=this.type_to_glsl(a),i+=this.type_to_array_glsl(a),i+=" ",e.self===r.default_entry_point?(this.interlocked_is_complex?i+="spvMainInterlockedBody":i+="main",this.processing_entry_point=!0):i+=this.to_name(e.self),i+="(";for(var o=[],n=0,s=e.arguments;n<s.length;n++){var c=s[n];if(!this.skip_argument(c.id))this.add_local_variable_name(c.id),o.push(this.argument_decl(c)),(_=this.maybe_get(ge,c.id))&&(_.parameter=c)}for(var l=0,p=e.shadow_arguments;l<p.length;l++){var _;c=p[l];this.add_local_variable_name(c.id),o.push(this.argument_decl(c)),(_=this.maybe_get(ge,c.id))&&(_.parameter=c)}i+=o.join(", "),i+=")",this.statement(i)},r.prototype.emit_function=function(e,t){if(!e.active){e.active=!0;for(var r=this.ir,i=0,a=e.blocks;i<a.length;i++)for(var o=a[i],n=0,s=this.get(ze,o).ops;n<s.length;n++){var c=s[n],l=this.stream(c);if(c.op===se.OpFunctionCall){var p=l[2];this.emit_function(this.get(Be,p),Mt(de,r.meta,l[1]).decoration.decoration_flags)}}0!==e.entry_line.file_id&&this.emit_line_directive(e.entry_line.file_id,e.entry_line.line_literal),this.emit_function_prototype(e,t),this.begin_scope(),e.self===r.default_entry_point&&this.emit_entry_point_declarations(),this.current_function=e;var _=this.get(ze,e.entry_block);e.constant_arrays_needed_on_stack.sort();for(var u=0,h=e.constant_arrays_needed_on_stack;u<h.length;u++){var d=h[u],f=this.get(Me,d),m=this.get(xe,f.constant_type);this.statement(this.variable_decl(m,"_".concat(d,"_array_copy"))," = ",this.constant_expression(f),";")}for(var g=0,b=e.local_variables;g<b.length;g++){var y=b[g];if((L=this.get(ge,y)).deferred_declaration=!1,this.variable_decl_is_remapped_storage(L,v.StorageClassWorkgroup))this.add_local_variable_name(L.self),this.statement(this.variable_decl(L),";"),L.deferred_declaration=!1;else if(L.storage===v.StorageClassPrivate){if(this.add_local_variable_name(L.self),L.initializer)this.statement(this.variable_decl(L),";"),L.deferred_declaration=!1;else _.dominated_variables.indexOf(L.self)<0&&_.dominated_variables.push(L.self),L.deferred_declaration=!0}else L.storage===v.StorageClassFunction&&L.remapped_variable&&L.static_expression?L.deferred_declaration=!1:this.expression_is_lvalue(y)?(this.add_local_variable_name(L.self),L.initializer&&!L.loop_variable?this.statement(this.variable_decl_function_local(L),";"):L.deferred_declaration=!0):L.statically_assigned=!0;L.loop_variable_enable=!1,L.loop_variable&&(L.deferred_declaration=!1)}for(var S=0,I=e.blocks;S<I.length;S++){var O=I[S];(o=this.get(ze,O)).dominated_variables.sort()}for(var x=0,k=this.current_function.fixup_hooks_in;x<k.length;x++){(0,k[x])()}this.emit_block_chain(_),this.end_scope(),this.processing_entry_point=!1,this.statement("");for(var C=0,E=e.local_variables;C<E.length;C++){var L;y=E[C];(L=this.get(ge,y)).deferred_declaration=!1}}},r.prototype.has_extension=function(e){return this.forced_extensions.indexOf(e)>=0},r.prototype.require_extension_internal=function(e){this.backend.supports_extensions&&!this.has_extension(e)&&(this.forced_extensions.push(e),this.force_recompile())},r.prototype.emit_block_instructions=function(e){this.current_emitting_block=e;for(var t=0,r=e.ops;t<r.length;t++){var i=r[t];this.emit_instruction(i)}this.current_emitting_block=null},r.prototype.emit_instruction=function(e){var r=this.stream(e),i=e.op,a=e.length,o=this.get_integer_width_for_instruction(e),n=qt(o),s=Xt(o),c=this.backend;switch(i){case se.OpLoad:var l=r[0],p=r[1],_=r[2];this.flush_variable_declaration(_);var u=this.should_forward(_)&&!this.forced_temporaries.has(p),h=!1,f=!1,m=this.maybe_get(He,_);u&&(m&&m.need_transpose?(f=!0,m.need_transpose=!1,h=!0):this.is_non_native_row_major_matrix(_)&&(h=!0));var g=void 0,b=this.has_extended_decoration(_,ce.SPIRVCrossDecorationPhysicalTypePacked),y=this.has_extended_decoration(_,ce.SPIRVCrossDecorationPhysicalTypeID);g=u||!b&&!y?this.to_dereferenced_expression(_,!1):this.to_unpacked_expression(_);var S=this.get(xe,l);this.expression_type(_).vecsize>S.vecsize&&(g=this.enclose_expression(g+this.vector_swizzle(S.vecsize,0))),g=this.cast_from_variable_load(_,g,S),g=this.unroll_array_from_complex_load(p,_,g),!this.type_is_opaque_value(S)&&this.has_decoration(_,N.DecorationNonUniform)&&(g=this.convert_non_uniform_expression(g,_)),u&&m&&(m.need_transpose=f);var I=m&&this.flattened_buffer_blocks.has(m.loaded_from);!c.needs_row_major_load_workaround||this.is_non_native_row_major_matrix(_)||I||(g=this.rewrite_load_for_wrapped_row_major(g,l,_));var O=I&&(S.basetype===_e.Struct||S.columns>1),x=void 0;!u&&this.expression_is_non_value_type_array(_)?(x=this.emit_uninitialized_temporary_expression(l,p),this.emit_array_copy(this.to_expression(p),p,_,v.StorageClassFunction,this.get_expression_effective_storage_class(_))):x=this.emit_op(l,p,g,u,!O),x.need_transpose=h,this.register_read(p,_,u),u?(this.has_extended_decoration(_,ce.SPIRVCrossDecorationPhysicalTypePacked)&&this.set_extended_decoration(p,ce.SPIRVCrossDecorationPhysicalTypePacked),this.has_extended_decoration(_,ce.SPIRVCrossDecorationPhysicalTypeID)&&this.set_extended_decoration(p,ce.SPIRVCrossDecorationPhysicalTypeID,this.get_extended_decoration(_,ce.SPIRVCrossDecorationPhysicalTypeID))):(this.unset_extended_decoration(p,ce.SPIRVCrossDecorationPhysicalTypePacked),this.unset_extended_decoration(p,ce.SPIRVCrossDecorationPhysicalTypeID)),this.inherit_expression_dependencies(p,_),u&&this.add_implied_read_expression(x,_);break;case se.OpInBoundsAccessChain:case se.OpAccessChain:case se.OpPtrAccessChain:(M=this.maybe_get(ge,r[2]))&&this.flush_variable_declaration(M.self);var k=new tr,C=i===se.OpPtrAccessChain,E=(x=this.access_chain(r[2],r.slice(3),a-3,this.get(xe,r[0]),k,C),g=this.set(He,r[1],x,r[0],this.should_forward(r[2])),this.maybe_get_backing_variable(r[2]));g.loaded_from=E?E.self:r[2],g.need_transpose=k.need_transpose,g.access_chain=!0,k.storage_is_packed&&this.set_extended_decoration(r[1],ce.SPIRVCrossDecorationPhysicalTypePacked),0!==k.storage_physical_type&&this.set_extended_decoration(r[1],ce.SPIRVCrossDecorationPhysicalTypeID,k.storage_physical_type),k.storage_is_invariant&&this.set_decoration(r[1],N.DecorationInvariant),k.flattened_struct&&(this.flattened_structs[r[1]]=!0),this.forwarded_temporaries.add(r[1]),this.suppressed_usage_tracking.add(r[1]);for(var L=2;L<a;L++)this.inherit_expression_dependencies(r[1],r[L]),this.add_implied_read_expression(g,r[L]);0===g.expression_dependencies.length&&this.forwarded_temporaries.delete(r[1]);break;case se.OpStore:var M;(M=this.maybe_get(ge,r[0]))&&M.statically_assigned||M&&M.loop_variable&&!M.loop_variable_enable?M.static_expression=r[1]:M&&M.remapped_variable&&M.static_expression||(this.flattened_structs.hasOwnProperty(r[0])?(this.store_flattened_struct(r[0],r[1]),this.register_write(r[0])):this.emit_store_statement(r[0],r[1])),this.expression_type(r[1]).pointer&&this.register_write(r[1]);break;case se.OpArrayLength:l=r[0],p=r[1],x=this.access_chain_internal(r[2],r.slice(3),a-3,Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,null);this.has_decoration(r[2],N.DecorationNonUniform)&&(x=this.convert_non_uniform_expression(x,r[2])),this.set(He,p,this.type_to_glsl(this.get(xe,l)),"("+x+".length())",l,!0);break;case se.OpFunctionCall:l=r[0],p=r[1];var T=r[2],R=r.slice(3);a-=3;var w=this.get(Be,T),D=this.get(xe,w.return_type),A=this.function_is_pure(w),B=!1,P=!1;for(L=0;L<a;L++)w.arguments[L].write_count&&(this.register_call_out_argument(R[L]),B=!0),this.flush_variable_declaration(R[L]);D.array.length>0&&!c.can_return_array&&(B=!0,P=!0),A||this.register_impure_function_call();var G="",F=[];G+=this.to_name(T)+"(",P&&(this.statement(this.type_to_glsl(D)," ",this.to_name(p),this.type_to_array_glsl(D),";"),F.push(this.to_name(p)));for(L=0;L<a;L++)this.skip_argument(R[L])||F.push(this.to_func_call_arg(w.arguments[L],R[L]));for(var z=0,U=w.combined_parameters;z<U.length;z++){var V=U[z],H=V.global_image?V.image_id:R[V.image_id],K=V.global_sampler?V.sampler_id:R[V.sampler_id];F.push(this.to_combined_image_sampler(H,K))}if(this.append_global_func_args(w,a,F),G+=F.join(", "),G+=")",this.check_function_call_constraints(R,a),D.basetype!==_e.Void){u=this.args_will_forward(p,R,a,A)&&!B&&A&&!this.forced_temporaries.has(p);P?(this.statement(G,";"),this.set(He,p,this.to_name(p),l,!0)):this.emit_op(l,p,G,u);for(L=0;L<a;L++)this.register_read(p,R[L],u);u&&this.register_global_read_dependencies(w,p)}else this.statement(G,";");break;case se.OpCompositeConstruct:l=r[0],p=r[1];var q=r.slice(2);a-=2;for(u=!0,L=0;L<a;L++)u=u&&this.should_forward(q[L]);var X=this.get(xe,l),W=a>0?this.expression_type(q[0]):null,j=X.array.length>0||X.basetype===_e.Struct,Q=!1,Z=!1;if(W&&(Q=1===W.vecsize&&1===W.columns&&!j&&c.use_constructor_splatting,Z=1===W.vecsize&&1===W.columns&&c.can_swizzle_scalar,this.ir.ids[q[0]].get_type()!==t.TypeConstant||Vt(W)||(Z=!1)),Q||Z){var Y=q[0];for(L=0;L<a;L++)Y!==q[L]&&(Q=!1,Z=!1)}X.basetype!==_e.Struct||c.can_declare_struct_inline||(u=!1),X.array.length>0&&!c.can_declare_arrays_inline&&(u=!1),this.type_is_empty(X)&&!c.supports_empty_struct&&(u=!1);var J="";if(c.use_initializer_list&&j){var $=!1;c.use_typed_initializer_list&&X.basetype===_e.Struct&&0===X.array.length?J+=this.type_to_glsl_constructor(this.get(xe,l)):c.use_typed_initializer_list&&c.array_is_value_type&&X.array.length>0&&(J+=this.type_to_glsl_constructor(this.get(xe,l))+"(",$=!0),J+="{ ",this.type_is_empty(X)&&!c.supports_empty_struct?J+="0":J+=Q?this.to_unpacked_expression(q[0]):this.build_composite_combiner(l,q,a),J+=" }",$&&(J+=")")}else Z&&!j?J=this.remap_swizzle(this.get(xe,l),1,this.to_unpacked_expression(q[0])):(J=this.type_to_glsl_constructor(this.get(xe,l))+"(",this.type_is_empty(X)&&!c.supports_empty_struct?J+="0":J+=Q?this.to_unpacked_expression(q[0]):this.build_composite_combiner(l,q,a),J+=")");if(""!==J){this.emit_op(l,p,J,u);for(L=0;L<a;L++)this.inherit_expression_dependencies(p,q[L])}break;case se.OpIsNan:case se.OpIsInf:this.emit_unary_func_op(r[0],r[1],r[2],"isnan");break;case se.OpSNegate:case se.OpFNegate:this.emit_unary_op(r[0],r[1],r[2],"-");break;case se.OpIAdd:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"+",S,Kt(i));break;case se.OpFAdd:this.emit_binary_op(r[0],r[1],r[2],r[3],"+");break;case se.OpISub:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"-",S,Kt(i));break;case se.OpFSub:this.emit_binary_op(r[0],r[1],r[2],r[3],"-");break;case se.OpIMul:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"*",S,Kt(i));break;case se.OpFMul:case se.OpMatrixTimesScalar:case se.OpVectorTimesScalar:this.emit_binary_op(r[0],r[1],r[2],r[3],"*");break;case se.OpOuterProduct:this.emit_binary_func_op(r[0],r[1],r[2],r[3],"outerProduct");break;case se.OpDot:this.emit_binary_func_op(r[0],r[1],r[2],r[3],"dot");break;case se.OpFDiv:this.emit_binary_op(r[0],r[1],r[2],r[3],"/");break;case se.OpShiftRightLogical:this.emit_binary_op_cast(r[0],r[1],r[2],r[3],">>",s,Kt(i));break;case se.OpShiftRightArithmetic:this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"+",n,Kt(i));break;case se.OpShiftLeftLogical:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"<<",S,Kt(i));break;case se.OpBitwiseOr:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"|",S,Kt(i));break;case se.OpBitwiseXor:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"^",S,Kt(i));break;case se.OpBitwiseAnd:S=this.get(xe,r[0]).basetype;this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"&",S,Kt(i));break;case se.OpNot:this.emit_unary_op(r[0],r[1],r[2],"~");break;case se.OpUMod:this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"%",s,Kt(i));break;case se.OpSMod:this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"%",n,Kt(i));break;case se.OpFMod:this.emit_binary_func_op(r[0],r[1],r[2],r[3],"mod");break;case se.OpLogicalNot:(S=this.get(xe,r[0])).vecsize>1?this.emit_unary_func_op(r[0],r[1],r[2],"not "):this.emit_unary_op(r[0],r[1],r[2],"!");break;case se.OpIEqual:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op_cast(r[0],r[1],r[2],r[3],"equal",n,Kt(i)):this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"==",n,Kt(i));break;case se.OpLogicalEqual:case se.OpFOrdEqual:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op(r[0],r[1],r[2],r[3],"equal"):this.emit_binary_op(r[0],r[1],r[2],r[3],"==");break;case se.OpINotEqual:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op_cast(r[0],r[1],r[2],r[3],"notEqual",n,Kt(i)):this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"!=",n,Kt(i));break;case se.OpLogicalNotEqual:case se.OpFOrdNotEqual:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op(r[0],r[1],r[2],r[3],"notEqual"):this.emit_binary_op(r[0],r[1],r[2],r[3],"!=");break;case se.OpUGreaterThan:case se.OpSGreaterThan:S=i===se.OpUGreaterThan?s:n;this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op_cast(r[0],r[1],r[2],r[3],"greaterThan",S,Kt(i)):this.emit_binary_op_cast(r[0],r[1],r[2],r[3],">",S,Kt(i));break;case se.OpFOrdGreaterThan:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op(r[0],r[1],r[2],r[3],"greaterThan"):this.emit_binary_op(r[0],r[1],r[2],r[3],">");break;case se.OpUGreaterThanEqual:case se.OpSGreaterThanEqual:S=i===se.OpUGreaterThanEqual?s:n;this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op_cast(r[0],r[1],r[2],r[3],"greaterThanEqual",S,Kt(i)):this.emit_binary_op_cast(r[0],r[1],r[2],r[3],">=",S,Kt(i));break;case se.OpFOrdGreaterThanEqual:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op(r[0],r[1],r[2],r[3],"greaterThanEqual"):this.emit_binary_op(r[0],r[1],r[2],r[3],">=");break;case se.OpULessThan:case se.OpSLessThan:S=i===se.OpULessThan?s:n;this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op_cast(r[0],r[1],r[2],r[3],"lessThan",S,Kt(i)):this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"<",S,Kt(i));break;case se.OpFOrdLessThan:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op(r[0],r[1],r[2],r[3],"lessThan"):this.emit_binary_op(r[0],r[1],r[2],r[3],"<");break;case se.OpULessThanEqual:case se.OpSLessThanEqual:S=i===se.OpULessThanEqual?s:n;this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op_cast(r[0],r[1],r[2],r[3],"lessThanEqual",S,Kt(i)):this.emit_binary_op_cast(r[0],r[1],r[2],r[3],"<=",S,Kt(i));break;case se.OpFOrdLessThanEqual:this.expression_type(r[2]).vecsize>1?this.emit_binary_func_op(r[0],r[1],r[2],r[3],"lessThanEqual"):this.emit_binary_op(r[0],r[1],r[2],r[3],"<=");break;case se.OpSConvert:case se.OpConvertSToF:case se.OpUConvert:case se.OpConvertUToF:var ee=i===se.OpSConvert||i===se.OpConvertSToF?n:s,te=(l=r[0],p=r[1],S=this.get(xe,l),this.expression_type(r[2]));T=this.type_to_glsl_constructor(S);te.width<S.width||Vt(S)?this.emit_unary_func_op_cast(l,p,r[2],T,ee,S.basetype):this.emit_unary_func_op(l,p,r[2],T);break;case se.OpConvertFToU:case se.OpConvertFToS:l=r[0],p=r[1],S=this.get(xe,l);var re=d(xe,S),ie=this.expression_type(r[2]);re.basetype=i===se.OpConvertFToS?qt(S.width):Xt(S.width);T=this.type_to_glsl_constructor(re);this.emit_unary_func_op_cast(l,p,r[2],T,ie.basetype,re.basetype);break;case se.OpFConvert:l=r[0],p=r[1],T=this.type_to_glsl_constructor(this.get(xe,l));this.emit_unary_func_op(l,p,r[2],T);break;case se.OpBitcast:l=r[0],p=r[1],R=r[2];if(!this.emit_complex_bitcast(l,p,R)){var ae=this.bitcast_glsl_op(this.get(xe,l),this.expression_type(R));this.emit_unary_func_op(l,p,R,ae)}break;case se.OpQuantizeToF16:l=r[0],p=r[1],R=r[2],ae="";switch((S=this.get(xe,l)).vecsize){case 1:ae="unpackHalf2x16(packHalf2x16(vec2("+this.to_expression(R);break;case 2:ae="unpackHalf2x16(packHalf2x16("+this.to_expression(R)+"))";break;case 3:ae="vec3("+("unpackHalf2x16(packHalf2x16("+this.to_expression(R)+".xy))")+", "+("unpackHalf2x16(packHalf2x16("+this.to_expression(R)+".zz)).x")+")";break;case 4:ae="vec4("+("unpackHalf2x16(packHalf2x16("+this.to_expression(R)+".xy))")+", "+("unpackHalf2x16(packHalf2x16("+this.to_expression(R)+".zw))")+")";break;default:throw new Error("Illegal argument to OpQuantizeToF16.")}this.emit_op(l,p,ae,this.should_forward(R)),this.inherit_expression_dependencies(p,R);break;case se.OpImageSampleExplicitLod:case se.OpImageSampleProjExplicitLod:case se.OpImageSampleDrefExplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSampleImplicitLod:case se.OpImageSampleProjImplicitLod:case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleProjDrefImplicitLod:case se.OpImageFetch:case se.OpImageGather:case se.OpImageDrefGather:this.emit_texture_op(e,!1);break;default:console.log("unimplemented op ",e.op),this.statement("// unimplemented op ",e.op)}},r.prototype.emit_header=function(){var e=this.get_entry_point(),t=this.options;100!==t.version&&this.statement("#version ",t.version,t.es&&t.version>100?" es":""),!t.es&&t.version<420&&(t.enable_420pack_extension&&(this.statement("#ifdef GL_ARB_shading_language_420pack"),this.statement("#extension GL_ARB_shading_language_420pack : require"),this.statement("#endif")),e.flags.get(S.ExecutionModeEarlyFragmentTests)&&this.require_extension_internal("GL_ARB_shader_image_load_store")),e.flags.get(S.ExecutionModePostDepthCoverage)&&this.require_extension_internal("GL_ARB_post_depth_coverage");var r=e.flags.get(S.ExecutionModePixelInterlockOrderedEXT)||e.flags.get(S.ExecutionModePixelInterlockUnorderedEXT)||e.flags.get(S.ExecutionModeSampleInterlockOrderedEXT)||e.flags.get(S.ExecutionModeSampleInterlockUnorderedEXT);if(r)if(t.es){if(t.version<310)throw new Error("At least ESSL 3.10 required for fragment shader interlock.");this.require_extension_internal("GL_NV_fragment_shader_interlock")}else t.version<420&&this.require_extension_internal("GL_ARB_shader_image_load_store"),this.require_extension_internal("GL_ARB_fragment_shader_interlock");for(var i=0,a=this.forced_extensions;i<a.length;i++){var o=a[i];"GL_EXT_shader_explicit_arithmetic_types_float16"===o?(this.statement("#if defined(GL_AMD_gpu_shader_half_float)"),this.statement("#extension GL_AMD_gpu_shader_half_float : require"),this.statement("#elif defined(GL_NV_gpu_shader5)"),this.statement("#extension GL_NV_gpu_shader5 : require"),this.statement("#else"),this.statement("#error No extension available for FP16."),this.statement("#endif")):"GL_EXT_shader_explicit_arithmetic_types_int16"===o?(this.statement("#if defined(GL_AMD_gpu_shader_int16)"),this.statement("#extension GL_AMD_gpu_shader_int16 : require"),this.statement("#elif defined(GL_NV_gpu_shader5)"),this.statement("#extension GL_NV_gpu_shader5 : require"),this.statement("#else"),this.statement("#error No extension available for Int16."),this.statement("#endif")):"GL_ARB_post_depth_coverage"===o?t.es?this.statement("#extension GL_EXT_post_depth_coverage : require"):(this.statement("#if defined(GL_ARB_post_depth_coverge)"),this.statement("#extension GL_ARB_post_depth_coverage : require"),this.statement("#else"),this.statement("#extension GL_EXT_post_depth_coverage : require"),this.statement("#endif")):/*!options.vulkan_semantics &&*/"GL_ARB_shader_draw_parameters"===o?(this.statement("#ifdef ",o),this.statement("#extension ",o," : enable"),this.statement("#endif")):"GL_EXT_control_flow_attributes"===o?(this.statement("#if defined(GL_EXT_control_flow_attributes)"),this.statement("#extension GL_EXT_control_flow_attributes : require"),this.statement("#define SPIRV_CROSS_FLATTEN [[flatten]]"),this.statement("#define SPIRV_CROSS_BRANCH [[dont_flatten]]"),this.statement("#define SPIRV_CROSS_UNROLL [[unroll]]"),this.statement("#define SPIRV_CROSS_LOOP [[dont_unroll]]"),this.statement("#else"),this.statement("#define SPIRV_CROSS_FLATTEN"),this.statement("#define SPIRV_CROSS_BRANCH"),this.statement("#define SPIRV_CROSS_UNROLL"),this.statement("#define SPIRV_CROSS_LOOP"),this.statement("#endif")):"GL_NV_fragment_shader_interlock"===o?(this.statement("#extension GL_NV_fragment_shader_interlock : require"),this.statement("#define SPIRV_Cross_beginInvocationInterlock() beginInvocationInterlockNV()"),this.statement("#define SPIRV_Cross_endInvocationInterlock() endInvocationInterlockNV()")):"GL_ARB_fragment_shader_interlock"===o?(this.statement("#ifdef GL_ARB_fragment_shader_interlock"),this.statement("#extension GL_ARB_fragment_shader_interlock : enable"),this.statement("#define SPIRV_Cross_beginInvocationInterlock() beginInvocationInterlockARB()"),this.statement("#define SPIRV_Cross_endInvocationInterlock() endInvocationInterlockARB()"),this.statement("#elif defined(GL_INTEL_fragment_shader_ordering)"),this.statement("#extension GL_INTEL_fragment_shader_ordering : enable"),this.statement("#define SPIRV_Cross_beginInvocationInterlock() beginFragmentShaderOrderingINTEL()"),this.statement("#define SPIRV_Cross_endInvocationInterlock()"),this.statement("#endif")):this.statement("#extension ",o," : require")}for(var n=0,s=this.header_lines;n<s.length;n++){var c=s[n];this.statement(c)}var l=[],p=[];switch(e.model){case g.ExecutionModelVertex:t.ovr_multiview_view_count&&l.push("num_views = "+t.ovr_multiview_view_count);break;case g.ExecutionModelFragment:if(t.es){switch(t.fragment.default_float_precision){case Wt.Lowp:this.statement("precision lowp float;");break;case Wt.Mediump:this.statement("precision mediump float;");break;case Wt.Highp:this.statement("precision highp float;")}switch(t.fragment.default_int_precision){case Wt.Lowp:this.statement("precision lowp int;");break;case Wt.Mediump:this.statement("precision mediump int;");break;case Wt.Highp:this.statement("precision highp int;")}}e.flags.get(S.ExecutionModeEarlyFragmentTests)&&l.push("early_fragment_tests"),e.flags.get(S.ExecutionModePostDepthCoverage)&&l.push("post_depth_coverage"),r&&this.statement("#if defined(GL_ARB_fragment_shader_interlock)"),e.flags.get(S.ExecutionModePixelInterlockOrderedEXT)?this.statement("layout(pixel_interlock_ordered) in;"):e.flags.get(S.ExecutionModePixelInterlockUnorderedEXT)?this.statement("layout(pixel_interlock_unordered) in;"):e.flags.get(S.ExecutionModeSampleInterlockOrderedEXT)?this.statement("layout(sample_interlock_ordered) in;"):e.flags.get(S.ExecutionModeSampleInterlockUnorderedEXT)&&this.statement("layout(sample_interlock_unordered) in;"),r&&(this.statement("#elif !defined(GL_INTEL_fragment_shader_ordering)"),this.statement("#error Fragment Shader Interlock/Ordering extension missing!"),this.statement("#endif")),!t.es&&e.flags.get(S.ExecutionModeDepthGreater)?this.statement("layout(depth_greater) out float gl_FragDepth;"):!t.es&&e.flags.get(S.ExecutionModeDepthLess)&&this.statement("layout(depth_less) out float gl_FragDepth;")}l.length>0&&this.statement("layout(",l.join(", "),") in;"),p.length>0&&this.statement("layout(",p.join(", "),") out;"),this.statement("")},r.prototype.emit_texture_op=function(e,t){var r=this.stream(e),i=e.op,a=[],o=r[0],n=r[1],s=this.get(xe,o),c={sparse_code_id:0,sparse_texel_id:0};t&&this.emit_sparse_feedback_temporaries(o,n,c);var l={value:!1},p=this.to_texture_op(e,t,l,a);t&&(this.statement(this.to_expression(c.sparse_code_id)," = ",p,";"),p=this.type_to_glsl(s)+"("+this.to_expression(c.sparse_code_id)+", "+this.to_expression(c.sparse_texel_id)+")",l.value=!0,a=[]),this.emit_op(o,n,p,l.value);for(var _=0,u=a;_<u.length;_++){var h=u[_];this.inherit_expression_dependencies(n,h)}switch(i){case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleImplicitLod:case se.OpImageSampleProjImplicitLod:case se.OpImageSampleProjDrefImplicitLod:this.register_control_dependent_expression(n)}},r.prototype.to_texture_op=function(e,t,r,i){var a,o=this.stream(e),n=e.op,s=e.length,c=o[0],l=o[2],p=o[3],_=0,u=0,h=!1,d=!1,f=!1,m=!1,g=this.get(xe,c),b=this.options,y=this.backend;switch(i.push(p),this.has_decoration(l,N.DecorationNonUniform)&&!this.maybe_get_backing_variable(l)&&(m=!0),n){case se.OpImageSampleDrefImplicitLod:case se.OpImageSampleDrefExplicitLod:case se.OpImageSparseSampleDrefImplicitLod:case se.OpImageSparseSampleDrefExplicitLod:_=o[4],a=5,s-=5;break;case se.OpImageSampleProjDrefImplicitLod:case se.OpImageSampleProjDrefExplicitLod:case se.OpImageSparseSampleProjDrefImplicitLod:case se.OpImageSparseSampleProjDrefExplicitLod:_=o[4],a=5,s-=5,d=!0;break;case se.OpImageDrefGather:case se.OpImageSparseDrefGather:if(_=o[4],a=5,s-=5,h=!0,b.es&&b.version<310)throw new Error("textureGather requires ESSL 310.");if(!b.es&&b.version<400)throw new Error("textureGather with depth compare requires GLSL 400.");break;case se.OpImageGather:case se.OpImageSparseGather:if(u=o[4],a=5,s-=5,h=!0,b.es&&b.version<310)throw new Error("textureGather requires ESSL 310.");if(!b.es&&b.version<400){if(!this.expression_is_constant_null(u))throw new Error("textureGather with component requires GLSL 400.");this.require_extension_internal("GL_ARB_texture_gather")}break;case se.OpImageFetch:case se.OpImageSparseFetch:case se.OpImageRead:a=4,s-=4,f=!0;break;case se.OpImageSampleProjImplicitLod:case se.OpImageSampleProjExplicitLod:case se.OpImageSparseSampleProjImplicitLod:case se.OpImageSparseSampleProjExplicitLod:a=4,s-=4,d=!0;break;default:a=4,s-=4}var S=this.expression_type(l),v=this.get(xe,S.self),O=0;switch(v.image.dim){case I.Dim1D:O=1;break;case I.Dim2D:O=2;break;case I.Dim3D:case I.DimCube:O=3;break;case I.DimBuffer:O=1;break;default:O=2}_&&i.push(_),d&&O++,v.image.arrayed&&O++;var x=0;s&&(x=o[a++],s--);var k=function(e,t){s&&x&t&&(e=o[a++],i.push(e),s--)};k(0,M.ImageOperandsBiasMask),k(0,M.ImageOperandsLodMask),k(0,M.ImageOperandsGradMask),k(0,M.ImageOperandsGradMask),k(0,M.ImageOperandsConstOffsetMask),k(0,M.ImageOperandsOffsetMask),k(0,M.ImageOperandsConstOffsetsMask),k(0,M.ImageOperandsSampleMask),k(0,M.ImageOperandsMinLodMask);var C=new ar;C.img=l,C.imgtype=v,C.is_fetch=f,C.is_gather=h,C.is_proj=d;var E="",L=new or;L.base=C,L.has_array_offsets=!1,L.has_offset=!1,L.has_grad=!1,L.has_dref=0!==_,L.is_sparse_feedback=t,L.has_min_lod=!1,L.lod=0,E+=this.to_function_name(L),E+="(";var T=0;t&&(T=this.get_sparse_feedback_texel_id(o[1]));var R=new nr;if(R.base=C,R.coord=p,R.coord_components=O,R.dref=_,R.grad_x=0,R.grad_y=0,R.lod=0,R.coffset=0,R.offset=0,R.bias=0,R.component=u,R.sample=0,R.sparse_texel=T,R.min_lod=0,R.nonuniform_expression=m,E+=this.to_function_args(R,r),E+=")",this.is_legacy()&&this.is_depth_image(v,l)&&(E+=".r"),y.comparison_image_samples_scalar&&function(e){switch(e){case se.OpImageSampleExplicitLod:case se.OpImageSampleImplicitLod:case se.OpImageSampleProjExplicitLod:case se.OpImageSampleProjImplicitLod:case se.OpImageFetch:case se.OpImageRead:case se.OpImageSparseSampleExplicitLod:case se.OpImageSparseSampleImplicitLod:case se.OpImageSparseSampleProjExplicitLod:case se.OpImageSparseSampleProjImplicitLod:case se.OpImageSparseFetch:case se.OpImageSparseRead:return!0;default:return!1}}(n)){var w=!1,D=this.maybe_get(Ke,l),A=D?D.image:l;(D&&this.is_depth_image(v,D.image)||this.is_depth_image(v,l))&&(w=!0);var B=this.maybe_get_backing_variable(A);B&&this.is_depth_image(this.get(xe,B.basetype),B.self)&&(w=!0),w&&(E=this.remap_swizzle(g,1,E))}return!t&&!y.support_small_type_sampling_result&&g.width<32&&(E=this.type_to_glsl_constructor(g)+"("+E+")"),n===se.OpImageRead&&(E=this.remap_swizzle(g,4,E)),E},r.prototype.emit_line_directive=function(e,t){this.redirect_statement||this.options.emit_line_directives&&(this.require_extension_internal("GL_GOOGLE_cpp_style_line_directive"),this.statement_no_indent("#line ",t,' "',this.get(We,e).str,'"'))},r.prototype.emit_struct_member=function(e,t,r,i,a){void 0===i&&(i="");var o,n=this.get(xe,t),s=this.ir,c=Mt(de,s.meta,e.self).members;o=r<c.length?c[r].decoration_flags:new le;var l="",p=Mt(de,s.meta,e.self).decoration.decoration_flags;(p.get(N.DecorationBlock)||p.get(N.DecorationBufferBlock))&&(l=this.to_interpolation_qualifiers(o)),this.statement(this.layout_for_member(e,r),l,i,this.flags_to_qualifiers_glsl(n,o),this.variable_decl(n,this.to_member_name(e,r)),";")},r.prototype.emit_struct_padding_target=function(e){},r.prototype.to_function_name=function(e){var t=this.options;if(e.has_min_lod){if(t.es)throw new Error("Sparse residency is not supported in ESSL.");this.require_extension_internal("GL_ARB_sparse_texture_clamp")}var r="",i=e.base.imgtype,a=e.base.img,o=!1;if((i.image.arrayed&&i.image.dim===I.Dim2D||i.image.dim===I.DimCube)&&this.is_depth_image(i,a)&&e.lod){if(!this.expression_is_constant_null(e.lod))throw new Error("textureLod on sampler2DArrayShadow is not constant 0.0. This cannot be expressed in GLSL.");o=!0}return e.is_sparse_feedback&&(r+="sparse"),e.base.is_fetch?r+=e.is_sparse_feedback?"TexelFetch":"texelFetch":(r+=e.is_sparse_feedback?"Texture":"texture",e.base.is_gather&&(r+="Gather"),e.has_array_offsets&&(r+="Offsets"),e.base.is_proj&&(r+="Proj"),(e.has_grad||o)&&(r+="Grad"),0===e.lod||o||(r+="Lod")),e.has_offset&&(r+="Offset"),e.has_min_lod&&(r+="Clamp"),(e.is_sparse_feedback||e.has_min_lod)&&(r+="ARB"),this.is_legacy()&&!e.base.is_gather?this.legacy_tex_op(r,i,a):r},r.prototype.to_function_args=function(e,t){var r,i=e.base.img,a=e.base.imgtype,o=this.backend;r=e.base.is_fetch?this.convert_separate_image_to_expression(i):this.to_non_uniform_aware_expression(i),e.nonuniform_expression&&r.indexOf("[")>=0&&(r=o.nonuniform_qualifier+"("+r+")");var n=o.swizzle_is_function,s=this.should_forward(e.coord),c=function(e,t){if(e===t)return"";switch(e){case 1:return".x";case 2:return n?".xy()":".xy";case 3:return n?".xyz()":".xyz";default:return""}}(e.coord_components,this.expression_type(e.coord).vecsize),l=""===c?this.to_expression(e.coord):this.to_enclosed_expression(e.coord)+c,p=this.expression_type(e.coord);if(p.basetype===_e.UInt){var _=d(xe,p);_.vecsize=e.coord_components,_.basetype=_e.Int,l=this.bitcast_expression(_,p.basetype,l)}var u=(a.image.arrayed&&a.image.dim===I.Dim2D||a.image.dim===I.DimCube)&&this.is_depth_image(a,i)&&0!==e.lod;if(e.dref)if(s=s&&this.should_forward(e.dref),e.base.is_gather||4===e.coord_components)r+=", ",r+=this.to_expression(e.coord),r+=", ",r+=this.to_expression(e.dref);else if(e.base.is_proj)if(r+=", vec4(",a.image.dim===I.Dim1D)r+=this.to_enclosed_expression(e.coord)+".x",r+=", ",r+="0.0, ",r+=this.to_expression(e.dref),r+=", ",r+=this.to_enclosed_expression(e.coord)+".y)";else{if(a.image.dim!==I.Dim2D)throw new Error("Invalid type for textureProj with shadow.");r+=this.to_enclosed_expression(e.coord)+(n?".xy()":".xy"),r+=", ",r+=this.to_expression(e.dref),r+=", ",r+=this.to_enclosed_expression(e.coord)+".z)"}else{var h=this.expression_type(e.coord);h.vecsize=e.coord_components+1,r+=", ",r+=this.type_to_glsl_constructor(h),r+="(",r+=l,r+=", ",r+=this.to_expression(e.dref),r+=")"}else r+=", ",r+=l;if((e.grad_x||e.grad_y)&&(s=(s=s&&this.should_forward(e.grad_x))&&this.should_forward(e.grad_y),r+=", ",r+=this.to_expression(e.grad_x),r+=", ",r+=this.to_expression(e.grad_y)),e.lod)if(u)a.image.dim===I.Dim2D?r+=", vec2(0.0), vec2(0.0)":a.image.dim===I.DimCube&&(r+=", vec3(0.0), vec3(0.0)");else{s=s&&this.should_forward(e.lod),r+=", ";var f=this.expression_type(e.lod);e.base.is_fetch&&a.image.dim!==I.DimBuffer&&!a.image.ms&&f.basetype!==_e.Int?r+="int("+this.to_expression(e.lod)+")":r+=this.to_expression(e.lod)}else e.base.is_fetch&&a.image.dim!==I.DimBuffer&&!a.image.ms&&(r+=", 0");(e.coffset?(s=s&&this.should_forward(e.coffset),r+=", ",r+=this.to_expression(e.coffset)):e.offset&&(s=s&&this.should_forward(e.offset),r+=", ",r+=this.to_expression(e.offset)),e.sample&&(r+=", ",r+=this.to_expression(e.sample)),e.min_lod&&(r+=", ",r+=this.to_expression(e.min_lod)),e.sparse_texel&&(r+=", ",r+=this.to_expression(e.sparse_texel)),e.bias&&(s=s&&this.should_forward(e.bias),r+=", ",r+=this.to_expression(e.bias)),e.component&&!this.expression_is_constant_null(e.component))&&(s=s&&this.should_forward(e.component),r+=", ",this.expression_type(e.component).basetype===_e.Int?r+=this.to_expression(e.component):r+="int("+this.to_expression(e.component)+")");return t.value=s,r},r.prototype.emit_sparse_feedback_temporaries=function(e,t,r){if(this.options.es)throw new Error("Sparse texture feedback is not supported on ESSL.");this.require_extension_internal("GL_ARB_sparse_texture2");var i=Mt(0,this.extra_sub_expressions,t);0===i&&(i=this.ir.increase_bound_by(2),this.extra_sub_expressions[t]=i),r.sparse_code_id=i+0,r.sparse_texel_id=i+1;var a=this.get(xe,e);if(a.basetype!==_e.Struct||2!==a.member_types.length)throw new Error("Invalid return type for sparse feedback.");this.emit_uninitialized_temporary(a.member_types[0],r.sparse_code_id),this.emit_uninitialized_temporary(a.member_types[1],r.sparse_texel_id)},r.prototype.get_sparse_feedback_texel_id=function(e){return this.extra_sub_expressions[e]||0},r.prototype.emit_buffer_block=function(e){var t=this.get(xe,e.basetype),r=e.storage===v.StorageClassUniform&&this.has_decoration(t.self,N.DecorationBlock),i=this.options;this.flattened_buffer_blocks.has(e.self)?this.emit_buffer_block_flattened(e):this.is_legacy()||!i.es&&130===i.version||r&&i.emit_uniform_buffer_as_plain_uniforms?this.emit_buffer_block_legacy(e):this.emit_buffer_block_native(e)},r.prototype.emit_push_constant_block=function(e){var t=this.options;this.flattened_buffer_blocks.has(e.self)?this.emit_buffer_block_flattened(e):t.emit_push_constant_as_uniform_buffer?this.emit_buffer_block_native(e):this.emit_push_constant_block_glsl(e)},r.prototype.emit_buffer_block_legacy=function(e){var t=this.get(xe,e.basetype),r=this.ir,i=Mt(de,r.meta,t.self);if(e.storage===v.StorageClassStorageBuffer||i.decoration.decoration_flags.get(N.DecorationBufferBlock))throw new Error("SSBOs not supported in legacy targets.");var a=i.decoration.decoration_flags,o=a.get(N.DecorationBlock);a.clear(N.DecorationBlock),this.emit_struct(t),o&&a.set(N.DecorationBlock),this.emit_uniform(e),this.statement("")},r.prototype.emit_buffer_block_flattened=function(e){var t=this.get(xe,e.basetype),r=this.to_name(t.self,!1),i=(this.get_declared_struct_size(t)+15)/16,a=this.get_common_basic_type(t);if(void 0===a)throw new Error("All basic types in a flattened block must be the same.");var o=new xe;if(o.basetype=a,o.vecsize=4,a!==_e.Float&&a!==_e.Int&&a!==_e.UInt)throw new Error("Basic types in a flattened UBO must be float, int or uint.");var n=this.ir.get_buffer_block_flags(e);this.statement("uniform ",this.flags_to_qualifiers_glsl(o,n),this.type_to_glsl(o)," ",r,"[",i,"];")},r.prototype.emit_flattened_io_block=function(e,t){var r=this.get(xe,e.basetype);if(r.array.length>0)throw new Error("Array of varying structs cannot be flattened to legacy-compatible varyings.");var i=r.type_alias?this.get(xe,r.type_alias):r,a=this.ir,o=Mt(de,a.meta,i.self).decoration,n=o.decoration_flags.clone();o.decoration_flags.set(N.DecorationBlock),i.member_name_cache.clear();var s=[];s.push(0);for(var c=this.to_name(e.self),l=0,p=0,_=i.member_types;p<_.length;p++){var u=_[p];this.add_member_name(i,l);var h=this.get(xe,u);s[s.length-1]=l,h.basetype===_e.Struct?this.emit_flattened_io_block_struct(c,i,t,s):this.emit_flattened_io_block_member(c,i,t,s),l++}o.decoration_flags=n,this.flattened_structs[e.self]=!0},r.prototype.emit_flattened_io_block_struct=function(e,t,r,i){var a=i.concat();a.push(0);for(var o=t,n=0,s=i;n<s.length;n++){var c=s[n];o=this.get(xe,o.member_types[c])}if(console.assert(o.basetype===_e.Struct),o.array.length>0)throw new Error("Cannot flatten array of structs in I/O blocks.");for(var l=0;l<o.member_types.length;l++)a[a.length-1]=l,this.get(xe,o.member_types[l]).basetype===_e.Struct?this.emit_flattened_io_block_struct(e,t,r,a):this.emit_flattened_io_block_member(e,t,r,a)},r.prototype.emit_flattened_io_block_member=function(e,t,r,i){for(var a=t.self,o=t,n=null,s=e,c=0,l=i;c<l.length;c++){var p=l[c];s+="_",s+=this.to_member_name(o,p),n=o,a=o.member_types[p],o=this.get(xe,a)}console.assert(o.basetype!==_e.Struct),n.type_alias&&(n=this.get(xe,n.type_alias)),s=Je.sanitize_underscores(s);var _=i[i.length-1];this.get_member_name(n.self,_);var u=this.to_member_name(n,_);this.set_member_name(n.self,_,s),this.emit_struct_member(n,a,_,r),this.set_member_name(n.self,_,u)},r.prototype.emit_block_chain=function(e){var r=this,i=!1,a=!1,o=!1,n=!1,s=!1,c=new ir(this,"current_loop_level"),l=this.backend,p=this.ir;e.merge===ye.MergeLoop&&this.add_loop_level(),this.emit_hoisted_temporaries(e.declare_temporary);var _=Ie.ContinueNone;e.continue_block&&(_=this.continue_block_type(this.get(ze,e.continue_block)))===Ie.ComplexLoop&&(e.complex_continue=!0);for(var u=0,h=e.loop_variables;u<h.length;u++){var d=h[u];(g=this.get(ge,d)).loop_variable_enable=!0,this.emit_variable_temporary_copies(g)}for(var f=new Array(e.dominated_variables.length),m=0;m<e.dominated_variables.length;m++){d=e.dominated_variables[m];var g=this.get(ge,d);f[m]=g.deferred_declaration}if(!this.is_legacy_es()&&this.block_is_loop_candidate(e,ve.MergeToSelectContinueForLoop)?(this.flush_undeclared_variables(e),this.attempt_emit_loop_header(e,ve.MergeToSelectContinueForLoop)&&(this.execution_is_noop(this.get(ze,e.true_block),this.get(ze,e.merge_block))?a=!0:i=!0,n=!0,s=!0)):this.block_is_loop_candidate(e,ve.MergeToSelectForLoop)?(this.flush_undeclared_variables(e),this.attempt_emit_loop_header(e,ve.MergeToSelectForLoop)&&(this.execution_is_noop(this.get(ze,e.true_block),this.get(ze,e.merge_block))?a=!0:i=!0,n=!0)):this.block_is_loop_candidate(e,ve.MergeToDirectForLoop)?(this.flush_undeclared_variables(e),this.attempt_emit_loop_header(e,ve.MergeToDirectForLoop)&&(o=!0,n=!0)):_===Ie.DoWhileLoop?(this.flush_undeclared_variables(e),this.emit_while_loop_initializers(e),n=!0,this.emit_hoisted_temporaries(e.potential_declare_temporary),this.statement("do"),this.begin_scope(),this.emit_block_instructions(e)):e.merge===ye.MergeLoop?(this.flush_undeclared_variables(e),this.emit_while_loop_initializers(e),n=!0,this.get(ze,e.continue_block).complex_continue=!0,_=Ie.ComplexLoop,this.emit_hoisted_temporaries(e.potential_declare_temporary),this.emit_block_hints(e),this.statement("for (;;)"),this.begin_scope(),this.emit_block_instructions(e)):this.emit_block_instructions(e),!n&&e.loop_variables.length>0){this.force_recompile();for(var b=0,y=e.loop_variables;b<y.length;b++){g=y[b];this.get(ge,g).loop_variable=!1}e.loop_variables=[]}this.flush_undeclared_variables(e);var S=!0;switch(e.terminator){case be.Direct:e.loop_dominator===e.next_block?(this.branch(e.self,e.next_block),S=!1):o?S=!1:(this.is_continue(e.next_block)||this.is_break(e.next_block)||this.is_conditional(e.next_block))&&(this.branch(e.self,e.next_block),S=!1);break;case be.Select:if(i)if(s){console.assert(e.true_block===e.continue_block);var I=(ce=this.get(ze,e.continue_block)).complex_continue;ce.complex_continue=!0,this.branch(e.self,e.true_block),ce.complex_continue=I}else this.branch(e.self,e.true_block);else if(a)if(s){console.assert(e.false_block===e.continue_block);I=(ce=this.get(ze,e.continue_block)).complex_continue;ce.complex_continue=!0,this.branch(e.self,e.false_block),ce.complex_continue=I}else this.branch(e.self,e.false_block);else this.branch(e.self,e.condition,e.true_block,e.false_block);break;case be.MultiSelect:var O=(ne=this.expression_type(e.condition)).basetype===_e.UInt||ne.basetype===_e.UShort||ne.basetype===_e.UByte||ne.basetype===_e.UInt64;if(e.merge===ye.MergeNone)throw new Error("Switch statement is not structured");if(!l.support_64bit_switch&&(ne.basetype===_e.UInt64||ne.basetype===_e.Int64))throw new Error("Cannot use 64-bit switch selectors.");var x="";ne.basetype===_e.UInt&&l.uint32_t_literal_suffix?x="u":ne.basetype===_e.Int64&&l.support_64bit_switch?x="l":ne.basetype===_e.UInt64&&l.support_64bit_switch?x="ul":ne.basetype===_e.UShort?x=l.uint16_t_literal_suffix:ne.basetype===_e.Short&&(x=l.int16_t_literal_suffix);var k=this.current_emitting_switch;this.current_emitting_switch=e,e.need_ladder_break&&this.statement("bool _",e.self,"_ladder_break = false;");for(var C=[],E=[],L=[],M=this.get_case_list(e),T=0,R=M;T<R.length;T++){var w=R[T];w.block!==e.next_block&&w.block!==e.default_block?(C.hasOwnProperty(w.block)||E.push(w.block),Mt(Array,C,w.block).push(w.value)):w.block===e.next_block&&e.default_block!==e.next_block&&L.push(w.value)}if(e.default_block!==e.next_block){var D=this.get(ze,e.default_block),A=E.length,B=!1;for(m=0;m<A;m++){var N=this.get(ze,E[m]);if(this.execution_is_direct_branch(N,D)){E.splice(m+1,0,e.default_block),B=!0;break}if(this.execution_is_direct_branch(D,N)){E.splice(m,0,e.default_block),B=!0;break}}if(B){if(this.is_legacy_es())throw new Error("Default case label fallthrough to other case label is not supported in ESSL 1.0.")}else E.push(e.default_block);C[e.default_block]=[]}var P=E.length,G=function(e,t,r){return Qe(r?e:t<=32?BigInt(Number(e)):BigInt(e))},F=function(e,t,i){for(var a="",o=t.length,n=0;n<o;n++)n&&(a+=" || "),a+=(o>1?"(":"")+r.to_enclosed_expression(e)+" === "+t[n]+i+(o>1?")":"");return a};for(m=1;l.support_case_fallthrough&&m<P;m++)if(this.flush_phi_required(e.self,E[m])&&this.flush_phi_required(E[m-1],E[m])){var z=E[m];if(this.get(ze,z).ignore_phi_from_block=0,(Z=C[z]).length){H=[];for(var U=0,V=Z;U<V.length;U++){W=V[U];H.push(this.to_enclosed_expression(e.condition)+" === "+G(W,ne.width,O))}this.statement("if (",H.join(" || "),")"),this.begin_scope(),this.flush_phi(e.self,z),this.end_scope()}else{for(var H=[],K=0;K<P;K++)for(var q=0,X=Mt(Array,C,E[K]);q<X.length;q++){var W=X[q];H.push(this.to_enclosed_expression(e.condition)+" !== "+G(W,ne.width,O))}this.statement("if (",H.join(" && "),")"),this.begin_scope(),this.flush_phi(e.self,z),this.end_scope()}this.get(ze,z).ignore_phi_from_block=e.self}var j=e.default_block!==e.merge_block&&!M.length;if(j||this.is_legacy_es())if(this.is_legacy_es()){var Q=this.statement_count;this.statement("for (int spvDummy",Q," = 0; spvDummy",Q," < 1; spvDummy",Q,"++)")}else this.statement("do");else this.emit_block_hints(e),this.statement("switch (",this.to_unpacked_expression(e.condition),")");this.begin_scope();for(m=0;m<P;m++){var Z;if((Z=C[z=E[m]]).length)if(this.is_legacy_es())this.statement(m?"else ":"","if (",F(e.condition,Z,x),")");else for(var Y=0,J=Z;Y<J.length;Y++){var $=J[Y];this.statement("case ",G($,ne.width,O),x,":")}else j||(this.is_legacy_es()?this.statement("else"):this.statement("default:"));N=this.get(ze,z);l.support_case_fallthrough&&m+1<P&&this.execution_is_direct_branch(N,this.get(ze,E[m+1]))?this.current_emitting_switch_fallthrough=!0:this.current_emitting_switch_fallthrough=!1,j||this.begin_scope(),this.branch(e.self,z),j||this.end_scope(),this.current_emitting_switch_fallthrough=!1}var ee=this.flush_phi_required(e.self,e.next_block),te=e.default_block===e.next_block||0!==L.length;if(ee&&te||0!==L.length){for(var re=0,ie=L;re<ie.length;re++){$=ie[re];this.statement("case ",G($,ne.width,O),x,":")}e.default_block===e.next_block&&(this.is_legacy_es()?this.statement("else"):this.statement("default:")),this.begin_scope(),this.flush_phi(e.self,e.next_block),this.statement("break;"),this.end_scope()}j&&!this.is_legacy_es()?this.end_scope_decl("while(false)"):this.end_scope(),e.need_ladder_break&&(this.statement("if (_",e.self,"_ladder_break)"),this.begin_scope(),this.statement("break;"),this.end_scope()),this.current_emitting_switch=k;break;case be.Return:for(var ae=0,oe=this.current_function.fixup_hooks_out;ae<oe.length;ae++){(0,oe[ae])()}this.processing_entry_point&&this.emit_fixup();var ne,se=this.get_cfg_for_current_function();if(e.return_value)(ne=this.expression_type(e.return_value)).array.length&&!l.can_return_array?(p.ids[e.return_value].get_type()!==t.TypeUndef&&this.emit_array_copy("spvReturnValue",0,e.return_value,v.StorageClassFunction,this.get_expression_effective_storage_class(e.return_value)),se.node_terminates_control_flow_in_sub_graph(this.current_function.entry_block,e.self)&&e.loop_dominator===ze.NoDominator||this.statement("return;")):p.ids[e.return_value].get_type()!==t.TypeUndef&&this.statement("return ",this.to_unpacked_expression(e.return_value),";");else se.node_terminates_control_flow_in_sub_graph(this.current_function.entry_block,e.self)&&e.loop_dominator===ze.NoDominator||this.statement("return;");break;case be.Kill:this.statement(l.discard_literal,";"),e.return_value&&this.statement("return ",this.to_unpacked_expression(e.return_value),";");break;case be.Unreachable:S=!1;break;case be.IgnoreIntersection:this.statement("ignoreIntersectionEXT;");break;case be.TerminateRay:this.statement("terminateRayEXT;");break;default:throw new Error("Unimplemented block terminator.")}if(e.next_block&&S&&(e.merge!==ye.MergeSelection&&(this.flush_phi(e.self,e.next_block),this.get(ze,e.next_block).invalidate_expressions=e.invalidate_expressions),this.current_emitting_switch_fallthrough||(this.is_loop_break(e.next_block)?(console.assert(e.merge===ye.MergeSelection),this.statement("break;")):this.is_continue(e.next_block)?(console.assert(e.merge===ye.MergeSelection),this.branch_to_continue(e.self,e.next_block)):e.self!==e.next_block&&this.emit_block_chain(this.get(ze,e.next_block)))),e.merge===ye.MergeLoop){if(_===Ie.DoWhileLoop){var ce=this.get(ze,e.continue_block),le=this.execution_is_noop(this.get(ze,ce.true_block),this.get(ze,ce.loop_dominator)),pe=this.statement_count;this.emit_continue_block(e.continue_block,le,!le),this.statement_count!==pe&&(this.get(ze,e.continue_block).complex_continue=!0,this.force_recompile());var ue=this.to_expression(ce.condition);le||(ue="!"+this.enclose_expression(ue)),this.end_scope_decl("while ("+ue+")")}else this.end_scope();c.release(),this.is_continue(e.merge_block)?this.branch_to_continue(e.self,e.merge_block):this.emit_block_chain(this.get(ze,e.merge_block))}e.invalidate_expressions=[],console.assert(f.length===e.dominated_variables.length);for(m=0;m<e.dominated_variables.length;m++){g=e.dominated_variables[m];this.get(ge,g).deferred_declaration=f[m]}for(var he=0,de=e.loop_variables;he<de.length;he++){d=de[he];this.get(ge,d).loop_variable_enable=!1}c.release()},r.prototype.emit_hoisted_temporaries=function(e){e.sort((function(e,t){return e.second-t.second}));for(var t=this.ir,r=this.options,i=0,a=e;i<a.length;i++){var o=a[i];this.add_local_variable_name(o.second);var n=Mt(de,t.meta,o.second).decoration.decoration_flags,s=this.get(xe,o.first),c="";r.force_zero_initialized_variables&&this.type_can_zero_initialize(s)&&(c=" = "+this.to_zero_initialized_expression(o.first)),this.statement(this.flags_to_qualifiers_glsl(s,n),this.variable_decl(s,this.to_name(o.second)),c,";"),this.hoisted_temporaries.add(o.second),this.forced_temporaries.add(o.second),this.set(He,o.second,this.to_name(o.second),o.first,!0)}},r.prototype.emit_uniform=function(e){var t=this.get(xe,e.basetype),r=this.options;if(t.basetype===_e.Image&&2===t.image.sampled&&t.image.dim!==I.DimSubpassData)if(!r.es&&r.version<420)this.require_extension_internal("GL_ARB_shader_image_load_store");else if(r.es&&r.version<310)throw new Error("At least ESSL 3.10 required for shader image load store.");this.add_resource_name(e.self),this.statement(this.layout_for_variable(e),this.variable_decl(e),";")},r.prototype.unpack_expression_type=function(e,t,r,i,a){return e},r.prototype.builtin_translates_to_nonarray=function(e){return!1},r.prototype.statement_inner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;++r)this.buffer.append(e[r]),this.statement_count++},r.prototype.type_to_glsl=function(e,t){if(void 0===t&&(t=0),e.pointer&&e.storage===v.StorageClassPhysicalStorageBufferEXT&&e.basetype!==_e.Struct){for(var r=this.type_to_glsl(this.get_pointee_type(e)),i=0;i<e.array.length;i++)e.array_size_literal[i]?r+=e.array[i]+"_":r+="id".concat(e.array[i],'_"');return r+="Pointer"}var a=this.backend;switch(e.basetype){case _e.Struct:return a.explicit_struct_type?"struct "+this.to_name(e.self):this.to_name(e.self);case _e.Image:case _e.SampledImage:return this.image_type_glsl(e,t);case _e.Sampler:return this.comparison_ids.has(t)?"samplerShadow":"sampler";case _e.AccelerationStructure:throw new Error("AccelerationStructure is not supported");case _e.RayQuery:throw new Error("RayQuery is not supported");case _e.Void:return"void"}if(e.basetype===_e.UInt&&this.is_legacy())throw new Error("Unsigned integers are not supported on legacy targets.");if(1===e.vecsize&&1===e.columns)switch(e.basetype){case _e.Boolean:return"bool";case _e.SByte:return a.basic_int8_type;case _e.UByte:return a.basic_uint8_type;case _e.Short:return a.basic_int16_type;case _e.UShort:return a.basic_uint16_type;case _e.Int:return a.basic_int_type;case _e.UInt:return a.basic_uint_type;case _e.AtomicCounter:return"atomic_uint";case _e.Half:return"float16_t";case _e.Float:return"float";case _e.Double:return"double";case _e.Int64:return"int64_t";case _e.UInt64:return"uint64_t";default:return"???"}else if(e.vecsize>1&&1===e.columns)switch(e.basetype){case _e.Boolean:return"bvec"+e.vecsize;case _e.SByte:return"i8vec"+e.vecsize;case _e.UByte:return"u8vec"+e.vecsize;case _e.Short:return"i16vec"+e.vecsize;case _e.UShort:return"u16vec"+e.vecsize;case _e.Int:return"ivec"+e.vecsize;case _e.UInt:return"uvec"+e.vecsize;case _e.Half:return"f16vec"+e.vecsize;case _e.Float:return"vec"+e.vecsize;case _e.Double:return"dvec"+e.vecsize;case _e.Int64:return"i64vec"+e.vecsize;case _e.UInt64:return"u64vec"+e.vecsize;default:return"???"}else if(e.vecsize===e.columns)switch(e.basetype){case _e.Boolean:return"bmat"+e.vecsize;case _e.Int:return"imat"+e.vecsize;case _e.UInt:return"umat"+e.vecsize;case _e.Half:return"f16mat"+e.vecsize;case _e.Float:return"mat"+e.vecsize;case _e.Double:return"dmat"+e.vecsize;default:return"???"}else switch(e.basetype){case _e.Boolean:return"bmat".concat(e.columns,"x").concat(e.vecsize);case _e.Int:return"imat".concat(e.columns,"x").concat(e.vecsize);case _e.UInt:return"umat".concat(e.columns,"x").concat(e.vecsize);case _e.Half:return"f16mat".concat(e.columns,"x").concat(e.vecsize);case _e.Float:return"mat".concat(e.columns,"x").concat(e.vecsize);case _e.Double:return"dmat".concat(e.columns,"x").concat(e.vecsize);default:return"???"}},r.prototype.builtin_to_glsl=function(e,t){var r=this.options;switch(e){case P.BuiltInPosition:return"gl_Position";case P.BuiltInPointSize:return"gl_PointSize";case P.BuiltInClipDistance:return"gl_ClipDistance";case P.BuiltInCullDistance:return"gl_CullDistance";case P.BuiltInVertexId:return"gl_VertexID";case P.BuiltInInstanceId:return!r.es&&r.version<140&&this.require_extension_internal("GL_ARB_draw_instanced"),"gl_InstanceID";case P.BuiltInVertexIndex:return"gl_VertexID";case P.BuiltInInstanceIndex:return!r.es&&r.version<140&&this.require_extension_internal("GL_ARB_draw_instanced"),r.vertex.support_nonzero_base_instance?(this.require_extension_internal("GL_ARB_shader_draw_parameters"),"(gl_InstanceID + SPIRV_Cross_BaseInstance)"):"gl_InstanceID";case P.BuiltInPrimitiveId:return t===v.StorageClassInput&&this.get_entry_point().model===g.ExecutionModelGeometry?"gl_PrimitiveIDIn":"gl_PrimitiveID";case P.BuiltInInvocationId:return"gl_InvocationID";case P.BuiltInLayer:return"gl_Layer";case P.BuiltInViewportIndex:return"gl_ViewportIndex";case P.BuiltInTessLevelOuter:return"gl_TessLevelOuter";case P.BuiltInTessLevelInner:return"gl_TessLevelInner";case P.BuiltInTessCoord:return"gl_TessCoord";case P.BuiltInFragCoord:return"gl_FragCoord";case P.BuiltInPointCoord:return"gl_PointCoord";case P.BuiltInFrontFacing:return"gl_FrontFacing";case P.BuiltInFragDepth:return"gl_FragDepth";case P.BuiltInNumWorkgroups:return"gl_NumWorkGroups";case P.BuiltInWorkgroupSize:return"gl_WorkGroupSize";case P.BuiltInWorkgroupId:return"gl_WorkGroupID";case P.BuiltInLocalInvocationId:return"gl_LocalInvocationID";case P.BuiltInGlobalInvocationId:return"gl_GlobalInvocationID";case P.BuiltInLocalInvocationIndex:return"gl_LocalInvocationIndex";case P.BuiltInHelperInvocation:return"gl_HelperInvocation";case P.BuiltInBaseVertex:if(r.es)throw new Error("BaseVertex not supported in ES profile.");return this.require_extension_internal("GL_ARB_shader_draw_parameters"),"SPIRV_Cross_BaseVertex";case P.BuiltInBaseInstance:if(r.es)throw new Error("BaseInstance not supported in ES profile.");return this.require_extension_internal("GL_ARB_shader_draw_parameters"),"SPIRV_Cross_BaseInstance";case P.BuiltInDrawIndex:if(r.es)throw new Error("DrawIndex not supported in ES profile.");return this.require_extension_internal("GL_ARB_shader_draw_parameters"),"gl_DrawIDARB";case P.BuiltInSampleId:if(r.es&&r.version<320&&this.require_extension_internal("GL_OES_sample_variables"),!r.es&&r.version<400)throw new Error("gl_SampleID not supported before GLSL 400.");return"gl_SampleID";case P.BuiltInSampleMask:if(r.es&&r.version<320&&this.require_extension_internal("GL_OES_sample_variables"),!r.es&&r.version<400)throw new Error("gl_SampleMask/gl_SampleMaskIn not supported before GLSL 400.");return t===v.StorageClassInput?"gl_SampleMaskIn":"gl_SampleMask";case P.BuiltInSamplePosition:if(r.es&&r.version<320&&this.require_extension_internal("GL_OES_sample_variables"),!r.es&&r.version<400)throw new Error("gl_SamplePosition not supported before GLSL 400.");return"gl_SamplePosition";case P.BuiltInViewIndex:return"gl_ViewID_OVR";case P.BuiltInNumSubgroups:case P.BuiltInSubgroupId:case P.BuiltInSubgroupSize:case P.BuiltInSubgroupLocalInvocationId:case P.BuiltInSubgroupEqMask:case P.BuiltInSubgroupGeMask:case P.BuiltInSubgroupGtMask:case P.BuiltInSubgroupLeMask:case P.BuiltInSubgroupLtMask:throw new Error("Subgroups not supported");case P.BuiltInLaunchIdKHR:case P.BuiltInLaunchSizeKHR:case P.BuiltInWorldRayOriginKHR:case P.BuiltInWorldRayDirectionKHR:case P.BuiltInObjectRayOriginKHR:case P.BuiltInObjectRayDirectionKHR:case P.BuiltInRayTminKHR:case P.BuiltInRayTmaxKHR:case P.BuiltInInstanceCustomIndexKHR:case P.BuiltInObjectToWorldKHR:case P.BuiltInWorldToObjectKHR:case P.BuiltInHitTNV:case P.BuiltInHitKindKHR:case P.BuiltInIncomingRayFlagsKHR:throw new Error("Raytracing not supported");case P.BuiltInBaryCoordNV:if(r.es&&r.version<320)throw new Error("gl_BaryCoordNV requires ESSL 320.");if(!r.es&&r.version<450)throw new Error("gl_BaryCoordNV requires GLSL 450.");return this.require_extension_internal("GL_NV_fragment_shader_barycentric"),"gl_BaryCoordNV";case P.BuiltInBaryCoordNoPerspNV:if(r.es&&r.version<320)throw new Error("gl_BaryCoordNoPerspNV requires ESSL 320.");if(!r.es&&r.version<450)throw new Error("gl_BaryCoordNoPerspNV requires GLSL 450.");return this.require_extension_internal("GL_NV_fragment_shader_barycentric"),"gl_BaryCoordNoPerspNV";case P.BuiltInFragStencilRefEXT:if(r.es)throw new Error("Stencil export not supported in GLES.");return this.require_extension_internal("GL_ARB_shader_stencil_export"),"gl_FragStencilRefARB";case P.BuiltInPrimitiveShadingRateKHR:throw new Error("Can only use PrimitiveShadingRateKHR in Vulkan GLSL.");case P.BuiltInShadingRateKHR:throw new Error("Can only use ShadingRateKHR in Vulkan GLSL.");case P.BuiltInDeviceIndex:throw new Error("Need Vulkan semantics for device group support.");case P.BuiltInFullyCoveredEXT:if(r.es)throw new Error("Need desktop GL to use GL_NV_conservative_raster_underestimation.");return this.require_extension_internal("GL_NV_conservative_raster_underestimation"),"gl_FragFullyCoveredNV";default:return"gl_BuiltIn_"+Qe(e)}},r.prototype.image_type_glsl=function(e,t){void 0===t&&(t=0);var r="";switch(this.get(xe,e.image.type).basetype){case _e.Int:case _e.Short:case _e.SByte:r="i";break;case _e.UInt:case _e.UShort:case _e.UByte:r="u"}var i=this.options;if(e.basetype===_e.Image&&e.image.dim===I.DimSubpassData&&this.subpass_input_is_framebuffer_fetch(t)){var a=d(xe,this.get(xe,e.image.type));return a.vecsize=4,this.type_to_glsl(a)}switch(e.basetype===_e.Image&&e.image.dim!==I.DimSubpassData?e.image.dim===I.DimBuffer&&1===e.image.sampled?r+="sampler":r+=2===e.image.sampled?"image":"texture":r+="sampler",e.image.dim){case I.Dim1D:r+="1D";break;case I.Dim2D:r+="2D";break;case I.Dim3D:r+="3D";break;case I.DimCube:r+="Cube";break;case I.DimRect:if(i.es)throw new Error("Rectangle textures are not supported on OpenGL ES.");this.is_legacy_desktop()&&this.require_extension_internal("GL_ARB_texture_rectangle"),r+="2DRect";break;case I.DimBuffer:i.es&&i.version<320?this.require_extension_internal("GL_EXT_texture_buffer"):!i.es&&i.version<300&&this.require_extension_internal("GL_EXT_texture_buffer_object"),r+="Buffer";break;case I.DimSubpassData:r+="2D";break;default:throw new Error("Only 1D, 2D, 2DRect, 3D, Buffer, InputTarget and Cube textures supported.")}return e.image.ms&&(r+="MS"),e.image.arrayed&&(this.is_legacy_desktop()&&this.require_extension_internal("GL_EXT_texture_array"),r+="Array"),e.basetype!==_e.SampledImage&&e.basetype!==_e.Sampler||!this.is_depth_image(e,t)||(r+="Shadow"),r},r.prototype.constant_expression=function(e){var t=this.get(xe,e.constant_type),r=this.backend;if(t.pointer)return r.null_pointer_literal;if(e.subconstants.length>0){var i=void 0,a=!1;r.use_initializer_list&&r.use_typed_initializer_list&&t.basetype===_e.Struct&&0===t.array.length?i=this.type_to_glsl_constructor(t)+"{ ":r.use_initializer_list&&r.use_typed_initializer_list&&r.array_is_value_type&&t.array.length>0?(i=this.type_to_glsl_constructor(t)+"({ ",a=!0):i=r.use_initializer_list?"{ ":this.type_to_glsl_constructor(t)+"(";for(var o=0;o<e.subconstants.length;++o){var n=e.subconstants[o],s=this.get(Me,n);s.specialization?i+=this.to_name(n):i+=this.constant_expression(s),o!==e.subconstants.length-1&&(i+=", ")}return i+=r.use_initializer_list?" }":")",a&&(i+=")"),i}if(t.basetype===_e.Struct&&0===t.member_types.length)return r.supports_empty_struct?"{ }":r.use_typed_initializer_list?this.type_to_glsl(this.get(xe,e.constant_type))+"{ 0 }":r.use_initializer_list?"{ 0 }":this.type_to_glsl(this.get(xe,e.constant_type))+"(0)";if(1===e.columns())return this.constant_expression_vector(e,0);i=this.type_to_glsl(this.get(xe,e.constant_type))+"(";for(var c=0;c<e.columns();c++)0!==e.specialization_constant_id(c)?i+=this.to_name(e.specialization_constant_id(c)):i+=this.constant_expression_vector(e,c),c+1<e.columns()&&(i+=", ");return i+=")"},r.prototype.constant_op_expression=function(e){var t=this.get(xe,e.basetype),r=!1,i=!1,a="";if(this.is_legacy()&&function(e){switch(e){case se.OpShiftRightLogical:case se.OpUGreaterThan:case se.OpUGreaterThanEqual:case se.OpULessThan:case se.OpULessThanEqual:case se.OpUConvert:case se.OpUDiv:case se.OpUMod:case se.OpUMulExtended:case se.OpConvertUToF:case se.OpConvertFToU:return!0;default:return!1}}(e.opcode))throw new Error("Unsigned integers are not supported on legacy targets.");switch(e.opcode){case se.OpSConvert:case se.OpUConvert:case se.OpFConvert:a=this.type_to_glsl_constructor(t);break;case se.OpSNegate:case se.OpNot:case se.OpLogicalNot:i=!0,a=cr[e.opcode];break;case se.OpIAdd:case se.OpISub:case se.OpIMul:case se.OpSDiv:case se.OpUDiv:case se.OpUMod:case se.OpSMod:case se.OpShiftRightLogical:case se.OpShiftRightArithmetic:case se.OpShiftLeftLogical:case se.OpBitwiseOr:case se.OpBitwiseXor:case se.OpBitwiseAnd:case se.OpLogicalOr:case se.OpLogicalAnd:case se.OpLogicalEqual:case se.OpLogicalNotEqual:case se.OpIEqual:case se.OpINotEqual:case se.OpULessThan:case se.OpSLessThan:case se.OpULessThanEqual:case se.OpSLessThanEqual:case se.OpUGreaterThan:case se.OpSGreaterThan:case se.OpUGreaterThanEqual:case se.OpSGreaterThanEqual:r=!0,a=cr[e.opcode];break;case se.OpSRem:var o=e.arguments[0],n=e.arguments[1];return this.to_enclosed_expression(o),this.to_enclosed_expression(n),this.to_enclosed_expression(o)+" / "+this.to_enclosed_expression(n)+")";case se.OpSelect:if(e.arguments.length<3)throw new Error("Not enough arguments to OpSpecConstantOp.");var s=this.to_trivial_mix_op(t,e.arguments[2],e.arguments[1],e.arguments[0]);if(!s)return this.to_ternary_expression(t,e.arguments[0],e.arguments[1],e.arguments[2]);a=s;break;case se.OpVectorShuffle:var c=this.type_to_glsl_constructor(t);c+="(";for(var l=this.expression_type(e.arguments[0]).vecsize,p=this.to_enclosed_expression(e.arguments[0]),_=this.to_enclosed_expression(e.arguments[1]),u=2;u<e.arguments.length;u++){var h=e.arguments[u];c+=h>=l?_+"."+"xyzw"[h-l]:p+"."+"xyzw"[h],u+1<e.arguments.length&&(c+=", ")}return c+=")";case se.OpCompositeExtract:return c=this.access_chain_internal(e.arguments[0],e.arguments.slice(1),e.arguments.length-1,Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,null);case se.OpCompositeInsert:throw new Error("OpCompositeInsert spec constant op is not supported.");default:throw new Error("Unimplemented spec constant op.")}var d,f=0;(i||r||e.opcode===se.OpSConvert||e.opcode===se.OpUConvert)&&(f=this.expression_type(e.arguments[0]).width);var m=Kt(e.opcode);switch(e.opcode){case se.OpIEqual:case se.OpINotEqual:case se.OpSLessThan:case se.OpSLessThanEqual:case se.OpSGreaterThan:case se.OpSGreaterThanEqual:case se.OpSMod:case se.OpSDiv:case se.OpShiftRightArithmetic:case se.OpSConvert:case se.OpSNegate:d=qt(f);break;case se.OpULessThan:case se.OpULessThanEqual:case se.OpUGreaterThan:case se.OpUGreaterThanEqual:case se.OpUMod:case se.OpUDiv:case se.OpShiftRightLogical:case se.OpUConvert:d=Xt(f);break;default:d=t.basetype}if(r){if(e.arguments.length<2)throw new Error("Not enough arguments to OpSpecConstantOp.");var g={cast_op0:"",cast_op1:"",input_type:_e.Unknown},b=this.binary_op_bitcast_helper(g,e.arguments[0],e.arguments[1],m);if(d=g.input_type,t.basetype!==d&&t.basetype!==_e.Boolean){b.basetype=d;c=this.bitcast_glsl_op(t,b);return c+="("+g.cast_op0+" "+a+" "+g.cast_op1+")"}return"("+g.cast_op0+" "+a+" "+g.cast_op1+")"}if(i){if(e.arguments.length<1)throw new Error("Not enough arguments to OpSpecConstantOp.");return"("+a+this.bitcast_glsl(t,e.arguments[0])+")"}if(e.opcode===se.OpSConvert||e.opcode===se.OpUConvert){if(e.arguments.length<1)throw new Error("Not enough arguments to OpSpecConstantOp.");var y=this.expression_type(e.arguments[0]);if(y.width<t.width&&d!==y.basetype){var S=y;return S.basetype=d,a+"("+this.bitcast_glsl(S,e.arguments[0])+")"}return a+"("+this.to_expression(e.arguments[0])+")"}if(e.arguments.length<1)throw new Error("Not enough arguments to OpSpecConstantOp.");return a+"("+this.to_expression(e.arguments[0])+")"},r.prototype.constant_expression_vector=function(e,t){var r=d(xe,this.get(xe,e.constant_type));r.columns=1;var i=r;i.vecsize=1;var a=this.backend,o="",n=a.use_constructor_splatting&&e.vector_size()>1,s=a.can_swizzle_scalar&&e.vector_size()>1;if(Vt(r)||(s=!1),n||s)for(var c=0;c<e.vector_size();c++)if(0!==e.specialization_constant_id(t,c)){n=!1,s=!1;break}if(n||s)if(64===r.width){var l=e.scalar_u64(t,0);for(c=1;c<e.vector_size();c++)if(l!==e.scalar_u64(t,c)){n=!1,s=!1;break}}else for(l=e.scalar(t,0),c=1;c<e.vector_size();c++)l!==e.scalar(t,c)&&(n=!1,s=!1);switch(e.vector_size()>1&&!s&&(o+=this.type_to_glsl(r)+"("),r.basetype){case _e.Half:if(n||s)o+=this.convert_half_to_string(e,t,0),s&&(o=this.remap_swizzle(this.get(xe,e.constant_type),1,o));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=this.convert_half_to_string(e,t,c),c+1<e.vector_size()&&(o+=", ");break;case _e.Float:if(n||s)o+=this.convert_float_to_string(e,t,0),s&&(o=this.remap_swizzle(this.get(xe,e.constant_type),1,o));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=this.convert_float_to_string(e,t,c),c+1<e.vector_size()&&(o+=", ");break;case _e.Double:if(n||s)o+=this.convert_double_to_string(e,t,0),s&&(o=this.remap_swizzle(this.get(xe,e.constant_type),1,o));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=this.convert_double_to_string(e,t,c),c+1<e.vector_size()&&(o+=", ");break;case _e.Int64:var p=r;p.vecsize=1,p.columns=1;var _=this.type_to_glsl(p);if(n)o+=Qe(e.scalar_i64(t,0),_,a.long_long_literal_suffix);else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=Qe(e.scalar_i64(t,c),_,a.long_long_literal_suffix),c+1<e.vector_size()&&(o+=", ");break;case _e.UInt64:if(n)o+=Qe(e.scalar_u64(t,0)),a.long_long_literal_suffix?o+="ull":o+="ul";else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):(o+=Qe(e.scalar_u64(t,c)),a.long_long_literal_suffix?o+="ull":o+="ul"),c+1<e.vector_size()&&(o+=", ");break;case _e.UInt:if(n)if(o+=Qe(e.scalar(t,0)),this.is_legacy()){if(e.scalar_i32(t,0)<0)throw new Error("Tried to convert uint literal into int, but this made the literal negative.")}else a.uint32_t_literal_suffix&&(o+="u");else for(c=0;c<e.vector_size();c++){if(e.vector_size()>1&&0!==e.specialization_constant_id(t,c))o+=this.to_expression(e.specialization_constant_id(t,c));else if(o+=Qe(e.scalar(t,c)),this.is_legacy()){if(e.scalar_i32(t,c)<0)throw new Error("Tried to convert uint literal into int, but this made the literal negative.")}else a.uint32_t_literal_suffix&&(o+="u");c+1<e.vector_size()&&(o+=", ")}break;case _e.Int:if(n)o+=Qe(e.scalar_i32(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=Qe(e.scalar_i32(t,c)),c+1<e.vector_size()&&(o+=", ");break;case _e.UShort:if(n)o+=Qe(e.scalar(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):""!==a.uint16_t_literal_suffix?(o+=Qe(e.scalar_u16(t,c)),o+=a.uint16_t_literal_suffix):(o+=this.type_to_glsl(i),o+="(",o+=Qe(e.scalar_u16(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case _e.Short:if(n)o+=Qe(e.scalar_i16(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):""!==a.int16_t_literal_suffix?(o+=Qe(e.scalar_i16(t,c)),o+=a.int16_t_literal_suffix):(o+=this.type_to_glsl(i),o+="(",o+=Qe(e.scalar_i16(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case _e.UByte:if(n)o+=Qe(e.scalar_u8(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):(o+=this.type_to_glsl(i),o+="(",o+=Qe(e.scalar_u8(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case _e.SByte:if(n)o+=Qe(e.scalar_i8(t,0));else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):(o+=this.type_to_glsl(i),o+="(",o+=Qe(e.scalar_i8(t,c)),o+=")"),c+1<e.vector_size()&&(o+=", ");break;case _e.Boolean:if(n)o+=e.scalar(t,0)?"true":"false";else for(c=0;c<e.vector_size();c++)e.vector_size()>1&&0!==e.specialization_constant_id(t,c)?o+=this.to_expression(e.specialization_constant_id(t,c)):o+=e.scalar(t,c)?"true":"false",c+1<e.vector_size()&&(o+=", ");break;default:throw new Error("Invalid constant expression basetype.")}return e.vector_size()>1&&!s&&(o+=")"),o},r.prototype.statement=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.is_forcing_recompilation())this.statement_count++;else if(this.redirect_statement)this.redirect_statement=(e=this.redirect_statement).concat.apply(e,t),this.statement_count++;else{for(var i=0;i<this.indent;i++)this.buffer.append("\t");this.statement_inner.apply(this,t),this.buffer.append("\n")}},r.prototype.statement_no_indent=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.indent;this.indent=0,this.statement.apply(this,e),this.indent=r},r.prototype.begin_scope=function(){this.statement("{"),this.indent++},r.prototype.end_scope=function(e){if(!this.indent)throw new Error("Popping empty indent stack.");this.indent--,e?this.statement("}",e):this.statement("}")},r.prototype.end_scope_decl=function(e){if(!this.indent)throw new Error("Popping empty indent stack.");this.indent--,e?this.statement("} ",e,";"):this.statement("};")},r.prototype.add_resource_name=function(e){var t=Mt(de,this.ir.meta,e).decoration;t.alias=this.add_variable(this.resource_names,this.block_names,t.alias)},r.prototype.add_local_variable_name=function(e){var t=Mt(de,this.ir.meta,e).decoration;t.alias=this.add_variable(this.local_variable_names,this.block_names,t.alias)},r.prototype.add_member_name=function(e,t){var r=Mt(de,this.ir.meta,e.self).members;if(t<r.length&&""!==r[t].alias){var i=r[t].alias;if(""===i)return;i=Je.sanitize_identifier(i,!0,!0),i=this.update_name_cache(e.member_name_cache,i),r[t].alias=i}},r.prototype.type_to_array_glsl=function(e){if(e.pointer&&e.storage===v.StorageClassPhysicalStorageBufferEXT&&e.basetype!==_e.Struct)return"";if(0===e.array.length)return"";var t=this.options;if(t.flatten_multidimensional_arrays){var r="";r+="[";for(var i=e.array.length;i;i--)r+=this.enclose_expression(this.to_array_size(e,i-1)),i>1&&(r+=" * ");return r+="]"}if(e.array.length>1)if(!t.es&&t.version<430)this.require_extension_internal("GL_ARB_arrays_of_arrays");else if(t.es&&t.version<310)throw new Error("Arrays of arrays not supported before ESSL version 310. Try using --flatten-multidimensional-arrays or set options.flatten_multidimensional_arrays to true.");for(r="",i=e.array.length;i;i--)r+="[",r+=this.to_array_size(e,i-1),r+="]";return r},r.prototype.add_function_overload=function(e){for(var t=new rr,r=0,i=e.arguments;r<i.length;r++){var a=i[r],o=this.get_pointee_type_id(a.type),n=this.get(xe,o);this.combined_image_samplers.length&&(n.basetype===_e.SampledImage||n.basetype===_e.Image&&1===n.image.sampled||n.basetype===_e.Sampler)||t.u32(o)}var s=t.get(),c=this.to_name(e.self),l=this.function_overloads[c];if(l){var p=l;p.has(s)?(this.add_resource_name(e.self),Mt(Set,this.function_overloads,this.to_name(e.self)).add(s)):p.add(s)}else this.add_resource_name(e.self),Mt(Set,this.function_overloads,this.to_name(e.self)).add(s)},r.prototype.to_array_size=function(e,t){console.assert(e.array.length===e.array_size_literal.length);var r=e.array[t];return e.array_size_literal[t]?r?Qe(r):this.backend.unsized_array_supported?"":"1":this.to_expression(r)},r.prototype.to_array_size_literal=function(e,t){return void 0===t&&(t=e.array.length-1),console.assert(e.array.length===e.array_size_literal.length),e.array_size_literal[t]?e.array[t]:this.evaluate_constant_u32(e.array[t])},r.prototype.emit_fixup=function(){if(this.is_vertex_like_shader()){if(this.options.vertex.fixup_clipspace){var e=this.backend.float_literal_suffix?"f":"";this.statement("gl_Position.z = 2.0",e," * gl_Position.z - gl_Position.w;")}this.options.vertex.flip_vert_y&&this.statement("gl_Position.y = -gl_Position.y;")}},r.prototype.variable_decl=function(e,r,i){if(void 0===i&&(i=0),e instanceof xe){var a=e,o=this.type_to_glsl(a,i);return(o=this.remap_variable_type_name(a,r,o))+" "+r+this.type_to_array_glsl(a)}var n=this.get_variable_data_type(e);if(n.pointer_depth>1&&!this.backend.support_pointer_to_pointer)throw new Error("Cannot declare pointer-to-pointer types.");var s=this.options,c=this.ir,l=this.to_qualifiers_glsl(e.self)+this.variable_decl(n,this.to_name(e.self),e.self);if(e.loop_variable&&e.static_expression){var p=e.static_expression;c.ids[p].get_type()!==t.TypeUndef?l+=" = "+this.to_unpacked_expression(e.static_expression):s.force_zero_initialized_variables&&this.type_can_zero_initialize(n)&&(l+=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(e)))}else if(e.initializer&&!this.variable_decl_is_remapped_storage(e,v.StorageClassWorkgroup)){p=e.initializer;c.ids[p].get_type()!==t.TypeUndef?l+=" = "+this.to_initializer_expression(e):s.force_zero_initialized_variables&&this.type_can_zero_initialize(n)&&(l+=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(e)))}return l},r.prototype.variable_decl_function_local=function(e){var t=e.storage;e.storage=v.StorageClassFunction;var r=this.variable_decl(e);return e.storage=t,r},r.prototype.variable_decl_is_remapped_storage=function(e,t){return e.storage===t},r.prototype.to_func_call_arg=function(e,t){var r=t,i=this.maybe_get(ge,t);return i&&i.basevariable&&(r=i.basevariable),this.to_expression(r)},r.prototype.is_non_native_row_major_matrix=function(e){if(this.backend.native_row_major_matrix&&!this.is_legacy())return!1;var t=this.maybe_get(He,e);return t?t.need_transpose:this.has_decoration(e,N.DecorationRowMajor)},r.prototype.member_is_non_native_row_major_matrix=function(e,t){if(this.backend.native_row_major_matrix&&!this.is_legacy())return!1;if(!this.has_member_decoration(e.self,t,N.DecorationRowMajor))return!1;var r=this.get(xe,e.member_types[t]);if(r.columns!==r.vecsize)throw new Error("Row-major matrices must be square on this platform.");return!0},r.prototype.member_is_remapped_physical_type=function(e,t){return this.has_extended_member_decoration(e.self,t,ce.SPIRVCrossDecorationPhysicalTypeID)},r.prototype.member_is_packed_physical_type=function(e,t){return this.has_extended_member_decoration(e.self,t,ce.SPIRVCrossDecorationPhysicalTypePacked)},r.prototype.convert_row_major_matrix=function(e,t,r,i){if(e=this.strip_enclosed_expression(e),this.is_matrix(t)){if(this.options.version<120){if(2===t.vecsize&&2===t.columns)this.requires_transpose_2x2||(this.requires_transpose_2x2=!0,this.force_recompile());else if(3===t.vecsize&&3===t.columns)this.requires_transpose_3x3||(this.requires_transpose_3x3=!0,this.force_recompile());else{if(4!==t.vecsize||4!==t.columns)throw new Error("Non-square matrices are not supported in legacy GLSL, cannot transpose.");this.requires_transpose_4x4||(this.requires_transpose_4x4=!0,this.force_recompile())}return"spvTranspose(".concat(e,")")}return"transpose(".concat(e,")")}var a=e.lastIndexOf("[");if(-1===a)return e;var o=e.substring(a);e=e.substring(0,a);for(var n=this.type_to_glsl_constructor(t)+"(",s=0;s<t.vecsize;s++)n+="".concat(e,"[").concat(s,"]").concat(o),s+1<t.vecsize&&(n+=", ");return n+=")"},r.prototype.preserve_alias_on_reset=function(e){this.preserved_aliases[e]=this.get_name(e)},r.prototype.reset_name_caches=function(){var e=this;this.preserved_aliases.forEach((function(t,r){return e.set_name(r,t)})),this.preserved_aliases=[],this.resource_names.clear(),this.block_input_names.clear(),this.block_output_names.clear(),this.block_ubo_names.clear(),this.block_ssbo_names.clear(),this.block_names.clear(),this.function_overloads={}},r.prototype.emit_struct=function(e){if(0===e.type_alias||this.has_extended_decoration(e.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked)){this.add_resource_name(e.self);var t=this.type_to_glsl(e),r=this.backend;this.statement(r.explicit_struct_type?"":"struct ",t),this.begin_scope(),e.member_name_cache.clear();for(var i=0,a=!1,o=0,n=e.member_types;o<n.length;o++){var s=n[o];this.add_member_name(e,i),this.emit_struct_member(e,s,i),i++,a=!0}this.type_is_empty(e)&&!r.supports_empty_struct&&(this.statement("int empty_struct_member;"),a=!0),this.has_extended_decoration(e.self,ce.SPIRVCrossDecorationPaddingTarget)&&this.emit_struct_padding_target(e),this.end_scope_decl(),a&&this.statement("")}},r.prototype.emit_resources=function(){var e=this,r=this.get_entry_point(),i=this.options,a=this.ir;if(this.replace_illegal_names(),r.model===g.ExecutionModelFragment&&this.is_legacy()&&this.replace_fragment_outputs(),(this.pls_inputs.length>0||this.pls_outputs.length>0)&&this.emit_pls(),i.separate_shader_objects&&!i.es&&r.model!==g.ExecutionModelFragment){if(r.model===g.ExecutionModelVertex)this.emit_declared_builtin_block(v.StorageClassOutput,r.model)}else if(this.should_force_emit_builtin_block(v.StorageClassOutput))this.emit_declared_builtin_block(v.StorageClassOutput,r.model);else if(r.geometry_passthrough)this.emit_declared_builtin_block(v.StorageClassInput,r.model);else{var o=r.model===g.ExecutionModelFragment?"in":"out";0!==this.clip_distance_count&&this.statement(o," float gl_ClipDistance[",this.clip_distance_count,"];"),0!==this.cull_distance_count&&this.statement(o," float gl_CullDistance[",this.cull_distance_count,"];"),0===this.clip_distance_count&&0===this.cull_distance_count||this.statement("")}this.position_invariant&&(this.statement("invariant gl_Position;"),this.statement(""));for(var n=!1,s=a.create_loop_hard_lock(),c=0,l=a.ids_for_constant_or_type;c<l.length;c++){var p=l[c],_=a.ids[p];if(_.get_type()===t.TypeConstant){var u=_.get(Me);(u.specialization||u.is_used_as_lut)&&(/*!options.vulkan_semantics &&*/u.specialization&&(u.specialization_constant_macro_name=this.constant_value_macro_name(this.get_decoration(u.self,N.DecorationSpecId))),this.emit_constant(u),n=!0)}else if(_.get_type()===t.TypeConstantOp)this.emit_specialization_constant_op(_.get(Te)),n=!0;else if(_.get_type()===t.TypeType){(f=_.get(xe)).basetype===_e.Struct&&0===f.array.length&&f.pointer&&!this.has_decoration(f.self,N.DecorationBlock)&&!this.has_decoration(f.self,N.DecorationBufferBlock)&&(n&&this.statement(""),n=!1,this.emit_struct(f))}}if(s.dispose(),n&&this.statement(""),n=!1,a.addressing_model===b.AddressingModelPhysicalStorageBuffer64EXT){for(var h=0,d=this.physical_storage_non_block_pointer_types;h<d.length;h++){var f=d[h];this.emit_buffer_reference_block(f,!1)}a.for_each_typed_id(xe,(function(t,r){r.basetype===_e.Struct&&r.pointer&&1===r.pointer_depth&&!e.type_is_array_of_pointers(r)&&r.storage===v.StorageClassPhysicalStorageBufferEXT&&e.emit_buffer_reference_block(t,!0)})),a.for_each_typed_id(xe,(function(t,r){r.basetype===_e.Struct&&r.pointer&&1===r.pointer_depth&&!e.type_is_array_of_pointers(r)&&r.storage===v.StorageClassPhysicalStorageBufferEXT&&e.emit_buffer_reference_block(t,!1)}))}a.for_each_typed_id(ge,(function(t,r){var i=e.get(xe,r.basetype),o=i.storage===v.StorageClassStorageBuffer||i.storage===v.StorageClassUniform||i.storage===v.StorageClassShaderRecordBufferKHR,n=Mt(de,a.meta,i.self).decoration.decoration_flags.get(N.DecorationBlock)||Mt(de,a.meta,i.self).decoration.decoration_flags.get(N.DecorationBufferBlock);r.storage!==v.StorageClassFunction&&i.pointer&&o&&!e.is_hidden_variable(r)&&n&&e.emit_buffer_block(r)})),a.for_each_typed_id(ge,(function(t,r){var i=e.get(xe,r.basetype);r.storage!==v.StorageClassFunction&&i.pointer&&i.storage===v.StorageClassPushConstant&&!e.is_hidden_variable(r)&&e.emit_push_constant_block(r)})),a.for_each_typed_id(ge,(function(t,r){var i=e.get(xe,r.basetype),a=i.basetype===_e.Image&&i.image.dim===I.DimBuffer,o=i.basetype===_e.Image&&1===i.image.sampled,s=i.basetype===_e.Sampler;(a||!o&&!s)&&(r.storage===v.StorageClassFunction||!i.pointer||i.storage!==v.StorageClassUniformConstant&&i.storage!==v.StorageClassAtomicCounter&&i.storage!==v.StorageClassRayPayloadKHR&&i.storage!==v.StorageClassIncomingRayPayloadKHR&&i.storage!==v.StorageClassCallableDataKHR&&i.storage!==v.StorageClassIncomingCallableDataKHR&&i.storage!==v.StorageClassHitAttributeKHR||e.is_hidden_variable(r)||(e.emit_uniform(r),n=!0))})),n&&this.statement(""),n=!1;var m=!1;a.for_each_typed_id(ge,(function(t,r){var a=e.get(xe,r.basetype),o=e.is_hidden_variable(r);if(r.storage===v.StorageClassOutput&&!e.is_legacy()&&e.location_is_framebuffer_fetch(e.get_decoration(r.self,N.DecorationLocation))&&(o=!1),r.storage===v.StorageClassFunction||!a.pointer||r.storage!==v.StorageClassInput&&r.storage!==v.StorageClassOutput||!e.interface_variable_exists_in_entry_point(r.self)||o){if(e.is_builtin_variable(r)){var s=e.get_decoration(r.self,N.DecorationBuiltIn);!m&&(i.vertex.support_nonzero_base_instance&&s===P.BuiltInInstanceIndex||s===P.BuiltInBaseInstance)?(e.statement("#ifdef GL_ARB_shader_draw_parameters"),e.statement("#define SPIRV_Cross_BaseInstance gl_BaseInstanceARB"),e.statement("#else"),e.statement("uniform int SPIRV_Cross_BaseInstance;"),e.statement("#endif"),n=!0,m=!0):s===P.BuiltInBaseVertex?(e.statement("#ifdef GL_ARB_shader_draw_parameters"),e.statement("#define SPIRV_Cross_BaseVertex gl_BaseVertexARB"),e.statement("#else"),e.statement("uniform int SPIRV_Cross_BaseVertex;"),e.statement("#endif")):s===P.BuiltInDrawIndex&&(e.statement("#ifndef GL_ARB_shader_draw_parameters"),e.statement("#error GL_ARB_shader_draw_parameters is not supported."),e.statement("#endif"))}}else{if(i.es&&e.get_execution_model()===g.ExecutionModelVertex&&r.storage===v.StorageClassInput&&1===a.array.length)throw new Error("OpenGL ES doesn't support array input variables in vertex shader.");e.emit_interface_block(r),n=!0}}));for(var y=0,S=this.global_variables;y<S.length;y++){var O=S[y],x=this.get(ge,O);if(!this.is_hidden_variable(x,!0))if(x.storage!==v.StorageClassOutput){if(!this.variable_is_lut(x)){this.add_resource_name(x.self);var k="";i.force_zero_initialized_variables&&x.storage===v.StorageClassPrivate&&!x.initializer&&!x.static_expression&&this.type_can_zero_initialize(this.get_variable_data_type(x))&&(k=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(x))),this.statement(this.variable_decl(x),k,";"),n=!0}}else x.initializer&&null!==this.maybe_get(Me,x.initializer)&&this.emit_output_variable_initializer(x)}n&&this.statement(""),this.declare_undefined_values()},r.prototype.emit_extension_workarounds=function(e){if(this.workaround_ubo_load_overload_types.length){for(var t=0,r=this.workaround_ubo_load_overload_types;t<r.length;t++){var i=r[t],a=this.get(xe,i);this.statement(this.type_to_glsl(a)," spvWorkaroundRowMajor(",this.type_to_glsl(a)," wrap) { return wrap; }")}this.statement("")}this.requires_transpose_2x2&&(this.statement("mat2 spvTranspose(mat2 m)"),this.begin_scope(),this.statement("return mat2(m[0][0], m[1][0], m[0][1], m[1][1]);"),this.end_scope(),this.statement("")),this.requires_transpose_3x3&&(this.statement("mat3 spvTranspose(mat3 m)"),this.begin_scope(),this.statement("return mat3(m[0][0], m[1][0], m[2][0], m[0][1], m[1][1], m[2][1], m[0][2], m[1][2], m[2][2]);"),this.end_scope(),this.statement("")),this.requires_transpose_4x4&&(this.statement("mat4 spvTranspose(mat4 m)"),this.begin_scope(),this.statement("return mat4(m[0][0], m[1][0], m[2][0], m[3][0], m[0][1], m[1][1], m[2][1], m[3][1], m[0][2], m[1][2], m[2][2], m[3][2], m[0][3], m[1][3], m[2][3], m[3][3]);"),this.end_scope(),this.statement(""))},r.prototype.emit_buffer_block_native=function(e){var t=this.get(xe,e.basetype),r=this.ir,i=r.get_buffer_block_flags(e),a=Mt(de,r.meta,t.self).decoration,o=e.storage===v.StorageClassStorageBuffer||e.storage===v.StorageClassShaderRecordBufferKHR||a.decoration_flags.get(N.DecorationBufferBlock),n=o&&i.get(N.DecorationRestrict),s=o&&i.get(N.DecorationNonReadable),c=o&&i.get(N.DecorationNonWritable),l=o&&i.get(N.DecorationCoherent),p=this.to_name(t.self,!1),_=o?this.block_ssbo_names:this.block_ubo_names;(""===a.alias||_.has(p)||this.resource_names.has(p))&&(p=this.get_block_fallback_name(e.self)),""===(p=this.add_variable(_,this.resource_names,p))&&(p="_"+this.get(xe,e.basetype).self+"_"+e.self),this.block_names.add(p),_.add(p),this.declared_block_names[e.self]=p,this.statement(this.layout_for_variable(e),l?"coherent ":"",n?"restrict ":"",s?"writeonly ":"",c?"readonly ":"",o?"buffer ":"uniform ",p),this.begin_scope(),t.member_name_cache.clear();for(var u=0,h=0,d=t.member_types;h<d.length;h++){var f=d[h];this.add_member_name(t,u),this.emit_struct_member(t,f,u),u++}this.preserve_alias_on_reset(e.self),this.add_resource_name(e.self),this.end_scope_decl(this.to_name(e.self)+this.type_to_array_glsl(t)),this.statement("")},r.prototype.emit_buffer_reference_block=function(e,t){var r=this.get(xe,e),i="",a=this.ir;if(t?(i=this.to_name(r.self,!1),(0===Mt(de,a.meta,r.self).decoration.alias.length||this.block_ssbo_names.has(i)||this.resource_names.has(i))&&(i="_"+r.self),0===(i=this.add_variable(this.block_ssbo_names,this.resource_names,i)).length&&(i="_"+r.self),this.block_names.add(i),this.block_ssbo_names.add(i),Mt(de,a.meta,r.self).decoration.alias=i):i=r.basetype!==_e.Struct?this.type_to_glsl(r):this.to_name(r.self,!1),t)this.statement("layout(buffer_reference) buffer ",i,";");else{var o=this.physical_storage_type_to_alignment[e],n=0;if(o&&(n=o.alignment),r.basetype===_e.Struct){var s=["buffer_reference"];n&&s.push("buffer_reference_align = "+n),s.push(this.buffer_to_packing_standard(r,!0));var c=a.get_buffer_block_type_flags(r),l="";c.get(N.DecorationRestrict)&&(l+=" restrict"),c.get(N.DecorationCoherent)&&(l+=" coherent"),c.get(N.DecorationNonReadable)&&(l+=" writeonly"),c.get(N.DecorationNonWritable)&&(l+=" readonly"),this.statement("layout(",s.join(", "),")",l," buffer ",i)}else n?this.statement("layout(buffer_reference, buffer_reference_align = ",n,") buffer ",i):this.statement("layout(buffer_reference) buffer ",i);if(this.begin_scope(),r.basetype===_e.Struct){r.member_name_cache.clear();for(var p=0,_=0,u=r.member_types;_<u.length;_++){var h=u[_];this.add_member_name(r,p),this.emit_struct_member(r,h,p),p++}}else{var d=this.get_pointee_type(r);this.statement(this.type_to_glsl(d)," value",this.type_to_array_glsl(d),";")}this.end_scope_decl(),this.statement("")}},r.prototype.emit_declared_builtin_block=function(e,t){var r=this,i=new le,a=new le,o=!1,n=!1,s=0,c=0,l=!1,p=!1,_=!1,u=0,h=0,d=0,f=[],m=this.ir,b=this.options;if(m.for_each_typed_id(ge,(function(t,g){var b=r.get(xe,g.basetype),y=r.has_decoration(b.self,N.DecorationBlock),S=new le;if(g.storage===e&&y&&r.is_builtin_variable(g)){for(var I=0,O=0,x=Mt(de,m.meta,b.self).members;O<x.length;O++){if((L=x[O]).builtin&&(S.set(L.builtin_type),L.builtin_type===P.BuiltInCullDistance?s=r.to_array_size_literal(r.get(xe,b.member_types[I])):L.builtin_type===P.BuiltInClipDistance&&(c=r.to_array_size_literal(r.get(xe,b.member_types[I]))),ur(L.builtin_type)&&L.decoration_flags.get(N.DecorationOffset)&&(_=!0,f[L.builtin_type]=L.offset),ur(L.builtin_type)&&L.decoration_flags.get(N.DecorationStream))){var k=L.stream;if(p&&d!==k)throw new Error("IO block member Stream mismatch.");p=!0,d=k}I++}if(e===v.StorageClassOutput&&r.has_decoration(g.self,N.DecorationXfbBuffer)&&r.has_decoration(g.self,N.DecorationXfbStride)){var C=r.get_decoration(g.self,N.DecorationXfbBuffer),E=r.get_decoration(g.self,N.DecorationXfbStride);if(l&&C!==h)throw new Error("IO block member XfbBuffer mismatch.");if(l&&E!==u)throw new Error("IO block member XfbBuffer mismatch.");l=!0,h=C,u=E}if(e===v.StorageClassOutput&&r.has_decoration(g.self,N.DecorationStream)){k=r.get_decoration(g.self,N.DecorationStream);if(p&&d!==k)throw new Error("IO block member Stream mismatch.");p=!0,d=k}}else if(g.storage===e&&!y&&r.is_builtin_variable(g)){var L;if((L=Mt(de,m.meta,g.self).decoration).builtin){if(a.set(L.builtin_type),L.builtin_type===P.BuiltInCullDistance?s=r.to_array_size_literal(b):L.builtin_type===P.BuiltInClipDistance&&(c=r.to_array_size_literal(b)),ur(L.builtin_type)&&L.decoration_flags.get(N.DecorationXfbStride)&&L.decoration_flags.get(N.DecorationXfbBuffer)&&L.decoration_flags.get(N.DecorationOffset)){_=!0,f[L.builtin_type]=L.offset;C=L.xfb_buffer,E=L.xfb_stride;if(l&&C!==h)throw new Error("IO block member XfbBuffer mismatch.");if(l&&E!==u)throw new Error("IO block member XfbBuffer mismatch.");l=!0,h=C,u=E}if(ur(L.builtin_type)&&L.decoration_flags.get(N.DecorationStream)){k=r.get_decoration(g.self,N.DecorationStream);if(p&&d!==k)throw new Error("IO block member Stream mismatch.");p=!0,d=k}}}if(!S.empty()){if(o)throw new Error("Cannot use more than one builtin I/O block.");i=S,o=!0,n=b.array.length>0}})),(a=new le(a.get_lower())).set(P.BuiltInPosition),a.set(P.BuiltInPointSize),a.set(P.BuiltInClipDistance),a.set(P.BuiltInCullDistance),o||(i=a),!i.empty()){if(e===v.StorageClassOutput){var y=[];if(l&&_){if(b.es){if(b.es)throw new Error("Need GL_ARB_enhanced_layouts for xfb_stride or xfb_buffer.")}else{if(b.version<440&&b.version>=140)this.require_extension_internal("GL_ARB_enhanced_layouts");else if(b.version<140)throw new Error("Component decoration is not supported in targets below GLSL 1.40.");!b.es&&b.version<440&&this.require_extension_internal("GL_ARB_enhanced_layouts")}y.push("xfb_buffer = ".concat(h,", xfb_stride = ").concat(u))}if(p){if(this.get_execution_model()!==g.ExecutionModelGeometry)throw new Error("Geometry streams can only be used in geometry shaders.");if(b.es)throw new Error("Multiple geometry streams not supported in ESSL.");b.version<400&&this.require_extension_internal("GL_ARB_transform_feedback3"),y.push("stream = "+d)}y.length>0?this.statement("layout(",y.join(", "),") out gl_PerVertex"):this.statement("out gl_PerVertex")}else this.get_entry_point().geometry_passthrough?this.statement("layout(passthrough) in gl_PerVertex"):this.statement("in gl_PerVertex");var S;if(this.begin_scope(),i.get(P.BuiltInPosition))(S=f[P.BuiltInPosition])?this.statement("layout(xfb_offset = ",S,") vec4 gl_Position;"):this.statement("vec4 gl_Position;");if(i.get(P.BuiltInPointSize))(S=f.find[P.BuiltInPointSize])?this.statement("layout(xfb_offset = ",S,") float gl_PointSize;"):this.statement("float gl_PointSize;");if(i.get(P.BuiltInClipDistance))(S=f[P.BuiltInClipDistance])?this.statement("layout(xfb_offset = ",S,") float gl_ClipDistance[",c,"];"):this.statement("float gl_ClipDistance[",c,"];");if(i.get(P.BuiltInCullDistance))(S=f[P.BuiltInCullDistance])?this.statement("layout(xfb_offset = ",S,") float gl_CullDistance[",s,"];"):this.statement("float gl_CullDistance[",s,"];");n||this.end_scope_decl(),this.statement("")}},r.prototype.should_force_emit_builtin_block=function(e){var t=this;if(e!==v.StorageClassOutput)return!1;var r=!1;return this.ir.for_each_typed_id(ge,(function(i,a){if(!r){var o=t.get(xe,a.basetype),n=t.has_decoration(o.self,N.DecorationBlock);if(a.storage===e&&n&&t.is_builtin_variable(a))for(var s=o.member_types.length,c=0;c<s;c++)t.has_member_decoration(o.self,c,N.DecorationBuiltIn)&&ur(t.get_member_decoration(o.self,c,N.DecorationBuiltIn))&&t.has_member_decoration(o.self,c,N.DecorationOffset)&&(r=!0);else a.storage===e&&!n&&t.is_builtin_variable(a)&&ur(t.get_decoration(o.self,N.DecorationBuiltIn))&&t.has_decoration(a.self,N.DecorationOffset)&&(r=!0)}})),r},r.prototype.emit_push_constant_block_glsl=function(e){var t=this.ir,r=this.get(xe,e.basetype),i=Mt(de,t.meta,e.self).decoration.decoration_flags;i.clear(N.DecorationBinding),i.clear(N.DecorationDescriptorSet);var a=Mt(de,t.meta,r.self).decoration.decoration_flags,o=a.get(N.DecorationBlock);a.clear(N.DecorationBlock),this.emit_struct(r),o&&a.set(N.DecorationBlock),this.emit_uniform(e),this.statement("")},r.prototype.emit_interface_block=function(e){var t=this.get(xe,e.basetype),r=this.ir,i=this.options;e.storage===v.StorageClassInput&&t.basetype===_e.Double&&!i.es&&i.version<410&&this.require_extension_internal("GL_ARB_vertex_attrib_64bit");var a=Mt(de,r.meta,t.self).decoration.decoration_flags.get(N.DecorationBlock),o=this.to_storage_qualifiers_glsl(e);if(a)if(i.force_flattened_io_blocks||i.es&&i.version<310||!i.es&&i.version<150)this.emit_flattened_io_block(e,o);else{i.es&&i.version<320&&(this.has_extension("GL_EXT_geometry_shader")||this.has_extension("GL_EXT_tessellation_shader")||this.require_extension_internal("GL_EXT_shader_io_blocks")),this.fixup_io_block_patch_qualifiers(e);var n=this.to_name(t.self,!1),s=t.storage===v.StorageClassInput?this.block_input_names:this.block_output_names;0===n.length||s.has(n)?n=this.get_fallback_name(t.self):s.add(n),0===n.length&&(n="_"+this.get(xe,e.basetype).self+"_"+e.self),this.resource_names.add(n);var c=this.has_decoration(e.self,N.DecorationPatch);this.statement(this.layout_for_variable(e),c?"patch ":"",o,n),this.begin_scope(),t.member_name_cache.clear();for(var l=0,p=0,_=t.member_types;p<_.length;p++){var u=_[p];this.add_member_name(t,l),this.emit_struct_member(t,u,l),l++}this.add_resource_name(e.self),this.end_scope_decl(this.to_name(e.self)+this.type_to_array_glsl(t)),this.statement("")}else t.basetype===_e.Struct&&(i.force_flattened_io_blocks||i.es&&i.version<310||!i.es&&i.version<150)?this.emit_flattened_io_block(e,o):(this.add_resource_name(e.self),this.statement(this.layout_for_variable(e),this.to_qualifiers_glsl(e.self),this.variable_decl(t,this.to_name(e.self),e.self),";"))},r.prototype.constant_value_macro_name=function(e){return"SPIRV_CROSS_CONSTANT_ID_"+e},r.prototype.get_constant_mapping_to_workgroup_component=function(e){var t=this.get_entry_point(),r=-1;return 0===t.workgroup_size.constant&&t.flags.get(S.ExecutionModeLocalSizeId)&&(e.self===t.workgroup_size.id_x?r=0:e.self===t.workgroup_size.id_y?r=1:e.self===t.workgroup_size.id_z&&(r=2)),r},r.prototype.emit_constant=function(e){var t=this.get(xe,e.constant_type),r=this.to_name(e.self);if(this.has_decoration(e.self,N.DecorationSpecId)){var i=e.specialization_constant_macro_name;this.statement("#ifndef ",i),this.statement("#define ",i," ",this.constant_expression(e)),this.statement("#endif"),this.statement("const ",this.variable_decl(t,r)," = ",i,";")}else this.statement("const ",this.variable_decl(t,r)," = ",this.constant_expression(e),";")},r.prototype.emit_specialization_constant_op=function(e){var t=this.get(xe,e.basetype),r=this.to_name(e.self);this.statement("const ",this.variable_decl(t,r)," = ",this.constant_op_expression(e),";")},r.prototype.emit_continue_block=function(e,t,r){var i=this.get(ze,e);this.current_continue_block=i;var a=[],o=this.redirect_statement;this.redirect_statement=a;for(var n=this.ir;0==(Mt(de,n.block_meta,i.self)&Ue.BLOCK_META_LOOP_HEADER_BIT);)if(this.emit_block_instructions(i),i.next_block)this.flush_phi(e,i.next_block),i=this.get(ze,i.next_block);else if(i.true_block&&t)this.flush_phi(e,i.true_block),i=this.get(ze,i.true_block);else{if(!i.false_block||!r)throw new Error("Invalid continue block detected!");this.flush_phi(e,i.false_block),i=this.get(ze,i.false_block)}this.redirect_statement=o;for(var s=0;s<a.length;++s){var c=a[s];""!==c&&";"===c.charAt(c.length-1)&&(a[s]=c.substring(0,c.length-1))}return this.current_continue_block=null,a.join(", ")},r.prototype.attempt_emit_loop_header=function(e,t){var r=this.continue_block_type(this.get(ze,e.continue_block));if(t===ve.MergeToSelectForLoop||t===ve.MergeToSelectContinueForLoop){var i=this.statement_count;this.emit_block_instructions(e);var a=!this.forced_temporaries.has(e.condition);if(i===this.statement_count&&a){switch(r){case Ie.ForLoop:this.flush_undeclared_variables(e);var o=this.emit_for_loop_initializers(e),n=this.to_expression(e.condition);if(this.execution_is_noop(this.get(ze,e.true_block),this.get(ze,e.merge_block))&&(n="!"+this.enclose_expression(n)),this.emit_block_hints(e),t!==ve.MergeToSelectContinueForLoop){var s=this.emit_continue_block(e.continue_block,!1,!1);this.statement("for (",o,"; ",n,"; ",s,")")}else this.statement("for (",o,"; ",n,"; )");break;case Ie.WhileLoop:this.flush_undeclared_variables(e),this.emit_while_loop_initializers(e),this.emit_block_hints(e);n=this.to_expression(e.condition);this.execution_is_noop(this.get(ze,e.true_block),this.get(ze,e.merge_block))&&(n="!"+this.enclose_expression(n)),this.statement("while (",n,")");break;default:return e.disable_block_optimization=!0,this.force_recompile(),this.begin_scope(),!1}return this.begin_scope(),!0}return e.disable_block_optimization=!0,this.force_recompile(),this.begin_scope(),!1}if(t===ve.MergeToDirectForLoop){var c=this.get(ze,e.next_block);this.flush_undeclared_variables(c);i=this.statement_count;this.emit_block_instructions(c);a=!this.forced_temporaries.has(c.condition);if(i===this.statement_count&&a){var l=c.true_block;switch(r){case Ie.ForLoop:o=this.emit_for_loop_initializers(e),n=this.to_expression(c.condition);this.execution_is_noop(this.get(ze,c.true_block),this.get(ze,e.merge_block))&&(n="!"+this.enclose_expression(n),l=c.false_block);s=this.emit_continue_block(e.continue_block,!1,!1);this.emit_block_hints(e),this.statement("for (",o,"; ",n,"; ",s,")");break;case Ie.WhileLoop:this.emit_while_loop_initializers(e),this.emit_block_hints(e);n=this.to_expression(c.condition);this.execution_is_noop(this.get(ze,c.true_block),this.get(ze,e.merge_block))&&(n="!"+this.enclose_expression(n),l=c.false_block),this.statement("while (",n,")");break;default:return e.disable_block_optimization=!0,this.force_recompile(),this.begin_scope(),!1}return this.begin_scope(),this.branch(c.self,l),!0}return e.disable_block_optimization=!0,this.force_recompile(),this.begin_scope(),!1}return!1},r.prototype.branch_to_continue=function(e,t){var r=this.get(ze,t);if(e!==t)if(console.assert(this.is_continue(t)),r.complex_continue){var i=this.expression_usage_counts.concat();this.emit_block_chain(r),this.expression_usage_counts=i}else{var a=this.get(ze,e),o=!1,n=0;if(a.merge_block?n=e:a.loop_dominator!==ze.NoDominator&&(n=a.loop_dominator),0!==n)o=this.get_cfg_for_current_function().node_terminates_control_flow_in_sub_graph(n,e);o||this.statement("continue;")}},r.prototype.branch=function(e,t,r,i){void 0===r?this._branch(e,t):this._branchTrueFalse(e,t,r,i)},r.prototype._branch=function(e,t){this.flush_phi(e,t),this.flush_control_dependent_expressions(e);var r=this.is_continue(t),i=this.ir;if(0!=(Mt(de,i.block_meta,t)&Ue.BLOCK_META_LOOP_HEADER_BIT)&&this.get(ze,e).loop_dominator===t)this.statement("continue;");else if(e!==t&&this.is_break(t))this.current_emitting_switch&&this.is_loop_break(t)&&this.current_emitting_switch.loop_dominator!==ze.NoDominator&&this.get(ze,this.current_emitting_switch.loop_dominator).merge_block===t&&(this.current_emitting_switch.need_ladder_break||(this.force_recompile(),this.current_emitting_switch.need_ladder_break=!0),this.statement("_",this.current_emitting_switch.self,"_ladder_break = true;")),this.statement("break;");else if(r||e===t){var a=0!=(Mt(de,i.block_meta,t)&(Ue.BLOCK_META_SELECTION_MERGE_BIT|Ue.BLOCK_META_MULTISELECT_MERGE_BIT|Ue.BLOCK_META_LOOP_MERGE_BIT));r&&a||this.branch_to_continue(e,t)}else this.is_conditional(t)||this.emit_block_chain(this.get(ze,t))},r.prototype._branchTrueFalse=function(e,t,r,i){var a=this.get(ze,e),o=a.merge===ye.MergeSelection?a.next_block:0,n=r!==o||this.flush_phi_required(e,r),s=i!==o||this.flush_phi_required(e,i);(n||s)&&(a.hint!==Se.HintFlatten&&a.hint!==Se.HintDontFlatten||this.emit_block_hints(a),n?(this.statement("if (",this.to_expression(t),")"),this.begin_scope(),this.branch(e,r),this.end_scope(),s&&(this.statement("else"),this.begin_scope(),this.branch(e,i),this.end_scope())):s&&(this.statement("if (!",this.to_enclosed_expression(t),")"),this.begin_scope(),this.branch(e,i),this.end_scope()))},r.prototype.flush_phi=function(e,t){var r=this.get(ze,t);if(r.ignore_phi_from_block!==e)for(var i=new Set,a=0;a<r.phi_variables.length;++a){var o=r.phi_variables[a];if(o.parent===e){var n=this.get(ge,o.function_variable);if(n.loop_variable&&!n.loop_variable_enable)n.static_expression=o.local_variable;else{this.flush_variable_declaration(o.function_variable);for(var s=!1,c=a+1;c<r.phi_variables.length;++c){var l=r.phi_variables[c];if(l.local_variable===o.function_variable&&l.parent===e){s=!0;break}}s&&(n.allocate_temporary_copy||(n.allocate_temporary_copy=!0,this.force_recompile()),this.statement("_",o.function_variable,"_copy"," = ",this.to_name(o.function_variable),";"),i.add(o.function_variable));var p=this.to_expression(o.function_variable),_=void 0;_=i.has(o.local_variable)?"_"+o.local_variable+"_copy":this.to_pointer_expression(o.local_variable),this.optimize_read_modify_write(this.get(xe,n.basetype),p,_)||this.statement(p," = ",_,";")}this.register_write(o.function_variable)}}},r.prototype.flush_variable_declaration=function(e){var t=this.maybe_get(ge,e),r=this.options;if(t&&t.deferred_declaration){var i="";!r.force_zero_initialized_variables||t.storage!==v.StorageClassFunction&&t.storage!==v.StorageClassGeneric&&t.storage!==v.StorageClassPrivate||t.initializer||!this.type_can_zero_initialize(this.get_variable_data_type(t))||(i=" = "+this.to_zero_initialized_expression(this.get_variable_data_type_id(t))),this.statement(this.variable_decl_function_local(t),i,";"),t.deferred_declaration=!1}t&&this.emit_variable_temporary_copies(t)},r.prototype.flush_undeclared_variables=function(e){for(var t=0,r=e.dominated_variables;t<r.length;t++){var i=r[t];this.flush_variable_declaration(i)}},r.prototype.emit_variable_temporary_copies=function(e){if(e.allocate_temporary_copy&&!this.flushed_phi_variables.has(e.self)){var t=this.get(xe,e.basetype),r=this.get_decoration_bitset(e.self);this.statement(this.flags_to_qualifiers_glsl(t,r),this.variable_decl(t,"_"+e.self+"_copy"),";"),this.flushed_phi_variables.add(e.self)}},r.prototype.should_dereference=function(e){if(!this.expression_type(e).pointer)return!1;if(!this.expression_is_lvalue(e))return!1;var t=this.maybe_get(ge,e);if(t)return t.phi_variable;var r=this.maybe_get(He,e);return!r||!r.access_chain},r.prototype.should_forward=function(e){var t=this.maybe_get(ge,e);return!(!t||!t.forwardable)||!this.options.force_temporary&&!!this.is_immutable(e)},r.prototype.to_trivial_mix_op=function(e,t,r,i){var a=this.backend,o=this.maybe_get(Me,t),n=this.maybe_get(Me,r),s=this.expression_type(i);if(o&&n&&!o.specialization&&!n.specialization){var c=this.get(xe,o.constant_type);if(s.basetype===_e.Boolean&&c.basetype!==_e.Struct&&!this.is_array(c)&&(a.use_constructor_splatting||c.vecsize===s.vecsize)&&!(c.columns>1)){for(var l=!0,p=0;l&&p<c.vecsize;p++)switch(e.basetype){case _e.Short:case _e.UShort:l=0===o.scalar_u16(0,p)&&1===n.scalar_u16(0,p);break;case _e.Int:case _e.UInt:l=0===o.scalar(0,p)&&1===n.scalar(0,p);break;case _e.Half:l=0===o.scalar_f16(0,p)&&1===n.scalar_f16(0,p);break;case _e.Float:l=0===o.scalar_f32(0,p)&&1===n.scalar_f32(0,p);break;case _e.Double:l=0===o.scalar_f64(0,p)&&1===n.scalar_f64(0,p);break;case _e.Int64:case _e.UInt64:l=o.scalar_u64(0,p)===BigInt(0)&&n.scalar_u64(0,p)===BigInt(1);break;default:l=!1}return l?this.type_to_glsl_constructor(e):void 0}}},r.prototype.emit_binary_func_op=function(e,t,r,i,a){var o=this.should_forward(r)&&this.should_forward(i);this.emit_op(e,t,a+"("+this.to_unpacked_expression(r)+", "+this.to_unpacked_expression(i)+")",o),this.inherit_expression_dependencies(t,r),this.inherit_expression_dependencies(t,i)},r.prototype.emit_unary_func_op=function(e,t,r,i){var a=this.should_forward(r);this.emit_op(e,t,i+"("+this.to_unpacked_expression(r)+")",a),this.inherit_expression_dependencies(t,r)},r.prototype.emit_binary_op=function(e,t,r,i,a){var o=this.backend.support_precise_qualifier&&this.has_decoration(t,N.DecorationNoContraction)&&Vt(this.get(xe,e)),n=this.should_forward(r)&&this.should_forward(i)&&!o;this.emit_op(e,t,this.to_enclosed_unpacked_expression(r)+" "+a+" "+this.to_enclosed_unpacked_expression(i),n),this.inherit_expression_dependencies(t,r),this.inherit_expression_dependencies(t,i)},r.prototype.emit_unary_func_op_cast=function(e,t,r,i,a,o){var n=this.get(xe,e),s=this.expression_type(r),c=d(xe,n);c.basetype=a,c.width=s.width;var l="";l=s.basetype!==a?s.basetype===_e.Boolean?this.type_to_glsl(c)+"("+this.to_unpacked_expression(r)+")":this.bitcast_glsl(c,r):this.to_unpacked_expression(r);var p="";n.basetype!==o?(c.basetype=o,c.width=n.width,p=n.basetype===_e.Boolean?this.type_to_glsl(n):this.bitcast_glsl_op(n,c),p+="("+i+"("+l+"))"):p+=i+"("+l+")",this.emit_op(e,t,p,this.should_forward(r)),this.inherit_expression_dependencies(t,r)},r.prototype.emit_binary_func_op_cast=function(e,t,r,i,a,o,n){var s={cast_op0:"",cast_op1:"",input_type:_e.Unknown},c=this.binary_op_bitcast_helper(s,r,i,n),l=this.get(xe,e),p="";l.basetype!==o&&l.basetype!==_e.Boolean?(c.basetype=o,p=this.bitcast_glsl_op(l,c),p+="("+a+"("+s.cast_op0+", "+s.cast_op1+"))"):p+=a+"("+s.cast_op0+", "+s.cast_op1+")",this.emit_op(e,t,p,this.should_forward(r)&&this.should_forward(i)),this.inherit_expression_dependencies(t,r),this.inherit_expression_dependencies(t,i)},r.prototype.emit_binary_op_cast=function(e,t,r,i,a,o,n){var s={cast_op0:"",cast_op1:"",input_type:_e.Unknown},c=this.binary_op_bitcast_helper(s,r,i,n),l=this.get(xe,e),p="";l.basetype!==s.input_type&&l.basetype!==_e.Boolean?(c.basetype=o,p=this.bitcast_glsl_op(l,c),p+="("+s.cast_op0+" "+a+" "+s.cast_op1+")"):p+=s.cast_op0+" "+a+" "+s.cast_op1,this.emit_op(e,t,p,this.should_forward(r)&&this.should_forward(i)),this.inherit_expression_dependencies(t,r),this.inherit_expression_dependencies(t,i)},r.prototype.binary_op_bitcast_helper=function(e,t,r,i){var a=this.expression_type(t),o=this.expression_type(r),n=a.basetype!==o.basetype||!i&&a.basetype!==e.input_type,s=new xe;return s.basetype=e.input_type,s.vecsize=a.vecsize,s.columns=a.columns,s.width=a.width,n?(e.cast_op0=this.bitcast_glsl(s,t),e.cast_op1=this.bitcast_glsl(s,r)):(e.cast_op0=this.to_enclosed_unpacked_expression(t),e.cast_op1=this.to_enclosed_unpacked_expression(r),e.input_type=a.basetype),s},r.prototype.emit_complex_bitcast=function(e,t,r){var i,a=this.get(xe,e),o=this.expression_type(r);if(a.basetype===_e.Half&&o.basetype===_e.Float&&1===o.vecsize)i="unpackFloat2x16(floatBitsToUint("+this.to_unpacked_expression(r)+"))";else{if(a.basetype!==_e.Float||o.basetype!==_e.Half||2!==o.vecsize)return!1;i="uintBitsToFloat(packFloat2x16("+this.to_unpacked_expression(r)+"))"}return this.emit_op(e,t,i,this.should_forward(r)),!0},r.prototype.to_ternary_expression=function(e,t,r,i){var a,o=this;if(1===this.expression_type(t).vecsize)a=this.to_enclosed_expression(t)+" ? "+this.to_enclosed_pointer_expression(r)+" : "+this.to_enclosed_pointer_expression(i);else{var n=function(e,t){return o.to_extract_component_expression(e,t)};a=this.type_to_glsl_constructor(e),a+="(";for(var s=0;s<e.vecsize;s++)a+=n(t,s),a+=" ? ",a+=n(r,s),a+=" : ",a+=n(i,s),s+1<e.vecsize&&(a+=", ");a+=")"}return a},r.prototype.emit_unary_op=function(e,t,r,i){var a=this.should_forward(r);this.emit_op(e,t,i+this.to_enclosed_unpacked_expression(r),a),this.inherit_expression_dependencies(t,r)},r.prototype.expression_is_forwarded=function(e){return this.forwarded_temporaries.has(e)},r.prototype.expression_suppresses_usage_tracking=function(e){return this.suppressed_usage_tracking.has(e)},r.prototype.expression_read_implies_multiple_reads=function(e){var t=this.maybe_get(He,e);return!!t&&this.current_loop_level>t.emitted_loop_level},r.prototype.emit_op=function(e,t,r,i,a){return void 0===a&&(a=!1),i&&!this.forced_temporaries.has(t)?(this.forwarded_temporaries.add(t),a&&this.suppressed_usage_tracking.add(t),this.set(He,t,r,e,!0)):(this.statement(this.declare_temporary(e,t),r,";"),this.set(He,t,this.to_name(t),e,!0))},r.prototype.access_chain_internal_append_index=function(e,t,r,i,a,o){var n=0!=(i&Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT),s=0==(i&Zt.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT);return e+="[",e+=n?Qe(o):this.to_unpacked_expression(o,s),e+="]"},r.prototype.access_chain_internal=function(e,r,i,a,o){var n=this,s="",c=this,l=c.backend,p=c.options,_=c.ir,u=0!=(a&Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT),h=0!=(a&Zt.ACCESS_CHAIN_LITERAL_MSB_FORCE_ID),d=0!=(a&Zt.ACCESS_CHAIN_CHAIN_ONLY_BIT),f=0!=(a&Zt.ACCESS_CHAIN_PTR_CHAIN_BIT),m=0==(a&Zt.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT),g=0!=(a&Zt.ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT);if(!d){var b=this.maybe_get(He,e),y=b&&b.need_transpose;b&&(b.need_transpose=!1),s=this.to_enclosed_expression(e,m),b&&(b.need_transpose=y)}var S=this.expression_type_id(e);if(!l.native_pointers){if(f)throw new Error("Backend does not support native pointers and does not support OpPtrAccessChain.");if(this.should_dereference(e)){var I=this.get(xe,S);s=this.dereference_expression(I,s)}}for(var O=this.get_pointee_type(S),x=s.indexOf("[")>=0,k=this.is_non_native_row_major_matrix(e),C=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked),E=this.get_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),L=this.has_decoration(e,N.DecorationInvariant),M=!1,T=!1,R=function(t,r){var i=a;r||(i&=~Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT),s=n.access_chain_internal_append_index(s,e,O,i,x,t)},w=0;w<i;w++){var D=r[w],A=u;if(A&&h&&D>>31!=0&&(A=!1,D&=2147483647),f&&0===w){if(p.flatten_multidimensional_arrays&&(M=T=O.array.length>=1)&&(s+="["),p.flatten_multidimensional_arrays&&T){s+=A?Qe(D):this.to_enclosed_expression(D,m);for(var B=O.array.length;B;B--)s+=" * ",s+=this.enclose_expression(this.to_array_size(O,B-1));0===O.array.length?M=!1:s+=" + ",M||(s+="]")}else R(D,A);O.basetype===_e.ControlPointArray&&(S=O.parent_type,O=this.get(xe,S)),x=!0}else if(O.array.length>0){p.flatten_multidimensional_arrays&&!M&&(M=T=O.array.length>1)&&(s+="["),console.assert(O.parent_type);var G=this.maybe_get(ge,e);if(l.force_gl_in_out_block&&0===w&&G&&this.is_builtin_variable(G)&&!this.has_decoration(O.self,N.DecorationBlock))switch(z=Mt(de,_.meta,e).decoration.builtin_type){case P.BuiltInPosition:case P.BuiltInPointSize:G.storage===v.StorageClassInput?s="gl_in["+this.to_expression(D,m):G.storage===v.StorageClassOutput?s="gl_out["+this.to_expression(D,m):R(D,A);break;default:R(D,A)}else if(p.flatten_multidimensional_arrays&&T){var F=this.get(xe,O.parent_type);s+=A?Qe(D):this.to_enclosed_expression(D,m);for(B=F.array.length;B;B--)s+=" * ",s+=this.enclose_expression(this.to_array_size(F,B-1));0===F.array.length?M=!1:s+=" + ",M||(s+="]")}else this.builtin_translates_to_nonarray(this.get_decoration(e,N.DecorationBuiltIn))||R(D,A);S=O.parent_type,O=this.get(xe,S),x=!0}else if(O.basetype===_e.Struct){if(A||(D=this.evaluate_constant_u32(D)),D<O.member_type_index_redirection.length&&(D=O.member_type_index_redirection[D]),D>=O.member_types.length)throw new Error("Member index is out of bounds!");var z;if(void 0!==(z=this.is_member_builtin(O,D))&&this.access_chain_needs_stage_io_builtin_translation(e))x?(s+=".",s+=this.builtin_to_glsl(z,O.storage)):s=this.builtin_to_glsl(z,O.storage);else{var U=this.get_member_qualified_name(S,D);""!==U?s=U:s+=g?"_"+this.to_member_name(O,D):this.to_member_reference(e,O,D,f)}this.has_member_decoration(O.self,D,N.DecorationInvariant)&&(L=!0),C=this.member_is_packed_physical_type(O,D),E=this.member_is_remapped_physical_type(O,D)?this.get_extended_member_decoration(O.self,D,ce.SPIRVCrossDecorationPhysicalTypeID):0,k=this.member_is_non_native_row_major_matrix(O,D),O=this.get(xe,O.member_types[D])}else if(O.columns>1)s+="[",s+=A?Qe(D):this.to_unpacked_expression(D,m),s+="]",S=O.parent_type,O=this.get(xe,S);else if(O.vecsize>1){var V="";if(k){var H=s.lastIndexOf("[");H>=0&&(V=s.substring(H),s=s.substring(0,H))}var K=v.StorageClassGeneric,q=!1;if(0==(a&Zt.ACCESS_CHAIN_FORCE_COMPOSITE_BIT)?this.expression_type(e).pointer&&(K=this.get_expression_effective_storage_class(e)):q=!0,k||q||(s=this.prepare_access_chain_for_scalar_access(s,this.get(xe,O.parent_type),K,C)),A){var X=D>=O.vecsize;C||k?s+="["+(X?0:D)+"]":(s+=".",s+=this.index_to_swizzle(X?0:D))}else if(_.ids[D].get_type()!==t.TypeConstant||C||k)s+="["+this.to_unpacked_expression(D,m)+"]";else{var W=this.get(Me,D);X=W.scalar()>=O.vecsize;W.specialization?s+="["+(X?"0":this.to_expression(D))+"]":s+="."+this.index_to_swizzle(X?0:W.scalar())}k&&!q&&(s=this.prepare_access_chain_for_scalar_access(s,this.get(xe,O.parent_type),K,C)),s+=V,k=!1,C=!1,E=0,S=O.parent_type,O=this.get(xe,S)}else if(!l.allow_truncated_access_chain)throw new Error("Cannot subdivide a scalar value!")}if(M)throw new Error("Flattening of multidimensional arrays were enabled, but the access chain was terminated in the middle of a multidimensional array. This is not supported.");return o&&(o.need_transpose=k,o.storage_is_packed=C,o.storage_is_invariant=L,o.storage_physical_type=E),s},r.prototype.get_expression_effective_storage_class=function(e){var r=this.maybe_get_backing_variable(e),i=this.ir.ids[e].get_type()===t.TypeExpression&&!this.get(He,e).access_chain&&(this.forced_temporaries.has(e)||!this.forwarded_temporaries.has(e));return r&&!i?this.variable_decl_is_remapped_storage(r,v.StorageClassWorkgroup)?v.StorageClassWorkgroup:this.variable_decl_is_remapped_storage(r,v.StorageClassStorageBuffer)||r.storage===v.StorageClassUniform&&this.has_decoration(this.get(xe,r.basetype).self,N.DecorationBufferBlock)?v.StorageClassStorageBuffer:r.storage:this.expression_type(e).storage},r.prototype.access_chain_needs_stage_io_builtin_translation=function(e){return!0},r.prototype.prepare_access_chain_for_scalar_access=function(e,t,r,i){return e},r.prototype.access_chain=function(e,t,r,i,a,o){if(void 0===a&&(a=null),void 0===o&&(o=!1),this.flattened_buffer_blocks.has(e)){var n={matrix_stride:0,array_stride:0,need_transpose:!1};return this.flattened_access_chain_offset(this.expression_type(e),t,r,0,16,n,o),a&&(a.need_transpose=i.columns>1&&n.need_transpose,a.storage_is_packed=!1),this.flattened_access_chain(e,t,r,i,0,n.matrix_stride,n.array_stride,n.need_transpose)}if(this.flattened_structs.hasOwnProperty(e)&&r>0){var s=Zt.ACCESS_CHAIN_CHAIN_ONLY_BIT|Zt.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT;o&&(s|=Zt.ACCESS_CHAIN_PTR_CHAIN_BIT),this.flattened_structs[e]&&(s|=Zt.ACCESS_CHAIN_FLATTEN_ALL_MEMBERS_BIT,a&&(a.flattened_struct=i.basetype===_e.Struct));var c=this.access_chain_internal(e,t,r,s,null).substring(1);a&&(a.need_transpose=!1,a.storage_is_packed=!1);var l=this.to_flattened_access_chain_expression(e)+"_"+c;return Je.sanitize_underscores(l)}s=Zt.ACCESS_CHAIN_SKIP_REGISTER_EXPRESSION_READ_BIT;return o&&(s|=Zt.ACCESS_CHAIN_PTR_CHAIN_BIT),this.access_chain_internal(e,t,r,s,a)},r.prototype.flattened_access_chain=function(e,t,r,i,a,o,n,s){if(i.array.length>0)throw new Error("Access chains that result in an array can not be flattened");return i.basetype===_e.Struct?this.flattened_access_chain_struct(e,t,r,i,a):i.columns>1?this.flattened_access_chain_matrix(e,t,r,i,a,o,s):this.flattened_access_chain_vector(e,t,r,i,a,o,s)},r.prototype.flattened_access_chain_struct=function(e,t,r,i,a){for(var o=this.type_to_glsl_constructor(i)+"(",n=0;n<i.member_types.length;++n){0!==n&&(o+=", ");var s=this.get(xe,i.member_types[n]),c=this.type_struct_member_offset(i,n),l=!1,p=0;s.columns>1&&(l=this.combined_decoration_for_member(i,n).get(N.DecorationRowMajor),p=this.type_struct_member_matrix_stride(i,n));var _=this.flattened_access_chain(e,t,r,s,a+c,p,0,l);o+=l?this.convert_row_major_matrix(_,s,0,!1):_}return o+=")"},r.prototype.flattened_access_chain_matrix=function(e,t,r,i,a,o,n){console.assert(o);var s=d(xe,i);if(n){var c=s.vecsize;s.vecsize=s.columns,s.columns=c}for(var l=this.type_to_glsl_constructor(s)+"(",p=0;p<s.columns;p++)0!==p&&(l+=", "),l+=this.flattened_access_chain_vector(e,t,r,s,a+p*o,o,!1);return l+=")"},r.prototype.flattened_access_chain_vector=function(e,t,r,i,a,o,n){var s=this.flattened_access_chain_offset(this.expression_type(e),t,r,a,16),c=this.to_name(this.expression_type(e).self);if(n){var l="";i.vecsize>1&&(l+=this.type_to_glsl_constructor(i),l+="(");for(var p=0;p<i.vecsize;++p){0!==p&&(l+=", ");var _=s.second+p*o;console.assert(_%(i.width/8)==0);var u=_/(i.width/8);l+=c,l+="[",l+=s.first,l+=Qe(u/4),l+="]",l+=this.vector_swizzle(1,u%4)}return i.vecsize>1&&(l+=")"),l}console.assert(s.second%(i.width/8)==0);u=s.second/(i.width/8),l="";return l+=c,l+="[",l+=s.first,l+=Qe(u/4),l+="]",l+=this.vector_swizzle(i.vecsize,u%4)},r.prototype.flattened_access_chain_offset=function(e,t,r,i,a,o,n){void 0===o&&(o=null),void 0===n&&(n=!1);for(var s=this.get_pointee_type(e),c="",l=(null==o?void 0:o.need_transpose)||!1,p=(null==o?void 0:o.matrix_stride)||0,_=(null==o?void 0:o.array_stride)||0,u=0;u<r;u++){var h=t[u];if(n&&0===u){if(!(_=this.get_decoration(e.self,N.DecorationArrayStride)))throw new Error("SPIR-V does not define ArrayStride for buffer block.");if(m=this.maybe_get(Me,h))i+=m.scalar()*_;else{if(_%a)throw new Error("Array stride for dynamic indexing must be divisible by the size of a 4-component vector. Likely culprit here is a float or vec2 array inside a push constant block which is std430. This cannot be flattened. Try using std140 layout instead.");c+=this.to_enclosed_expression(h)+" * "+Qe(_/a)+" + "}}else if(s.array.length>0){if(m=this.maybe_get(Me,h))i+=m.scalar()*_;else{if(_%a)throw new Error("Array stride for dynamic indexing must be divisible by the size of a 4-component vector. Likely culprit here is a float or vec2 array inside a push constant block which is std430. This cannot be flattened. Try using std140 layout instead.");c+=this.to_enclosed_expression(h,!1)+" * "+Qe(_/a)+" + "}var d=s.parent_type;(s=this.get(xe,d)).array.length>0&&(_=this.get_decoration(d,N.DecorationArrayStride))}else if(s.basetype===_e.Struct){if((h=this.evaluate_constant_u32(h))>=s.member_types.length)throw new Error("Member index is out of bounds!");i+=this.type_struct_member_offset(s,h);var f=s;(s=this.get(xe,s.member_types[h])).columns>1?(p=this.type_struct_member_matrix_stride(f,h),l=this.combined_decoration_for_member(f,h).get(N.DecorationRowMajor)):l=!1,s.array.length>0&&(_=this.type_struct_member_array_stride(f,h))}else if(s.columns>1){if(m=this.maybe_get(Me,h))i+=(h=this.evaluate_constant_u32(h))*(l?s.width/8:p);else{if((g=l?s.width/8:p)%a)throw new Error("Matrix stride for dynamic indexing must be divisible by the size of a 4-component vector. Likely culprit here is a row-major matrix being accessed dynamically. This cannot be flattened. Try using std140 layout instead.");c+=this.to_enclosed_expression(h,!1),c+=" * ",c+=Qe(g/a),c+=" + "}s=this.get(xe,s.parent_type)}else{if(!(s.vecsize>1))throw new Error("Cannot subdivide a scalar value!");var m;if(m=this.maybe_get(Me,h))i+=(h=this.evaluate_constant_u32(h))*(l?p:s.width/8);else{var g;if((g=l?p:s.width/8)%a)throw new Error("Stride for dynamic vector indexing must be divisible by the size of a 4-component vector. This cannot be flattened in legacy targets.");c+=this.to_enclosed_expression(h,!1)+" * "+Qe(g/a)+" + "}s=this.get(xe,s.parent_type)}}return o&&(o.need_transpose=l,o.matrix_stride=p,o.array_stride=_),new nt(c,i)},r.prototype.index_to_swizzle=function(e){switch(e){case 0:default:return"x";case 1:return"y";case 2:return"z";case 3:return"w"}},r.prototype.remap_swizzle=function(e,t,r){if(e.vecsize===t)return r;if(1!==t||this.backend.can_swizzle_scalar){for(var i=this.enclose_expression(r)+".",a=0;a<e.vecsize;a++)i+=this.index_to_swizzle(Math.min(a,t-1));return this.backend.swizzle_is_function&&e.vecsize>1&&(i+="()"),i=this.remove_duplicate_swizzle(i)||i}return this.type_to_glsl(e)+"("+r+")"},r.prototype.declare_temporary=function(e,t){var r=this.get(xe,e),i=Mt(de,this.ir.meta,t).decoration.decoration_flags;if(this.current_continue_block&&!this.hoisted_temporaries.has(t)){var a=this.get(ze,this.current_continue_block.loop_dominator);return a.declare_temporary.find((function(r){return r.first===e&&r.second===t}))||(a.declare_temporary.push(new nt(e,t)),this.hoisted_temporaries.add(t),this.force_recompile()),this.to_name(t)+" = "}return this.hoisted_temporaries.has(t)?this.to_name(t)+" = ":(this.add_local_variable_name(t),this.flags_to_qualifiers_glsl(r,i)+this.variable_decl(r,this.to_name(t))+" = ")},r.prototype.emit_uninitialized_temporary=function(e,t){if(this.current_continue_block&&!this.hoisted_temporaries.has(t)){var r=this.get(ze,this.current_continue_block.loop_dominator);r.declare_temporary.find((function(r){return r.first===e&&r.second===t}))||(r.declare_temporary.push(new nt(e,t)),this.hoisted_temporaries.add(t),this.force_recompile())}else if(!this.hoisted_temporaries.has(t)){var i=this.get(xe,e),a=Mt(de,this.ir.meta,t).decoration.decoration_flags;this.add_local_variable_name(t);var o="";this.options.force_zero_initialized_variables&&this.type_can_zero_initialize(i)&&(o=" = "+this.to_zero_initialized_expression(e)),this.statement(this.flags_to_qualifiers_glsl(i,a),this.variable_decl(i,this.to_name(t)),o,";")}},r.prototype.emit_uninitialized_temporary_expression=function(e,t){return this.forced_temporaries.add(t),this.emit_uninitialized_temporary(e,t),this.set(He,t,this.to_name(t),e,!0)},r.prototype.append_global_func_args=function(e,t,r){for(var i=e.arguments,a=i.length,o=t;o<a;o++){var n=i[o];console.assert(n.alias_global_variable);var s=this.get(ge,n.id).basevariable;s&&this.flush_variable_declaration(s),r.push(this.to_func_call_arg(n,n.id))}},r.prototype.to_non_uniform_aware_expression=function(e){var t=this.to_expression(e);return this.has_decoration(e,N.DecorationNonUniform)&&(t=this.convert_non_uniform_expression(t,e)),t},r.prototype.to_expression=function(e,r){void 0===r&&(r=!0),this.invalid_expressions.hasOwnProperty(e)&&this.handle_invalid_expression(e);var i=this.ir;if(i.ids[e].get_type()===t.TypeExpression)for(var a=0,o=this.get(He,e).expression_dependencies;a<o.length;a++){var n=o[a];this.invalid_expressions.hasOwnProperty(n)&&this.handle_invalid_expression(n)}switch(r&&this.track_expression_read(e),i.ids[e].get_type()){case t.TypeExpression:var s=this.get(He,e);if(s.base_expression)return this.to_enclosed_expression(s.base_expression)+s.expression;if(s.need_transpose){var c=this.get_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),l=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked);return this.convert_row_major_matrix(s.expression,this.get(xe,s.expression_type),c,l)}return this.flattened_structs.hasOwnProperty(e)?this.load_flattened_struct(s.expression,this.get(xe,s.expression_type)):this.is_forcing_recompilation()?"_":s.expression;case t.TypeConstant:var p=this.get(Me,e),_=this.get(xe,p.constant_type);if(this.has_decoration(p.self,N.DecorationBuiltIn))return this.builtin_to_glsl(this.get_decoration(p.self,N.DecorationBuiltIn),v.StorageClassGeneric);if(p.specialization){if(this.backend.workgroup_size_is_hidden){var u=this.get_constant_mapping_to_workgroup_component(p);if(u>=0){var h=this.builtin_to_glsl(P.BuiltInWorkgroupSize,v.StorageClassInput)+this.vector_swizzle(1,u);return _.basetype!==_e.UInt&&(h=this.bitcast_expression(_,_e.UInt,h)),h}}return this.to_name(e)}return p.is_used_as_lut?this.to_name(e):_.basetype!==_e.Struct||this.backend.can_declare_struct_inline?_.array.length>0&&!this.backend.can_declare_arrays_inline?this.to_name(e):this.constant_expression(p):this.to_name(e);case t.TypeConstantOp:return this.to_name(e);case t.TypeVariable:var d=this.get(ge,e);if(d.statically_assigned||d.loop_variable&&!d.loop_variable_enable)return this.to_expression(d.static_expression);if(d.deferred_declaration)return d.deferred_declaration=!1,this.variable_decl(d);if(this.flattened_structs.hasOwnProperty(e))return this.load_flattened_struct(this.to_name(e),this.get(xe,d.basetype));var f=Mt(de,i.meta,d.self).decoration;return f.builtin?this.builtin_to_glsl(f.builtin_type,d.storage):this.to_name(e);case t.TypeCombinedImageSampler:throw new Error("Combined image samplers have no default expression representation.");case t.TypeAccessChain:throw new Error("Access chains have no default expression representation.");default:return this.to_name(e)}},r.prototype.to_composite_constructor_expression=function(e,t){var r=this.expression_type(e),i=this.backend;return r.array.length>0&&(!i.array_is_value_type||t&&!i.buffer_offset_array_is_value_type)?this.to_rerolled_array_expression(this.to_enclosed_expression(e),r):this.to_unpacked_expression(e)},r.prototype.to_rerolled_array_expression=function(e,t){for(var r=this.to_array_size_literal(t),i=this.get(xe,t.parent_type),a="{ ",o=0;o<r;o++){var n=e+"["+Qe(o)+"]";0===i.array.length?a+=n:a+=this.to_rerolled_array_expression(n,i),o+1<r&&(a+=", ")}return a+=" }"},r.prototype.to_enclosed_expression=function(e,t){return void 0===t&&(t=!0),this.enclose_expression(this.to_expression(e,t))},r.prototype.to_unpacked_expression=function(e,t){void 0===t&&(t=!0);var r=this.maybe_get(He,e),i=r&&r.need_transpose,a=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),o=this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked);return i||!a&&!o?this.to_expression(e,t):this.unpack_expression_type(this.to_expression(e,t),this.get_pointee_type(this.expression_type_id(e)),this.get_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypeID),this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked),!1)},r.prototype.to_enclosed_unpacked_expression=function(e,t){return void 0===t&&(t=!0),this.enclose_expression(this.to_unpacked_expression(e,t))},r.prototype.to_dereferenced_expression=function(e,t){void 0===t&&(t=!0);var r=this.expression_type(e);return r.pointer&&this.should_dereference(e)?this.dereference_expression(r,this.to_enclosed_expression(e,t)):this.to_expression(e,t)},r.prototype.to_pointer_expression=function(e,t){return void 0===t&&(t=!0),this.expression_type(e).pointer&&this.expression_is_lvalue(e)&&!this.should_dereference(e)?this.address_of_expression(this.to_enclosed_expression(e,t)):this.to_unpacked_expression(e,t)},r.prototype.to_enclosed_pointer_expression=function(e,t){return void 0===t&&(t=!0),this.expression_type(e).pointer&&this.expression_is_lvalue(e)&&!this.should_dereference(e)?this.address_of_expression(this.to_enclosed_expression(e,t)):this.to_enclosed_unpacked_expression(e,t)},r.prototype.to_extract_component_expression=function(e,t){var r=this.to_enclosed_expression(e);return this.has_extended_decoration(e,ce.SPIRVCrossDecorationPhysicalTypePacked)?r+"["+t+"]":r+"."+this.index_to_swizzle(t)},r.prototype.enclose_expression=function(e){var t=!1,r=e.length;r>0&&("-"!==(o=e.charAt(0))&&"+"!==o&&"!"!==o&&"~"!==o&&"&"!==o&&"*"!==o||(t=!0));if(!t){for(var i=0,a=0;a<r;++a){var o;if("("===(o=e.charAt(a))||"["===o)i++;else if(")"===o||"]"===o)console.assert(i),i--;else if(" "===o&&0===i){t=!0;break}}console.assert(0===i)}return t?"("+e+")":e},r.prototype.dereference_expression=function(e,t){return"&"===t.charAt(0)?t.substring(1):this.backend.native_pointers?"*"+t:e.storage===v.StorageClassPhysicalStorageBufferEXT&&e.basetype!==_e.Struct&&1===e.pointer_depth?this.enclose_expression(t)+".value":t},r.prototype.address_of_expression=function(e){return e.length>3&&"("===e.charAt(0)&&"*"===e.charAt(1)&&")"===e.charAt(e.length-1)?this.enclose_expression(e.substring(2,e.length-1)):"*"===e.charAt(0)?e.substr(1):"&"+this.enclose_expression(e)},r.prototype.strip_enclosed_expression=function(e){var t=e.length,r=e.charAt(t-1);if(t<2||"("!==e.charAt(0)||")"!==r)return e;for(var i=0,a=0;a<t;++a){var o=e.charAt(a);if("("===o)i++;else if(")"===o&&0===--i&&o!==r)return e}return e.substring(1,t-1)},r.prototype.to_member_name=function(e,t){if(0!==e.type_alias&&!this.has_extended_decoration(e.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked))return this.to_member_name(this.get(xe,e.type_alias),t);var r=Mt(de,this.ir.meta,e.self).members;return t<r.length&&""!==r[t].alias?r[t].alias:"_m"+t},r.prototype.to_member_reference=function(e,t,r,i){return"."+this.to_member_name(t,r)},r.prototype.to_multi_member_reference=function(e,t){for(var r="",i=e,a=0;a<t.length;++a){var o=t[a];r+="."+this.to_member_name(i,o),i=this.get(xe,i.member_types[o])}return r},r.prototype.type_to_glsl_constructor=function(e){var t=this.options,r=this.backend;if(r.use_array_constructor&&e.array.length>1){if(t.flatten_multidimensional_arrays)throw new Error("Cannot flatten constructors of multidimensional array constructors, e.g. float[][]().");if(!t.es&&t.version<430)this.require_extension_internal("GL_ARB_arrays_of_arrays");else if(t.es&&t.version<310)throw new Error("Arrays of arrays not supported before ESSL version 310.")}var i=this.type_to_glsl(e);if(r.use_array_constructor)for(var a=0;a<e.array.length;a++)i+="[]";return i},r.prototype.argument_decl=function(e){var t=this.expression_type(e.id),r="";return t.pointer&&(e.write_count&&e.read_count?r="inout ":e.write_count&&(r="out ")),(""===r?"":r+" ")+this.to_qualifiers_glsl(e.id)+this.variable_decl(t,this.to_name(e.id),e.id)},r.prototype.to_qualifiers_glsl=function(e){var t=this.ir,r=this.backend,i=Mt(de,t.meta,e).decoration.decoration_flags,a="",o=this.maybe_get(ge,e);o&&o.storage===v.StorageClassWorkgroup&&!r.shared_is_implied&&(a+="shared "),a+=this.to_interpolation_qualifiers(i),o&&(a+=this.to_storage_qualifiers_glsl(o));var n=this.expression_type(e);if(n.image.dim!==I.DimSubpassData&&2===n.image.sampled){i.get(N.DecorationCoherent)&&(a+="coherent "),i.get(N.DecorationRestrict)&&(a+="restrict "),i.get(N.DecorationNonWritable)&&(a+="readonly ");var s=n.image.format===k.ImageFormatUnknown;if(i.get(N.DecorationNonReadable)&&(a+="writeonly ",s=!1),s){if(this.options.es)throw new Error("Cannot use GL_EXT_shader_image_load_formatted in ESSL.");this.require_extension_internal("GL_EXT_shader_image_load_formatted")}}return a+=this.to_precision_qualifiers_glsl(e)},r.prototype.fixup_io_block_patch_qualifiers=function(e){var t=this.get(xe,e.basetype);if(this.has_decoration(t.self,N.DecorationBlock)){for(var r=t.member_types.length,i=0;i<r;i++)if(this.has_member_decoration(t.self,i,N.DecorationPatch)){this.set_decoration(e.self,N.DecorationPatch);break}if(this.has_decoration(e.self,N.DecorationPatch))for(i=0;i<r;i++)this.unset_member_decoration(t.self,i,N.DecorationPatch)}},r.prototype.emit_output_variable_initializer=function(e){var t=this,r=this.ir,i=this.get(Be,r.default_entry_point),a=this.get(xe,e.basetype),o=this.has_decoration(e.self,N.DecorationPatch),n=this.has_decoration(a.self,N.DecorationBlock),s=this.get_execution_model()===g.ExecutionModelTessellationControl&&!o;if(n){var c=a.member_types.length,l=1===a.array.length,p=1;l&&(p=this.to_array_size_literal(a));for(var _=s?1:p,u=function(n){if(h.has_member_decoration(a.self,n,N.DecorationBuiltIn)){if(h.get_member_decoration(a.self,n,N.DecorationBuiltIn)===P.BuiltInCullDistance&&!h.cull_distance_count)return"continue";if(h.get_member_decoration(a.self,n,N.DecorationBuiltIn)===P.BuiltInClipDistance&&!h.clip_distance_count)return"continue"}var c;if(l){c="_".concat(e.self,"_").concat(n,"_init");var u=h.get(xe,e.basetype).member_types[n],d=h.get(xe,u);d.parent_type=u,d.array.push(p),d.array_size_literal.push(!0);for(var f=[],m=h.get(Me,e.initializer),g=0;g<p;g++)f.push(h.to_expression(h.get(Me,m.subconstants[g]).subconstants[n]));h.statement("const ",h.type_to_glsl(d)," ",c,h.type_to_array_glsl(d)," = ",h.type_to_glsl_constructor(d),"(",f.join(", "),");")}var b=function(a){i.fixup_hooks_in.push((function(){var i=new tr,p=t.get(Me,e.initializer),_=0,u=0;if(s){var h=r.increase_bound_by(3),d=new xe;d.basetype=_e.UInt,d.width=32,t.set(xe,h,d),t.set(He,h+1,t.builtin_to_glsl(P.BuiltInInvocationId,v.StorageClassInput),h,!0),t.set(Me,h+2,h,n,!1),_=h+1,u=h+2}if(o&&(t.statement("if (gl_InvocationID === 0)"),t.begin_scope()),l&&!s){var f=[a,n],m=t.access_chain_internal(e.self,f,2,Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,i);t.statement(m," = ",c,"[",a,"];")}else if(s){f=[_,u],m=t.access_chain_internal(e.self,f,2,0,i);t.statement(m," = ",c,"[",t.builtin_to_glsl(P.BuiltInInvocationId,v.StorageClassInput),"];")}else{m=t.access_chain_internal(e.self,[n],1,Zt.ACCESS_CHAIN_INDEX_IS_LITERAL_BIT,i);t.statement(m," = ",t.to_expression(p.subconstants[n]),";")}o&&t.end_scope()}))};for(g=0;g<_;g++)b(g)},h=this,d=0;d<c;d++)u(d)}else if(s){var f="_".concat(e.self,"_init");this.statement("const ",this.type_to_glsl(a)," ",f,this.type_to_array_glsl(a)," = ",this.to_expression(e.initializer),";"),i.fixup_hooks_in.push((function(){t.statement(t.to_expression(e.self),"[gl_InvocationID] = ",f,"[gl_InvocationID];")}))}else if(this.has_decoration(e.self,N.DecorationBuiltIn)&&this.get_decoration(e.self,N.DecorationBuiltIn)===P.BuiltInSampleMask)i.fixup_hooks_in.push((function(){for(var r=t.get(Me,e.initializer),i=r.subconstants.length,a=0;a<i;a++)t.statement(t.to_expression(e.self),"[",a,"] = ",Qe(t.get(Me,r.subconstants[a]).scalar_i32()),";")}));else{var m="".concat(e.self,"_init");this.statement("const ",this.type_to_glsl(a)," ",m,this.type_to_array_glsl(a)," = ",this.to_expression(e.initializer),";"),i.fixup_hooks_in.push((function(){o&&(t.statement("if (gl_InvocationID === 0)"),t.begin_scope()),t.statement(t.to_expression(e.self)," = ",m,";"),o&&t.end_scope()}))}},r.prototype.to_precision_qualifiers_glsl=function(e){var t=this.expression_type(e);if(this.backend.allow_precision_qualifiers&&(t.basetype===_e.Image||t.basetype===_e.SampledImage)&&this.get(xe,t.image.type).width<32)return"mediump ";return this.flags_to_qualifiers_glsl(t,Mt(de,this.ir.meta,e).decoration.decoration_flags)},r.prototype.to_storage_qualifiers_glsl=function(e){var t=this.get_entry_point();if(this.subpass_input_is_framebuffer_fetch(e.self))return"";if(e.storage===v.StorageClassInput||e.storage===v.StorageClassOutput){if(this.is_legacy()&&t.model===g.ExecutionModelVertex)return e.storage===v.StorageClassInput?"attribute ":"varying ";if(this.is_legacy()&&t.model===g.ExecutionModelFragment)return"varying ";if(t.model===g.ExecutionModelFragment&&e.storage===v.StorageClassOutput){var r=this.get_decoration(e.self,N.DecorationLocation);return this.location_is_framebuffer_fetch(r)?"inout ":"out "}return e.storage===v.StorageClassInput?"in ":"out "}if(e.storage===v.StorageClassUniformConstant||e.storage===v.StorageClassUniform||e.storage===v.StorageClassPushConstant)return"uniform ";if(e.storage===v.StorageClassRayPayloadKHR)throw new Error("Raytracing not supported");if(e.storage===v.StorageClassIncomingRayPayloadKHR)throw new Error("Raytracing not supported");if(e.storage===v.StorageClassHitAttributeKHR)throw new Error("Raytracing not supported");if(e.storage===v.StorageClassCallableDataKHR)throw new Error("Raytracing not supported");if(e.storage===v.StorageClassIncomingCallableDataKHR)throw new Error("Raytracing not supported");return""},r.prototype.flags_to_qualifiers_glsl=function(e,t){if(t.get(N.DecorationRestrictPointerEXT))return"restrict ";var r=this.backend,i=this.options,a="";if(Vt(e)&&t.get(N.DecorationNoContraction)&&r.support_precise_qualifier&&(a="precise "),!(e.basetype===_e.Float||e.basetype===_e.Int||e.basetype===_e.UInt||e.basetype===_e.Image||e.basetype===_e.SampledImage||e.basetype===_e.Sampler))return a;if(i.es){var o=this.get_entry_point();if(t.get(N.DecorationRelaxedPrecision)){var n=e.basetype===_e.Float&&i.fragment.default_float_precision===Wt.Mediump&&o.model===g.ExecutionModelFragment,s=(e.basetype===_e.Int||e.basetype===_e.UInt)&&i.fragment.default_int_precision===Wt.Mediump&&o.model===g.ExecutionModelFragment;a+=n||s?"":"mediump "}else{var c=e.basetype===_e.Float&&(i.fragment.default_float_precision===Wt.Highp&&o.model===g.ExecutionModelFragment||o.model!==g.ExecutionModelFragment),l=(e.basetype===_e.Int||e.basetype===_e.UInt)&&(i.fragment.default_int_precision===Wt.Highp&&o.model===g.ExecutionModelFragment||o.model!==g.ExecutionModelFragment);a+=c||l?"":"highp "}}else r.allow_precision_qualifiers&&t.get(N.DecorationRelaxedPrecision)&&(a+="mediump ");return a},r.prototype.format_to_glsl=function(e){if(this.options.es&&this.is_desktop_only_format(e))throw new Error("Attempting to use image format not supported in ES profile.");switch(e){case k.ImageFormatRgba32f:return"rgba32f";case k.ImageFormatRgba16f:return"rgba16f";case k.ImageFormatR32f:return"r32f";case k.ImageFormatRgba8:return"rgba8";case k.ImageFormatRgba8Snorm:return"rgba8_snorm";case k.ImageFormatRg32f:return"rg32f";case k.ImageFormatRg16f:return"rg16f";case k.ImageFormatRgba32i:return"rgba32i";case k.ImageFormatRgba16i:return"rgba16i";case k.ImageFormatR32i:return"r32i";case k.ImageFormatRgba8i:return"rgba8i";case k.ImageFormatRg32i:return"rg32i";case k.ImageFormatRg16i:return"rg16i";case k.ImageFormatRgba32ui:return"rgba32ui";case k.ImageFormatRgba16ui:return"rgba16ui";case k.ImageFormatR32ui:return"r32ui";case k.ImageFormatRgba8ui:return"rgba8ui";case k.ImageFormatRg32ui:return"rg32ui";case k.ImageFormatRg16ui:return"rg16ui";case k.ImageFormatR11fG11fB10f:return"r11f_g11f_b10f";case k.ImageFormatR16f:return"r16f";case k.ImageFormatRgb10A2:return"rgb10_a2";case k.ImageFormatR8:return"r8";case k.ImageFormatRg8:return"rg8";case k.ImageFormatR16:return"r16";case k.ImageFormatRg16:return"rg16";case k.ImageFormatRgba16:return"rgba16";case k.ImageFormatR16Snorm:return"r16_snorm";case k.ImageFormatRg16Snorm:return"rg16_snorm";case k.ImageFormatRgba16Snorm:return"rgba16_snorm";case k.ImageFormatR8Snorm:return"r8_snorm";case k.ImageFormatRg8Snorm:return"rg8_snorm";case k.ImageFormatR8ui:return"r8ui";case k.ImageFormatRg8ui:return"rg8ui";case k.ImageFormatR16ui:return"r16ui";case k.ImageFormatRgb10a2ui:return"rgb10_a2ui";case k.ImageFormatR8i:return"r8i";case k.ImageFormatRg8i:return"rg8i";case k.ImageFormatR16i:return"r16i";default:return null}},r.prototype.layout_for_member=function(e,t){if(this.is_legacy())return"";if(!(this.has_decoration(e.self,N.DecorationBlock)||this.has_decoration(e.self,N.DecorationBufferBlock)))return"";var r=this.ir,i=this.options,a=Mt(de,r.meta,e.self).members;if(t>=a.length)return"";var o=a[t],n=[];if(this.has_member_decoration(e.self,t,N.DecorationPassthroughNV)&&n.push("passthrough"),this.combined_decoration_for_member(e,t).get(N.DecorationRowMajor)&&n.push("row_major"),o.decoration_flags.get(N.DecorationLocation)&&this.can_use_io_location(e.storage,!0)&&n.push("location = "+o.location),o.decoration_flags.get(N.DecorationComponent)&&this.can_use_io_location(e.storage,!0)){if(i.es)throw new Error("Component decoration is not supported in ES targets.");if(i.version<440&&i.version>=140)this.require_extension_internal("GL_ARB_enhanced_layouts");else if(i.version<140)throw new Error("Component decoration is not supported in targets below GLSL 1.40.");n.push("component = "+o.component)}if(this.has_extended_decoration(e.self,ce.SPIRVCrossDecorationExplicitOffset)&&o.decoration_flags.get(N.DecorationOffset)?n.push("offset = "+o.offset):e.storage===v.StorageClassOutput&&o.decoration_flags.get(N.DecorationOffset)&&n.push("xfb_offset = "+o.offset),0===n.length)return"";var s="layout(";return s+=n.join(", "),s+=") "},r.prototype.to_interpolation_qualifiers=function(e){var t="";if(e.get(N.DecorationFlat)&&(t+="flat "),e.get(N.DecorationNoPerspective)&&(t+="noperspective "),e.get(N.DecorationCentroid)&&(t+="centroid "),e.get(N.DecorationPatch)&&(t+="patch "),e.get(N.DecorationSample)&&(t+="sample "),e.get(N.DecorationInvariant)&&(t+="invariant "),e.get(N.DecorationExplicitInterpAMD)&&(this.require_extension_internal("GL_AMD_shader_explicit_vertex_parameter"),t+="__explicitInterpAMD "),e.get(N.DecorationPerVertexNV)){var r=this.options;if(r.es&&r.version<320)throw new Error("pervertexNV requires ESSL 320.");if(!r.es&&r.version<450)throw new Error("pervertexNV requires GLSL 450.");this.require_extension_internal("GL_NV_fragment_shader_barycentric"),t+="pervertexNV "}return t},r.prototype.layout_for_variable=function(e){if(this.is_legacy())return"";if(this.subpass_input_is_framebuffer_fetch(e.self))return"";var t=this.options,r=this.ir,i=[],a=this.get(xe,e.basetype),o=this.get_decoration_bitset(e.self),n=this.get_decoration_bitset(a.self);o.get(N.DecorationPassthroughNV)&&i.push("passthrough"),o.get(N.DecorationRowMajor)&&i.push("row_major"),o.get(N.DecorationColMajor)&&i.push("column_major");var s=this.has_decoration(a.self,N.DecorationBlock);if(o.get(N.DecorationLocation)&&this.can_use_io_location(e.storage,s)){for(var c=new le,l=Mt(de,r.meta,a.self).members,p=0;p<l.length;p++)c.merge_or(this.combined_decoration_for_member(a,p));c.get(N.DecorationLocation)||i.push("location = "+this.get_decoration(e.self,N.DecorationLocation))}this.get_execution_model()===g.ExecutionModelFragment&&e.storage===v.StorageClassOutput&&this.location_is_non_coherent_framebuffer_fetch(this.get_decoration(e.self,N.DecorationLocation))&&i.push("noncoherent");var _=!1;if(s&&e.storage===v.StorageClassOutput){var u=a.member_types.length,h=!1,d=!1,f=!1,m=0,b=0,y=0;o.get(N.DecorationXfbBuffer)&&o.get(N.DecorationXfbStride)&&(h=!0,b=this.get_decoration(e.self,N.DecorationXfbBuffer),m=this.get_decoration(e.self,N.DecorationXfbStride)),o.get(N.DecorationStream)&&(f=!0,y=this.get_decoration(e.self,N.DecorationStream));for(p=0;p<u;p++){if(this.has_member_decoration(a.self,p,N.DecorationStream)){var S=this.get_member_decoration(a.self,p,N.DecorationStream);if(f&&S!==y)throw new Error("IO block member Stream mismatch.");f=!0,y=S}if(this.has_member_decoration(a.self,p,N.DecorationOffset)){if(d=!0,this.has_member_decoration(a.self,p,N.DecorationXfbBuffer)){var I=this.get_member_decoration(a.self,p,N.DecorationXfbBuffer);if(h&&I!==b)throw new Error("IO block member XfbBuffer mismatch.");h=!0,b=I}if(this.has_member_decoration(a.self,p,N.DecorationXfbStride)){var O=this.get_member_decoration(a.self,p,N.DecorationXfbStride);if(h&&O!==m)throw new Error("IO block member XfbStride mismatch.");h=!0,m=O}}}if(h&&d&&(i.push("xfb_buffer = "+b),i.push("xfb_stride = "+m),_=!0),f){if(this.get_execution_model()!==g.ExecutionModelGeometry)throw new Error("Geometry streams can only be used in geometry shaders.");if(t.es)throw new Error("Multiple geometry streams not supported in ESSL.");t.version<400&&this.require_extension_internal("GL_ARB_transform_feedback3"),i.push("stream = "+this.get_decoration(e.self,N.DecorationStream))}}else if(e.storage===v.StorageClassOutput&&(o.get(N.DecorationXfbBuffer)&&o.get(N.DecorationXfbStride)&&o.get(N.DecorationOffset)&&(i.push("xfb_buffer = "+this.get_decoration(e.self,N.DecorationXfbBuffer)),i.push("xfb_stride = "+this.get_decoration(e.self,N.DecorationXfbStride)),i.push("xfb_offset = "+this.get_decoration(e.self,N.DecorationOffset)),_=!0),o.get(N.DecorationStream))){if(this.get_execution_model()!==g.ExecutionModelGeometry)throw new Error("Geometry streams can only be used in geometry shaders.");if(t.es)throw new Error("Multiple geometry streams not supported in ESSL.");t.version<400&&this.require_extension_internal("GL_ARB_transform_feedback3"),i.push("stream = "+this.get_decoration(e.self,N.DecorationStream))}if(o.get(N.DecorationComponent)&&this.can_use_io_location(e.storage,s)&&(_=!0,i.push("component = "+this.get_decoration(e.self,N.DecorationComponent))),_)if(t.es){if(t.es)throw new Error("GL_ARB_enhanced_layouts is not supported in ESSL.")}else{if(t.version<440&&t.version>=140)this.require_extension_internal("GL_ARB_enhanced_layouts");else if(t.version<140)throw new Error("GL_ARB_enhanced_layouts is not supported in targets below GLSL 1.40.");!t.es&&t.version<440&&this.require_extension_internal("GL_ARB_enhanced_layouts")}o.get(N.DecorationIndex)&&i.push("index = "+this.get_decoration(e.self,N.DecorationIndex));var x,k=e.storage===v.StorageClassStorageBuffer||e.storage===v.StorageClassShaderRecordBufferKHR||e.storage===v.StorageClassUniform&&n.get(N.DecorationBufferBlock),C=e.storage===v.StorageClassPushConstant&&t.emit_push_constant_as_uniform_buffer,E=e.storage===v.StorageClassUniform&&n.get(N.DecorationBlock),L=t.es&&t.version>=300||!t.es&&t.version>=140;if(E&&t.emit_uniform_buffer_as_plain_uniforms&&(L=!1),x=t.es?t.version>=310:t.enable_420pack_extension||t.version>=420,L||e.storage!==v.StorageClassUniform||(x=!1),e.storage===v.StorageClassShaderRecordBufferKHR&&(x=!1),x&&o.get(N.DecorationBinding)&&i.push("binding = "+this.get_decoration(e.self,N.DecorationBinding)),e.storage!==v.StorageClassOutput&&o.get(N.DecorationOffset)&&i.push("offset = "+this.get_decoration(e.self,N.DecorationOffset)),L&&(E||C)?i.push(this.buffer_to_packing_standard(a,!1)):L&&k&&i.push(this.buffer_to_packing_standard(a,!0)),a.basetype===_e.Image&&2===a.image.sampled){var M=this.format_to_glsl(a.image.format);M&&i.push(M)}return 0===i.length?"":"layout("+i.join(", ")+") "},r.prototype.to_combined_image_sampler=function(e,t){var r=this.to_non_uniform_aware_expression(e),i="",a=r.indexOf("[");a>=0&&(i=r.substring(a));var o=this.current_function.arguments,n=this.maybe_get_backing_variable(e),s=this.maybe_get_backing_variable(t);n&&(e=n.self),s&&(t=s.self);var c=o.find((function(t){return e===t.id})),l=o.find((function(e){return t===e.id}));if(c||l){var p=!c,_=!l,u=p?e:o.indexOf(c),h=_?t:o.indexOf(l);if(d=this.current_function.combined_parameters.find((function(e){return e.global_image===p&&e.global_sampler===_&&e.image_id===u&&e.sampler_id===h})))return this.to_expression(d.id)+i;throw new Error("Cannot find mapping for combined sampler parameter, was build_combined_image_samplers() used before compile() was called?")}var d=this.combined_image_samplers.find((function(r){return r.image_id===e&&r.sampler_id===t}));if(d)return this.to_expression(d.combined_id)+i;throw new Error("Cannot find mapping for combined sampler, was build_combined_image_samplers() used before compile() was called?")},r.prototype.skip_argument=function(e){var t=this.expression_type(e);return t.basetype===_e.Sampler||t.basetype===_e.Image&&1===t.image.sampled},r.prototype.emit_array_copy=function(e,t,r,i,a){this.statement(e," = ",this.to_expression(r),";")},r.prototype.emit_block_hints=function(e){var t=this.options;if(!(t.es&&t.version<310||!t.es&&t.version<140))switch(e.hint){case Se.HintFlatten:this.require_extension_internal("GL_EXT_control_flow_attributes"),this.statement("SPIRV_CROSS_FLATTEN");break;case Se.HintDontFlatten:this.require_extension_internal("GL_EXT_control_flow_attributes"),this.statement("SPIRV_CROSS_BRANCH");break;case Se.HintUnroll:this.require_extension_internal("GL_EXT_control_flow_attributes"),this.statement("SPIRV_CROSS_UNROLL");break;case Se.HintDontUnroll:this.require_extension_internal("GL_EXT_control_flow_attributes"),this.statement("SPIRV_CROSS_LOOP")}},r.prototype.to_initializer_expression=function(e){return this.to_unpacked_expression(e.initializer)},r.prototype.to_zero_initialized_expression=function(e){var t=this.ir,r=t.increase_bound_by(1);return t.make_constant_null(r,e,!1),this.constant_expression(this.get(Me,r))},r.prototype.type_can_zero_initialize=function(e){if(e.pointer)return!1;if(e.array.length>0&&this.options.flatten_multidimensional_arrays)return!1;for(var t=0,r=e.array_size_literal;t<r.length;t++){if(!r[t])return!1}for(var i=0,a=e.member_types;i<a.length;i++){var o=a[i];if(!this.type_can_zero_initialize(this.get(xe,o)))return!1}return!0},r.prototype.buffer_is_packing_standard=function(e,t,r,i,a){void 0===r&&(r=null),void 0===i&&(i=0),void 0===a&&(a=void 0);for(var o=0,n=1,s=this.has_decoration(e.self,N.DecorationBlock)||this.has_decoration(e.self,N.DecorationBufferBlock),c=this.ir,l=0;l<e.member_types.length;l++){var p=this.get(xe,e.member_types[l]),_=Mt(de,c.meta,e.self).members[l].decoration_flags,u=this.type_to_packed_alignment(p,_,t),h=0;s&&l+1===e.member_types.length&&p.array.length>0||(h=this.type_to_packed_size(p,_,t));var d=this.type_struct_member_offset(e,l);if(void 0!==a&&d>=a)break;var f=Math.max(u,n);if(o=o+f-1&~(f-1),n=p.basetype!==_e.Struct||p.pointer?1:u,d>=i){if(dr(t)){if(0!=(d&f-1))return r&&(r[0]=l),!1}else if(d!==o)return r&&(r[0]=l),!1;if(0===p.array.length&&this.type_to_packed_array_stride(p,_,t)!=this.type_struct_member_array_stride(e,l))return r&&(r[0]=l),!1;var m=fr(t);if(!p.pointer&&p.member_types.length>0&&!this.buffer_is_packing_standard(p,m))return r&&(r[0]=l),!1}o=d+h}return!0},r.prototype.buffer_to_packing_standard=function(e,t){var r=this.options;if(t&&this.buffer_is_packing_standard(e,Yt.BufferPackingStd430))return"std430";if(this.buffer_is_packing_standard(e,Yt.BufferPackingStd140))return"std140";if(t&&this.buffer_is_packing_standard(e,Yt.BufferPackingStd430EnhancedLayout)){if(r.es)throw new Error("Push constant block cannot be expressed as neither std430 nor std140. ES-targets do not support GL_ARB_enhanced_layouts.");return this.set_extended_decoration(e.self,ce.SPIRVCrossDecorationExplicitOffset),"std430"}if(this.buffer_is_packing_standard(e,Yt.BufferPackingStd140EnhancedLayout)){if(r.es)throw new Error("Push constant block cannot be expressed as neither std430 nor std140. ES-targets do not support GL_ARB_enhanced_layouts.");return!r.es&&/*!options.vulkan_semantics &&*/r.version<440&&this.require_extension_internal("GL_ARB_enhanced_layouts"),this.set_extended_decoration(e.self,ce.SPIRVCrossDecorationExplicitOffset),"std140"}throw new Error("Buffer block cannot be expressed as any of std430, std140, scalar, even with enhanced layouts. You can try flattening this block to support a more flexible layout.")},r.prototype.type_to_packed_base_size=function(e,t){switch(e.basetype){case _e.Double:case _e.Int64:case _e.UInt64:return 8;case _e.Float:case _e.Int:case _e.UInt:return 4;case _e.Half:case _e.Short:case _e.UShort:return 2;case _e.SByte:case _e.UByte:return 1;default:throw new Error("Unrecognized type in type_to_packed_base_size.")}},r.prototype.type_to_packed_alignment=function(e,t,r){var i=this.ir;if(e.storage===v.StorageClassPhysicalStorageBufferEXT){if(!e.pointer)throw new Error("Types in PhysicalStorageBufferEXT must be pointers.");if(i.addressing_model===b.AddressingModelPhysicalStorageBuffer64EXT)return mr(r)&&this.type_is_array_of_pointers(e)?16:8;throw new Error("AddressingModelPhysicalStorageBuffer64EXT must be used for PhysicalStorageBufferEXT.")}if(e.array.length){var a=1;mr(r)&&(a=16);for(var o=this.get(xe,e.parent_type);!o.array.length;)o=this.get(xe,o.parent_type);return Math.max(a,this.type_to_packed_alignment(o,t,r))}if(e.basetype===_e.Struct){for(var n=1,s=0;s<e.member_types.length;s++){var c=Mt(de,i.meta,e.self).members[s].decoration_flags;n=Math.max(n,this.type_to_packed_alignment(this.get(xe,e.member_types[s]),c,r))}return mr(r)&&(n=Math.max(n,16)),n}var l=this.type_to_packed_base_size(e,r);if(gr(r))return l;if(1===e.vecsize&&1===e.columns)return l;if((2===e.vecsize||4===e.vecsize)&&1===e.columns)return e.vecsize*l;if(3===e.vecsize&&1===e.columns)return 4*l;if(t.get(N.DecorationColMajor)&&e.columns>1)return mr(r)||3===e.vecsize?4*l:e.vecsize*l;if(t.get(N.DecorationRowMajor)&&e.vecsize>1)return mr(r)||3===e.columns?4*l:e.columns*l;throw new Error("Did not find suitable rule for type. Bogus decorations?")},r.prototype.type_to_packed_array_stride=function(e,t,r){var i=e.parent_type;console.assert(i);var a=this.get(xe,i),o=this.type_to_packed_size(a,t,r),n=this.type_to_packed_alignment(e,t,r);return o+n-1&~(n-1)},r.prototype.type_to_packed_size=function(e,t,r){if(e.array.length)return this.to_array_size_literal(e)*this.type_to_packed_array_stride(e,t,r);var i=this.ir;if(e.storage===v.StorageClassPhysicalStorageBufferEXT){if(!e.pointer)throw new Error("Types in PhysicalStorageBufferEXT must be pointers.");if(i.addressing_model===b.AddressingModelPhysicalStorageBuffer64EXT)return 8;throw new Error("AddressingModelPhysicalStorageBuffer64EXT must be used for PhysicalStorageBufferEXT.")}var a=0;if(e.basetype===_e.Struct)for(var o=1,n=0;n<e.member_types.length;n++){var s=Mt(de,i.meta,e.self).members[n].decoration_flags,c=this.get(xe,e.member_types[n]),l=this.type_to_packed_alignment(c,s,r),p=Math.max(l,o);o=c.basetype===_e.Struct?l:1,a=a+p-1&~(p-1),a+=this.type_to_packed_size(c,s,r)}else{var _=this.type_to_packed_base_size(e,r);gr(r)?a=e.vecsize*e.columns*_:(1===e.columns&&(a=e.vecsize*_),t.get(N.DecorationColMajor)&&e.columns>1&&(a=mr(r)||3===e.vecsize?4*e.columns*_:e.columns*e.vecsize*_),t.get(N.DecorationRowMajor)&&e.vecsize>1&&(a=mr(r)||3===e.columns?4*e.vecsize*_:e.vecsize*e.columns*_))}return a},r.prototype.bitcast_glsl_op=function(e,t){if(e.pointer||t.pointer)return 2!==e.vecsize&&2!==t.vecsize||this.require_extension_internal("GL_EXT_buffer_reference_uvec2"),this.type_to_glsl(e);if(e.basetype===t.basetype)return"";var r=this.options;console.assert(e.basetype!==_e.Boolean),console.assert(t.basetype!==_e.Boolean);var i=Ht(e)&&Ht(t),a=e.width===t.width;if(i&&a)return this.type_to_glsl(e);if(8===e.width&&t.width>=16&&i&&1===t.vecsize)return"unpack8";if(8===t.width&&16===e.width&&i&&1===e.vecsize)return"pack16";if(8===t.width&&32===e.width&&i&&1===e.vecsize)return"pack32";if(e.basetype===_e.UInt&&t.basetype===_e.Float){if(this.is_legacy_es())throw new Error("Float -> Uint bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"floatBitsToUint"}if(e.basetype===_e.Int&&t.basetype===_e.Float){if(this.is_legacy_es())throw new Error("Float -> Int bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"floatBitsToInt"}if(e.basetype===_e.Float&&t.basetype===_e.UInt){if(this.is_legacy_es())throw new Error("Uint -> Float bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"uintBitsToFloat"}if(e.basetype===_e.Float&&t.basetype===_e.Int){if(this.is_legacy_es())throw new Error("Int -> Float bitcast not supported on legacy ESSL.");return!r.es&&r.version<330&&this.require_extension_internal("GL_ARB_shader_bit_encoding"),"intBitsToFloat"}return e.basetype===_e.Int64&&t.basetype===_e.Double?"doubleBitsToInt64":e.basetype===_e.UInt64&&t.basetype===_e.Double?"doubleBitsToUint64":e.basetype===_e.Double&&t.basetype===_e.Int64?"int64BitsToDouble":e.basetype===_e.Double&&t.basetype===_e.UInt64?"uint64BitsToDouble":e.basetype===_e.Short&&t.basetype===_e.Half?"float16BitsToInt16":e.basetype===_e.UShort&&t.basetype===_e.Half?"float16BitsToUint16":e.basetype===_e.Half&&t.basetype===_e.Short?"int16BitsToFloat16":e.basetype===_e.Half&&t.basetype===_e.UShort?"uint16BitsToFloat16":e.basetype===_e.UInt64&&t.basetype===_e.UInt&&2===t.vecsize?"packUint2x32":e.basetype===_e.UInt&&t.basetype===_e.UInt64&&2===e.vecsize?"unpackUint2x32":e.basetype===_e.Half&&t.basetype===_e.UInt&&1===t.vecsize?"unpackFloat2x16":e.basetype===_e.UInt&&t.basetype===_e.Half&&2===t.vecsize?"packFloat2x16":e.basetype===_e.Int&&t.basetype===_e.Short&&2===t.vecsize?"packInt2x16":e.basetype===_e.Short&&t.basetype===_e.Int&&1===t.vecsize?"unpackInt2x16":e.basetype===_e.UInt&&t.basetype===_e.UShort&&2===t.vecsize?"packUint2x16":e.basetype===_e.UShort&&t.basetype===_e.UInt&&1===t.vecsize?"unpackUint2x16":e.basetype===_e.Int64&&t.basetype===_e.Short&&4===t.vecsize?"packInt4x16":e.basetype===_e.Short&&t.basetype===_e.Int64&&1===t.vecsize?"unpackInt4x16":e.basetype===_e.UInt64&&t.basetype===_e.UShort&&4===t.vecsize?"packUint4x16":e.basetype===_e.UShort&&t.basetype===_e.UInt64&&1===t.vecsize?"unpackUint4x16":""},r.prototype.bitcast_glsl=function(e,t){var r=this.bitcast_glsl_op(e,this.expression_type(t));return""===r?this.to_enclosed_unpacked_expression(t):r+"("+this.to_unpacked_expression(t)+")"},r.prototype.bitcast_expression=function(e,t,r){if(void 0===r){if(e=e,r=this.to_expression(t),(a=this.expression_type(t)).basetype!==e){var i=a;i.basetype=e,r=this.bitcast_glsl_op(i,a)+"("+r+")"}return r}var a,o=t;return(e=e).basetype===o?r:((a=e).basetype=o,this.bitcast_glsl_op(e,a)+"("+r+")")},r.prototype.build_composite_combiner=function(e,t,r){for(var i=0,a="",o="",n=this.get(xe,e),s=n.basetype!==_e.Struct&&0===n.array.length&&1===n.columns,c=!1,l=this.backend,p=0;p<r;p++){var _=this.maybe_get(He,t[p]);if(s&&_&&_.base_expression&&_.base_expression===i)console.assert(""!==_.expression&&"."===_.expression.charAt(0)),o+=_.expression.substring(1),c=!0;else{c?(l.swizzle_is_function&&(o+="()"),o=this.remove_duplicate_swizzle(o)||this.remove_unity_swizzle(i,o)||o,c=!1,a+=o=this.strip_enclosed_expression(o)):a+=o,p&&(a+=", ");var u=n.basetype===_e.Struct&&this.has_member_decoration(n.self,p,N.DecorationOffset);o=this.to_composite_constructor_expression(t[p],u)}i=_?_.base_expression:0}return c&&(l.swizzle_is_function&&(o+="()"),o=this.remove_duplicate_swizzle(o)||this.remove_unity_swizzle(i,o)||o,o=this.strip_enclosed_expression(o)),a+=o},r.prototype.remove_duplicate_swizzle=function(e){var t=e.lastIndexOf(".");if(t<=0)return null;var r=e.substring(t+1);if(this.backend.swizzle_is_function){if(r.length<2)return null;if("()"!==r.substring(r.length-2))return null;r.substring(0,r.length-2)}for(var i=0;i<r.length;i++)if(i>=4||r[i]!==lr[i])return null;var a=e.lastIndexOf(".",t-1);if(a<0)return e;for(i=++a;i<t;i++)if(e[i]<"w"||e[i]>"z"){if(this.backend.swizzle_is_function&&i+2===t&&"("===e[i]&&")"===e[i+1])break;return null}return t-a>=r.length&&(e=e.substring(0,a+r.length),this.backend.swizzle_is_function&&(e+="()")),e},r.prototype.remove_unity_swizzle=function(e,t){var r=t.indexOf(".");if(r<=0)return null;var i=t.substring(r+1);if(this.backend.swizzle_is_function){if(i.length<2)return null;if("()"!==i.substring(i.length-2))return null;i=i.substring(0,i.length-2)}for(var a=0;a<i.length;a++)if(a>=4||i[a]!==lr[a])return null;var o=this.expression_type(e);return console.assert(1===o.columns&&0===o.array.length),o.vecsize===i.length&&(t=t.substring(0,r)),t},r.prototype.replace_illegal_names=function(e){var t=this;void 0===e&&(e=pr);var r=this.ir;r.for_each_typed_id(ge,(function(i,a){if(!t.is_hidden_variable(a)){var o=r.find_meta(a.self);if(o){var n=o.decoration;e.has(n.alias)&&(n.alias="_"+n.alias)}}})),r.for_each_typed_id(Be,(function(t,i){var a=r.find_meta(i.self);if(a){var o=a.decoration;e.has(o.alias)&&(o.alias="_"+o.alias)}})),r.for_each_typed_id(xe,(function(t,i){var a=r.find_meta(i.self);if(a){var o=a.decoration;e.has(o.alias)&&(o.alias="_"+o.alias);for(var n=0,s=a.members;n<s.length;n++){var c=s[n];e.has(c.alias)&&(c.alias="_"+c.alias)}}}))},r.prototype.emit_entry_point_declarations=function(){},r.prototype.replace_fragment_output=function(e){var t=this.ir,r=Mt(de,t.meta,e.self).decoration,i=0;r.decoration_flags.get(N.DecorationLocation)&&(i=r.location);var a=this.get(xe,e.basetype);if(0===a.array.length)r.alias="gl_FragData[".concat(i,"]"),this.is_legacy_es()&&0!==i&&this.require_extension_internal("GL_EXT_draw_buffers");else{if(1!==a.array.length)throw new Error("Array-of-array output variable used. This cannot be implemented in legacy GLSL.");if(r.alias="gl_FragData",0!==i)throw new Error("Arrayed output variable used, but location is not 0. This is unimplemented in SPIRV-Cross.");this.is_legacy_es()&&this.require_extension_internal("GL_EXT_draw_buffers")}e.compat_builtin=!0},r.prototype.replace_fragment_outputs=function(){var e=this;this.ir.for_each_typed_id(ge,(function(t,r){var i=e.get(xe,r.basetype);e.is_builtin_variable(r)||r.remapped_variable||!i.pointer||r.storage!==v.StorageClassOutput||e.replace_fragment_output(r)}))},r.prototype.legacy_tex_op=function(e,t,r){var i,a=this.options;switch(t.image.dim){case I.Dim1D:i=t.image.arrayed&&!a.es?"1DArray":"1D";break;case I.Dim2D:i=t.image.arrayed&&!a.es?"2DArray":"2D";break;case I.Dim3D:i="3D";break;case I.DimCube:i="Cube";break;case I.DimRect:i="2DRect";break;case I.DimBuffer:i="Buffer";break;case I.DimSubpassData:i="2D";break;default:i=""}var o=!1,n=this.get_entry_point();if("textureGrad"!==e&&"textureProjGrad"!==e&&("textureLod"!==e&&"textureProjLod"!==e||n.model===g.ExecutionModelVertex)||(this.is_legacy_es()?(o=!0,this.require_extension_internal("GL_EXT_shader_texture_lod")):this.is_legacy_desktop()&&this.require_extension_internal("GL_ARB_shader_texture_lod")),"textureLodOffset"===e||"textureProjLodOffset"===e){if(this.is_legacy_es())throw new Error(e+" not allowed in legacy ES");this.require_extension_internal("GL_EXT_gpu_shader4")}var s=this.is_depth_image(t,r);if(s&&this.is_legacy_es()){if("texture"!==e&&"textureProj"!==e)throw new Error(e+" not allowed on depth samplers in legacy ES");this.require_extension_internal("GL_EXT_shadow_samplers")}if("textureSize"===e){if(this.is_legacy_es())throw new Error("textureSize not supported in legacy ES");if(s)throw new Error("textureSize not supported on shadow sampler in legacy GLSL");this.require_extension_internal("GL_EXT_gpu_shader4")}if("texelFetch"===e&&this.is_legacy_es())throw new Error("texelFetch not supported in legacy ES");var c=this.is_legacy_es()&&s,l=s?"shadow":"texture";if("texture"===e)return c?l+i+"EXT":l+i;if("textureLod"===e)return l+i+o?"LodEXT":"Lod";if("textureProj"===e)return l+i+c?"ProjEXT":"Proj";if("textureGrad"===e)return l+i+this.is_legacy_es()?"GradEXT":this.is_legacy_desktop()?"GradARB":"Grad";if("textureProjLod"===e)return l+i+o?"ProjLodEXT":"ProjLod";if("textureLodOffset"===e)return l+i+"LodOffset";if("textureProjGrad"===e)return l+i+this.is_legacy_es()?"ProjGradEXT":this.is_legacy_desktop()?"ProjGradARB":"ProjGrad";if("textureProjLodOffset"===e)return l+i+"ProjLodOffset";if("textureSize"===e)return"textureSize"+i;if("texelFetch"===e)return"texelFetch"+i;throw new Error("Unsupported legacy texture op: "+e)},r.prototype.load_flattened_struct=function(e,t){var r=this.type_to_glsl_constructor(t);r+="(";for(var i=0;i<t.member_types.length;i++){i&&(r+=", ");var a=this.get(xe,t.member_types[i]);a.basetype===_e.Struct?r+=this.load_flattened_struct(this.to_flattened_struct_member(e,t,i),a):r+=this.to_flattened_struct_member(e,t,i)}return r+=")"},r.prototype.to_flattened_struct_member=function(e,t,r){var i=e+"_"+this.to_member_name(t,r);return Je.sanitize_underscores(i),i},r.prototype.store_flattened_struct=function(e,t,r,i){if("number"!=typeof e){var a=Array.from(i);a.push(0);for(var o=r,n=0;n<i.length;++n){var s=i[n];o=this.get(xe,o.member_types[s])}for(n=0;n<o.member_types.length;n++){a[a.length-1]=n;var c=Je.sanitize_underscores(e+"_"+this.to_member_name(o,n));if(this.get(xe,o.member_types[n]).basetype===_e.Struct)this.store_flattened_struct(c,t,r,a);else{var l=this.to_expression(t)+this.to_multi_member_reference(r,a);this.statement(c," = ",l,";")}}}else{var p=e,_=t,u=this.expression_type(p),h=this.to_flattened_access_chain_expression(p);this.store_flattened_struct(h,_,u,[])}},r.prototype.to_flattened_access_chain_expression=function(e){var t,r=this.maybe_get(ge,e);if(r)t=this.to_name(r.self);else{var i=this.maybe_get(He,e);t=i?i.expression:this.to_expression(e)}return t},r.prototype.track_expression_read=function(e){switch(this.ir.ids[e].get_type()){case t.TypeExpression:for(var r=0,i=this.get(He,e).implied_read_expressions;r<i.length;r++){var a=i[r];this.track_expression_read(a)}break;case t.TypeAccessChain:for(var o=0,n=this.get(qe,e).implied_read_expressions;o<n.length;o++){a=n[o];this.track_expression_read(a)}}if(this.expression_is_forwarded(e)&&!this.expression_suppresses_usage_tracking(e)){var s=Mt(0,this.expression_usage_counts,e);s++,this.expression_read_implies_multiple_reads(e)&&s++,s>=2&&(this.forced_temporaries.add(e),this.force_recompile())}},r.prototype.request_workaround_wrapper_overload=function(e){this.workaround_ubo_load_overload_types.indexOf(e)<0&&(this.force_recompile(),this.workaround_ubo_load_overload_types.push(e))},r.prototype.rewrite_load_for_wrapped_row_major=function(e,t,r){var i=this.maybe_get_backing_variable(r);if(!i)return e;var a=this.get(xe,i.basetype);if(!(a.basetype===_e.Struct&&a.storage===v.StorageClassUniform&&this.has_decoration(a.self,N.DecorationBlock)))return e;var o=this.get(xe,t),n=!1;if(this.is_matrix(o)&&(o=a),o.basetype===_e.Struct)for(var s=0;s<o.member_types.length;s++)if(this.combined_decoration_for_member(o,s).get(N.DecorationRowMajor)){n=!0;break}return n&&(this.request_workaround_wrapper_overload(t),e="spvWorkaroundRowMajor("+e+")"),e},r.prototype.is_legacy=function(){var e=this.options;return e.es&&e.version<300||!e.es&&e.version<130},r.prototype.is_legacy_es=function(){var e=this.options;return e.es&&e.version<300},r.prototype.is_legacy_desktop=function(){var e=this.options;return!e.es&&e.version<130},r.prototype.register_impure_function_call=function(){for(var e=0,t=this.global_variables;e<t.length;e++){var r=t[e];this.flush_dependees(this.get(ge,r))}for(var i=0,a=this.aliased_variables;i<a.length;i++){var o=a[i];this.flush_dependees(this.get(ge,o))}},r.prototype.register_control_dependent_expression=function(e){this.forwarded_temporaries.has(e)&&(console.assert(this.current_emitting_block),this.current_emitting_block.invalidate_expressions.push(e))},r.prototype.args_will_forward=function(e,t,r,i){if(this.forced_temporaries.has(e))return!1;for(var a=0;a<r;a++)if(!this.should_forward(t[a]))return!1;if(!i){for(var o=0,n=this.global_variables;o<n.length;o++){var s=n[o];if(!this.should_forward(s))return!1}for(var c=0,l=this.aliased_variables;c<l.length;c++){var p=l[c];if(!this.should_forward(p))return!1}}return!0},r.prototype.register_call_out_argument=function(e){this.register_write(e);var t=this.maybe_get(ge,e);t&&this.flush_variable_declaration(t.self)},r.prototype.pls_decl=function(e){var t=this.get(ge,e.id),r=new xe;return r.vecsize=function(e){switch(e){default:case dt.PlsR32F:case dt.PlsR32UI:return 1;case dt.PlsRG16F:case dt.PlsRG16:case dt.PlsRG16UI:case dt.PlsRG16I:return 2;case dt.PlsR11FG11FB10F:return 3;case dt.PlsRGB10A2:case dt.PlsRGBA8:case dt.PlsRGBA8I:case dt.PlsRGB10A2UI:case dt.PlsRGBA8UI:return 4}}(e.format),r.basetype=function(e){switch(e){case dt.PlsRGBA8I:case dt.PlsRG16I:return _e.Int;case dt.PlsRGB10A2UI:case dt.PlsRGBA8UI:case dt.PlsRG16UI:case dt.PlsR32UI:return _e.UInt;default:return _e.Float}}(e.format),function(e){switch(e){case dt.PlsR11FG11FB10F:return"layout(r11f_g11f_b10f) ";case dt.PlsR32F:return"layout(r32f) ";case dt.PlsRG16F:return"layout(rg16f) ";case dt.PlsRGB10A2:return"layout(rgb10_a2) ";case dt.PlsRGBA8:return"layout(rgba8) ";case dt.PlsRG16:return"layout(rg16) ";case dt.PlsRGBA8I:return"layout(rgba8i)";case dt.PlsRG16I:return"layout(rg16i) ";case dt.PlsRGB10A2UI:return"layout(rgb10_a2ui) ";case dt.PlsRGBA8UI:return"layout(rgba8ui) ";case dt.PlsRG16UI:return"layout(rg16ui) ";case dt.PlsR32UI:return"layout(r32ui) ";default:return""}}(e.format)+this.to_pls_qualifiers_glsl(t)+this.type_to_glsl(r)+" "+this.to_name(t.self)},r.prototype.to_pls_qualifiers_glsl=function(e){return Mt(de,this.ir.meta,e.self).decoration.decoration_flags.get(N.DecorationRelaxedPrecision)?"mediump ":"highp "},r.prototype.emit_pls=function(){var e=this.get_entry_point(),t=this.options;if(e.model!==g.ExecutionModelFragment)throw new Error("Pixel local storage only supported in fragment shaders.");if(!t.es)throw new Error("Pixel local storage only supported in OpenGL ES.");if(t.version<300)throw new Error("Pixel local storage only supported in ESSL 3.0 and above.");if(this.pls_inputs.length>0){this.statement("__pixel_local_inEXT _PLSIn"),this.begin_scope();for(var r=0,i=this.pls_inputs;r<i.length;r++){var a=i[r];this.statement(this.pls_decl(a),";")}this.end_scope_decl(),this.statement("")}if(this.pls_outputs.length>0){this.statement("__pixel_local_outEXT _PLSOut"),this.begin_scope();for(var o=0,n=this.pls_outputs;o<n.length;o++){var s=n[o];this.statement(this.pls_decl(s),";")}this.end_scope_decl(),this.statement("")}},r.prototype.remap_pls_variables=function(){for(var e=0,t=this.pls_inputs;e<t.length;e++){var r=t[e],i=!1;if((n=this.get(ge,r.id)).storage===v.StorageClassUniformConstant)i=this.get(xe,n.basetype).image.dim===I.DimSubpassData;if(n.storage!==v.StorageClassInput&&!i)throw new Error("Can only use in and target variables for PLS inputs.");n.remapped_variable=!0}for(var a=0,o=this.pls_outputs;a<o.length;a++){var n,s=o[a];if((n=this.get(ge,s.id)).storage!==v.StorageClassOutput)throw new Error("Can only use out variables for PLS outputs.");n.remapped_variable=!0}},r.prototype.location_is_framebuffer_fetch=function(e){return!!this.inout_color_attachments.find((function(t){return t.first===e}))},r.prototype.location_is_non_coherent_framebuffer_fetch=function(e){return!!this.inout_color_attachments.find((function(t){return t.first===e&&!t.second}))},r.prototype.subpass_input_is_framebuffer_fetch=function(e){if(!this.has_decoration(e,N.DecorationInputAttachmentIndex))return!1;for(var t=this.get_decoration(e,N.DecorationInputAttachmentIndex),r=0,i=this.subpass_to_framebuffer_fetch_attachment;r<i.length;r++){if(i[r].first===t)return!0}return!1},r.prototype.emit_inout_fragment_outputs_copy_to_subpass_inputs=function(){for(var e=this,t=function(t){var i=r.find_subpass_input_by_attachment_index(t.first),a=r.find_color_output_by_location(t.second);if(!i)return"continue";if(!a)throw new Error("Need to declare the corresponding fragment output variable to be able to read from it.");if(r.is_array(r.get(xe,a.basetype)))throw new Error("Cannot use GL_EXT_shader_framebuffer_fetch with arrays of color outputs.");r.get(Be,r.get_entry_point().self).fixup_hooks_in.push((function(){if(e.is_legacy())e.statement(e.to_expression(i.self)," = ","gl_LastFragData[",e.get_decoration(a.self,N.DecorationLocation),"];");else{var t=e.get(xe,a.basetype).vecsize;e.statement(e.to_expression(i.self),e.vector_swizzle(t,0)," = ",e.to_expression(a.self),";")}}))},r=this,i=0,a=this.subpass_to_framebuffer_fetch_attachment;i<a.length;i++){t(a[i])}},r.prototype.find_subpass_input_by_attachment_index=function(e){var t=this,r=null;return this.ir.for_each_typed_id(ge,(function(i,a){t.has_decoration(a.self,N.DecorationInputAttachmentIndex)&&t.get_decoration(a.self,N.DecorationInputAttachmentIndex)===e&&(r=a)})),r},r.prototype.find_color_output_by_location=function(e){var t=this,r=null;return this.ir.for_each_typed_id(ge,(function(i,a){a.storage===v.StorageClassOutput&&t.get_decoration(a.self,N.DecorationLocation)===e&&(r=a)})),r},r.prototype.add_variable=function(e,t,r){return""===r?r:(r=Je.sanitize_underscores(r),Je.is_globally_reserved_identifier(r,!0)?r="":this.update_name_cache(e,t,r))},r.prototype.check_function_call_constraints=function(e,t){for(var r=0;r<t;r++){var i=this.maybe_get(ge,e[r]);if(i&&i.remapped_variable){var a=this.get(xe,i.basetype);if(a.basetype===_e.Image&&a.image.dim===I.DimSubpassData)throw new Error("Tried passing a remapped subpassInput variable to a function. This will not work correctly because type-remapping information is lost. To workaround, please consider not passing the subpass input as a function parameter, or use in/out variables instead which do not need type remapping information.")}}},r.prototype.handle_invalid_expression=function(e){this.forced_temporaries.add(e),this.force_recompile()},r.prototype.init=function(){var e=this.ir,t=this.options;e.source.known&&(t.es=e.source.es,t.version=e.source.version)},r.prototype.compile=function(){var e=this.ir,t=this.options,r=this.backend;e.fixup_reserved_names(),r.nonuniform_qualifier="",r.needs_row_major_load_workaround=!0,r.allow_precision_qualifiers=t.es,r.force_gl_in_out_block=!0,r.supports_extensions=!0,r.use_array_constructor=!0,r.workgroup_size_is_hidden=!0,r.support_precise_qualifier=!t.es&&t.version>=400||t.es&&t.version>=320,this.is_legacy_es()&&(r.support_case_fallthrough=!1),this.fixup_type_alias(),this.reorder_type_alias(),this.build_function_control_flow_graphs_and_analyze(),this.find_static_extensions(),this.fixup_image_load_store_access(),this.update_active_builtins(),this.analyze_image_and_sampler_usage(),this.analyze_interlocked_resource_usage(),this.inout_color_attachments.length>0&&this.emit_inout_fragment_outputs_copy_to_subpass_inputs(),e.addressing_model===b.AddressingModelPhysicalStorageBuffer64EXT&&this.analyze_non_block_pointer_types();var i=0;try{do{if(i>=3)throw new Error("Over 3 compilation loops detected. Must be a bug!");this.reset(),this.buffer.reset(),this.emit_header(),this.emit_resources(),this.emit_extension_workarounds(this.get_execution_model()),this.emit_function(this.get(Be,e.default_entry_point),new le),i++}while(this.is_forcing_recompilation())}catch(e){console.error(e)}return this.get_entry_point().name="main",this.buffer.str()},r.prototype.find_static_extensions=function(){var e=this,t=this.ir,r=this.options;t.for_each_typed_id(xe,(function(t,i){if(i.basetype===_e.Double){if(r.es)throw new Error("FP64 not supported in ES profile.");!r.es&&r.version<400&&e.require_extension_internal("GL_ARB_gpu_shader_fp64")}else if(i.basetype===_e.Int64||i.basetype===_e.UInt64){if(r.es)throw new Error("64-bit integers not supported in ES profile.");r.es||e.require_extension_internal("GL_ARB_gpu_shader_int64")}else i.basetype===_e.Half?e.require_extension_internal("GL_EXT_shader_explicit_arithmetic_types_float16"):i.basetype===_e.SByte||i.basetype===_e.UByte?e.require_extension_internal("GL_EXT_shader_explicit_arithmetic_types_int8"):i.basetype!==_e.Short&&i.basetype!==_e.UShort||e.require_extension_internal("GL_EXT_shader_explicit_arithmetic_types_int16")}));var i=this.get_entry_point();switch(i.model){case g.ExecutionModelGLCompute:throw new Error("Compute shaders are not supported!");case g.ExecutionModelGeometry:throw new Error("Geometry shaders are not supported!");case g.ExecutionModelTessellationEvaluation:case g.ExecutionModelTessellationControl:throw new Error("Tessellation shaders are not supported!");case g.ExecutionModelRayGenerationKHR:case g.ExecutionModelIntersectionKHR:case g.ExecutionModelAnyHitKHR:case g.ExecutionModelClosestHitKHR:case g.ExecutionModelMissKHR:case g.ExecutionModelCallableKHR:}if(0!==this.pls_inputs.length||0!==this.pls_outputs.length){if(i.model!==g.ExecutionModelFragment)throw new Error("Can only use GL_EXT_shader_pixel_local_storage in fragment shaders.");this.require_extension_internal("GL_EXT_shader_pixel_local_storage")}if(0!==this.inout_color_attachments.length){if(i.model!==g.ExecutionModelFragment)throw new Error("Can only use GL_EXT_shader_framebuffer_fetch in fragment shaders.");for(var a=!1,o=!1,n=0,s=this.inout_color_attachments;n<s.length;n++){s[n].second?a=!0:o=!0}a&&this.require_extension_internal("GL_EXT_shader_framebuffer_fetch"),o&&this.require_extension_internal("GL_EXT_shader_framebuffer_fetch_non_coherent")}if(r.separate_shader_objects&&!r.es&&r.version<410&&this.require_extension_internal("GL_ARB_separate_shader_objects"),t.addressing_model===b.AddressingModelPhysicalStorageBuffer64EXT)throw new Error("GL_EXT_buffer_reference is only supported in Vulkan GLSL.");if(t.addressing_model!==b.AddressingModelLogical)throw new Error("Only Logical and PhysicalStorageBuffer64EXT addressing models are supported.");for(var c=0,l=t.declared_capabilities;c<l.length;c++){switch(l[c]){case $.CapabilityShaderNonUniformEXT:throw new Error("CapabilityShaderNonUniformEXT not supported");case $.CapabilityRuntimeDescriptorArrayEXT:throw new Error("CapabilityRuntimeDescriptorArrayEXT not supported");case $.CapabilityGeometryShaderPassthroughNV:throw new Error("GeometryShaderPassthroughNV capability not supported");case $.CapabilityVariablePointers:case $.CapabilityVariablePointersStorageBuffer:throw new Error("VariablePointers capability is not supported in GLSL.");case $.CapabilityMultiView:throw new Error("MultiView capability is not supported in GLSL.");case $.CapabilityRayQueryKHR:throw new Error("RayQuery capability is not supported.");case $.CapabilityRayTraversalPrimitiveCullingKHR:throw new Error("RayTraversalPrimitiveCulling capability is not supported.")}}if(r.ovr_multiview_view_count)throw new Error("OVR_multiview2 is not supported")},r.prototype.emit_for_loop_initializers=function(e){if(0===e.loop_variables.length)return"";for(var r=this.ir,i=this.for_loop_initializers_are_same_type(e),a=0,o=0,n=e.loop_variables;o<n.length;o++){var s=n[o];0!==(c=this.get(ge,s).static_expression)&&r.ids[c].get_type()!==t.TypeUndef||a++}if(1===e.loop_variables.length&&0===a)return this.variable_decl(this.get(ge,e.loop_variables[0]));if(i&&a!==e.loop_variables.length){for(var c="",l=0,p=e.loop_variables;l<p.length;l++){m=p[l];var _=this.get(ge,m).static_expression;if(0===_||r.ids[_].get_type()===t.TypeUndef)this.statement(this.variable_decl(this.get(ge,m)),";");else{var u=this.get(ge,m),h=this.get_variable_data_type(u);""===c?c=this.to_qualifiers_glsl(u.self)+this.type_to_glsl(h)+" ":(c+=", ",h.pointer&&(c+="* ")),c+=this.to_name(m)+" = "+this.to_pointer_expression(u.static_expression)}}return c}for(var d=0,f=e.loop_variables;d<f.length;d++){var m=f[d];this.statement(this.variable_decl(this.get(ge,m)),";")}return""},r.prototype.emit_while_loop_initializers=function(e){for(var t=0,r=e.loop_variables;t<r.length;t++){var i=r[t],a=this.get(ge,i);this.statement(this.variable_decl(a),";")}},r.prototype.for_loop_initializers_are_same_type=function(e){if(e.loop_variables.length<=1)return!0;for(var r=this.ir,i=0,a=new le,o=0,n=e.loop_variables;o<n.length;o++){var s=n[o],c=this.get(ge,s).static_expression;if(0!==c&&r.ids[c].get_type()!==t.TypeUndef){if(0===i)i=this.get(ge,s).basetype,h(this.get_decoration_bitset(s),a);else if(i!==this.get(ge,s).basetype)return!1;if(!a.equals(this.get_decoration_bitset(s)))return!1}}return!0},r.prototype.optimize_read_modify_write=function(e,t,r){if(r.length<t.length+3)return!1;if(e.vecsize>1&&e.columns>1)return!1;if(0!==r.indexOf(t))return!1;for(var i=-1,a=t.length+1;a<r.length;++a){var o=r.charAt(a);if("+"===o||"-"===o||"/"===o||"*"===o||"%"===o||"|"===o||"&"===o||"^"===o){i=a;break}}if(i!==t.length+1)return!1;if(" "!==r.charAt(i+1))return!1;var n=r.charAt(i),s=r.substring(t.length+3);return"+"!==n&&"-"!==n||"1"!==s&&"uint(1)"!==s&&"1u"!==s&&"int(1u)"!==s?this.statement(t," ",n,"= ",s,";"):this.statement(t,n,n,";"),!0},r.prototype.fixup_image_load_store_access=function(){var e=this;this.options.enable_storage_image_qualifier_deduction&&this.ir.for_each_typed_id(ge,(function(t,r){var i=e.expression_type(t);if(i.basetype===_e.Image&&2===i.image.sampled){var a=Mt(de,e.ir.meta,t).decoration.decoration_flags;a.get(N.DecorationNonWritable)||a.get(N.DecorationNonReadable)||(a.set(N.DecorationNonWritable),a.set(N.DecorationNonReadable))}}))},r.prototype.type_is_empty=function(e){return e.basetype===_e.Struct&&0===e.member_types.length},r.prototype.declare_undefined_values=function(){var e=this,t=!1;this.ir.for_each_typed_id(Xe,(function(r,i){var a=e.get(xe,i.basetype);if(a.basetype!==_e.Void){var o="";e.options.force_zero_initialized_variables&&e.type_can_zero_initialize(a)&&(o=" = "+e.to_zero_initialized_expression(i.basetype)),e.statement(e.variable_decl(a,e.to_name(i.self),i.self),o,";"),t=!0}})),t&&this.statement("")},r.prototype.can_use_io_location=function(e,t){var r=this.options;if(this.get_execution_model()!==g.ExecutionModelVertex&&e===v.StorageClassInput||this.get_execution_model()!==g.ExecutionModelFragment&&e===v.StorageClassOutput){var i=t?440:410;if(!r.es&&r.version<i&&!r.separate_shader_objects)return!1;if(r.es&&r.version<310)return!1}if(this.get_execution_model()===g.ExecutionModelVertex&&e===v.StorageClassInput||this.get_execution_model()===g.ExecutionModelFragment&&e===v.StorageClassOutput){if(r.es&&r.version<300)return!1;if(!r.es&&r.version<330)return!1}if(e===v.StorageClassUniform||e===v.StorageClassUniformConstant||e===v.StorageClassPushConstant){if(r.es&&r.version<310)return!1;if(!r.es&&r.version<430)return!1}return!0},r.prototype.convert_half_to_string=function(e,t,r){var i,a,o=e.scalar_f16(t,r);if(isNaN(o)||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)if((a=new xe).basetype=_e.Half,a.vecsize=1,a.columns=1,o===Number.POSITIVE_INFINITY)i=this.type_to_glsl(a)+"(1.0 / 0.0)";else if(o===Number.NEGATIVE_INFINITY)i=this.type_to_glsl(a)+"(-1.0 / 0.0)";else{if(!isNaN(o))throw new Error("Cannot represent non-finite floating point constant.");i=this.type_to_glsl(a)+"(0.0 / 0.0)"}else(a=new xe).basetype=_e.Half,a.vecsize=1,a.columns=1,i=this.type_to_glsl(a)+"("+Qe(o)+")";return i},r.prototype.convert_float_to_string=function(e,t,r){var i,a=e.scalar_f32(t,r),o=this.backend;if(isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)if(this.is_legacy())if(a===Number.POSITIVE_INFINITY)i=o.float_literal_suffix?"(1.0f / 0.0f)":"(1.0 / 0.0)";else if(a===Number.NEGATIVE_INFINITY)i=o.float_literal_suffix?"(-1.0f / 0.0f)":"(-1.0 / 0.0)";else{if(!isNaN(a))throw new Error("Cannot represent non-finite floating point constant.");i=o.float_literal_suffix?"(0.0f / 0.0f)":"(0.0 / 0.0)"}else{var n=new xe,s=new xe;n.basetype=_e.Float,s.basetype=_e.UInt,n.vecsize=1,s.vecsize=1,n.width=32,s.width=32;var c="0x"+e.scalar(t,r)+"u",l="inf";a===Number.NEGATIVE_INFINITY?l="-inf":isNaN(a)&&(l="nan"),i=this.bitcast_glsl_op(n,s)+"(".concat(c," /* ").concat(l," */)")}else i=Qe(a),o.float_literal_suffix&&(i+="f");return i},r.prototype.convert_double_to_string=function(e,t,r){var i,a=e.scalar_f64(t,r),o=this.options,n=this.backend;if(isNaN(a)||isNaN(a))if(this.is_legacy()){if(o.es)throw new Error("FP64 not supported in ES profile.");if(o.version<400&&this.require_extension_internal("GL_ARB_gpu_shader_fp64"),a===Number.POSITIVE_INFINITY)i=n.double_literal_suffix?"(1.0lf / 0.0lf)":"(1.0 / 0.0)";else if(a===Number.NEGATIVE_INFINITY)i=n.double_literal_suffix?"(-1.0lf / 0.0lf)":"(-1.0 / 0.0)";else{if(!isNaN(a))throw new Error("Cannot represent non-finite floating point constant.");i=n.double_literal_suffix?"(0.0lf / 0.0lf)":"(0.0 / 0.0)"}}else{var s=new xe,c=new xe;s.basetype=_e.Double,c.basetype=_e.UInt64,s.vecsize=1,c.vecsize=1,s.width=64,c.width=64;var l=e.scalar_u64(t,r);if(o.es)throw new Error("64-bit integers/float not supported in ES profile.");this.require_extension_internal("GL_ARB_gpu_shader_int64");var p="0x"+l.toString()+n.long_long_literal_suffix?"ull":"ul",_="inf";a===Number.POSITIVE_INFINITY?_="-inf":isNaN(a)&&(_="nan"),i=this.bitcast_glsl_op(s,c)+"(".concat(p," /* ").concat(_," */)")}else i=Qe(a),n.double_literal_suffix&&(i+="lf");return i},r.prototype.convert_separate_image_to_expression=function(e){var t=this.maybe_get_backing_variable(e);if(t){var r=this.get(xe,t.basetype);if(r.basetype===_e.Image&&1===r.image.sampled&&r.image.dim!==I.DimBuffer){if(!this.dummy_sampler_id)throw new Error("Cannot find dummy sampler ID. Was build_dummy_sampler_for_combined_images() called?");return this.to_combined_image_sampler(e,this.dummy_sampler_id)}}return this.to_non_uniform_aware_expression(e)},r.prototype.cast_to_variable_store=function(e,t,r){var i=this.maybe_get_backing_variable(e);if(i&&(e=i.self),!this.has_decoration(e,N.DecorationBuiltIn))return t;var a=this.get_decoration(e,N.DecorationBuiltIn),o=r.basetype;switch(a){case P.BuiltInLayer:case P.BuiltInPrimitiveId:case P.BuiltInViewportIndex:case P.BuiltInFragStencilRefEXT:case P.BuiltInSampleMask:case P.BuiltInPrimitiveShadingRateKHR:case P.BuiltInShadingRateKHR:o=_e.Int}if(o!==r.basetype){var n=r;n.basetype=o,t=this.bitcast_expression(n,r.basetype,t)}return t},r.prototype.cast_from_variable_load=function(e,t,r){if(r.array.length>0)return t;var i=this.maybe_get_backing_variable(e);if(i&&(e=i.self),!this.has_decoration(e,N.DecorationBuiltIn))return t;var a=this.get_decoration(e,N.DecorationBuiltIn),o=r.basetype;switch(a){case P.BuiltInLayer:case P.BuiltInPrimitiveId:case P.BuiltInViewportIndex:case P.BuiltInInstanceId:case P.BuiltInInstanceIndex:case P.BuiltInVertexId:case P.BuiltInVertexIndex:case P.BuiltInSampleId:case P.BuiltInBaseVertex:case P.BuiltInBaseInstance:case P.BuiltInDrawIndex:case P.BuiltInFragStencilRefEXT:case P.BuiltInInstanceCustomIndexNV:case P.BuiltInSampleMask:case P.BuiltInPrimitiveShadingRateKHR:case P.BuiltInShadingRateKHR:o=_e.Int;break;case P.BuiltInGlobalInvocationId:case P.BuiltInLocalInvocationId:case P.BuiltInWorkgroupId:case P.BuiltInLocalInvocationIndex:case P.BuiltInWorkgroupSize:case P.BuiltInNumWorkgroups:case P.BuiltInIncomingRayFlagsNV:case P.BuiltInLaunchIdNV:case P.BuiltInLaunchSizeNV:o=_e.UInt}return o!==r.basetype&&(t=this.bitcast_expression(r,o,t)),t},r.prototype.unroll_array_from_complex_load=function(e,t,r){if(!this.backend.force_gl_in_out_block)return r;var i=this.maybe_get(ge,t);if(!i)return r;if(i.storage!==v.StorageClassInput&&i.storage!==v.StorageClassOutput)return r;var a=this.get_variable_data_type(i);if(0===a.array.length)return r;var o=this.get_decoration(i.self,N.DecorationBuiltIn),n=this.is_builtin_variable(i)&&(o===P.BuiltInPointSize||o===P.BuiltInPosition||o===P.BuiltInSampleMask),s=this.has_decoration(i.self,N.DecorationPatch),c=n&&o===P.BuiltInSampleMask;if(!s&&n){var l="_"+e+"_unrolled";this.statement(this.variable_decl(a,l,e),";");var p=void 0;if(a.array_size_literal[a.array_size_literal.length-1]){var _=a.array[a.array.length-1];if(p=Qe(_),0===_)throw new Error("Cannot unroll an array copy from unsized array.")}else p=this.to_expression(a.array[a.array.length-1]);if(this.statement("for (int i = 0; i < int(",p,"); i++)"),this.begin_scope(),n&&!c)this.statement(l,"[i] = gl_in[i].",r,";");else if(c){var u=new xe;u.basetype=_e.Int,this.statement(l,"[i] = ",this.bitcast_expression(u,a.basetype,r+"[i]"),";")}else this.statement(l,"[i] = ",r,"[i];");this.end_scope(),r=l}return r},r.prototype.unroll_array_to_complex_store=function(e,t){if(!this.backend.force_gl_in_out_block)return!1;var r=this.maybe_get(ge,e);if(!r||r.storage!==v.StorageClassOutput)return!1;if(!this.is_builtin_variable(r)||this.get_decoration(r.self,N.DecorationBuiltIn)!==P.BuiltInSampleMask)return!1;var i,a=this.expression_type(t);if(a.array_size_literal[a.array_size_literal.length-1]){var o=a.array[a.array.length-1];if(i=Qe(o),0===o)throw new Error("Cannot unroll an array copy from unsized array.")}else i=this.to_expression(a.array[a.array.length-1]);var n=new xe;return n.basetype=_e.Int,this.statement("for (int i = 0; i < int(",i,"); i++)"),this.begin_scope(),this.statement(this.to_expression(e),"[i] = ",this.bitcast_expression(n,a.basetype,this.to_expression(t)+"[i]"),";"),this.end_scope(),!0},r.prototype.convert_non_uniform_expression=function(e,t){if("\0"===this.backend.nonuniform_qualifier)return e;var r=this.maybe_get_backing_variable(t);if(!r)return e;if(r.storage!==v.StorageClassUniformConstant&&r.storage!==v.StorageClassStorageBuffer&&r.storage!==v.StorageClassUniform)return e;if(0===this.get(xe,r.basetype).array.length)return e;var i=e.indexOf("[");if(i<0)return e;for(var a=-1,o=1,n=i+1;n<e.length;n++)if("]"===e.charAt(n)){if(0==--o){a=n;break}}else"["===e[n]&&o++;return console.assert(0===o),i>=0||a>=0||a<i?e:(i++,e.substring(0,i)+this.backend.nonuniform_qualifier+"("+e.substring(i,a)+")"+e.substring(a))},r.prototype.disallow_forwarding_in_expression_chain=function(e){if(this.expression_is_forwarded(e.self)&&!this.expression_suppresses_usage_tracking(e.self)&&!this.forced_invariant_temporaries.has(e.self)){this.forced_temporaries.add(e.self),this.forced_invariant_temporaries.add(e.self),this.force_recompile();for(var t=0,r=e.expression_dependencies;t<r.length;t++){var i=r[t];this.disallow_forwarding_in_expression_chain(this.get(He,i))}}},r.prototype.handle_store_to_invariant_variable=function(e,t){if(this.has_decoration(e,N.DecorationInvariant)){var r=this.maybe_get(He,t);r&&this.disallow_forwarding_in_expression_chain(r)}},r.prototype.expression_is_constant_null=function(e){var t=this.maybe_get(Me,e);return!!t&&t.constant_is_null()},r.prototype.expression_is_non_value_type_array=function(e){if(0===this.expression_type(e).array.length)return!1;if(!this.backend.array_is_value_type)return!0;var t=this.maybe_get_backing_variable(e);if(!t)return!1;var r=this.get(xe,t.basetype);return!this.backend.buffer_offset_array_is_value_type&&r.basetype===_e.Struct&&this.has_member_decoration(r.self,0,N.DecorationOffset)},r.prototype.emit_store_statement=function(e,t){var r=this.to_pointer_expression(t);if(""!==r){if(this.handle_store_to_invariant_variable(e,t),!this.unroll_array_to_complex_store(e,t)){var i=this.to_dereferenced_expression(e);this.has_decoration(e,N.DecorationNonUniform)&&(i=this.convert_non_uniform_expression(i,e)),r=this.cast_to_variable_store(e,r,this.expression_type(t)),this.optimize_read_modify_write(this.expression_type(t),i,r)||this.statement(i," = ",r,";")}this.register_write(e)}},r.prototype.get_integer_width_for_instruction=function(e){if(e.length<3)return 32;var t=this.stream(e);switch(e.op){case se.OpSConvert:case se.OpConvertSToF:case se.OpUConvert:case se.OpConvertUToF:case se.OpIEqual:case se.OpINotEqual:case se.OpSLessThan:case se.OpSLessThanEqual:case se.OpSGreaterThan:case se.OpSGreaterThanEqual:case se.OpULessThan:case se.OpULessThanEqual:case se.OpUGreaterThan:case se.OpUGreaterThanEqual:return this.expression_type(t[2]).width;default:var r=this.maybe_get(xe,t[0]);return r&&Ht(r)?r.width:32}},r.prototype.get_integer_width_for_glsl_instruction=function(e,t,r){if(r<1)return 32;switch(e){case ht.GLSLstd450SAbs:case ht.GLSLstd450SSign:case ht.GLSLstd450UMin:case ht.GLSLstd450SMin:case ht.GLSLstd450UMax:case ht.GLSLstd450SMax:case ht.GLSLstd450UClamp:case ht.GLSLstd450SClamp:case ht.GLSLstd450FindSMsb:case ht.GLSLstd450FindUMsb:return this.expression_type(t[0]).width;default:return 32}},r.prototype.variable_is_lut=function(e){if(e.statically_assigned&&0!==e.static_expression&&e.remapped_variable){var t=this.maybe_get(Me,e.static_expression);if(t&&t.is_used_as_lut)return!0}return!1},r.prototype.fixup_type_alias=function(){var e=this,t=this.ir;t.for_each_typed_id(xe,(function(r,i){i.type_alias&&(e.has_decoration(i.self,N.DecorationBlock)||e.has_decoration(i.self,N.DecorationBufferBlock)?i.type_alias=0:e.type_is_block_like(i)&&i.self===r&&(t.for_each_typed_id(xe,(function(e,t){e!==r&&t.type_alias===i.type_alias&&(t.type_alias=r)})),e.get(xe,i.type_alias).type_alias=r,i.type_alias=0))}))},r.prototype.reorder_type_alias=function(){for(var e=this.ir,r=e.create_loop_hard_lock(),i=e.ids_for_type[t.TypeType],a=0,o=i;a<o.length;a++){var n=o[a],s=this.get(xe,n);if(0!==s.type_alias&&!this.has_extended_decoration(s.type_alias,ce.SPIRVCrossDecorationBufferBlockRepacked)){var c=i.indexOf(s.type_alias);if(console.assert(c>=0),n<c){var l=e.ids_for_constant_or_type,p=l.indexOf(n),_=l.indexOf(c);console.assert(p>=0),console.assert(_>=0),_r(l,n,c),_r(l,p,_)}}}r.dispose()},r.prototype.vector_swizzle=function(e,t){return console.assert(e>=1&&e<=4),console.assert(t>=0&&t<4),console.assert(sr[e-1][t]),sr[e-1][t]},r}(Ft);function dr(e){switch(e){case Yt.BufferPackingStd140:case Yt.BufferPackingStd430:case Yt.BufferPackingScalar:return!1;default:return!0}}function fr(e){switch(e){case Yt.BufferPackingStd140EnhancedLayout:return Yt.BufferPackingStd140;case Yt.BufferPackingStd430EnhancedLayout:return Yt.BufferPackingStd430;case Yt.BufferPackingScalarEnhancedLayout:return Yt.BufferPackingScalar;default:return e}}function mr(e){switch(e){case Yt.BufferPackingStd140:case Yt.BufferPackingStd140EnhancedLayout:return!0;default:return!1}}function gr(e){switch(e){case Yt.BufferPackingScalar:case Yt.BufferPackingScalarEnhancedLayout:return!0;default:return!1}}function br(e,t,r,i){for(var a=0,o=t;a<o.length;a++){var n=o[a];if(e.has_decoration(n.id,N.DecorationLocation))if(e.get_decoration(n.id,N.DecorationLocation)==r){var s=e.get_type(n.base_type_id);if(s.basetype==_e.Struct){e.set_name(n.base_type_id,"SPIRV_Cross_Interface_Location"+r);for(var c=0;c<s.member_types.length;c++)e.set_member_name(n.base_type_id,c,"InterfaceMember"+c)}e.set_name(n.id,i)}}}var yr,Sr=function(e,t){this.id=e,this.format=t};function vr(e,t){var r=new lt(t);r.parse();var i=new hr(r.get_parsed_ir());if(0!==e.variable_type_remaps.length){i.set_variable_type_remap_callback((function(t,r){for(var i=0,a=e.variable_type_remaps;i<a.length;i++){var o=a[i];if(r===o.variable_name)return o.new_variable_type}return r}))}for(var a=0,o=e.masked_stage_outputs;a<o.length;a++){var n=o[a];i.mask_stage_output_by_location(n.first,n.second)}for(var s=0,c=e.masked_stage_builtins;s<c.length;s++){n=c[s];i.mask_stage_output_by_builtin(n)}for(var l=0,p=e.entry_point_rename;l<p.length;l++){var _=p[l];i.rename_entry_point(_.old_name,_.new_name,_.execution_model)}var u=i.get_entry_points_and_stages(),h=e.entry,d=g.ExecutionModelMax;if(e.entry_stage&&e.entry_stage.length>0)if(d=function(e){if("vert"===e)return g.ExecutionModelVertex;if("frag"===e)return g.ExecutionModelFragment;if("comp"===e)return g.ExecutionModelGLCompute;if("tesc"===e)return g.ExecutionModelTessellationControl;if("tese"===e)return g.ExecutionModelTessellationEvaluation;if("geom"===e)return g.ExecutionModelGeometry;throw new Error("Invalid stage!")}(e.entry_stage),h&&""!==h){for(var f=!1,m=0,b=u;m<b.length;m++){if((k=b[m]).execution_model===d&&k.name===h){f=!0;break}}if(!f)throw new Error("Could not find an entry point %s with stage: ".concat(e.entry_stage))}else{for(var y=0,S=u;y<S.length;y++){if((k=S[y]).execution_model===d){h=k.name;break}}if(!h)throw new Error("Could not find an entry point with stage: ".concat(e.entry_stage))}else if(h&&""!==h){for(var I=0,O=0,x=u;O<x.length;O++){var k;(k=x[O]).name===h&&(I++,d=k.execution_model)}if(0===I)throw new Error("There is no entry point with name: ".concat(h));if(I>1)throw new Error("There is more than one entry point with name: ".concat(h,". Use --stage."))}if(h&&""!==h&&i.set_entry_point(h,d),!e.set_version&&!i.get_common_options().version)throw new Error("Didn't specify GLSL version and SPIR-V did not specify language.");var C,E=i.get_common_options();e.set_version&&(E.version=e.version),e.set_es&&(E.es=e.es),E.force_temporary=e.force_temporary,E.separate_shader_objects=e.sso,E.flatten_multidimensional_arrays=e.flatten_multidimensional_arrays,E.enable_420pack_extension=e.use_420pack_extension,E.vertex.fixup_clipspace=e.fixup,E.vertex.flip_vert_y=e.yflip,E.vertex.support_nonzero_base_instance=e.support_nonzero_baseinstance,E.emit_push_constant_as_uniform_buffer=e.glsl_emit_push_constant_as_ubo,E.emit_uniform_buffer_as_plain_uniforms=e.glsl_emit_ubo_as_plain_uniforms,E.force_flattened_io_blocks=e.glsl_force_flattened_io_blocks,E.ovr_multiview_view_count=e.glsl_ovr_multiview_view_count,E.emit_line_directives=e.emit_line_directives,E.enable_storage_image_qualifier_deduction=e.enable_storage_image_qualifier_deduction,E.force_zero_initialized_variables=e.force_zero_initialized_variables;for(var L=0,M=e.glsl_ext_framebuffer_fetch;L<M.length;L++){var T=M[L];i.remap_ext_framebuffer_fetch(T.first,T.second,!e.glsl_ext_framebuffer_fetch_noncoherent)}if(e.remove_unused){var R=i.get_active_interface_variables();C=i.get_shader_resources(R),i.set_enabled_interface_variables(R)}else C=i.get_shader_resources();if(e.flatten_ubo){for(var w=0,D=C.uniform_buffers;w<D.length;w++){var A=D[w];i.flatten_buffer_block(A.id)}for(var B=0,P=C.push_constant_buffers;B<P.length;B++){A=P[B];i.flatten_buffer_block(A.id)}}var G=Or(e.pls_in,C.stage_inputs,C.subpass_inputs),F=Or(e.pls_out,C.stage_outputs,null);i.remap_pixel_local_storage(G,F);for(var z=0,U=e.extensions;z<U.length;z++){var V=U[z];i.require_extension(V)}for(var H=0,K=e.remaps;H<K.length;H++){var q=K[H];Ir(i,C.stage_inputs,q)||(Ir(i,C.stage_outputs,q)||Ir(i,C.subpass_inputs,q))}for(var X=0,W=e.interface_variable_renames;X<W.length;X++){if((_=W[X]).storageClass===v.StorageClassInput)br(i,C.stage_inputs,_.location,_.variable_name);else{if(_.storageClass!=v.StorageClassOutput)throw new Error("error at --rename-interface-variable <in|out> ...");br(i,C.stage_outputs,_.location,_.variable_name)}}i.build_combined_image_samplers(),e.combined_samplers_inherit_bindings&&function(e){for(var t=0,r=e.get_combined_image_samplers();t<r.length;t++){var i=r[t];if(e.has_decoration(i.image_id,N.DecorationDescriptorSet)){var a=e.get_decoration(i.image_id,N.DecorationDescriptorSet);e.set_decoration(i.combined_id,N.DecorationDescriptorSet,a)}if(e.has_decoration(i.image_id,N.DecorationBinding)){var o=e.get_decoration(i.image_id,N.DecorationBinding);e.set_decoration(i.combined_id,N.DecorationBinding,o)}}}(i);for(var j=0,Q=i.get_combined_image_samplers();j<Q.length;j++){q=Q[j];i.set_name(q.combined_id,"SPIRV_Cross_Combined"+i.get_name(q.image_id)+i.get_name(q.sampler_id))}return i.compile()}function Ir(e,t,r){var i=t.find((function(e){return e.name===r.src_name}));return!!i&&(e.set_remapped_variable_state(i.id,!0),e.set_name(i.id,r.dst_name),e.set_subpass_input_remapped_components(i.id,r.components),!0)}function Or(e,t,r){for(var i=[],a=0,o=e;a<o.length;a++){for(var n=o[a],s=!1,c=0,l=t;c<l.length;c++){if((u=l[c]).name===n.name){i.push(new Sr(u.id,n.format)),s=!0;break}}if(!s&&r)for(var p=0,_=r;p<_.length;p++){var u;if((u=_[p]).name===n.name){i.push(new Sr(u.id,n.format)),s=!0;break}}if(!s)throw new Error("Did not find stage input/output/target with name ".concat(n.name))}return i}return e.Version=void 0,(yr=e.Version||(e.Version={}))[yr.WebGL1=100]="WebGL1",yr[yr.WebGL2=300]="WebGL2",e.compile=function(e,t){var i=new r;i.version=t,i.set_version=!0,i.es=!0,i.set_es=!0;var a=new Uint32Array(e);if(i.reflect&&""!==i.reflect)throw new Error("Reflection not yet supported!");return vr(i,a)},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
